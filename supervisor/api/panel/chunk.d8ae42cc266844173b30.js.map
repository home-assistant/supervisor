{"version":3,"sources":["webpack:///./src/layouts/hass-error-screen.ts","webpack:///./src/layouts/hass-router-page.ts","webpack:///./src/resources/styles.ts","webpack:///./src/layouts/hass-subpage.ts","webpack:///./src/layouts/hass-loading-screen.ts","webpack:///./src/common/dom/fire_event.ts","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/data/hassio/snapshot.ts","webpack:///./src/data/hassio/hardware.ts","webpack:///./hassio/src/dialogs/markdown/show-dialog-hassio-markdown.ts","webpack:///./hassio/src/resources/hassio-style.ts","webpack:///./hassio/src/components/hassio-ansi-to-html.ts","webpack:///./src/components/ha-dialog.ts","webpack:///./hassio/src/dialogs/repositories/dialog-hassio-repositories.ts","webpack:///./src/data/hassio/addon.ts","webpack:///./src/components/ha-icon-button.ts","webpack:///./src/common/dom/apply_themes_on_element.ts","webpack:///./src/data/hassio/host.ts","webpack:///./src/dialogs/make-dialog-manager.ts","webpack:///./src/resources/ha-style.ts","webpack:///./src/common/search/search-input.ts","webpack:///./hassio/src/addon-store/hassio-addon-repository.ts","webpack:///./hassio/src/components/hassio-filter-addons.ts","webpack:///./hassio/src/addon-store/hassio-addon-store.ts","webpack:///./hassio/src/dialogs/repositories/show-dialog-repositories.ts","webpack:///./hassio/src/dashboard/hassio-addons.ts","webpack:///./hassio/src/dashboard/hassio-update.ts","webpack:///./hassio/src/dashboard/hassio-dashboard.ts","webpack:///./hassio/src/snapshots/hassio-snapshots.ts","webpack:///./hassio/src/dialogs/snapshot/show-dialog-hassio-snapshot.ts","webpack:///./hassio/src/system/hassio-host-info.ts","webpack:///./hassio/src/system/hassio-supervisor-info.ts","webpack:///./hassio/src/system/hassio-supervisor-log.ts","webpack:///./hassio/src/system/hassio-system.ts","webpack:///./hassio/src/hassio-panel-router.ts","webpack:///./hassio/src/hassio-panel.ts","webpack:///./hassio/src/hassio-main.ts","webpack:///./src/mixins/provide-hass-lit-mixin.ts","webpack:///./src/components/ha-svg-icon.ts","webpack:///./src/resources/icon-metadata.ts","webpack:///./src/components/ha-icon.ts","webpack:///./src/common/util/debounce.ts","webpack:///./src/common/navigate.ts","webpack:///./src/dialogs/generic/show-dialog-box.ts","webpack:///./src/data/hassio/common.ts","webpack:///./src/data/hassio/supervisor.ts","webpack:///./src/common/datetime/relative_time.ts","webpack:///./src/mixins/localize-mixin.js","webpack:///./src/components/ha-relative-time.js","webpack:///./hassio/src/components/hassio-card-content.ts","webpack:///./src/layouts/hass-tabs-subpage.ts","webpack:///./src/common/config/is_component_loaded.ts","webpack:///./src/components/buttons/ha-call-api-button.js","webpack:///./src/components/ha-icon-button-arrow-prev.ts","webpack:///./src/layouts/loading-screen.ts","webpack:///./src/common/config/version.ts","webpack:///./src/data/persistent_notification.ts","webpack:///./src/components/ha-menu-button.ts","webpack:///./src/common/entity/compute_domain.ts"],"names":["customElement","property","html","_templateObject","this","error","_backTapped","history","back","css","_templateObject2","LitElement","HassRouterPage","hass_router_page_decorate","_initialize","_UpdatingElement","_UpdatingElement2","hass_router_page_inherits","_super","hass_router_page_createSuper","_this","hass_router_page_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","hass_router_page_assertThisInitialized","F","d","kind","decorators","key","value","memoizeOne","route","dividerPos","path","indexOf","prefix","substr","changedProps","_this2","_get","hass_router_page_getPrototypeOf","prototype","routerOptions","routes","initialLoad","_initialLoadDone","has","defaultPage","undefined","navigate","newPage","subpathStart","extractPage","routeOptions","beforeRender","result","_currentPage","lastChild","removeChild","loadProm","load","Promise","resolve","err","console","errorEl","document","createElement","appendChild","showLoading","created","setTimeout","createLoadingScreen","_currentLoadProm","then","_createPanel","updatePageEl","_this3","options","preloadAll","Object","values","forEach","hass_router_page_typeof","requestUpdate","_rebuild","regeneratorRuntime","mark","_callee","oldRoute","wrap","_context","prev","next","abrupt","updateComplete","stop","_this4","tag","_pageEl","_changedProps","_computeTail","page","panelEl","_cache","cacheAll","cache","UpdatingElement","derivedStyles","paper-spinner-color","error-state-color","state-icon-unavailable-color","sidebar-text-color","sidebar-background-color","sidebar-selected-text-color","sidebar-selected-icon-color","sidebar-icon-color","switch-checked-color","switch-checked-button-color","switch-checked-track-color","switch-unchecked-button-color","switch-unchecked-track-color","slider-color","slider-secondary-color","slider-bar-color","label-badge-grey","label-badge-background-color","label-badge-text-color","paper-card-background-color","paper-listbox-background-color","paper-item-icon-color","paper-item-icon-active-color","table-row-background-color","table-row-alternative-background-color","paper-slider-knob-color","paper-slider-knob-start-color","paper-slider-pin-color","paper-slider-active-color","paper-slider-secondary-color","paper-slider-container-color","data-table-background-color","mdc-theme-primary","mdc-theme-secondary","mdc-theme-background","mdc-theme-surface","mdc-theme-on-primary","mdc-theme-on-secondary","mdc-theme-on-surface","mdc-theme-text-primary-on-background","app-header-text-color","app-header-background-color","material-body-text-color","material-background-color","material-secondary-background-color","haStyle","haStyleDialog","type","Boolean","classMap","hidden","showBackButton","header","rootnav","hass","narrow","_templateObject3","_handleBack","_templateObject4","__webpack_require__","__webpack_exports__","fireEvent","node","detail","event","Event","bubbles","cancelable","composed","dispatchEvent","HaProgressButton","PolymerElement","progress","disabled","className","classList","$","container","add","remove","_getPrototypeOf","addEventListener","ev","buttonTapped","stopPropagation","tempClass","customElements","define","fetchHassioSnapshots","_ref","_asyncToGenerator","t0","hassioApiResultExtractor","callApi","t1","sent","snapshots","_x","fetchHassioSnapshotInfo","_ref2","_callee2","snapshot","_context2","_x2","_x3","reloadHassioSnapshots","_ref3","_callee3","_context3","_x4","createHassioFullSnapshot","_ref4","_callee4","data","_context4","_x5","_x6","createHassioPartialSnapshot","_ref5","_callee5","_context5","_x7","_x8","fetchHassioHardwareAudio","fetchHassioHardwareInfo","showHassioMarkdownDialog","_src_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","element","dialogParams","dialogTag","dialogImport","e","bind","hassioStyle","_parseTextToColoredPre","content","text","match","pre","re","i","state","bold","italic","underline","strikethrough","foregroundColor","backgroundColor","addSpan","span","createTextNode","exec","j","index","substring","split","colorCode","parseInt","MwcDialog","get","_decorate","_MwcDialog","_MwcDialog2","_inherits","HaDialog","_createSuper","_classCallCheck","_assertThisInitialized","static","style","attribute","query","_dialogParams","_repos","repos","_opened","_error","filter","repo","slug","sort","a","b","name","repositories","_filteredRepositories","dialog_hassio_repositories_templateObject","closeDialog","dialog_hassio_repositories_templateObject2","map","maintainer","url","_removeRepository","_handleKeyAdd","_addRepository","_prosessing","_templateObject5","_templateObject6","_this3$shadowRoot","shadowRoot","querySelector","focus","keyCode","input","newRepositories","addonsInfo","_optionInput","source","push","setSupervisorOption","addons_repositories","fetchHassioAddonsInfo","loadData","message","repository","target","find","reloadHassioAddons","fetchHassioAddonInfo","fetchHassioAddonChangelog","fetchHassioAddonLogs","fetchHassioAddonDocumentation","_ref6","_callee6","_context6","_x9","_x10","setHassioAddonOption","_ref7","_callee7","_context7","_x11","_x12","_x13","setHassioAddonSecurity","_ref8","_callee8","_context8","_x14","_x15","_x16","installHassioAddon","_ref9","_callee9","_context9","_x17","_x18","restartHassioAddon","_ref10","_callee10","_context10","_x19","_x20","uninstallHassioAddon","_ref11","_callee11","_context11","_x21","_x22","HaIconButton","_LitElement","_LitElement2","reflect","String","attachShadow","mode","delegatesFocus","label","icon","_handleClick","PROCESSED_THEMES","processTheme","themeName","themes","checkHex","theme","assign","styles","keys","_i","_Object$keys","prefixedKey","startsWith","rgbKey","rgbValue","replace","_m","r","g","prefixedRgbKey","fetchHassioHostInfo","response","fetchHassioHassOsInfo","rebootHost","shutdownHost","updateOS","changeHostOptions","LOADED","showDialog","make_dialog_manager_asyncToGenerator","root","dialogEl","provideHass","documentContainer","setAttribute","innerHTML","entries","_slicedToArray","join","cssText","head","no-underline","noUnderline","autofocus","_filterInputChanged","noLabelFloat","_clearSearch","_filterChanged","HassioAddonRepositoryEl","addons","Fuse","caseSensitive","minMatchCharLength","threshold","search","filterAndSort","toUpperCase","_this$hass$userData","_addons","userData","showAdvanced","addon","advanced","_getAddons","hassio_addon_repository_templateObject","hassio_addon_repository_templateObject2","hassio_addon_repository_templateObject3","available","_addonTapped","description","installed","version","atLeastVersion","config","currentTarget","sortRepos","HassioAddonStore","_filter","_loadData","_step","_iterator","_createForOfIteratorHelper","_loop","hassio_addon_store_templateObject","s","n","done","f","hassio_addon_store_templateObject2","supervisorTabs","_manageRepositories","refreshData","hassio_addon_store_templateObject3","hassio_addon_store_templateObject4","hassio_addon_store_get","hassio_addon_store_getPrototypeOf","apiCalled","success","alert","hassio_addons_templateObject","hassio_addons_templateObject3","hassio_addons_templateObject2","_openStore","hassio_addons_templateObject4","hassio_update_decorate","hassio_update_inherits","HassioUpdate","hassio_update_createSuper","hassio_update_classCallCheck","hassio_update_assertThisInitialized","updatesAvailable","hassInfo","supervisorInfo","hassOsInfo","version_latest","hassio_update_templateObject2","hassio_update_templateObject3","_renderUpdateCard","includes","hassio_update_templateObject","curVersion","lastVersion","apiPath","releaseNotesUrl","hassio_update_templateObject5","hassio_update_templateObject6","_apiCalled","hassio_update_templateObject4","hassio_update_typeof","body","_templateObject7","hassio_dashboard_templateObject","hassio_dashboard_templateObject2","HassioSnapshots","checked","_updateSnapshots","hassio_snapshots_templateObject","_snapshotName","_handleTextValueChanged","_snapshotType","_handleRadioValueChanged","hassio_snapshots_templateObject2","_folderList","folder","idx","hassio_snapshots_templateObject3","_folderChecked","_addonList","hassio_snapshots_templateObject4","_addonChecked","_snapshotHasPassword","_handleCheckboxValueChanged","hassio_snapshots_templateObject5","_snapshotPassword","hassio_snapshots_templateObject6","_creatingSnapshot","_createSnapshot","_snapshots","hassio_snapshots_templateObject7","_templateObject8","_snapshotClicked","_computeDetails","date","hassio_snapshots_get","hassio_snapshots_getPrototypeOf","getAttribute","curIdx","folders","_data","Date","toLocaleDateString","navigator","language","weekday","year","month","day","password","finish","onDelete","_templateObject9","hassio_host_info_templateObject","hostInfo","hostname","operating_system","deployment","hassio_host_info_templateObject2","_showHardware","features","hassio_host_info_templateObject3","_changeHostnameClicked","_errors","hassio_host_info_templateObject4","hassio_host_info_templateObject5","_rebootHost","hassio_host_info_templateObject6","_shutdownHost","hassio_host_info_templateObject7","hassio_host_info_templateObject8","_updateOS","hassio_host_info_templateObject9","hassio_host_info_typeof","_objectToMarkdown","title","t2","showConfirmationDialog","confirmText","dismissText","showAlertDialog","obj","indent","isArray","curHostname","showPromptDialog","inputLabel","inputType","defaultValue","hassio_supervisor_info_templateObject","channel","hassio_supervisor_info_templateObject2","hassio_supervisor_info_templateObject3","hassio_supervisor_info_templateObject4","hassio_supervisor_info_templateObject5","hassio_supervisor_info_templateObject6","_joinBeta","hassio_supervisor_info_templateObject7","hassio_supervisor_info_typeof","eventdata","_err$body","hassio_supervisor_info_templateObject8","logProviders","HassioSupervisorLog","hassio_supervisor_log_get","hassio_supervisor_log_getPrototypeOf","hassio_supervisor_log_templateObject","hassio_supervisor_log_templateObject2","hassio_supervisor_log_templateObject3","_setLogProvider","_selectedLogProvider","provider","hassio_supervisor_log_templateObject4","_content","hassio_supervisor_log_templateObject5","hassio_supervisor_log_templateObject6","_refresh","hassio_supervisor_log_templateObject7","item","fetchHassioLogs","hassio_system_templateObject","hassio_system_templateObject2","dashboard","store","system","el","hassio_panel_templateObject","_keyBindings","superClass","HassioMain","_fetchData","all","ingress","hassio_main_get","hassio_main_getPrototypeOf","selectedTheme","newTheme","_themes","updateStyles","window","ShadyCSS","styleSubtree","applyThemesOnElement","parentElement","default_theme","setProperty","parent","customPanel","dockedSidebar","_e$detail","nodeName","routeTail","setProperties","_supervisorInfo","_hostInfo","_hassInfo","_hassOsInfo","_yield$Promise$all","_yield$Promise$all2","panel","_redirectIngress","fetchHassioSupervisorInfo","fetchHassioHomeAssistantInfo","hassio_main_slicedToArray","addonSlug","awaitAlert","createSessionPromise","hassio_main_asyncToGenerator","alertParams","action","confirm","createHassioSession","ingress_url","location","_this5","tries","tryUpdate","Math","min","_superClass","_temp","_defineProperty","__provideHass","HaSvgIcon","svg","iconMetadata","iconStore","Store","clear","set","chunks","MDI_PREFIXES","toRead","getIcon","iconName","results","_withIDBStore","_step$value","iconName_","resolve_","_step2","_iterator2","_step2$value","findIconChunk","lastChunk","_step3","_iterator3","parts","chunk","start","file","debouncedWriteCache","func","wait","timeout","immediate","context","callNow","clearTimeout","debounce","iconsSets","icons","put","ha_icon_decorate","ha_icon_inherits","HaIcon","ha_icon_createSuper","ha_icon_classCallCheck","ha_icon_assertThisInitialized","_path","_loadIcon","_noMdi","ha_icon_templateObject2","ha_icon_templateObject3","ha_icon_templateObject","_loadIcon2","cachedPath","iconPromise","_setPath","fetch","json","_setPath2","promise","iconPack","_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","_node","replaceState","pushState","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","loadGenericDialog","showDialogHelper","extra","origCancel","cancel","origConfirm","prompt","out","confirmation","cookie","session","tests","langKey","dedupingMixin","_class","localize","Function","computed","HaRelativeTime","LocalizeMixin","ha_relative_time_classCallCheck","updateRelative","ha_relative_time_assertThisInitialized","datetime","observer","datetimeObj","parsedDateTime","ha_relative_time_getPrototypeOf","updateInterval","setInterval","clearInterval","newVal","dom","dateObj","timeDesc","delta","compareTime","getTime","tense","abs","floor","includeTense","relativeTime","showTopbar","topbarClass","iconImage","iconClass","iconTitle","HassTabsSubpage","tabs","activeTab","_components","_language","_narrow","component","core","components","advancedOnly","active","_tabTapped","translationKey","changedProperties","_activeTab","tab","_getTabs","mainPage","hassio","bottom-bar","backPath","backCallback","HaCallApiButton","method","_buttonTapped","eventData","resp","progressButton","actionSuccess","actionError","renderRoot","HaIconButtonArrowPrev","_HaIconButton","getComputedStyle","direction","major","minor","_version$split2","haMajor","haMinor","Number","fetchNotifications","conn","sendMessagePromise","subscribeUpdates","subscribeEvents","ntf","setState","HaMenuButton","_attachNotifOnConnect","_subscribeNotifications","_unsubNotifications","hasNotifications","_hasNotifications","states","some","entityId","computeDomain","_toggleMenu","_alwaysVisible","frontendVersion","oldHass","oldNarrow","newNarrow","visibility","onChange","connection","notifications","createCollection"],"mappings":"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","file":"chunk.d8ae42cc266844173b30.js","sourcesContent":["import \"@material/mwc-button\";\nimport {\n  css,\n  CSSResultArray,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport \"./hass-subpage\";\n\n@customElement(\"hass-error-screen\")\nclass HassErrorScreen extends LitElement {\n  @property()\n  public error?: string;\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-subpage>\n        <div class=\"content\">\n          <h3>${this.error}</h3>\n          <slot>\n            <mwc-button @click=${this._backTapped}>go back</mwc-button>\n          </slot>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  private _backTapped(): void {\n    history.back();\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      css`\n        .content {\n          height: calc(100% - 64px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-direction: column;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hass-error-screen\": HassErrorScreen;\n  }\n}\n","import { property, PropertyValues, UpdatingElement } from \"lit-element\";\nimport memoizeOne from \"memoize-one\";\nimport { navigate } from \"../common/navigate\";\nimport { Route } from \"../types\";\nimport \"./hass-error-screen\";\nimport \"./hass-loading-screen\";\n\nconst extractPage = (path: string, defaultPage: string) => {\n  if (path === \"\") {\n    return defaultPage;\n  }\n  const subpathStart = path.indexOf(\"/\", 1);\n  return subpathStart === -1\n    ? path.substr(1)\n    : path.substr(1, subpathStart - 1);\n};\n\nexport interface RouteOptions {\n  // HTML tag of the route page.\n  tag: string;\n  // Function to load the page.\n  load?: () => Promise<unknown>;\n  cache?: boolean;\n}\n\nexport interface RouterOptions {\n  // The default route to show if path does not define a page.\n  defaultPage?: string;\n  // If all routes should be preloaded\n  preloadAll?: boolean;\n  // If a route has been shown, should we keep the element in memory\n  cacheAll?: boolean;\n  // Should we show a loading spinner while we load the element for the route\n  showLoading?: boolean;\n  // Promise that resolves when the initial data is loaded which is needed to show any route.\n  initialLoad?: () => Promise<unknown>;\n  // Hook that is called before rendering a new route. Allowing redirects.\n  // If string returned, that page will be rendered instead.\n  beforeRender?: (page: string) => string | undefined;\n  routes: {\n    // If it's a string, it is another route whose options should be adopted.\n    [route: string]: RouteOptions | string;\n  };\n}\n\n// Time to wait for code to load before we show loading screen.\nconst LOADING_SCREEN_THRESHOLD = 400; // ms\n\nexport class HassRouterPage extends UpdatingElement {\n  @property() public route?: Route;\n\n  protected routerOptions!: RouterOptions;\n\n  protected _currentPage = \"\";\n\n  private _currentLoadProm?: Promise<void>;\n\n  private _cache = {};\n\n  private _initialLoadDone = false;\n\n  private _computeTail = memoizeOne((route: Route) => {\n    const dividerPos = route.path.indexOf(\"/\", 1);\n    return dividerPos === -1\n      ? {\n          prefix: route.prefix + route.path,\n          path: \"\",\n        }\n      : {\n          prefix: route.prefix + route.path.substr(0, dividerPos),\n          path: route.path.substr(dividerPos),\n        };\n  });\n\n  protected update(changedProps: PropertyValues) {\n    super.update(changedProps);\n\n    const routerOptions = this.routerOptions || { routes: {} };\n\n    if (routerOptions && routerOptions.initialLoad && !this._initialLoadDone) {\n      return;\n    }\n\n    if (!changedProps.has(\"route\")) {\n      // Do not update if we have a currentLoadProm, because that means\n      // that there is still an old panel shown and we're moving to a new one.\n      if (this.lastChild && !this._currentLoadProm) {\n        this.updatePageEl(this.lastChild, changedProps);\n      }\n      return;\n    }\n\n    const route = this.route;\n    const defaultPage = routerOptions.defaultPage;\n\n    if (route && route.path === \"\" && defaultPage !== undefined) {\n      navigate(this, `${route.prefix}/${defaultPage}`, true);\n    }\n\n    let newPage = route\n      ? extractPage(route.path, defaultPage || \"\")\n      : \"not_found\";\n    let routeOptions = routerOptions.routes[newPage];\n\n    // Handle redirects\n    while (typeof routeOptions === \"string\") {\n      newPage = routeOptions;\n      routeOptions = routerOptions.routes[newPage];\n    }\n\n    if (routerOptions.beforeRender) {\n      const result = routerOptions.beforeRender(newPage);\n      if (result !== undefined) {\n        newPage = result;\n        routeOptions = routerOptions.routes[newPage];\n\n        // Handle redirects\n        while (typeof routeOptions === \"string\") {\n          newPage = routeOptions;\n          routeOptions = routerOptions.routes[newPage];\n        }\n\n        // Update the url if we know where we're mounted.\n        if (route) {\n          navigate(this, `${route.prefix}/${result}`, true);\n        }\n      }\n    }\n\n    if (this._currentPage === newPage) {\n      if (this.lastChild) {\n        this.updatePageEl(this.lastChild, changedProps);\n      }\n      return;\n    }\n\n    if (!routeOptions) {\n      this._currentPage = \"\";\n      if (this.lastChild) {\n        this.removeChild(this.lastChild);\n      }\n      return;\n    }\n\n    this._currentPage = newPage;\n    const loadProm = routeOptions.load\n      ? routeOptions.load()\n      : Promise.resolve();\n\n    // Check when loading the page source failed.\n    loadProm.catch((err) => {\n      // eslint-disable-next-line\n      console.error(\"Error loading page\", newPage, err);\n\n      // Verify that we're still trying to show the same page.\n      if (this._currentPage !== newPage) {\n        return;\n      }\n\n      // Removes either loading screen or the panel\n      this.removeChild(this.lastChild!);\n\n      // Show error screen\n      const errorEl = document.createElement(\"hass-error-screen\");\n      errorEl.error = `Error while loading page ${newPage}.`;\n      this.appendChild(errorEl);\n    });\n\n    // If we don't show loading screen, just show the panel.\n    // It will be automatically upgraded when loading done.\n    if (!routerOptions.showLoading) {\n      this._createPanel(routerOptions, newPage, routeOptions);\n      return;\n    }\n\n    // We are only going to show the loading screen after some time.\n    // That way we won't have a double fast flash on fast connections.\n    let created = false;\n\n    setTimeout(() => {\n      if (created || this._currentPage !== newPage) {\n        return;\n      }\n\n      // Show a loading screen.\n      if (this.lastChild) {\n        this.removeChild(this.lastChild);\n      }\n      this.appendChild(this.createLoadingScreen());\n    }, LOADING_SCREEN_THRESHOLD);\n\n    this._currentLoadProm = loadProm.then(\n      () => {\n        this._currentLoadProm = undefined;\n        // Check if we're still trying to show the same page.\n        if (this._currentPage !== newPage) {\n          return;\n        }\n\n        created = true;\n        this._createPanel(\n          routerOptions,\n          newPage,\n          // @ts-ignore TS forgot this is not a string.\n          routeOptions\n        );\n      },\n      () => {\n        this._currentLoadProm = undefined;\n      }\n    );\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n\n    const options = this.routerOptions;\n\n    if (!options) {\n      return;\n    }\n\n    if (options.preloadAll) {\n      Object.values(options.routes).forEach(\n        (route) => typeof route === \"object\" && route.load && route.load()\n      );\n    }\n\n    if (options.initialLoad) {\n      setTimeout(() => {\n        if (!this._initialLoadDone) {\n          this.appendChild(this.createLoadingScreen());\n        }\n      }, LOADING_SCREEN_THRESHOLD);\n\n      options.initialLoad().then(() => {\n        this._initialLoadDone = true;\n        this.requestUpdate(\"route\");\n      });\n    }\n  }\n\n  protected createLoadingScreen() {\n    return document.createElement(\"hass-loading-screen\");\n  }\n\n  /**\n   * Rebuild the current panel.\n   *\n   * Promise will resolve when rebuilding is done and DOM updated.\n   */\n  protected async rebuild(): Promise<void> {\n    const oldRoute = this.route;\n\n    if (oldRoute === undefined) {\n      return;\n    }\n\n    this.route = undefined;\n    await this.updateComplete;\n    // Make sure that the parent didn't override this in the meanwhile.\n    if (this.route === undefined) {\n      this.route = oldRoute;\n    }\n  }\n\n  /**\n   * Promise that resolves when the page has rendered.\n   */\n  protected get pageRendered(): Promise<void> {\n    return this.updateComplete.then(() => this._currentLoadProm);\n  }\n\n  protected createElement(tag: string) {\n    return document.createElement(tag);\n  }\n\n  protected updatePageEl(_pageEl, _changedProps?: PropertyValues) {\n    // default we do nothing\n  }\n\n  protected get routeTail(): Route {\n    return this._computeTail(this.route!);\n  }\n\n  private _createPanel(\n    routerOptions: RouterOptions,\n    page: string,\n    routeOptions: RouteOptions\n  ) {\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    const panelEl = this._cache[page] || this.createElement(routeOptions.tag);\n    this.updatePageEl(panelEl);\n    this.appendChild(panelEl);\n\n    if (routerOptions.cacheAll || routeOptions.cache) {\n      this._cache[page] = panelEl;\n    }\n  }\n}\n","import { css } from \"lit-element\";\n\nexport const derivedStyles = {\n  \"paper-spinner-color\": \"var(--primary-color)\",\n  \"error-state-color\": \"var(--error-color)\",\n  \"state-icon-unavailable-color\": \"var(--disabled-text-color)\",\n  \"sidebar-text-color\": \"var(--primary-text-color)\",\n  \"sidebar-background-color\": \"var(--card-background-color)\",\n  \"sidebar-selected-text-color\": \"var(--primary-color)\",\n  \"sidebar-selected-icon-color\": \"var(--primary-color)\",\n  \"sidebar-icon-color\": \"rgba(var(--rgb-primary-text-color), 0.6)\",\n  \"switch-checked-color\": \"var(--primary-color)\",\n  \"switch-checked-button-color\":\n    \"var(--switch-checked-color, var(--primary-background-color))\",\n  \"switch-checked-track-color\": \"var(--switch-checked-color, #000000)\",\n  \"switch-unchecked-button-color\":\n    \"var(--switch-unchecked-color, var(--primary-background-color))\",\n  \"switch-unchecked-track-color\": \"var(--switch-unchecked-color, #000000)\",\n  \"slider-color\": \"var(--primary-color)\",\n  \"slider-secondary-color\": \"var(--light-primary-color)\",\n  \"slider-bar-color\": \"var(--disabled-text-color)\",\n  \"label-badge-grey\": \"var(--paper-grey-500)\",\n  \"label-badge-background-color\": \"var(--card-background-color)\",\n  \"label-badge-text-color\": \"rgba(var(--rgb-primary-text-color), 0.8)\",\n  \"paper-card-background-color\": \"var(--card-background-color)\",\n  \"paper-listbox-background-color\": \"var(--card-background-color)\",\n  \"paper-item-icon-color\": \"var(--state-icon-color)\",\n  \"paper-item-icon-active-color\": \"var(--state-icon-active-color)\",\n  \"table-row-background-color\": \"var(--primary-background-color)\",\n  \"table-row-alternative-background-color\": \"var(--secondary-background-color)\",\n  \"paper-slider-knob-color\": \"var(--slider-color)\",\n  \"paper-slider-knob-start-color\": \"var(--slider-color)\",\n  \"paper-slider-pin-color\": \"var(--slider-color)\",\n  \"paper-slider-active-color\": \"var(--slider-color)\",\n  \"paper-slider-secondary-color\": \"var(--slider-secondary-color)\",\n  \"paper-slider-container-color\": \"var(--slider-bar-color)\",\n  \"data-table-background-color\": \"var(--card-background-color)\",\n  \"mdc-theme-primary\": \"var(--primary-color)\",\n  \"mdc-theme-secondary\": \"var(--accent-color)\",\n  \"mdc-theme-background\": \"var(--primary-background-color)\",\n  \"mdc-theme-surface\": \"var(--card-background-color)\",\n  \"mdc-theme-on-primary\": \"var(--text-primary-color)\",\n  \"mdc-theme-on-secondary\": \"var(--text-primary-color)\",\n  \"mdc-theme-on-surface\": \"var(--primary-text-color)\",\n  \"mdc-theme-text-primary-on-background\": \"var(--primary-text-color)\",\n  \"app-header-text-color\": \"var(--text-primary-color)\",\n  \"app-header-background-color\": \"var(--primary-color)\",\n  \"material-body-text-color\": \"var(--primary-text-color)\",\n  \"material-background-color\": \"var(--card-background-color)\",\n  \"material-secondary-background-color\": \"var(--secondary-background-color)\",\n};\n\nexport const haStyle = css`\n  :host {\n    font-family: var(--paper-font-body1_-_font-family);\n    -webkit-font-smoothing: var(--paper-font-body1_-_-webkit-font-smoothing);\n    font-size: var(--paper-font-body1_-_font-size);\n    font-weight: var(--paper-font-body1_-_font-weight);\n    line-height: var(--paper-font-body1_-_line-height);\n  }\n\n  app-header-layout,\n  ha-app-layout {\n    background-color: var(--primary-background-color);\n  }\n\n  app-header,\n  app-toolbar {\n    background-color: var(--app-header-background-color);\n    font-weight: 400;\n    color: var(--app-header-text-color, white);\n  }\n\n  app-toolbar ha-menu-button + [main-title],\n  app-toolbar ha-icon-button-arrow-prev + [main-title],\n  app-toolbar ha-icon-button + [main-title] {\n    margin-left: 24px;\n  }\n\n  h1 {\n    font-family: var(--paper-font-title_-_font-family);\n    -webkit-font-smoothing: var(--paper-font-title_-_-webkit-font-smoothing);\n    white-space: var(--paper-font-title_-_white-space);\n    overflow: var(--paper-font-title_-_overflow);\n    text-overflow: var(--paper-font-title_-_text-overflow);\n    font-size: var(--paper-font-title_-_font-size);\n    font-weight: var(--paper-font-title_-_font-weight);\n    line-height: var(--paper-font-title_-_line-height);\n  }\n\n  h2 {\n    font-family: var(--paper-font-subhead_-_font-family);\n    -webkit-font-smoothing: var(--paper-font-subhead_-_-webkit-font-smoothing);\n    white-space: var(--paper-font-subhead_-_white-space);\n    overflow: var(--paper-font-subhead_-_overflow);\n    text-overflow: var(--paper-font-subhead_-_text-overflow);\n    font-size: var(--paper-font-subhead_-_font-size);\n    font-weight: var(--paper-font-subhead_-_font-weight);\n    line-height: var(--paper-font-subhead_-_line-height);\n  }\n\n  .secondary {\n    color: var(--secondary-text-color);\n  }\n\n  .error {\n    color: var(--google-red-500);\n  }\n\n  .warning {\n    color: var(--google-red-500);\n  }\n\n  mwc-button.warning {\n    --mdc-theme-primary: var(--google-red-500);\n  }\n\n  button.link {\n    background: none;\n    color: inherit;\n    border: none;\n    padding: 0;\n    font: inherit;\n    text-align: left;\n    text-decoration: underline;\n    cursor: pointer;\n  }\n\n  .card-actions a {\n    text-decoration: none;\n  }\n\n  .card-actions .warning {\n    --mdc-theme-primary: var(--google-red-500);\n  }\n\n  .layout.horizontal,\n  .layout.vertical {\n    display: flex;\n  }\n  .layout.inline {\n    display: inline-flex;\n  }\n  .layout.horizontal {\n    flex-direction: row;\n  }\n  .layout.vertical {\n    flex-direction: column;\n  }\n  .layout.wrap {\n    flex-wrap: wrap;\n  }\n  .layout.no-wrap {\n    flex-wrap: nowrap;\n  }\n  .layout.center,\n  .layout.center-center {\n    align-items: center;\n  }\n  .layout.bottom {\n    align-items: flex-end;\n  }\n  .layout.center-justified,\n  .layout.center-center {\n    justify-content: center;\n  }\n  .flex {\n    flex: 1;\n    flex-basis: 0.000000001px;\n  }\n  .flex-auto {\n    flex: 1 1 auto;\n  }\n  .flex-none {\n    flex: none;\n  }\n  .layout.justified {\n    justify-content: space-between;\n  }\n`;\n\nexport const haStyleDialog = css`\n  /* prevent clipping of positioned elements */\n  paper-dialog-scrollable {\n    --paper-dialog-scrollable: {\n      -webkit-overflow-scrolling: auto;\n    }\n  }\n\n  /* force smooth scrolling for iOS 10 */\n  paper-dialog-scrollable.can-scroll {\n    --paper-dialog-scrollable: {\n      -webkit-overflow-scrolling: touch;\n    }\n  }\n\n  .paper-dialog-buttons {\n    align-items: flex-end;\n    padding: 8px;\n  }\n\n  @media all and (min-width: 450px) {\n    ha-paper-dialog {\n      min-width: 400px;\n    }\n  }\n\n  @media all and (max-width: 450px), all and (max-height: 500px) {\n    paper-dialog,\n    ha-paper-dialog {\n      margin: 0;\n      width: 100% !important;\n      max-height: calc(100% - 64px);\n\n      position: fixed !important;\n      bottom: 0px;\n      left: 0px;\n      right: 0px;\n      overflow: scroll;\n      border-bottom-left-radius: 0px;\n      border-bottom-right-radius: 0px;\n    }\n  }\n\n  /* mwc-dialog (ha-dialog) styles */\n  ha-dialog {\n    --mdc-dialog-min-width: 400px;\n    --mdc-dialog-max-width: 600px;\n    --mdc-dialog-heading-ink-color: var(--primary-text-color);\n    --mdc-dialog-content-ink-color: var(--primary-text-color);\n    --justify-action-buttons: space-between;\n  }\n\n  ha-dialog .form {\n    padding-bottom: 24px;\n    color: var(--primary-text-color);\n  }\n\n  /* make dialog fullscreen on small screens */\n  @media all and (max-width: 450px), all and (max-height: 500px) {\n    ha-dialog {\n      --mdc-dialog-min-width: 100vw;\n      --mdc-dialog-max-height: 100vh;\n      --mdc-dialog-shape-radius: 0px;\n      --vertial-align-dialog: flex-end;\n    }\n  }\n  mwc-button.warning {\n    --mdc-theme-primary: var(--google-red-500);\n  }\n  .error {\n    color: var(--google-red-500);\n  }\n`;\n","import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"../components/ha-menu-button\";\nimport \"../components/ha-icon-button-arrow-prev\";\n\n@customElement(\"hass-subpage\")\nclass HassSubpage extends LitElement {\n  @property()\n  public header?: string;\n\n  @property({ type: Boolean })\n  public showBackButton = true;\n\n  @property({ type: Boolean })\n  public hassio = false;\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"toolbar\">\n        <ha-icon-button-arrow-prev\n          aria-label=\"Back\"\n          @click=${this._backTapped}\n          class=${classMap({ hidden: !this.showBackButton })}\n        ></ha-icon-button-arrow-prev>\n\n        <div main-title>${this.header}</div>\n        <slot name=\"toolbar-icon\"></slot>\n      </div>\n      <div class=\"content\"><slot></slot></div>\n    `;\n  }\n\n  private _backTapped(): void {\n    history.back();\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        height: 100%;\n        background-color: var(--primary-background-color);\n      }\n\n      .toolbar {\n        display: flex;\n        align-items: center;\n        font-size: 20px;\n        height: 65px;\n        padding: 0 16px;\n        pointer-events: none;\n        background-color: var(--app-header-background-color);\n        font-weight: 400;\n        color: var(--app-header-text-color, white);\n        border-bottom: var(--app-header-border-bottom, none);\n        box-sizing: border-box;\n      }\n\n      ha-menu-button,\n      ha-icon-button-arrow-prev,\n      ::slotted([slot=\"toolbar-icon\"]) {\n        pointer-events: auto;\n      }\n\n      ha-icon-button-arrow-prev.hidden {\n        visibility: hidden;\n      }\n\n      [main-title] {\n        margin: 0 0 0 24px;\n        line-height: 20px;\n        flex-grow: 1;\n      }\n\n      .content {\n        position: relative;\n        width: 100%;\n        height: calc(100% - 65px);\n        overflow-y: auto;\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hass-subpage\": HassSubpage;\n  }\n}\n","import \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-spinner/paper-spinner-lite\";\nimport {\n  css,\n  CSSResultArray,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport \"../components/ha-menu-button\";\nimport \"../components/ha-icon-button-arrow-prev\";\nimport { haStyle } from \"../resources/styles\";\nimport { HomeAssistant } from \"../types\";\n\n@customElement(\"hass-loading-screen\")\nclass HassLoadingScreen extends LitElement {\n  @property({ type: Boolean }) public rootnav? = false;\n\n  @property() public hass?: HomeAssistant;\n\n  @property() public narrow?: boolean;\n\n  protected render(): TemplateResult {\n    return html`\n      <app-toolbar>\n        ${this.rootnav\n          ? html`\n              <ha-menu-button\n                .hass=${this.hass}\n                .narrow=${this.narrow}\n              ></ha-menu-button>\n            `\n          : html`\n              <ha-icon-button-arrow-prev\n                @click=${this._handleBack}\n              ></ha-icon-button-arrow-prev>\n            `}\n      </app-toolbar>\n      <div class=\"content\">\n        <paper-spinner-lite active></paper-spinner-lite>\n      </div>\n    `;\n  }\n\n  private _handleBack() {\n    history.back();\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      haStyle,\n      css`\n        :host {\n          display: block;\n          height: 100%;\n          background-color: var(--primary-background-color);\n        }\n        .content {\n          height: calc(100% - 64px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hass-loading-screen\": HassLoadingScreen;\n  }\n}\n","// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\ndeclare global {\n  // eslint-disable-next-line\n  interface HASSDomEvents {}\n}\n\nexport type ValidHassDomEvent = keyof HASSDomEvents;\n\nexport interface HASSDomEvent<T> extends Event {\n  detail: T;\n}\n\n/**\n * Dispatches a custom event with an optional detail value.\n *\n * @param {string} type Name of event type.\n * @param {*=} detail Detail value containing event-specific\n *   payload.\n * @param {{ bubbles: (boolean|undefined),\n *           cancelable: (boolean|undefined),\n *           composed: (boolean|undefined) }=}\n *  options Object specifying options.  These may include:\n *  `bubbles` (boolean, defaults to `true`),\n *  `cancelable` (boolean, defaults to false), and\n *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n * @return {Event} The new event that was fired.\n */\nexport const fireEvent = <HassEvent extends ValidHassDomEvent>(\n  node: HTMLElement | Window,\n  type: HassEvent,\n  detail?: HASSDomEvents[HassEvent],\n  options?: {\n    bubbles?: boolean;\n    cancelable?: boolean;\n    composed?: boolean;\n  }\n) => {\n  options = options || {};\n  // @ts-ignore\n  detail = detail === null || detail === undefined ? {} : detail;\n  const event = new Event(type, {\n    bubbles: options.bubbles === undefined ? true : options.bubbles,\n    cancelable: Boolean(options.cancelable),\n    composed: options.composed === undefined ? true : options.composed,\n  });\n  (event as any).detail = detail;\n  node.dispatchEvent(event);\n  return event;\n};\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .container {\n          position: relative;\n          display: inline-block;\n        }\n\n        mwc-button {\n          transition: all 1s;\n        }\n\n        .success mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-green-500);\n          transition: none;\n        }\n\n        .error mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-red-500);\n          transition: none;\n        }\n\n        .progress {\n          @apply --layout;\n          @apply --layout-center-center;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n        }\n      </style>\n      <div class=\"container\" id=\"container\">\n        <mwc-button\n          id=\"button\"\n          disabled=\"[[computeDisabled(disabled, progress)]]\"\n          on-click=\"buttonTapped\"\n        >\n          <slot></slot>\n        </mwc-button>\n        <template is=\"dom-if\" if=\"[[progress]]\">\n          <div class=\"progress\"><paper-spinner active=\"\"></paper-spinner></div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass(\"success\");\n  }\n\n  actionError() {\n    this.tempClass(\"error\");\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define(\"ha-progress-button\", HaProgressButton);\n","import { HomeAssistant } from \"../../types\";\nimport { hassioApiResultExtractor, HassioResponse } from \"./common\";\n\nexport interface HassioSnapshot {\n  slug: string;\n  date: string;\n  name: string;\n  type: \"full\" | \"partial\";\n  protected: boolean;\n}\n\nexport interface HassioSnapshotDetail extends HassioSnapshot {\n  size: number;\n  homeassistant: string;\n  addons: Array<{\n    slug: \"ADDON_SLUG\";\n    name: \"NAME\";\n    version: \"INSTALLED_VERSION\";\n    size: \"SIZE_IN_MB\";\n  }>;\n  repositories: string[];\n  folders: string[];\n}\n\nexport interface HassioFullSnapshotCreateParams {\n  name: string;\n  password?: string;\n}\nexport interface HassioPartialSnapshotCreateParams {\n  name: string;\n  folders: string[];\n  addons: string[];\n  password?: string;\n}\n\nexport const fetchHassioSnapshots = async (hass: HomeAssistant) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<{ snapshots: HassioSnapshot[] }>>(\n      \"GET\",\n      \"hassio/snapshots\"\n    )\n  ).snapshots;\n};\n\nexport const fetchHassioSnapshotInfo = async (\n  hass: HomeAssistant,\n  snapshot: string\n) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioSnapshotDetail>>(\n      \"GET\",\n      `hassio/snapshots/${snapshot}/info`\n    )\n  );\n};\n\nexport const reloadHassioSnapshots = async (hass: HomeAssistant) => {\n  await hass.callApi<HassioResponse<void>>(\"POST\", `hassio/snapshots/reload`);\n};\n\nexport const createHassioFullSnapshot = async (\n  hass: HomeAssistant,\n  data: HassioFullSnapshotCreateParams\n) => {\n  await hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    `hassio/snapshots/new/full`,\n    data\n  );\n};\n\nexport const createHassioPartialSnapshot = async (\n  hass: HomeAssistant,\n  data: HassioFullSnapshotCreateParams\n) => {\n  await hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    `hassio/snapshots/new/partial`,\n    data\n  );\n};\n","import { HomeAssistant } from \"../../types\";\nimport { hassioApiResultExtractor, HassioResponse } from \"./common\";\n\nexport interface HassioHardwareAudioDevice {\n  device?: string | null;\n  name: string;\n}\n\ninterface HassioHardwareAudioList {\n  audio: {\n    input: { [key: string]: string };\n    output: { [key: string]: string };\n  };\n}\n\nexport interface HassioHardwareInfo {\n  serial: string[];\n  input: string[];\n  disk: string[];\n  gpio: string[];\n  audio: object;\n}\n\nexport const fetchHassioHardwareAudio = async (hass: HomeAssistant) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioHardwareAudioList>>(\n      \"GET\",\n      \"hassio/hardware/audio\"\n    )\n  );\n};\n\nexport const fetchHassioHardwareInfo = async (hass: HomeAssistant) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioHardwareInfo>>(\n      \"GET\",\n      \"hassio/hardware/info\"\n    )\n  );\n};\n","import { fireEvent } from \"../../../../src/common/dom/fire_event\";\n\nexport interface HassioMarkdownDialogParams {\n  title: string;\n  content: string;\n}\n\nexport const showHassioMarkdownDialog = (\n  element: HTMLElement,\n  dialogParams: HassioMarkdownDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-hassio-markdown\",\n    dialogImport: () =>\n      import(\n        /* webpackChunkName: \"dialog-hassio-markdown\" */ \"./dialog-hassio-markdown\"\n      ),\n    dialogParams,\n  });\n};\n","import { css } from \"lit-element\";\n\nexport const hassioStyle = css`\n  .content {\n    margin: 8px;\n  }\n  h1,\n  .description,\n  .card-content {\n    color: var(--primary-text-color);\n  }\n  h1 {\n    font-size: 2em;\n    margin-bottom: 8px;\n    font-family: var(--paper-font-headline_-_font-family);\n    -webkit-font-smoothing: var(--paper-font-headline_-_-webkit-font-smoothing);\n    font-size: var(--paper-font-headline_-_font-size);\n    font-weight: var(--paper-font-headline_-_font-weight);\n    letter-spacing: var(--paper-font-headline_-_letter-spacing);\n    line-height: var(--paper-font-headline_-_line-height);\n    padding-left: 8px;\n  }\n  .description {\n    margin-top: 4px;\n    padding-left: 8px;\n  }\n  .card-group {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    grid-gap: 8px;\n  }\n  @media screen and (min-width: 640px) {\n    .card-group {\n      grid-template-columns: repeat(auto-fit, minmax(300px, 0.5fr));\n    }\n  }\n  @media screen and (min-width: 1020px) {\n    .card-group {\n      grid-template-columns: repeat(auto-fit, minmax(300px, 0.333fr));\n    }\n  }\n  @media screen and (min-width: 1300px) {\n    .card-group {\n      grid-template-columns: repeat(auto-fit, minmax(300px, 0.25fr));\n    }\n  }\n  ha-call-api-button {\n    font-weight: 500;\n    color: var(--primary-color);\n  }\n  .error {\n    color: var(--error-color);\n    margin-top: 16px;\n  }\n`;\n","import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\ninterface State {\n  bold: boolean;\n  italic: boolean;\n  underline: boolean;\n  strikethrough: boolean;\n  foregroundColor: null | string;\n  backgroundColor: null | string;\n}\n\n@customElement(\"hassio-ansi-to-html\")\nclass HassioAnsiToHtml extends LitElement {\n  @property() public content!: string;\n\n  public render(): TemplateResult | void {\n    return html`${this._parseTextToColoredPre(this.content)}`;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      pre {\n        overflow-x: auto;\n        white-space: pre-wrap;\n        overflow-wrap: break-word;\n      }\n      .bold {\n        font-weight: bold;\n      }\n      .italic {\n        font-style: italic;\n      }\n      .underline {\n        text-decoration: underline;\n      }\n      .strikethrough {\n        text-decoration: line-through;\n      }\n      .underline.strikethrough {\n        text-decoration: underline line-through;\n      }\n      .fg-red {\n        color: rgb(222, 56, 43);\n      }\n      .fg-green {\n        color: rgb(57, 181, 74);\n      }\n      .fg-yellow {\n        color: rgb(255, 199, 6);\n      }\n      .fg-blue {\n        color: rgb(0, 111, 184);\n      }\n      .fg-magenta {\n        color: rgb(118, 38, 113);\n      }\n      .fg-cyan {\n        color: rgb(44, 181, 233);\n      }\n      .fg-white {\n        color: rgb(204, 204, 204);\n      }\n      .bg-black {\n        background-color: rgb(0, 0, 0);\n      }\n      .bg-red {\n        background-color: rgb(222, 56, 43);\n      }\n      .bg-green {\n        background-color: rgb(57, 181, 74);\n      }\n      .bg-yellow {\n        background-color: rgb(255, 199, 6);\n      }\n      .bg-blue {\n        background-color: rgb(0, 111, 184);\n      }\n      .bg-magenta {\n        background-color: rgb(118, 38, 113);\n      }\n      .bg-cyan {\n        background-color: rgb(44, 181, 233);\n      }\n      .bg-white {\n        background-color: rgb(204, 204, 204);\n      }\n    `;\n  }\n\n  private _parseTextToColoredPre(text) {\n    const pre = document.createElement(\"pre\");\n    const re = /\\033(?:\\[(.*?)[@-~]|\\].*?(?:\\007|\\033\\\\))/g;\n    let i = 0;\n\n    const state: State = {\n      bold: false,\n      italic: false,\n      underline: false,\n      strikethrough: false,\n      foregroundColor: null,\n      backgroundColor: null,\n    };\n\n    const addSpan = (content) => {\n      const span = document.createElement(\"span\");\n      if (state.bold) {\n        span.classList.add(\"bold\");\n      }\n      if (state.italic) {\n        span.classList.add(\"italic\");\n      }\n      if (state.underline) {\n        span.classList.add(\"underline\");\n      }\n      if (state.strikethrough) {\n        span.classList.add(\"strikethrough\");\n      }\n      if (state.foregroundColor !== null) {\n        span.classList.add(`fg-${state.foregroundColor}`);\n      }\n      if (state.backgroundColor !== null) {\n        span.classList.add(`bg-${state.backgroundColor}`);\n      }\n      span.appendChild(document.createTextNode(content));\n      pre.appendChild(span);\n    };\n\n    /* eslint-disable no-cond-assign */\n    let match;\n    // eslint-disable-next-line\n    while ((match = re.exec(text)) !== null) {\n      const j = match!.index;\n      addSpan(text.substring(i, j));\n      i = j + match[0].length;\n\n      if (match[1] === undefined) {\n        continue;\n      }\n\n      match[1].split(\";\").forEach((colorCode: string) => {\n        switch (parseInt(colorCode, 10)) {\n          case 0:\n            // reset\n            state.bold = false;\n            state.italic = false;\n            state.underline = false;\n            state.strikethrough = false;\n            state.foregroundColor = null;\n            state.backgroundColor = null;\n            break;\n          case 1:\n            state.bold = true;\n            break;\n          case 3:\n            state.italic = true;\n            break;\n          case 4:\n            state.underline = true;\n            break;\n          case 9:\n            state.strikethrough = true;\n            break;\n          case 22:\n            state.bold = false;\n            break;\n          case 23:\n            state.italic = false;\n            break;\n          case 24:\n            state.underline = false;\n            break;\n          case 29:\n            state.strikethrough = false;\n            break;\n          case 30:\n            // foreground black\n            state.foregroundColor = null;\n            break;\n          case 31:\n            state.foregroundColor = \"red\";\n            break;\n          case 32:\n            state.foregroundColor = \"green\";\n            break;\n          case 33:\n            state.foregroundColor = \"yellow\";\n            break;\n          case 34:\n            state.foregroundColor = \"blue\";\n            break;\n          case 35:\n            state.foregroundColor = \"magenta\";\n            break;\n          case 36:\n            state.foregroundColor = \"cyan\";\n            break;\n          case 37:\n            state.foregroundColor = \"white\";\n            break;\n          case 39:\n            // foreground reset\n            state.foregroundColor = null;\n            break;\n          case 40:\n            state.backgroundColor = \"black\";\n            break;\n          case 41:\n            state.backgroundColor = \"red\";\n            break;\n          case 42:\n            state.backgroundColor = \"green\";\n            break;\n          case 43:\n            state.backgroundColor = \"yellow\";\n            break;\n          case 44:\n            state.backgroundColor = \"blue\";\n            break;\n          case 45:\n            state.backgroundColor = \"magenta\";\n            break;\n          case 46:\n            state.backgroundColor = \"cyan\";\n            break;\n          case 47:\n            state.backgroundColor = \"white\";\n            break;\n          case 49:\n            // background reset\n            state.backgroundColor = null;\n            break;\n        }\n      });\n    }\n    addSpan(text.substring(i));\n\n    return pre;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-ansi-to-html\": HassioAnsiToHtml;\n  }\n}\n","import \"@material/mwc-dialog\";\nimport type { Dialog } from \"@material/mwc-dialog\";\nimport { style } from \"@material/mwc-dialog/mwc-dialog-css\";\nimport \"./ha-icon-button\";\nimport { css, CSSResult, customElement, html } from \"lit-element\";\nimport type { Constructor, HomeAssistant } from \"../types\";\n\nconst MwcDialog = customElements.get(\"mwc-dialog\") as Constructor<Dialog>;\n\nexport const createCloseHeading = (hass: HomeAssistant, title: string) => html`\n  ${title}\n  <ha-icon-button\n    aria-label=${hass.localize(\"ui.dialogs.generic.close\")}\n    icon=\"hass:close\"\n    dialogAction=\"close\"\n    class=\"close_button\"\n  ></ha-icon-button>\n`;\n\n@customElement(\"ha-dialog\")\nexport class HaDialog extends MwcDialog {\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        .mdc-dialog__actions {\n          justify-content: var(--justify-action-buttons, flex-end);\n        }\n        .mdc-dialog__container {\n          align-items: var(--vertial-align-dialog, center);\n        }\n        .mdc-dialog__title::before {\n          display: block;\n          height: 20px;\n        }\n        .close_button {\n          position: absolute;\n          right: 16px;\n          top: 12px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-dialog\": HaDialog;\n  }\n}\n","import \"@material/mwc-button/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport type { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  query,\n  TemplateResult,\n} from \"lit-element\";\nimport memoizeOne from \"memoize-one\";\nimport \"../../../../src/components/ha-dialog\";\nimport \"../../../../src/components/ha-icon-button\";\n\nimport { haStyle, haStyleDialog } from \"../../../../src/resources/styles\";\nimport type { HomeAssistant } from \"../../../../src/types\";\nimport {\n  HassioAddonRepository,\n  fetchHassioAddonsInfo,\n} from \"../../../../src/data/hassio/addon\";\n\nimport { setSupervisorOption } from \"../../../../src/data/hassio/supervisor\";\nimport { HassioRepositoryDialogParams } from \"./show-dialog-repositories\";\n\n@customElement(\"dialog-hassio-repositories\")\nclass HassioRepositoriesDialog extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) private _repos: HassioAddonRepository[] = [];\n\n  @property({ attribute: false })\n  private _dialogParams?: HassioRepositoryDialogParams;\n\n  @query(\"#repository_input\") private _optionInput?: PaperInputElement;\n\n  @property() private _opened = false;\n\n  @property() private _prosessing = false;\n\n  @property() private _error?: string;\n\n  public async showDialog(_dialogParams: any): Promise<void> {\n    this._dialogParams = _dialogParams;\n    this._repos = _dialogParams.repos;\n    this._opened = true;\n    await this.updateComplete;\n  }\n\n  public closeDialog(): void {\n    this._opened = false;\n    this._error = \"\";\n  }\n\n  private _filteredRepositories = memoizeOne((repos: HassioAddonRepository[]) =>\n    repos\n      .filter((repo) => repo.slug !== \"core\" && repo.slug !== \"local\")\n      .sort((a, b) => (a.name < b.name ? -1 : 1))\n  );\n\n  protected render(): TemplateResult {\n    const repositories = this._filteredRepositories(this._repos);\n    return html`\n      <ha-dialog\n        .open=${this._opened}\n        @closing=${this.closeDialog}\n        scrimClickAction\n        escapeKeyAction\n        heading=\"Manage add-on repositories\"\n      >\n        ${this._error ? html`<div class=\"error\">${this._error}</div>` : \"\"}\n        <div class=\"form\">\n          ${repositories.length\n            ? repositories.map((repo) => {\n                return html`\n                  <paper-item class=\"option\">\n                    <paper-item-body three-line>\n                      <div>${repo.name}</div>\n                      <div secondary>${repo.maintainer}</div>\n                      <div secondary>${repo.url}</div>\n                    </paper-item-body>\n                    <ha-icon-button\n                      .slug=${repo.slug}\n                      title=\"Remove\"\n                      @click=${this._removeRepository}\n                      icon=\"hassio:delete\"\n                    ></ha-icon-button>\n                  </paper-item>\n                `;\n              })\n            : html`\n                <paper-item>\n                  No repositories\n                </paper-item>\n              `}\n          <div class=\"layout horizontal bottom\">\n            <paper-input\n              class=\"flex-auto\"\n              id=\"repository_input\"\n              label=\"Add repository\"\n              @keydown=${this._handleKeyAdd}\n            ></paper-input>\n            <mwc-button @click=${this._addRepository}>\n              ${this._prosessing\n                ? html`<paper-spinner active></paper-spinner>`\n                : \"Add\"}\n            </mwc-button>\n          </div>\n        </div>\n        <mwc-button slot=\"primaryAction\" @click=\"${this.closeDialog}\">\n          Close\n        </mwc-button>\n      </ha-dialog>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      haStyleDialog,\n      css`\n        ha-dialog.button-left {\n          --justify-action-buttons: flex-start;\n        }\n        paper-icon-item {\n          cursor: pointer;\n        }\n        .form {\n          color: var(--primary-text-color);\n        }\n        .option {\n          border: 1px solid var(--divider-color);\n          border-radius: 4px;\n          margin-top: 4px;\n        }\n        mwc-button {\n          margin-left: 8px;\n        }\n        ha-paper-dropdown-menu {\n          display: block;\n        }\n      `,\n    ];\n  }\n\n  public focus() {\n    this.updateComplete.then(() =>\n      (this.shadowRoot?.querySelector(\n        \"[dialogInitialFocus]\"\n      ) as HTMLElement)?.focus()\n    );\n  }\n\n  private _handleKeyAdd(ev: KeyboardEvent) {\n    ev.stopPropagation();\n    if (ev.keyCode !== 13) {\n      return;\n    }\n    this._addRepository();\n  }\n\n  private async _addRepository() {\n    const input = this._optionInput;\n    if (!input || !input.value) {\n      return;\n    }\n    this._prosessing = true;\n    const repositories = this._filteredRepositories(this._repos);\n    const newRepositories = repositories.map((repo) => {\n      return repo.source;\n    });\n    newRepositories.push(input.value);\n\n    try {\n      await setSupervisorOption(this.hass, {\n        addons_repositories: newRepositories,\n      });\n\n      const addonsInfo = await fetchHassioAddonsInfo(this.hass);\n      this._repos = addonsInfo.repositories;\n\n      await this._dialogParams!.loadData();\n\n      input.value = \"\";\n    } catch (err) {\n      this._error = err.message;\n    }\n    this._prosessing = false;\n  }\n\n  private async _removeRepository(ev: Event) {\n    const slug = (ev.target as any).slug;\n    const repositories = this._filteredRepositories(this._repos);\n    const repository = repositories.find((repo) => {\n      return repo.slug === slug;\n    });\n    if (!repository) {\n      return;\n    }\n    const newRepositories = repositories\n      .map((repo) => {\n        return repo.source;\n      })\n      .filter((repo) => {\n        return repo !== repository.source;\n      });\n\n    try {\n      await setSupervisorOption(this.hass, {\n        addons_repositories: newRepositories,\n      });\n\n      const addonsInfo = await fetchHassioAddonsInfo(this.hass);\n      this._repos = addonsInfo.repositories;\n\n      await this._dialogParams!.loadData();\n    } catch (err) {\n      this._error = err.message;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-hassio-repositories\": HassioRepositoriesDialog;\n  }\n}\n","import { HomeAssistant } from \"../../types\";\nimport { hassioApiResultExtractor, HassioResponse } from \"./common\";\n\nexport interface HassioAddonInfo {\n  name: string;\n  slug: string;\n  description: string;\n  repository: \"core\" | \"local\" | string;\n  version: string;\n  state: \"none\" | \"started\" | \"stopped\";\n  installed: string | undefined;\n  detached: boolean;\n  available: boolean;\n  build: boolean;\n  advanced: boolean;\n  url: string | null;\n  icon: boolean;\n  logo: boolean;\n}\n\nexport interface HassioAddonDetails extends HassioAddonInfo {\n  name: string;\n  slug: string;\n  description: string;\n  long_description: null | string;\n  auto_update: boolean;\n  url: null | string;\n  detached: boolean;\n  documentation: boolean;\n  available: boolean;\n  arch: \"armhf\" | \"aarch64\" | \"i386\" | \"amd64\";\n  machine: any;\n  homeassistant: string;\n  version_latest: string;\n  boot: \"auto\" | \"manual\";\n  build: boolean;\n  options: object;\n  network: null | object;\n  network_description: null | object;\n  host_network: boolean;\n  host_pid: boolean;\n  host_ipc: boolean;\n  host_dbus: boolean;\n  privileged: any;\n  apparmor: \"disable\" | \"default\" | \"profile\";\n  devices: string[];\n  auto_uart: boolean;\n  icon: boolean;\n  logo: boolean;\n  stage: \"stable\" | \"experimental\" | \"deprecated\";\n  changelog: boolean;\n  hassio_api: boolean;\n  hassio_role: \"default\" | \"homeassistant\" | \"manager\" | \"admin\";\n  homeassistant_api: boolean;\n  auth_api: boolean;\n  full_access: boolean;\n  protected: boolean;\n  rating: \"1-6\";\n  stdin: boolean;\n  webui: null | string;\n  gpio: boolean;\n  kernel_modules: boolean;\n  devicetree: boolean;\n  docker_api: boolean;\n  audio: boolean;\n  audio_input: null | string;\n  audio_output: null | string;\n  services_role: string[];\n  discovery: string[];\n  ip_address: string;\n  ingress: boolean;\n  ingress_panel: boolean;\n  ingress_entry: null | string;\n  ingress_url: null | string;\n}\n\nexport interface HassioAddonsInfo {\n  addons: HassioAddonInfo[];\n  repositories: HassioAddonRepository[];\n}\n\nexport interface HassioAddonSetSecurityParams {\n  protected?: boolean;\n}\n\nexport interface HassioAddonRepository {\n  slug: string;\n  name: string;\n  source: string;\n  url: string;\n  maintainer: string;\n}\n\nexport interface HassioAddonSetOptionParams {\n  audio_input?: string | null;\n  audio_output?: string | null;\n  options?: object | null;\n  boot?: \"auto\" | \"manual\";\n  auto_update?: boolean;\n  ingress_panel?: boolean;\n  network?: object | null;\n}\n\nexport const reloadHassioAddons = async (hass: HomeAssistant) => {\n  await hass.callApi<HassioResponse<void>>(\"POST\", `hassio/addons/reload`);\n};\n\nexport const fetchHassioAddonsInfo = async (hass: HomeAssistant) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioAddonsInfo>>(\"GET\", `hassio/addons`)\n  );\n};\n\nexport const fetchHassioAddonInfo = async (\n  hass: HomeAssistant,\n  slug: string\n) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioAddonDetails>>(\n      \"GET\",\n      `hassio/addons/${slug}/info`\n    )\n  );\n};\n\nexport const fetchHassioAddonChangelog = async (\n  hass: HomeAssistant,\n  slug: string\n) => {\n  return hass.callApi<string>(\"GET\", `hassio/addons/${slug}/changelog`);\n};\n\nexport const fetchHassioAddonLogs = async (\n  hass: HomeAssistant,\n  slug: string\n) => {\n  return hass.callApi<string>(\"GET\", `hassio/addons/${slug}/logs`);\n};\n\nexport const fetchHassioAddonDocumentation = async (\n  hass: HomeAssistant,\n  slug: string\n) => {\n  return hass.callApi<string>(\"GET\", `hassio/addons/${slug}/documentation`);\n};\n\nexport const setHassioAddonOption = async (\n  hass: HomeAssistant,\n  slug: string,\n  data: HassioAddonSetOptionParams\n) => {\n  await hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    `hassio/addons/${slug}/options`,\n    data\n  );\n};\n\nexport const setHassioAddonSecurity = async (\n  hass: HomeAssistant,\n  slug: string,\n  data: HassioAddonSetSecurityParams\n) => {\n  await hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    `hassio/addons/${slug}/security`,\n    data\n  );\n};\n\nexport const installHassioAddon = async (hass: HomeAssistant, slug: string) => {\n  return hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    `hassio/addons/${slug}/install`\n  );\n};\n\nexport const restartHassioAddon = async (hass: HomeAssistant, slug: string) => {\n  return hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    `hassio/addons/${slug}/restart`\n  );\n};\n\nexport const uninstallHassioAddon = async (\n  hass: HomeAssistant,\n  slug: string\n) => {\n  await hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    `hassio/addons/${slug}/uninstall`\n  );\n};\n","import \"@material/mwc-icon-button\";\nimport {\n  customElement,\n  html,\n  TemplateResult,\n  property,\n  LitElement,\n  CSSResult,\n  css,\n} from \"lit-element\";\nimport \"./ha-icon\";\n\n@customElement(\"ha-icon-button\")\nexport class HaIconButton extends LitElement {\n  @property({ type: Boolean, reflect: true }) disabled = false;\n\n  @property({ type: String }) icon = \"\";\n\n  @property({ type: String }) label = \"\";\n\n  protected createRenderRoot() {\n    return this.attachShadow({ mode: \"open\", delegatesFocus: true });\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <mwc-icon-button\n        .label=${this.label || this.icon}\n        ?disabled=${this.disabled}\n        @click=${this._handleClick}\n      >\n        <ha-icon .icon=${this.icon}></ha-icon>\n      </mwc-icon-button>\n    `;\n  }\n\n  private _handleClick(ev) {\n    if (this.disabled) {\n      ev.stopPropagation();\n    }\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: inline-block;\n        outline: none;\n      }\n      mwc-icon-button {\n        --mdc-theme-on-primary: currentColor;\n      }\n      ha-icon {\n        --ha-icon-display: inline;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon-button\": HaIconButton;\n  }\n}\n","import { derivedStyles } from \"../../resources/styles\";\nimport { HomeAssistant, Theme } from \"../../types\";\n\ninterface ProcessedTheme {\n  keys: { [key: string]: \"\" };\n  styles: { [key: string]: string };\n}\n\nconst hexToRgb = (hex: string): string | null => {\n  const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  const checkHex = hex.replace(shorthandRegex, (_m, r, g, b) => {\n    return r + r + g + g + b + b;\n  });\n\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(checkHex);\n  return result\n    ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(\n        result[3],\n        16\n      )}`\n    : null;\n};\n\nlet PROCESSED_THEMES: { [key: string]: ProcessedTheme } = {};\n\n/**\n * Apply a theme to an element by setting the CSS variables on it.\n *\n * element: Element to apply theme on.\n * themes: HASS Theme information\n * selectedTheme: selected theme.\n */\nexport const applyThemesOnElement = (\n  element,\n  themes: HomeAssistant[\"themes\"],\n  selectedTheme?: string\n) => {\n  const newTheme = selectedTheme\n    ? PROCESSED_THEMES[selectedTheme] || processTheme(selectedTheme, themes)\n    : undefined;\n\n  if (!element._themes && !newTheme) {\n    // No styles to reset, and no styles to set\n    return;\n  }\n\n  // Add previous set keys to reset them, and new theme\n  const styles = { ...element._themes, ...newTheme?.styles };\n  element._themes = newTheme?.keys;\n\n  // Set and/or reset styles\n  if (element.updateStyles) {\n    element.updateStyles(styles);\n  } else if (window.ShadyCSS) {\n    // Implement updateStyles() method of Polymer elements\n    window.ShadyCSS.styleSubtree(/** @type {!HTMLElement} */ element, styles);\n  }\n};\n\nconst processTheme = (\n  themeName: string,\n  themes: HomeAssistant[\"themes\"]\n): ProcessedTheme | undefined => {\n  if (!themes.themes[themeName]) {\n    return undefined;\n  }\n  const theme: Theme = {\n    ...derivedStyles,\n    ...themes.themes[themeName],\n  };\n  const styles = {};\n  const keys = {};\n  for (const key of Object.keys(theme)) {\n    const prefixedKey = `--${key}`;\n    const value = theme[key];\n    styles[prefixedKey] = value;\n    keys[prefixedKey] = \"\";\n\n    // Try to create a rgb value for this key if it is a hex color\n    if (!value.startsWith(\"#\")) {\n      // Not a hex color\n      continue;\n    }\n    const rgbKey = `rgb-${key}`;\n    if (theme[rgbKey] !== undefined) {\n      // Theme has it's own rgb value\n      continue;\n    }\n    const rgbValue = hexToRgb(value);\n    if (rgbValue !== null) {\n      const prefixedRgbKey = `--${rgbKey}`;\n      styles[prefixedRgbKey] = rgbValue;\n      keys[prefixedRgbKey] = \"\";\n    }\n  }\n  PROCESSED_THEMES[themeName] = { styles, keys };\n  return { styles, keys };\n};\n\nexport const invalidateThemeCache = () => {\n  PROCESSED_THEMES = {};\n};\n","import { HomeAssistant } from \"../../types\";\nimport { hassioApiResultExtractor, HassioResponse } from \"./common\";\n\nexport type HassioHostInfo = any;\n\nexport interface HassioHassOSInfo {\n  version: string;\n  version_cli: string;\n  version_latest: string;\n  version_cli_latest: string;\n  board: \"ova\" | \"rpi\";\n}\n\nexport const fetchHassioHostInfo = async (hass: HomeAssistant) => {\n  const response = await hass.callApi<HassioResponse<HassioHostInfo>>(\n    \"GET\",\n    \"hassio/host/info\"\n  );\n  return hassioApiResultExtractor(response);\n};\n\nexport const fetchHassioHassOsInfo = async (hass: HomeAssistant) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioHassOSInfo>>(\n      \"GET\",\n      \"hassio/os/info\"\n    )\n  );\n};\n\nexport const rebootHost = async (hass: HomeAssistant) => {\n  return hass.callApi<HassioResponse<void>>(\"POST\", \"hassio/host/reboot\");\n};\n\nexport const shutdownHost = async (hass: HomeAssistant) => {\n  return hass.callApi<HassioResponse<void>>(\"POST\", \"hassio/host/shutdown\");\n};\n\nexport const updateOS = async (hass: HomeAssistant) => {\n  return hass.callApi<HassioResponse<void>>(\"POST\", \"hassio/os/update\");\n};\n\nexport const changeHostOptions = async (hass: HomeAssistant, options: any) => {\n  return hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    \"hassio/host/options\",\n    options\n  );\n};\n","import { HASSDomEvent, ValidHassDomEvent } from \"../common/dom/fire_event\";\nimport { ProvideHassElement } from \"../mixins/provide-hass-lit-mixin\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"show-dialog\": ShowDialogParams<unknown>;\n    \"close-dialog\": undefined;\n  }\n  // for add event listener\n  interface HTMLElementEventMap {\n    \"show-dialog\": HASSDomEvent<ShowDialogParams<unknown>>;\n  }\n}\n\ninterface HassDialog<T = HASSDomEvents[ValidHassDomEvent]> extends HTMLElement {\n  showDialog(params: T);\n}\n\ninterface ShowDialogParams<T> {\n  dialogTag: keyof HTMLElementTagNameMap;\n  dialogImport: () => Promise<unknown>;\n  dialogParams: T;\n}\n\nconst LOADED = {};\n\nexport const showDialog = async (\n  element: HTMLElement & ProvideHassElement,\n  root: ShadowRoot | HTMLElement,\n  dialogImport: () => Promise<unknown>,\n  dialogTag: string,\n  dialogParams: unknown\n) => {\n  if (!(dialogTag in LOADED)) {\n    LOADED[dialogTag] = dialogImport().then(() => {\n      const dialogEl = document.createElement(dialogTag) as HassDialog;\n      element.provideHass(dialogEl);\n      root.appendChild(dialogEl);\n      return dialogEl;\n    });\n  }\n  const dialogElement = await LOADED[dialogTag];\n  dialogElement.showDialog(dialogParams);\n};\n\nexport const makeDialogManager = (\n  element: HTMLElement & ProvideHassElement,\n  root: ShadowRoot | HTMLElement\n) => {\n  element.addEventListener(\n    \"show-dialog\",\n    async (e: HASSDomEvent<ShowDialogParams<unknown>>) => {\n      const { dialogTag, dialogImport, dialogParams } = e.detail;\n      showDialog(element, root, dialogImport, dialogTag, dialogParams);\n    }\n  );\n};\n","import \"@polymer/paper-styles/paper-styles\";\nimport \"@polymer/polymer/lib/elements/custom-style\";\nimport { derivedStyles, haStyle, haStyleDialog } from \"./styles\";\n\nconst documentContainer = document.createElement(\"template\");\ndocumentContainer.setAttribute(\"style\", \"display: none;\");\n\ndocumentContainer.innerHTML = `<custom-style>\n  <style>\n    /*\n      Home Assistant default styles.\n\n      In Polymer 2.0, default styles should to be set on the html selector.\n      (Setting all default styles only on body breaks shadyCSS polyfill.)\n      See: https://github.com/home-assistant/home-assistant-polymer/pull/901\n    */\n    html {\n      font-size: 14px;\n      height: 100vh;\n\n      /* text */\n      --primary-text-color: #212121;\n      --secondary-text-color: #727272;\n      --text-primary-color: #ffffff;\n      --disabled-text-color: #bdbdbd;\n\n      /* main interface colors */\n      --primary-color: #03a9f4;\n      --dark-primary-color: #0288d1;\n      --light-primary-color: #b3e5fC;\n      --accent-color: #ff9800;\n      --divider-color: rgba(0, 0, 0, .12);\n\n      --scrollbar-thumb-color: rgb(194, 194, 194);\n\n      --error-color: #db4437;\n\n      /* states and badges */\n      --state-icon-color: #44739e;\n      --state-icon-active-color: #FDD835;\n\n      /* background and sidebar */\n      --card-background-color: #ffffff;\n      --primary-background-color: #fafafa;\n      --secondary-background-color: #e5e5e5; /* behind the cards on state */\n\n      /* for label-badge */\n      --label-badge-red: #DF4C1E;\n      --label-badge-blue: #039be5;\n      --label-badge-green: #0DA035;\n      --label-badge-yellow: #f4b400;\n\n      /*\n        Paper-styles color.html dependency is stripped on build.\n        When a default paper-style color is used, it needs to be copied\n        from paper-styles/color.html to here.\n      */\n\n      --paper-grey-50: #fafafa; /* default for: --mwc-switch-unchecked-button-color */\n      --paper-grey-200: #eeeeee;  /* for ha-date-picker-style */\n      --paper-grey-500: #9e9e9e;  /* --label-badge-grey */\n\n      /* for paper-spinner */\n      --google-red-500: #db4437;\n      --google-blue-500: #4285f4;\n      --google-green-500: #0f9d58;\n      --google-yellow-500: #f4b400;\n\n      /* for paper-slider */\n      --paper-green-400: #66bb6a;\n      --paper-blue-400: #42a5f5;\n      --paper-orange-400: #ffa726;\n\n      /* opacity for dark text on a light background */\n      --dark-divider-opacity: 0.12;\n      --dark-disabled-opacity: 0.38; /* or hint text or icon */\n      --dark-secondary-opacity: 0.54;\n      --dark-primary-opacity: 0.87;\n\n      /* opacity for light text on a dark background */\n      --light-divider-opacity: 0.12;\n      --light-disabled-opacity: 0.3; /* or hint text or icon */\n      --light-secondary-opacity: 0.7;\n      --light-primary-opacity: 1.0;\n\n      /* set our slider style */\n      --ha-paper-slider-pin-font-size: 15px;\n\n      /* rgb */\n      --rgb-primary-color: 3, 169, 244;\n      --rgb-accent-color: 255, 152, 0;\n      --rgb-primary-text-color: 33, 33, 33;\n      --rgb-secondary-text-color: 114, 114, 114;\n      --rgb-text-primary-color: 255, 255, 255;\n\n      ${Object.entries(derivedStyles)\n        .map(([key, value]) => `--${key}: ${value};`)\n        .join(\"\")}\n    }\n  </style>\n\n  <style shady-unscoped=\"\">\n    /*\n      prevent clipping of positioned elements in a small scrollable\n      force smooth scrolling if can scroll\n      use non-shady selectors so this only targets iOS 9\n      conditional mixin set in ha-style-dialog does not work with shadyCSS\n    */\n    paper-dialog-scrollable:not(.can-scroll) &gt; .scrollable {\n      -webkit-overflow-scrolling: auto !important;\n    }\n\n    paper-dialog-scrollable.can-scroll &gt; .scrollable {\n      -webkit-overflow-scrolling: touch !important;\n    }\n  </style>\n</custom-style><dom-module id=\"ha-style\">\n  <template>\n    <style>\n    ${haStyle.cssText}\n    </style>\n  </template>\n</dom-module><dom-module id=\"ha-style-dialog\">\n  <template>\n    <style>\n      ${haStyleDialog.cssText}\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild(documentContainer.content);\n","import \"../../components/ha-icon-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  LitElement,\n  property,\n} from \"lit-element\";\nimport { html, TemplateResult } from \"lit-html\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport \"../../components/ha-icon\";\nimport { fireEvent } from \"../dom/fire_event\";\n\n@customElement(\"search-input\")\nclass SearchInput extends LitElement {\n  @property() public filter?: string;\n\n  @property({ type: Boolean, attribute: \"no-label-float\" })\n  public noLabelFloat? = false;\n\n  @property({ type: Boolean, attribute: \"no-underline\" })\n  public noUnderline = false;\n\n  @property({ type: Boolean })\n  public autofocus = false;\n\n  public focus() {\n    this.shadowRoot!.querySelector(\"paper-input\")!.focus();\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <style>\n        .no-underline:not(.focused) {\n          --paper-input-container-underline: {\n            display: none;\n            height: 0;\n          }\n        }\n      </style>\n      <paper-input\n        class=${classMap({ \"no-underline\": this.noUnderline })}\n        .autofocus=${this.autofocus}\n        label=\"Search\"\n        .value=${this.filter}\n        @value-changed=${this._filterInputChanged}\n        .noLabelFloat=${this.noLabelFloat}\n      >\n        <ha-icon icon=\"hass:magnify\" slot=\"prefix\" class=\"prefix\"></ha-icon>\n        ${this.filter &&\n        html`\n          <ha-icon-button\n            slot=\"suffix\"\n            class=\"suffix\"\n            @click=${this._clearSearch}\n            icon=\"hass:close\"\n            alt=\"Clear\"\n            title=\"Clear\"\n          ></ha-icon-button>\n        `}\n      </paper-input>\n    `;\n  }\n\n  private async _filterChanged(value: string) {\n    fireEvent(this, \"value-changed\", { value: String(value) });\n  }\n\n  private async _filterInputChanged(e) {\n    this._filterChanged(e.target.value);\n  }\n\n  private async _clearSearch() {\n    this._filterChanged(\"\");\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-icon,\n      ha-icon-button {\n        color: var(--primary-text-color);\n      }\n      ha-icon {\n        margin: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"search-input\": SearchInput;\n  }\n}\n","import \"@polymer/paper-card/paper-card\";\nimport {\n  css,\n  CSSResultArray,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport memoizeOne from \"memoize-one\";\nimport { atLeastVersion } from \"../../../src/common/config/version\";\nimport { navigate } from \"../../../src/common/navigate\";\nimport {\n  HassioAddonInfo,\n  HassioAddonRepository,\n} from \"../../../src/data/hassio/addon\";\nimport { HomeAssistant } from \"../../../src/types\";\nimport \"../components/hassio-card-content\";\nimport { filterAndSort } from \"../components/hassio-filter-addons\";\nimport { hassioStyle } from \"../resources/hassio-style\";\n\nclass HassioAddonRepositoryEl extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public repo!: HassioAddonRepository;\n\n  @property() public addons!: HassioAddonInfo[];\n\n  @property() public filter!: string;\n\n  private _getAddons = memoizeOne(\n    (addons: HassioAddonInfo[], filter?: string) => {\n      if (filter) {\n        return filterAndSort(addons, filter);\n      }\n      return addons.sort((a, b) =>\n        a.name.toUpperCase() < b.name.toUpperCase() ? -1 : 1\n      );\n    }\n  );\n\n  protected render(): TemplateResult {\n    const repo = this.repo;\n    let _addons = this.addons;\n    if (!this.hass.userData?.showAdvanced) {\n      _addons = _addons.filter((addon) => {\n        return !addon.advanced;\n      });\n    }\n    const addons = this._getAddons(_addons, this.filter);\n\n    if (this.filter && addons.length < 1) {\n      return html`\n        <div class=\"content\">\n          <p class=\"description\">\n            No results found in \"${repo.name}.\"\n          </p>\n        </div>\n      `;\n    }\n    return html`\n      <div class=\"content\">\n        <h1>\n          ${repo.name}\n        </h1>\n        <div class=\"card-group\">\n          ${addons.map(\n            (addon) => html`\n              <paper-card\n                .addon=${addon}\n                class=${addon.available ? \"\" : \"not_available\"}\n                @click=${this._addonTapped}\n              >\n                <div class=\"card-content\">\n                  <hassio-card-content\n                    .hass=${this.hass}\n                    .title=${addon.name}\n                    .description=${addon.description}\n                    .available=${addon.available}\n                    .icon=${addon.installed && addon.installed !== addon.version\n                      ? \"hassio:arrow-up-bold-circle\"\n                      : \"hassio:puzzle\"}\n                    .iconTitle=${addon.installed\n                      ? addon.installed !== addon.version\n                        ? \"New version available\"\n                        : \"Add-on is installed\"\n                      : addon.available\n                      ? \"Add-on is not installed\"\n                      : \"Add-on is not available on your system\"}\n                    .iconClass=${addon.installed\n                      ? addon.installed !== addon.version\n                        ? \"update\"\n                        : \"installed\"\n                      : !addon.available\n                      ? \"not_available\"\n                      : \"\"}\n                    .iconImage=${atLeastVersion(\n                      this.hass.config.version,\n                      0,\n                      105\n                    ) && addon.icon\n                      ? `/api/hassio/addons/${addon.slug}/icon`\n                      : undefined}\n                    .showTopbar=${addon.installed || !addon.available}\n                    .topbarClass=${addon.installed\n                      ? addon.installed !== addon.version\n                        ? \"update\"\n                        : \"installed\"\n                      : !addon.available\n                      ? \"unavailable\"\n                      : \"\"}\n                  ></hassio-card-content>\n                </div>\n              </paper-card>\n            `\n          )}\n        </div>\n      </div>\n    `;\n  }\n\n  private _addonTapped(ev) {\n    navigate(this, `/hassio/addon/${ev.currentTarget.addon.slug}`);\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      hassioStyle,\n      css`\n        paper-card {\n          cursor: pointer;\n        }\n        .not_available {\n          opacity: 0.6;\n        }\n        a.repo {\n          color: var(--primary-text-color);\n        }\n      `,\n    ];\n  }\n}\n\ncustomElements.define(\"hassio-addon-repository\", HassioAddonRepositoryEl);\n","import * as Fuse from \"fuse.js\";\nimport { HassioAddonInfo } from \"../../../src/data/hassio/addon\";\n\nexport function filterAndSort(addons: HassioAddonInfo[], filter: string) {\n  const options: Fuse.FuseOptions<HassioAddonInfo> = {\n    keys: [\"name\", \"description\", \"slug\"],\n    caseSensitive: false,\n    minMatchCharLength: 2,\n    threshold: 0.2,\n  };\n  const fuse = new Fuse(addons, options);\n  return fuse.search(filter);\n}\n","import {\n  css,\n  CSSResult,\n  LitElement,\n  property,\n  PropertyValues,\n} from \"lit-element\";\nimport { html, TemplateResult } from \"lit-html\";\nimport {\n  fetchHassioAddonsInfo,\n  HassioAddonInfo,\n  HassioAddonRepository,\n  reloadHassioAddons,\n} from \"../../../src/data/hassio/addon\";\nimport \"../../../src/components/ha-icon-button\";\nimport \"../../../src/layouts/loading-screen\";\nimport \"../../../src/layouts/hass-tabs-subpage\";\nimport { HomeAssistant, Route } from \"../../../src/types\";\nimport \"../../../src/common/search/search-input\";\nimport \"./hassio-addon-repository\";\n\nimport { supervisorTabs } from \"../hassio-panel\";\n\nimport { showRepositoriesDialog } from \"../dialogs/repositories/show-dialog-repositories\";\n\nconst sortRepos = (a: HassioAddonRepository, b: HassioAddonRepository) => {\n  if (a.slug === \"local\") {\n    return -1;\n  }\n  if (b.slug === \"local\") {\n    return 1;\n  }\n  if (a.slug === \"core\") {\n    return -1;\n  }\n  if (b.slug === \"core\") {\n    return 1;\n  }\n  return a.name.toUpperCase() < b.name.toUpperCase() ? -1 : 1;\n};\n\nclass HassioAddonStore extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ attribute: false }) private _addons?: HassioAddonInfo[];\n\n  @property({ attribute: false }) private _repos?: HassioAddonRepository[];\n\n  @property() private _filter?: string;\n\n  public async refreshData() {\n    this._repos = undefined;\n    this._addons = undefined;\n    this._filter = undefined;\n    await reloadHassioAddons(this.hass);\n    await this._loadData();\n  }\n\n  protected render(): TemplateResult {\n    const repos: TemplateResult[] = [];\n\n    if (this._repos) {\n      for (const repo of this._repos) {\n        const addons = this._addons!.filter(\n          (addon) => addon.repository === repo.slug\n        );\n\n        if (addons.length === 0) {\n          continue;\n        }\n\n        repos.push(html`\n          <hassio-addon-repository\n            .hass=${this.hass}\n            .repo=${repo}\n            .addons=${addons}\n            .filter=${this._filter!}\n          ></hassio-addon-repository>\n        `);\n      }\n    }\n\n    return html`\n      <hass-tabs-subpage\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .route=${this.route}\n        hassio\n        main-page\n        .tabs=${supervisorTabs}\n      >\n        <span slot=\"header\">Add-on store</span>\n        <paper-menu-button\n          close-on-activate\n          no-animations\n          horizontal-align=\"right\"\n          horizontal-offset=\"-5\"\n          slot=\"toolbar-icon\"\n        >\n          <ha-icon-button\n            icon=\"hassio:dots-vertical\"\n            slot=\"dropdown-trigger\"\n            alt=\"menu\"\n          ></ha-icon-button>\n          <paper-listbox slot=\"dropdown-content\" role=\"listbox\">\n            <paper-item @tap=${this._manageRepositories}>\n              Repositories\n            </paper-item>\n            <paper-item @tap=${this.refreshData}>\n              Reload\n            </paper-item>\n          </paper-listbox>\n        </paper-menu-button>\n        ${repos.length === 0\n          ? html`<loading-screen></loading-screen>`\n          : html`\n              <div class=\"search\">\n                <search-input\n                  no-label-float\n                  no-underline\n                  .filter=${this._filter}\n                  @value-changed=${this._filterChanged}\n                ></search-input>\n              </div>\n\n              ${repos}\n            `}\n        ${!this.hass.userData?.showAdvanced\n          ? html`\n              <div class=\"advanced\">\n                Missing add-ons? Enable advanced mode on\n                <a href=\"/profile\" target=\"_top\">\n                  your profile page\n                </a>\n                .\n              </div>\n            `\n          : \"\"}\n      </hass-tabs-subpage>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    this.addEventListener(\"hass-api-called\", (ev) => this.apiCalled(ev));\n    this._loadData();\n  }\n\n  private apiCalled(ev) {\n    if (ev.detail.success) {\n      this._loadData();\n    }\n  }\n\n  private async _manageRepositories() {\n    showRepositoriesDialog(this, {\n      repos: this._repos!,\n      loadData: () => this._loadData(),\n    });\n  }\n\n  private async _loadData() {\n    try {\n      const addonsInfo = await fetchHassioAddonsInfo(this.hass);\n      this._repos = addonsInfo.repositories;\n      this._repos.sort(sortRepos);\n      this._addons = addonsInfo.addons;\n    } catch (err) {\n      alert(\"Failed to fetch add-on info\");\n    }\n  }\n\n  private async _filterChanged(e) {\n    this._filter = e.detail.value;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      hassio-addon-repository {\n        margin-top: 24px;\n      }\n      .search {\n        padding: 0 16px;\n        background: var(--sidebar-background-color);\n        border-bottom: 1px solid var(--divider-color);\n      }\n      .search search-input {\n        position: relative;\n        top: 2px;\n      }\n      .advanced {\n        padding: 12px;\n        display: flex;\n        flex-wrap: wrap;\n        color: var(--primary-text-color);\n      }\n      .advanced a {\n        margin-left: 0.5em;\n        color: var(--primary-color);\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"hassio-addon-store\", HassioAddonStore);\n","import { fireEvent } from \"../../../../src/common/dom/fire_event\";\nimport \"./dialog-hassio-repositories\";\nimport { HassioAddonRepository } from \"../../../../src/data/hassio/addon\";\n\nexport interface HassioRepositoryDialogParams {\n  repos: HassioAddonRepository[];\n  loadData: () => Promise<void>;\n}\n\nexport const showRepositoriesDialog = (\n  element: HTMLElement,\n  dialogParams: HassioRepositoryDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-hassio-repositories\",\n    dialogImport: () =>\n      import(\n        /* webpackChunkName: \"dialog-hassio-repositories\" */ \"./dialog-hassio-repositories\"\n      ),\n    dialogParams,\n  });\n};\n","import \"@polymer/paper-card/paper-card\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { atLeastVersion } from \"../../../src/common/config/version\";\nimport { navigate } from \"../../../src/common/navigate\";\nimport { HassioAddonInfo } from \"../../../src/data/hassio/addon\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../src/types\";\nimport \"../components/hassio-card-content\";\nimport { hassioStyle } from \"../resources/hassio-style\";\n\n@customElement(\"hassio-addons\")\nclass HassioAddons extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public addons?: HassioAddonInfo[];\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"content\">\n        <h1>Add-ons</h1>\n        <div class=\"card-group\">\n          ${!this.addons\n            ? html`\n                <paper-card>\n                  <div class=\"card-content\">\n                    You don't have any add-ons installed yet. Head over to\n                    <a href=\"#\" @click=${this._openStore}>the add-on store</a>\n                    to get started!\n                  </div>\n                </paper-card>\n              `\n            : this.addons\n                .sort((a, b) => (a.name > b.name ? 1 : -1))\n                .map(\n                  (addon) => html`\n                    <paper-card .addon=${addon} @click=${this._addonTapped}>\n                      <div class=\"card-content\">\n                        <hassio-card-content\n                          .hass=${this.hass}\n                          .title=${addon.name}\n                          .description=${addon.description}\n                          available\n                          .showTopbar=${addon.installed !== addon.version}\n                          topbarClass=\"update\"\n                          .icon=${addon.installed !== addon.version\n                            ? \"hassio:arrow-up-bold-circle\"\n                            : \"hassio:puzzle\"}\n                          .iconTitle=${addon.state !== \"started\"\n                            ? \"Add-on is stopped\"\n                            : addon.installed !== addon.version\n                            ? \"New version available\"\n                            : \"Add-on is running\"}\n                          .iconClass=${addon.installed &&\n                          addon.installed !== addon.version\n                            ? addon.state === \"started\"\n                              ? \"update\"\n                              : \"update stopped\"\n                            : addon.installed && addon.state === \"started\"\n                            ? \"running\"\n                            : \"stopped\"}\n                          .iconImage=${atLeastVersion(\n                            this.hass.config.version,\n                            0,\n                            105\n                          ) && addon.icon\n                            ? `/api/hassio/addons/${addon.slug}/icon`\n                            : undefined}\n                        ></hassio-card-content>\n                      </div>\n                    </paper-card>\n                  `\n                )}\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        paper-card {\n          cursor: pointer;\n        }\n      `,\n    ];\n  }\n\n  private _addonTapped(ev: any): void {\n    navigate(this, `/hassio/addon/${ev.currentTarget.addon.slug}/info`);\n  }\n\n  private _openStore(): void {\n    navigate(this, \"/hassio/store\");\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addons\": HassioAddons;\n  }\n}\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-card/paper-card\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport \"../../../src/components/buttons/ha-call-api-button\";\nimport { HassioHassOSInfo } from \"../../../src/data/hassio/host\";\nimport {\n  HassioHomeAssistantInfo,\n  HassioSupervisorInfo,\n} from \"../../../src/data/hassio/supervisor\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport \"../../../src/components/ha-icon\";\nimport { HomeAssistant } from \"../../../src/types\";\nimport \"../components/hassio-card-content\";\nimport { hassioStyle } from \"../resources/hassio-style\";\n\n@customElement(\"hassio-update\")\nexport class HassioUpdate extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public hassInfo: HassioHomeAssistantInfo;\n\n  @property() public hassOsInfo?: HassioHassOSInfo;\n\n  @property() public supervisorInfo: HassioSupervisorInfo;\n\n  @property() private _error?: string;\n\n  protected render(): TemplateResult {\n    const updatesAvailable: number = [\n      this.hassInfo,\n      this.supervisorInfo,\n      this.hassOsInfo,\n    ].filter((value) => {\n      return (\n        !!value &&\n        (value.version_latest\n          ? value.version !== value.version_latest\n          : value.version_latest\n          ? value.version !== value.version_latest\n          : false)\n      );\n    }).length;\n\n    if (!updatesAvailable) {\n      return html``;\n    }\n\n    return html`\n      <div class=\"content\">\n        ${this._error\n          ? html` <div class=\"error\">Error: ${this._error}</div> `\n          : \"\"}\n        <h1>\n          ${updatesAvailable > 1\n            ? \"Updates Available \"\n            : \"Update Available \"}\n        </h1>\n        <div class=\"card-group\">\n          ${this._renderUpdateCard(\n            \"Home Assistant Core\",\n            this.hassInfo.version,\n            this.hassInfo.version_latest,\n            \"hassio/homeassistant/update\",\n            `https://${\n              this.hassInfo.version_latest.includes(\"b\") ? \"rc\" : \"www\"\n            }.home-assistant.io/latest-release-notes/`,\n            \"hassio:home-assistant\"\n          )}\n          ${this._renderUpdateCard(\n            \"Supervisor\",\n            this.supervisorInfo.version,\n            this.supervisorInfo.version_latest,\n            \"hassio/supervisor/update\",\n            `https://github.com//home-assistant/hassio/releases/tag/${this.supervisorInfo.version_latest}`\n          )}\n          ${this.hassOsInfo\n            ? this._renderUpdateCard(\n                \"Operating System\",\n                this.hassOsInfo.version,\n                this.hassOsInfo.version_latest,\n                \"hassio/os/update\",\n                `https://github.com//home-assistant/hassos/releases/tag/${this.hassOsInfo.version_latest}`\n              )\n            : \"\"}\n        </div>\n      </div>\n    `;\n  }\n\n  private _renderUpdateCard(\n    name: string,\n    curVersion: string,\n    lastVersion: string,\n    apiPath: string,\n    releaseNotesUrl: string,\n    icon?: string\n  ): TemplateResult {\n    if (!lastVersion || lastVersion === curVersion) {\n      return html``;\n    }\n    return html`\n      <paper-card>\n        <div class=\"card-content\">\n          ${icon\n            ? html`\n                <div class=\"icon\">\n                  <ha-icon .icon=${icon}></ha-icon>\n                </div>\n              `\n            : \"\"}\n          <div class=\"update-heading\">${name} ${lastVersion}</div>\n          <div class=\"warning\">\n            You are currently running version ${curVersion}\n          </div>\n        </div>\n        <div class=\"card-actions\">\n          <a href=\"${releaseNotesUrl}\" target=\"_blank\" rel=\"noreferrer\">\n            <mwc-button>Release notes</mwc-button>\n          </a>\n          <ha-call-api-button\n            .hass=${this.hass}\n            .path=${apiPath}\n            @hass-api-called=${this._apiCalled}\n          >\n            Update\n          </ha-call-api-button>\n        </div>\n      </paper-card>\n    `;\n  }\n\n  private _apiCalled(ev): void {\n    if (ev.detail.success) {\n      this._error = \"\";\n      return;\n    }\n\n    const response = ev.detail.response;\n\n    if (typeof response.body === \"object\") {\n      this._error = response.body.message || \"Unknown error\";\n    } else {\n      this._error = response.body;\n    }\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        .icon {\n          --mdc-icon-size: 48px;\n          float: right;\n          margin: 0 0 2px 10px;\n          color: var(--primary-text-color);\n        }\n        .update-heading {\n          font-size: var(--paper-font-subhead_-_font-size);\n          font-weight: 500;\n          margin-bottom: 0.5em;\n          color: var(--primary-text-color);\n        }\n        .warning {\n          color: var(--secondary-text-color);\n        }\n        .card-content {\n          height: calc(100% - 47px);\n          box-sizing: border-box;\n        }\n        .card-actions {\n          text-align: right;\n        }\n        .errors {\n          color: var(--google-red-500);\n          padding: 16px;\n        }\n        a {\n          text-decoration: none;\n        }\n      `,\n    ];\n  }\n}\n","import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { HassioHassOSInfo } from \"../../../src/data/hassio/host\";\nimport {\n  HassioHomeAssistantInfo,\n  HassioSupervisorInfo,\n} from \"../../../src/data/hassio/supervisor\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport { HomeAssistant, Route } from \"../../../src/types\";\nimport \"../../../src/layouts/hass-tabs-subpage\";\nimport \"./hassio-addons\";\nimport \"./hassio-update\";\n\nimport { supervisorTabs } from \"../hassio-panel\";\n\n@customElement(\"hassio-dashboard\")\nclass HassioDashboard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ attribute: false }) public supervisorInfo!: HassioSupervisorInfo;\n\n  @property({ attribute: false }) public hassInfo!: HassioHomeAssistantInfo;\n\n  @property({ attribute: false }) public hassOsInfo!: HassioHassOSInfo;\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-tabs-subpage\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        hassio\n        main-page\n        .route=${this.route}\n        .tabs=${supervisorTabs}\n      >\n        <span slot=\"header\">Dashboard</span>\n        <div class=\"content\">\n          <hassio-update\n            .hass=${this.hass}\n            .hassInfo=${this.hassInfo}\n            .supervisorInfo=${this.supervisorInfo}\n            .hassOsInfo=${this.hassOsInfo}\n          ></hassio-update>\n          <hassio-addons\n            .hass=${this.hass}\n            .addons=${this.supervisorInfo.addons}\n          ></hassio-addons>\n        </div>\n      </hass-tabs-subpage>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      css`\n        .content {\n          margin: 0 auto;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-dashboard\": HassioDashboard;\n  }\n}\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-card/paper-card\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\nimport type { PaperCheckboxElement } from \"@polymer/paper-checkbox/paper-checkbox\";\nimport \"@polymer/paper-input/paper-input\";\nimport type { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-radio-button/paper-radio-button\";\nimport \"@polymer/paper-radio-group/paper-radio-group\";\nimport type { PaperRadioGroupElement } from \"@polymer/paper-radio-group/paper-radio-group\";\nimport {\n  css,\n  CSSResultArray,\n  customElement,\n  html,\n  LitElement,\n  property,\n  PropertyValues,\n  TemplateResult,\n} from \"lit-element\";\nimport { fireEvent } from \"../../../src/common/dom/fire_event\";\nimport {\n  createHassioFullSnapshot,\n  createHassioPartialSnapshot,\n  fetchHassioSnapshots,\n  HassioFullSnapshotCreateParams,\n  HassioPartialSnapshotCreateParams,\n  HassioSnapshot,\n  reloadHassioSnapshots,\n} from \"../../../src/data/hassio/snapshot\";\nimport { HassioSupervisorInfo } from \"../../../src/data/hassio/supervisor\";\nimport { PolymerChangedEvent } from \"../../../src/polymer-types\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport { HomeAssistant, Route } from \"../../../src/types\";\nimport \"../../../src/layouts/hass-tabs-subpage\";\nimport \"../components/hassio-card-content\";\nimport { showHassioSnapshotDialog } from \"../dialogs/snapshot/show-dialog-hassio-snapshot\";\nimport { hassioStyle } from \"../resources/hassio-style\";\n\nimport { supervisorTabs } from \"../hassio-panel\";\n\ninterface CheckboxItem {\n  slug: string;\n  name: string;\n  checked: boolean;\n}\n\n@customElement(\"hassio-snapshots\")\nclass HassioSnapshots extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ attribute: false }) public supervisorInfo!: HassioSupervisorInfo;\n\n  @property() private _snapshotName = \"\";\n\n  @property() private _snapshotPassword = \"\";\n\n  @property() private _snapshotHasPassword = false;\n\n  @property() private _snapshotType: HassioSnapshot[\"type\"] = \"full\";\n\n  @property() private _snapshots?: HassioSnapshot[] = [];\n\n  @property() private _addonList: CheckboxItem[] = [];\n\n  @property() private _folderList: CheckboxItem[] = [\n    {\n      slug: \"homeassistant\",\n      name: \"Home Assistant configuration\",\n      checked: true,\n    },\n    { slug: \"ssl\", name: \"SSL\", checked: true },\n    { slug: \"share\", name: \"Share\", checked: true },\n    { slug: \"addons/local\", name: \"Local add-ons\", checked: true },\n  ];\n\n  @property() private _creatingSnapshot = false;\n\n  @property() private _error = \"\";\n\n  public async refreshData() {\n    await reloadHassioSnapshots(this.hass);\n    await this._updateSnapshots();\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-tabs-subpage\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        hassio\n        main-page\n        .route=${this.route}\n        .tabs=${supervisorTabs}\n      >\n        <span slot=\"header\">Snapshots</span>\n\n        <ha-icon-button\n          icon=\"hassio:reload\"\n          slot=\"toolbar-icon\"\n          aria-label=\"Reload snapshots\"\n          @click=${this.refreshData}\n        ></ha-icon-button>\n\n        <div class=\"content\">\n          <h1>\n            Create snapshot\n          </h1>\n          <p class=\"description\">\n            Snapshots allow you to easily backup and restore all data of your\n            Home Assistant instance.\n          </p>\n          <div class=\"card-group\">\n            <paper-card>\n              <div class=\"card-content\">\n                <paper-input\n                  autofocus\n                  label=\"Name\"\n                  name=\"snapshotName\"\n                  .value=${this._snapshotName}\n                  @value-changed=${this._handleTextValueChanged}\n                ></paper-input>\n                Type:\n                <paper-radio-group\n                  name=\"snapshotType\"\n                  .selected=${this._snapshotType}\n                  @selected-changed=${this._handleRadioValueChanged}\n                >\n                  <paper-radio-button name=\"full\">\n                    Full snapshot\n                  </paper-radio-button>\n                  <paper-radio-button name=\"partial\">\n                    Partial snapshot\n                  </paper-radio-button>\n                </paper-radio-group>\n                ${this._snapshotType === \"full\"\n                  ? undefined\n                  : html`\n                      Folders:\n                      ${this._folderList.map(\n                        (folder, idx) => html`\n                          <paper-checkbox\n                            .idx=${idx}\n                            .checked=${folder.checked}\n                            @checked-changed=${this._folderChecked}\n                          >\n                            ${folder.name}\n                          </paper-checkbox>\n                        `\n                      )}\n                      Add-ons:\n                      ${this._addonList.map(\n                        (addon, idx) => html`\n                          <paper-checkbox\n                            .idx=${idx}\n                            .checked=${addon.checked}\n                            @checked-changed=${this._addonChecked}\n                          >\n                            ${addon.name}\n                          </paper-checkbox>\n                        `\n                      )}\n                    `}\n                Security:\n                <paper-checkbox\n                  name=\"snapshotHasPassword\"\n                  .checked=${this._snapshotHasPassword}\n                  @checked-changed=${this._handleCheckboxValueChanged}\n                >\n                  Password protection\n                </paper-checkbox>\n                ${this._snapshotHasPassword\n                  ? html`\n                      <paper-input\n                        label=\"Password\"\n                        type=\"password\"\n                        name=\"snapshotPassword\"\n                        .value=${this._snapshotPassword}\n                        @value-changed=${this._handleTextValueChanged}\n                      ></paper-input>\n                    `\n                  : undefined}\n                ${this._error !== \"\"\n                  ? html` <p class=\"error\">${this._error}</p> `\n                  : undefined}\n              </div>\n              <div class=\"card-actions\">\n                <mwc-button\n                  .disabled=${this._creatingSnapshot}\n                  @click=${this._createSnapshot}\n                >\n                  Create\n                </mwc-button>\n              </div>\n            </paper-card>\n          </div>\n\n          <h1>Available snapshots</h1>\n          <div class=\"card-group\">\n            ${this._snapshots === undefined\n              ? undefined\n              : this._snapshots.length === 0\n              ? html`\n                  <paper-card>\n                    <div class=\"card-content\">\n                      You don't have any snapshots yet.\n                    </div>\n                  </paper-card>\n                `\n              : this._snapshots.map(\n                  (snapshot) => html`\n                    <paper-card\n                      class=\"pointer\"\n                      .snapshot=${snapshot}\n                      @click=${this._snapshotClicked}\n                    >\n                      <div class=\"card-content\">\n                        <hassio-card-content\n                          .hass=${this.hass}\n                          .title=${snapshot.name || snapshot.slug}\n                          .description=${this._computeDetails(snapshot)}\n                          .datetime=${snapshot.date}\n                          .icon=${snapshot.type === \"full\"\n                            ? \"hassio:package-variant-closed\"\n                            : \"hassio:package-variant\"}\n                          .icon-class=\"snapshot\"\n                        ></hassio-card-content>\n                      </div>\n                    </paper-card>\n                  `\n                )}\n          </div>\n        </div>\n      </hass-tabs-subpage>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    this._updateSnapshots();\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    if (changedProps.has(\"supervisorInfo\")) {\n      this._addonList = this.supervisorInfo.addons\n        .map((addon) => ({\n          slug: addon.slug,\n          name: addon.name,\n          checked: true,\n        }))\n        .sort((a, b) => (a.name < b.name ? -1 : 1));\n    }\n  }\n\n  private _handleTextValueChanged(ev: PolymerChangedEvent<string>) {\n    const input = ev.currentTarget as PaperInputElement;\n    this[`_${input.name}`] = ev.detail.value;\n  }\n\n  private _handleCheckboxValueChanged(ev) {\n    const input = ev.currentTarget as PaperCheckboxElement;\n    this[`_${input.name}`] = input.checked;\n  }\n\n  private _handleRadioValueChanged(ev: PolymerChangedEvent<string>) {\n    const input = ev.currentTarget as PaperRadioGroupElement;\n    this[`_${input.getAttribute(\"name\")}`] = ev.detail.value;\n  }\n\n  private _folderChecked(ev) {\n    const { idx, checked } = ev.currentTarget!;\n    this._folderList = this._folderList.map((folder, curIdx) =>\n      curIdx === idx ? { ...folder, checked } : folder\n    );\n  }\n\n  private _addonChecked(ev) {\n    const { idx, checked } = ev.currentTarget!;\n    this._addonList = this._addonList.map((addon, curIdx) =>\n      curIdx === idx ? { ...addon, checked } : addon\n    );\n  }\n\n  private async _updateSnapshots() {\n    try {\n      this._snapshots = await fetchHassioSnapshots(this.hass);\n      this._snapshots.sort((a, b) => (a.date < b.date ? 1 : -1));\n    } catch (err) {\n      this._error = err.message;\n    }\n  }\n\n  private async _createSnapshot() {\n    this._error = \"\";\n    if (this._snapshotHasPassword && !this._snapshotPassword.length) {\n      this._error = \"Please enter a password.\";\n      return;\n    }\n    this._creatingSnapshot = true;\n    await this.updateComplete;\n\n    const name =\n      this._snapshotName ||\n      new Date().toLocaleDateString(navigator.language, {\n        weekday: \"long\",\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\",\n      });\n\n    try {\n      if (this._snapshotType === \"full\") {\n        const data: HassioFullSnapshotCreateParams = { name };\n        if (this._snapshotHasPassword) {\n          data.password = this._snapshotPassword;\n        }\n        await createHassioFullSnapshot(this.hass, data);\n      } else {\n        const addons = this._addonList\n          .filter((addon) => addon.checked)\n          .map((addon) => addon.slug);\n        const folders = this._folderList\n          .filter((folder) => folder.checked)\n          .map((folder) => folder.slug);\n\n        const data: HassioPartialSnapshotCreateParams = {\n          name,\n          folders,\n          addons,\n        };\n        if (this._snapshotHasPassword) {\n          data.password = this._snapshotPassword;\n        }\n        await createHassioPartialSnapshot(this.hass, data);\n      }\n      this._updateSnapshots();\n      fireEvent(this, \"hass-api-called\", { success: true, response: null });\n    } catch (err) {\n      this._error = err.message;\n    } finally {\n      this._creatingSnapshot = false;\n    }\n  }\n\n  private _computeDetails(snapshot: HassioSnapshot) {\n    const type =\n      snapshot.type === \"full\" ? \"Full snapshot\" : \"Partial snapshot\";\n    return snapshot.protected ? `${type}, password protected` : type;\n  }\n\n  private _snapshotClicked(ev) {\n    showHassioSnapshotDialog(this, {\n      slug: ev.currentTarget!.snapshot.slug,\n      onDelete: () => this._updateSnapshots(),\n    });\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        paper-radio-group {\n          display: block;\n        }\n        paper-radio-button {\n          padding: 0 0 2px 2px;\n        }\n        paper-radio-button,\n        paper-checkbox,\n        paper-input[type=\"password\"] {\n          display: block;\n          margin: 4px 0 4px 48px;\n        }\n        .pointer {\n          cursor: pointer;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-snapshots\": HassioSnapshots;\n  }\n}\n","import { fireEvent } from \"../../../../src/common/dom/fire_event\";\n\nexport interface HassioSnapshotDialogParams {\n  slug: string;\n  onDelete: () => void;\n}\n\nexport const showHassioSnapshotDialog = (\n  element: HTMLElement,\n  dialogParams: HassioSnapshotDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-hassio-snapshot\",\n    dialogImport: () =>\n      import(\n        /* webpackChunkName: \"dialog-hassio-snapshot\" */ \"./dialog-hassio-snapshot\"\n      ),\n    dialogParams,\n  });\n};\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-card/paper-card\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport \"../../../src/components/buttons/ha-call-api-button\";\nimport { fetchHassioHardwareInfo } from \"../../../src/data/hassio/hardware\";\nimport {\n  fetchHassioHostInfo,\n  HassioHassOSInfo,\n  HassioHostInfo as HassioHostInfoType,\n  rebootHost,\n  shutdownHost,\n  updateOS,\n  changeHostOptions,\n} from \"../../../src/data/hassio/host\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../src/types\";\nimport { showHassioMarkdownDialog } from \"../dialogs/markdown/show-dialog-hassio-markdown\";\nimport { hassioStyle } from \"../resources/hassio-style\";\nimport {\n  showConfirmationDialog,\n  showAlertDialog,\n  showPromptDialog,\n} from \"../../../src/dialogs/generic/show-dialog-box\";\n\n@customElement(\"hassio-host-info\")\nclass HassioHostInfo extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public hostInfo!: HassioHostInfoType;\n\n  @property() public hassOsInfo!: HassioHassOSInfo;\n\n  @property() private _errors?: string;\n\n  public render(): TemplateResult | void {\n    return html`\n      <paper-card>\n        <div class=\"card-content\">\n          <h2>Host system</h2>\n          <table class=\"info\">\n            <tbody>\n              <tr>\n                <td>Hostname</td>\n                <td>${this.hostInfo.hostname}</td>\n              </tr>\n              <tr>\n                <td>System</td>\n                <td>${this.hostInfo.operating_system}</td>\n              </tr>\n              ${this.hostInfo.deployment\n                ? html`\n                    <tr>\n                      <td>Deployment</td>\n                      <td>${this.hostInfo.deployment}</td>\n                    </tr>\n                  `\n                : \"\"}\n            </tbody>\n          </table>\n          <mwc-button raised @click=${this._showHardware} class=\"info\">\n            Hardware\n          </mwc-button>\n          ${this.hostInfo.features.includes(\"hostname\")\n            ? html`\n                <mwc-button\n                  raised\n                  @click=${this._changeHostnameClicked}\n                  class=\"info\"\n                >\n                  Change hostname\n                </mwc-button>\n              `\n            : \"\"}\n          ${this._errors\n            ? html` <div class=\"errors\">Error: ${this._errors}</div> `\n            : \"\"}\n        </div>\n        <div class=\"card-actions\">\n          ${this.hostInfo.features.includes(\"reboot\")\n            ? html`\n                <mwc-button class=\"warning\" @click=${this._rebootHost}\n                  >Reboot</mwc-button\n                >\n              `\n            : \"\"}\n          ${this.hostInfo.features.includes(\"shutdown\")\n            ? html`\n                <mwc-button class=\"warning\" @click=${this._shutdownHost}\n                  >Shutdown</mwc-button\n                >\n              `\n            : \"\"}\n          ${this.hostInfo.features.includes(\"hassos\")\n            ? html`\n                <ha-call-api-button\n                  class=\"warning\"\n                  .hass=${this.hass}\n                  path=\"hassio/os/config/sync\"\n                  title=\"Load HassOS configs or updates from USB\"\n                  >Import from USB</ha-call-api-button\n                >\n              `\n            : \"\"}\n          ${this.hostInfo.version !== this.hostInfo.version_latest\n            ? html` <mwc-button @click=${this._updateOS}>Update</mwc-button> `\n            : \"\"}\n        </div>\n      </paper-card>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        paper-card {\n          height: 100%;\n          width: 100%;\n        }\n        .card-content {\n          color: var(--primary-text-color);\n          box-sizing: border-box;\n          height: calc(100% - 47px);\n        }\n        .info {\n          width: 100%;\n        }\n        .info td:nth-child(2) {\n          text-align: right;\n        }\n        .errors {\n          color: var(--google-red-500);\n          margin-top: 16px;\n        }\n        mwc-button.info {\n          max-width: calc(50% - 12px);\n        }\n        table.info {\n          margin-bottom: 10px;\n        }\n        .warning {\n          --mdc-theme-primary: var(--google-red-500);\n        }\n      `,\n    ];\n  }\n\n  protected firstUpdated(): void {\n    this.addEventListener(\"hass-api-called\", (ev) => this._apiCalled(ev));\n  }\n\n  private _apiCalled(ev): void {\n    if (ev.detail.success) {\n      this._errors = undefined;\n      return;\n    }\n\n    const response = ev.detail.response;\n\n    this._errors =\n      typeof response.body === \"object\"\n        ? response.body.message || \"Unknown error\"\n        : response.body;\n  }\n\n  private async _showHardware(): Promise<void> {\n    try {\n      const content = this._objectToMarkdown(\n        await fetchHassioHardwareInfo(this.hass)\n      );\n      showHassioMarkdownDialog(this, {\n        title: \"Hardware\",\n        content,\n      });\n    } catch (err) {\n      showHassioMarkdownDialog(this, {\n        title: \"Hardware\",\n        content: \"Error getting hardware info\",\n      });\n    }\n  }\n\n  private async _rebootHost(): Promise<void> {\n    const confirmed = await showConfirmationDialog(this, {\n      title: \"Reboot\",\n      text: \"Are you sure you want to reboot the host?\",\n      confirmText: \"reboot host\",\n      dismissText: \"no\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      await rebootHost(this.hass);\n    } catch (err) {\n      showAlertDialog(this, {\n        title: \"Failed to reboot\",\n        text: err.body.message,\n      });\n    }\n  }\n\n  private async _shutdownHost(): Promise<void> {\n    const confirmed = await showConfirmationDialog(this, {\n      title: \"Shutdown\",\n      text: \"Are you sure you want to shutdown the host?\",\n      confirmText: \"shutdown host\",\n      dismissText: \"no\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      await shutdownHost(this.hass);\n    } catch (err) {\n      showAlertDialog(this, {\n        title: \"Failed to shutdown\",\n        text: err.body.message,\n      });\n    }\n  }\n\n  private async _updateOS(): Promise<void> {\n    const confirmed = await showConfirmationDialog(this, {\n      title: \"Update\",\n      text: \"Are you sure you want to update the OS?\",\n      confirmText: \"update os\",\n      dismissText: \"no\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      await updateOS(this.hass);\n    } catch (err) {\n      showAlertDialog(this, {\n        title: \"Failed to update\",\n        text: err.body.message,\n      });\n    }\n  }\n\n  private _objectToMarkdown(obj, indent = \"\"): string {\n    let data = \"\";\n    Object.keys(obj).forEach((key) => {\n      if (typeof obj[key] !== \"object\") {\n        data += `${indent}- ${key}: ${obj[key]}\\n`;\n      } else {\n        data += `${indent}- ${key}:\\n`;\n        if (Array.isArray(obj[key])) {\n          if (obj[key].length) {\n            data +=\n              `${indent}    - ` + obj[key].join(`\\n${indent}    - `) + \"\\n\";\n          }\n        } else {\n          data += this._objectToMarkdown(obj[key], `    ${indent}`);\n        }\n      }\n    });\n\n    return data;\n  }\n\n  private async _changeHostnameClicked(): Promise<void> {\n    const curHostname: string = this.hostInfo.hostname;\n    const hostname = await showPromptDialog(this, {\n      title: \"Change hostname\",\n      inputLabel: \"Please enter a new hostname:\",\n      inputType: \"string\",\n      defaultValue: curHostname,\n    });\n\n    if (hostname && hostname !== curHostname) {\n      try {\n        await changeHostOptions(this.hass, { hostname });\n        this.hostInfo = await fetchHassioHostInfo(this.hass);\n      } catch (err) {\n        showAlertDialog(this, {\n          title: \"Setting hostname failed\",\n          text: err.body.message,\n        });\n      }\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-host-info\": HassioHostInfo;\n  }\n}\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-card/paper-card\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { fireEvent } from \"../../../src/common/dom/fire_event\";\nimport \"../../../src/components/buttons/ha-call-api-button\";\nimport {\n  HassioSupervisorInfo as HassioSupervisorInfoType,\n  setSupervisorOption,\n  SupervisorOptions,\n} from \"../../../src/data/hassio/supervisor\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../src/types\";\nimport { hassioStyle } from \"../resources/hassio-style\";\nimport { showConfirmationDialog } from \"../../../src/dialogs/generic/show-dialog-box\";\n\n@customElement(\"hassio-supervisor-info\")\nclass HassioSupervisorInfo extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public supervisorInfo!: HassioSupervisorInfoType;\n\n  @property() private _errors?: string;\n\n  public render(): TemplateResult | void {\n    return html`\n      <paper-card>\n        <div class=\"card-content\">\n          <h2>Supervisor</h2>\n          <table class=\"info\">\n            <tbody>\n              <tr>\n                <td>Version</td>\n                <td>${this.supervisorInfo.version}</td>\n              </tr>\n              <tr>\n                <td>Latest version</td>\n                <td>${this.supervisorInfo.version_latest}</td>\n              </tr>\n              ${this.supervisorInfo.channel !== \"stable\"\n                ? html`\n                    <tr>\n                      <td>Channel</td>\n                      <td>${this.supervisorInfo.channel}</td>\n                    </tr>\n                  `\n                : \"\"}\n            </tbody>\n          </table>\n          ${this._errors\n            ? html` <div class=\"errors\">Error: ${this._errors}</div> `\n            : \"\"}\n        </div>\n        <div class=\"card-actions\">\n          <ha-call-api-button .hass=${this.hass} path=\"hassio/supervisor/reload\"\n            >Reload</ha-call-api-button\n          >\n          ${this.supervisorInfo.version !== this.supervisorInfo.version_latest\n            ? html`\n                <ha-call-api-button\n                  .hass=${this.hass}\n                  path=\"hassio/supervisor/update\"\n                  >Update</ha-call-api-button\n                >\n              `\n            : \"\"}\n          ${this.supervisorInfo.channel === \"beta\"\n            ? html`\n                <ha-call-api-button\n                  .hass=${this.hass}\n                  path=\"hassio/supervisor/options\"\n                  .data=${{ channel: \"stable\" }}\n                  >Leave beta channel</ha-call-api-button\n                >\n              `\n            : \"\"}\n          ${this.supervisorInfo.channel === \"stable\"\n            ? html`\n                <mwc-button\n                  @click=${this._joinBeta}\n                  class=\"warning\"\n                  title=\"Get beta updates for Home Assistant (RCs), supervisor and host\"\n                  >Join beta channel</mwc-button\n                >\n              `\n            : \"\"}\n        </div>\n      </paper-card>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        paper-card {\n          height: 100%;\n          width: 100%;\n        }\n        .card-content {\n          color: var(--primary-text-color);\n          box-sizing: border-box;\n          height: calc(100% - 47px);\n        }\n        .info {\n          width: 100%;\n        }\n        .info td:nth-child(2) {\n          text-align: right;\n        }\n        .errors {\n          color: var(--google-red-500);\n          margin-top: 16px;\n        }\n      `,\n    ];\n  }\n\n  protected firstUpdated(): void {\n    this.addEventListener(\"hass-api-called\", (ev) => this._apiCalled(ev));\n  }\n\n  private _apiCalled(ev): void {\n    if (ev.detail.success) {\n      this._errors = undefined;\n      return;\n    }\n\n    const response = ev.detail.response;\n\n    this._errors =\n      typeof response.body === \"object\"\n        ? response.body.message || \"Unknown error\"\n        : response.body;\n  }\n\n  private async _joinBeta() {\n    const confirmed = await showConfirmationDialog(this, {\n      title: \"WARNING\",\n      text: html` Beta releases are for testers and early adopters and can\n        contain unstable code changes.\n        <br />\n        <b>\n          Make sure you have backups of your data before you activate this\n          feature.\n        </b>\n        <br /><br />\n        This includes beta releases for:\n        <li>Home Assistant Core</li>\n        <li>Home Assistant Supervisor</li>\n        <li>Home Assistant Operating System</li>\n        <br />\n        Do you want to join the beta channel?`,\n      confirmText: \"join beta\",\n      dismissText: \"no\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      const data: SupervisorOptions = { channel: \"beta\" };\n      await setSupervisorOption(this.hass, data);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"option\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err) {\n      this._errors = `Error joining beta channel, ${err.body?.message || err}`;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-supervisor-info\": HassioSupervisorInfo;\n  }\n}\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-card/paper-card\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../src/types\";\n\nimport { fetchHassioLogs } from \"../../../src/data/hassio/supervisor\";\n\nimport \"../components/hassio-ansi-to-html\";\nimport { hassioStyle } from \"../resources/hassio-style\";\nimport \"../../../src/layouts/loading-screen\";\n\ninterface LogProvider {\n  key: string;\n  name: string;\n}\n\nconst logProviders: LogProvider[] = [\n  {\n    key: \"supervisor\",\n    name: \"Supervisor\",\n  },\n  {\n    key: \"core\",\n    name: \"Core\",\n  },\n  {\n    key: \"host\",\n    name: \"Host\",\n  },\n  {\n    key: \"dns\",\n    name: \"DNS\",\n  },\n  {\n    key: \"audio\",\n    name: \"Audio\",\n  },\n  {\n    key: \"multicast\",\n    name: \"Multicast\",\n  },\n];\n\n@customElement(\"hassio-supervisor-log\")\nclass HassioSupervisorLog extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() private _error?: string;\n\n  @property() private _selectedLogProvider = \"supervisor\";\n\n  @property() private _content?: string;\n\n  public async connectedCallback(): Promise<void> {\n    super.connectedCallback();\n    await this._loadData();\n  }\n\n  public render(): TemplateResult | void {\n    return html`\n      <paper-card>\n        ${this._error ? html` <div class=\"errors\">${this._error}</div> ` : \"\"}\n        ${this.hass.userData?.showAdvanced\n          ? html`\n              <paper-dropdown-menu\n                label=\"Log provider\"\n                @iron-select=${this._setLogProvider}\n              >\n                <paper-listbox\n                  slot=\"dropdown-content\"\n                  attr-for-selected=\"provider\"\n                  .selected=${this._selectedLogProvider}\n                >\n                  ${logProviders.map((provider) => {\n                    return html`\n                      <paper-item provider=${provider.key}\n                        >${provider.name}</paper-item\n                      >\n                    `;\n                  })}\n                </paper-listbox>\n              </paper-dropdown-menu>\n            `\n          : \"\"}\n\n        <div class=\"card-content\" id=\"content\">\n          ${this._content\n            ? html`<hassio-ansi-to-html\n                .content=${this._content}\n              ></hassio-ansi-to-html>`\n            : html`<loading-screen></loading-screen>`}\n        </div>\n        <div class=\"card-actions\">\n          <mwc-button @click=${this._refresh}>Refresh</mwc-button>\n        </div>\n      </paper-card>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        paper-card {\n          width: 100%;\n        }\n        pre {\n          white-space: pre-wrap;\n        }\n        paper-dropdown-menu {\n          padding: 0 2%;\n          width: 96%;\n        }\n        .errors {\n          color: var(--google-red-500);\n          margin-bottom: 16px;\n        }\n        .card-content {\n          padding-top: 0px;\n        }\n      `,\n    ];\n  }\n\n  private async _setLogProvider(ev): Promise<void> {\n    const provider = ev.detail.item.getAttribute(\"provider\");\n    this._selectedLogProvider = provider;\n    await this._loadData();\n  }\n\n  private async _loadData(): Promise<void> {\n    this._error = undefined;\n    this._content = undefined;\n\n    try {\n      this._content = await fetchHassioLogs(\n        this.hass,\n        this._selectedLogProvider\n      );\n    } catch (err) {\n      this._error = `Failed to get supervisor logs, ${\n        err.body?.message || err\n      }`;\n    }\n  }\n\n  private async _refresh(): Promise<void> {\n    await this._loadData();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-supervisor-log\": HassioSupervisorLog;\n  }\n}\n","import \"@polymer/paper-menu-button/paper-menu-button\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport {\n  HassioHassOSInfo,\n  HassioHostInfo,\n} from \"../../../src/data/hassio/host\";\nimport { HassioSupervisorInfo } from \"../../../src/data/hassio/supervisor\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport \"../../../src/layouts/hass-tabs-subpage\";\nimport { HomeAssistant, Route } from \"../../../src/types\";\nimport { hassioStyle } from \"../resources/hassio-style\";\nimport \"./hassio-host-info\";\nimport \"./hassio-supervisor-info\";\nimport \"./hassio-supervisor-log\";\n\nimport { supervisorTabs } from \"../hassio-panel\";\n\n@customElement(\"hassio-system\")\nclass HassioSystem extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property() public supervisorInfo!: HassioSupervisorInfo;\n\n  @property() public hostInfo!: HassioHostInfo;\n\n  @property() public hassOsInfo!: HassioHassOSInfo;\n\n  public render(): TemplateResult | void {\n    return html`\n      <hass-tabs-subpage\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        hassio\n        main-page\n        .route=${this.route}\n        .tabs=${supervisorTabs}\n      >\n        <span slot=\"header\">System</span>\n        <div class=\"content\">\n          <h1>Information</h1>\n          <div class=\"card-group\">\n            <hassio-supervisor-info\n              .hass=${this.hass}\n              .supervisorInfo=${this.supervisorInfo}\n            ></hassio-supervisor-info>\n            <hassio-host-info\n              .hass=${this.hass}\n              .hostInfo=${this.hostInfo}\n              .hassOsInfo=${this.hassOsInfo}\n            ></hassio-host-info>\n          </div>\n          <h1>System log</h1>\n          <hassio-supervisor-log .hass=${this.hass}></hassio-supervisor-log>\n        </div>\n      </hass-tabs-subpage>\n    `;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        .content {\n          margin: 8px;\n          color: var(--primary-text-color);\n        }\n        .title {\n          margin-top: 24px;\n          color: var(--primary-text-color);\n          font-size: 2em;\n          padding-left: 8px;\n          margin-bottom: 8px;\n        }\n        hassio-supervisor-log {\n          width: 100%;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-system\": HassioSystem;\n  }\n}\n","import { customElement, property } from \"lit-element\";\nimport { HassioHassOSInfo, HassioHostInfo } from \"../../src/data/hassio/host\";\nimport {\n  HassioHomeAssistantInfo,\n  HassioSupervisorInfo,\n} from \"../../src/data/hassio/supervisor\";\nimport {\n  HassRouterPage,\n  RouterOptions,\n} from \"../../src/layouts/hass-router-page\";\nimport { HomeAssistant, Route } from \"../../src/types\";\nimport \"./addon-store/hassio-addon-store\";\n// Don't codesplit it, that way the dashboard always loads fast.\nimport \"./dashboard/hassio-dashboard\";\n// Don't codesplit the others, because it breaks the UI when pushed to a Pi\nimport \"./snapshots/hassio-snapshots\";\nimport \"./system/hassio-system\";\n\n@customElement(\"hassio-panel-router\")\nclass HassioPanelRouter extends HassRouterPage {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public supervisorInfo: HassioSupervisorInfo;\n\n  @property({ attribute: false }) public hostInfo: HassioHostInfo;\n\n  @property({ attribute: false }) public hassInfo: HassioHomeAssistantInfo;\n\n  @property({ attribute: false }) public hassOsInfo!: HassioHassOSInfo;\n\n  protected routerOptions: RouterOptions = {\n    routes: {\n      dashboard: {\n        tag: \"hassio-dashboard\",\n      },\n      store: {\n        tag: \"hassio-addon-store\",\n      },\n      snapshots: {\n        tag: \"hassio-snapshots\",\n      },\n      system: {\n        tag: \"hassio-system\",\n      },\n    },\n  };\n\n  protected updatePageEl(el) {\n    el.hass = this.hass;\n    el.route = this.route;\n    el.narrow = this.narrow;\n    el.supervisorInfo = this.supervisorInfo;\n    el.hostInfo = this.hostInfo;\n    el.hassInfo = this.hassInfo;\n    el.hassOsInfo = this.hassOsInfo;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-panel-router\": HassioPanelRouter;\n  }\n}\n","import {\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\n\nimport { HassioHassOSInfo, HassioHostInfo } from \"../../src/data/hassio/host\";\nimport {\n  HassioHomeAssistantInfo,\n  HassioSupervisorInfo,\n} from \"../../src/data/hassio/supervisor\";\nimport \"../../src/resources/ha-style\";\nimport { HomeAssistant, Route } from \"../../src/types\";\nimport \"./hassio-panel-router\";\nimport type { PageNavigation } from \"../../src/layouts/hass-tabs-subpage\";\n\nexport const supervisorTabs: PageNavigation[] = [\n  {\n    name: \"Dashboard\",\n    path: `/hassio/dashboard`,\n    icon: \"hassio:view-dashboard\",\n  },\n  {\n    name: \"Add-on store\",\n    path: `/hassio/store`,\n    icon: \"hassio:store\",\n  },\n  {\n    name: \"Snapshots\",\n    path: `/hassio/snapshots`,\n    icon: \"hassio:backup-restore\",\n  },\n  {\n    name: \"System\",\n    path: `/hassio/system`,\n    icon: \"hassio:cogs\",\n  },\n];\n\n@customElement(\"hassio-panel\")\nclass HassioPanel extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ attribute: false }) public supervisorInfo!: HassioSupervisorInfo;\n\n  @property({ attribute: false }) public hostInfo!: HassioHostInfo;\n\n  @property({ attribute: false }) public hassInfo!: HassioHomeAssistantInfo;\n\n  @property({ attribute: false }) public hassOsInfo!: HassioHassOSInfo;\n\n  protected render(): TemplateResult {\n    return html`\n      <hassio-panel-router\n        .route=${this.route}\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .supervisorInfo=${this.supervisorInfo}\n        .hostInfo=${this.hostInfo}\n        .hassInfo=${this.hassInfo}\n        .hassOsInfo=${this.hassOsInfo}\n      ></hassio-panel-router>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-panel\": HassioPanel;\n  }\n}\n","import \"../../src/components/ha-icon-button\";\nimport { PolymerElement } from \"@polymer/polymer\";\nimport { customElement, property, PropertyValues } from \"lit-element\";\nimport { applyThemesOnElement } from \"../../src/common/dom/apply_themes_on_element\";\nimport { fireEvent } from \"../../src/common/dom/fire_event\";\nimport { navigate } from \"../../src/common/navigate\";\nimport { fetchHassioAddonInfo } from \"../../src/data/hassio/addon\";\nimport {\n  fetchHassioHassOsInfo,\n  fetchHassioHostInfo,\n  HassioHassOSInfo,\n  HassioHostInfo,\n} from \"../../src/data/hassio/host\";\nimport {\n  createHassioSession,\n  fetchHassioHomeAssistantInfo,\n  fetchHassioSupervisorInfo,\n  HassioHomeAssistantInfo,\n  HassioPanelInfo,\n  HassioSupervisorInfo,\n} from \"../../src/data/hassio/supervisor\";\nimport {\n  AlertDialogParams,\n  showAlertDialog,\n} from \"../../src/dialogs/generic/show-dialog-box\";\nimport { makeDialogManager } from \"../../src/dialogs/make-dialog-manager\";\nimport {\n  HassRouterPage,\n  RouterOptions,\n} from \"../../src/layouts/hass-router-page\";\nimport { ProvideHassLitMixin } from \"../../src/mixins/provide-hass-lit-mixin\";\nimport \"../../src/resources/ha-style\";\nimport { HomeAssistant } from \"../../src/types\";\n// Don't codesplit it, that way the dashboard always loads fast.\nimport \"./hassio-panel\";\n\n// The register callback of the IronA11yKeysBehavior inside ha-icon-button\n// is not called, causing _keyBindings to be uninitiliazed for ha-icon-button,\n// causing an exception when added to DOM. When transpiled to ES5, this will\n// break the build.\ncustomElements.get(\"ha-icon-button\").prototype._keyBindings = {};\n\n@customElement(\"hassio-main\")\nclass HassioMain extends ProvideHassLitMixin(HassRouterPage) {\n  @property() public hass!: HomeAssistant;\n\n  @property() public panel!: HassioPanelInfo;\n\n  @property() public narrow!: boolean;\n\n  protected routerOptions: RouterOptions = {\n    // Hass.io has a page with tabs, so we route all non-matching routes to it.\n    defaultPage: \"dashboard\",\n    initialLoad: () => this._fetchData(),\n    showLoading: true,\n    routes: {\n      dashboard: {\n        tag: \"hassio-panel\",\n        cache: true,\n      },\n      snapshots: \"dashboard\",\n      store: \"dashboard\",\n      system: \"dashboard\",\n      addon: {\n        tag: \"hassio-addon-dashboard\",\n        load: () =>\n          import(\n            /* webpackChunkName: \"hassio-addon-dashboard\" */ \"./addon-view/hassio-addon-dashboard\"\n          ),\n      },\n      ingress: {\n        tag: \"hassio-ingress-view\",\n        load: () =>\n          import(\n            /* webpackChunkName: \"hassio-ingress-view\" */ \"./ingress-view/hassio-ingress-view\"\n          ),\n      },\n    },\n  };\n\n  @property() private _supervisorInfo: HassioSupervisorInfo;\n\n  @property() private _hostInfo: HassioHostInfo;\n\n  @property() private _hassOsInfo?: HassioHassOSInfo;\n\n  @property() private _hassInfo: HassioHomeAssistantInfo;\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n\n    applyThemesOnElement(\n      this.parentElement,\n      this.hass.themes,\n      this.hass.selectedTheme || this.hass.themes.default_theme\n    );\n\n    this.style.setProperty(\n      \"--app-header-background-color\",\n      \"var(--sidebar-background-color)\"\n    );\n    this.style.setProperty(\n      \"--app-header-text-color\",\n      \"var(--sidebar-text-color)\"\n    );\n    this.style.setProperty(\n      \"--app-header-border-bottom\",\n      \"1px solid var(--divider-color)\"\n    );\n\n    this.addEventListener(\"hass-api-called\", (ev) => this._apiCalled(ev));\n    // Paulus - March 17, 2019\n    // We went to a single hass-toggle-menu event in HA 0.90. However, the\n    // supervisor UI can also run under older versions of Home Assistant.\n    // So here we are going to translate toggle events into the appropriate\n    // open and close events. These events are a no-op in newer versions of\n    // Home Assistant.\n    this.addEventListener(\"hass-toggle-menu\", () => {\n      fireEvent(\n        (window.parent as any).customPanel,\n        // @ts-ignore\n        this.hass.dockedSidebar ? \"hass-close-menu\" : \"hass-open-menu\"\n      );\n    });\n    // Paulus - March 19, 2019\n    // We changed the navigate event to fire directly on the window, as that's\n    // where we are listening for it. However, the older panel_custom will\n    // listen on this element for navigation events, so we need to forward them.\n    window.addEventListener(\"location-changed\", (ev) =>\n      // @ts-ignore\n      fireEvent(this, ev.type, ev.detail, {\n        bubbles: false,\n      })\n    );\n\n    // Forward haptic events to parent window.\n    window.addEventListener(\"haptic\", (ev) => {\n      // @ts-ignore\n      fireEvent(window.parent, ev.type, ev.detail, {\n        bubbles: false,\n      });\n    });\n\n    makeDialogManager(this, document.body);\n  }\n\n  protected updatePageEl(el) {\n    // the tabs page does its own routing so needs full route.\n    const route = el.nodeName === \"HASSIO-PANEL\" ? this.route : this.routeTail;\n\n    if (\"setProperties\" in el) {\n      // As long as we have Polymer pages\n      (el as PolymerElement).setProperties({\n        hass: this.hass,\n        narrow: this.narrow,\n        supervisorInfo: this._supervisorInfo,\n        hostInfo: this._hostInfo,\n        hassInfo: this._hassInfo,\n        hassOsInfo: this._hassOsInfo,\n        route,\n      });\n    } else {\n      el.hass = this.hass;\n      el.narrow = this.narrow;\n      el.supervisorInfo = this._supervisorInfo;\n      el.hostInfo = this._hostInfo;\n      el.hassInfo = this._hassInfo;\n      el.hassOsInfo = this._hassOsInfo;\n      el.route = route;\n    }\n  }\n\n  private async _fetchData() {\n    if (this.panel.config && this.panel.config.ingress) {\n      await this._redirectIngress(this.panel.config.ingress);\n      return;\n    }\n\n    const [supervisorInfo, hostInfo, hassInfo] = await Promise.all([\n      fetchHassioSupervisorInfo(this.hass),\n      fetchHassioHostInfo(this.hass),\n      fetchHassioHomeAssistantInfo(this.hass),\n    ]);\n    this._supervisorInfo = supervisorInfo;\n    this._hostInfo = hostInfo;\n    this._hassInfo = hassInfo;\n\n    if (this._hostInfo.features && this._hostInfo.features.includes(\"hassos\")) {\n      this._hassOsInfo = await fetchHassioHassOsInfo(this.hass);\n    }\n  }\n\n  private async _redirectIngress(addonSlug: string) {\n    // When we trigger a navigation, we sleep to make sure we don't\n    // show the hassio dashboard before navigating away.\n    const awaitAlert = async (\n      alertParams: AlertDialogParams,\n      action: () => void\n    ) => {\n      await new Promise((resolve) => {\n        alertParams.confirm = resolve;\n        showAlertDialog(this, alertParams);\n      });\n      action();\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n    };\n\n    const createSessionPromise = createHassioSession(this.hass).then(\n      () => true,\n      () => false\n    );\n\n    let addon;\n\n    try {\n      addon = await fetchHassioAddonInfo(this.hass, addonSlug);\n    } catch (err) {\n      await awaitAlert(\n        {\n          text: \"Unable to fetch add-on info to start Ingress\",\n          title: \"Supervisor\",\n        },\n        () => history.back()\n      );\n\n      return;\n    }\n\n    if (!addon.ingress_url) {\n      await awaitAlert(\n        {\n          text: \"Add-on does not support Ingress\",\n          title: addon.name,\n        },\n        () => history.back()\n      );\n\n      return;\n    }\n\n    if (addon.state !== \"started\") {\n      await awaitAlert(\n        {\n          text: \"Add-on is not running. Please start it first\",\n          title: addon.name,\n        },\n        () => navigate(this, `/hassio/addon/${addon.slug}/info`, true)\n      );\n\n      return;\n    }\n\n    if (!(await createSessionPromise)) {\n      await awaitAlert(\n        {\n          text: \"Unable to create an Ingress session\",\n          title: addon.name,\n        },\n        () => history.back()\n      );\n\n      return;\n    }\n\n    location.assign(addon.ingress_url);\n    // await a promise that doesn't resolve, so we show the loading screen\n    // while we load the next page.\n    await new Promise(() => undefined);\n  }\n\n  private _apiCalled(ev) {\n    if (!ev.detail.success) {\n      return;\n    }\n\n    let tries = 1;\n\n    const tryUpdate = () => {\n      this._fetchData().catch(() => {\n        tries += 1;\n        setTimeout(tryUpdate, Math.min(tries, 5) * 1000);\n      });\n    };\n\n    tryUpdate();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-main\": HassioMain;\n  }\n}\n","import { PropertyValues, UpdatingElement } from \"lit-element\";\nimport { Constructor, HomeAssistant } from \"../types\";\n\nexport interface ProvideHassElement {\n  provideHass(element: HTMLElement);\n}\n\nexport const ProvideHassLitMixin = <T extends Constructor<UpdatingElement>>(\n  superClass: T\n) =>\n  class extends superClass {\n    protected hass!: HomeAssistant;\n\n    private __provideHass: HTMLElement[] = [];\n\n    public provideHass(el) {\n      this.__provideHass.push(el);\n      el.hass = this.hass;\n    }\n\n    protected updated(changedProps: PropertyValues) {\n      super.updated(changedProps);\n\n      if (changedProps.has(\"hass\")) {\n        this.__provideHass.forEach((el) => {\n          (el as any).hass = this.hass;\n        });\n      }\n    }\n  };\n","import {\n  css,\n  CSSResult,\n  customElement,\n  LitElement,\n  property,\n  svg,\n  SVGTemplateResult,\n} from \"lit-element\";\n\n@customElement(\"ha-svg-icon\")\nexport class HaSvgIcon extends LitElement {\n  @property() public path?: string;\n\n  protected render(): SVGTemplateResult {\n    return svg`\n    <svg \n      viewBox=\"0 0 24 24\" \n      preserveAspectRatio=\"xMidYMid meet\"\n      focusable=\"false\">\n      <g>\n      ${this.path ? svg`<path d=${this.path}></path>` : \"\"}\n      </g>\n    </svg>`;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: var(--ha-icon-display, inline-flex);\n        align-items: center;\n        justify-content: center;\n        position: relative;\n        vertical-align: middle;\n        fill: currentcolor;\n        width: var(--mdc-icon-size, 24px);\n        height: var(--mdc-icon-size, 24px);\n      }\n      svg {\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        display: block;\n      }\n    `;\n  }\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-svg-icon\": HaSvgIcon;\n  }\n}\n","import * as iconMetadata_ from \"../../build/mdi/iconMetadata.json\";\nimport { IconMetaFile } from \"../types.js\";\n\nexport const iconMetadata = (iconMetadata_ as any).default as IconMetaFile;\n","import \"@polymer/iron-icon/iron-icon\";\nimport { get, set, clear, Store } from \"idb-keyval\";\nimport {\n  customElement,\n  LitElement,\n  property,\n  PropertyValues,\n  html,\n  TemplateResult,\n  css,\n  CSSResult,\n} from \"lit-element\";\nimport \"./ha-svg-icon\";\nimport { debounce } from \"../common/util/debounce\";\nimport { iconMetadata } from \"../resources/icon-metadata\";\nimport { IconMeta } from \"../types\";\n\ninterface Icons {\n  [key: string]: string;\n}\n\ninterface Chunks {\n  [key: string]: Promise<Icons>;\n}\n\nconst iconStore = new Store(\"hass-icon-db\", \"mdi-icon-store\");\n\nget(\"_version\", iconStore).then((version) => {\n  if (!version) {\n    set(\"_version\", iconMetadata.version, iconStore);\n  } else if (version !== iconMetadata.version) {\n    clear(iconStore).then(() =>\n      set(\"_version\", iconMetadata.version, iconStore)\n    );\n  }\n});\n\nconst chunks: Chunks = {};\nconst MDI_PREFIXES = [\"mdi\", \"hass\", \"hassio\", \"hademo\"];\n\nlet toRead: Array<[string, (string) => void]> = [];\n\n// Queue up as many icon fetches in 1 transaction\nconst getIcon = (iconName: string) =>\n  new Promise<string>((resolve) => {\n    toRead.push([iconName, resolve]);\n\n    if (toRead.length > 1) {\n      return;\n    }\n\n    const results: Array<[(string) => void, IDBRequest]> = [];\n\n    iconStore\n      ._withIDBStore(\"readonly\", (store) => {\n        for (const [iconName_, resolve_] of toRead) {\n          results.push([resolve_, store.get(iconName_)]);\n        }\n        toRead = [];\n      })\n      .then(() => {\n        for (const [resolve_, request] of results) {\n          resolve_(request.result);\n        }\n      });\n  });\n\nconst findIconChunk = (icon): string => {\n  let lastChunk: IconMeta;\n  for (const chunk of iconMetadata.parts) {\n    if (chunk.start !== undefined && icon < chunk.start) {\n      break;\n    }\n    lastChunk = chunk;\n  }\n  return lastChunk!.file;\n};\n\nconst debouncedWriteCache = debounce(async () => {\n  const keys = Object.keys(chunks);\n  const iconsSets: Icons[] = await Promise.all(Object.values(chunks));\n  // We do a batch opening the store just once, for (considerable) performance\n  iconStore._withIDBStore(\"readwrite\", (store) => {\n    iconsSets.forEach((icons, idx) => {\n      Object.entries(icons).forEach(([name, path]) => {\n        store.put(path, name);\n      });\n      delete chunks[keys[idx]];\n    });\n  });\n}, 2000);\n\n@customElement(\"ha-icon\")\nexport class HaIcon extends LitElement {\n  @property() public icon?: string;\n\n  @property() private _path?: string;\n\n  @property() private _noMdi = false;\n\n  protected updated(changedProps: PropertyValues) {\n    if (changedProps.has(\"icon\")) {\n      this._path = undefined;\n      this._loadIcon();\n    }\n  }\n\n  protected render(): TemplateResult {\n    if (!this.icon) {\n      return html``;\n    }\n    if (this._noMdi) {\n      return html`<iron-icon .icon=${this.icon}></iron-icon>`;\n    }\n    return html`<ha-svg-icon .path=${this._path}></ha-svg-icon>`;\n  }\n\n  private async _loadIcon() {\n    if (!this.icon) {\n      return;\n    }\n    const icon = this.icon.split(\":\", 2);\n    if (!MDI_PREFIXES.includes(icon[0])) {\n      this._noMdi = true;\n      return;\n    }\n\n    this._noMdi = false;\n\n    const iconName = icon[1];\n    const cachedPath: string = await getIcon(iconName);\n    if (cachedPath) {\n      this._path = cachedPath;\n      return;\n    }\n    const chunk = findIconChunk(iconName);\n\n    if (chunk in chunks) {\n      this._setPath(chunks[chunk], iconName);\n      return;\n    }\n    const iconPromise = fetch(`/static/mdi/${chunk}.json`).then((response) =>\n      response.json()\n    );\n    chunks[chunk] = iconPromise;\n    this._setPath(iconPromise, iconName);\n    debouncedWriteCache();\n  }\n\n  private async _setPath(promise: Promise<Icons>, iconName: string) {\n    const iconPack = await promise;\n    this._path = iconPack[iconName];\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        fill: currentcolor;\n      }\n    `;\n  }\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// eslint-disable-next-line: ban-types\nexport const debounce = <T extends Function>(\n  func: T,\n  wait,\n  immediate = false\n): T => {\n  let timeout;\n  // @ts-ignore\n  return function (...args) {\n    // @ts-ignore\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\n","import { fireEvent } from \"./dom/fire_event\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"location-changed\": {\n      replace: boolean;\n    };\n  }\n}\n\nexport const navigate = (_node: any, path: string, replace = false) => {\n  if (__DEMO__) {\n    if (replace) {\n      history.replaceState(null, \"\", `${location.pathname}#${path}`);\n    } else {\n      window.location.hash = path;\n    }\n  } else if (replace) {\n    history.replaceState(null, \"\", path);\n  } else {\n    history.pushState(null, \"\", path);\n  }\n  fireEvent(window, \"location-changed\", {\n    replace,\n  });\n};\n","import { TemplateResult } from \"lit-html\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\ninterface BaseDialogParams {\n  confirmText?: string;\n  text?: string | TemplateResult;\n  title?: string;\n}\n\nexport interface AlertDialogParams extends BaseDialogParams {\n  confirm?: () => void;\n}\n\nexport interface ConfirmationDialogParams extends BaseDialogParams {\n  dismissText?: string;\n  confirm?: () => void;\n  cancel?: () => void;\n}\n\nexport interface PromptDialogParams extends BaseDialogParams {\n  inputLabel?: string;\n  inputType?: string;\n  defaultValue?: string;\n  confirm?: (out?: string) => void;\n}\n\nexport interface DialogParams\n  extends ConfirmationDialogParams,\n    PromptDialogParams {\n  confirm?: (out?: string) => void;\n  confirmation?: boolean;\n  prompt?: boolean;\n}\n\nexport const loadGenericDialog = () =>\n  import(/* webpackChunkName: \"confirmation\" */ \"./dialog-box\");\n\nconst showDialogHelper = (\n  element: HTMLElement,\n  dialogParams: DialogParams,\n  extra?: {\n    confirmation?: DialogParams[\"confirmation\"];\n    prompt?: DialogParams[\"prompt\"];\n  }\n) =>\n  new Promise((resolve) => {\n    const origCancel = dialogParams.cancel;\n    const origConfirm = dialogParams.confirm;\n\n    fireEvent(element, \"show-dialog\", {\n      dialogTag: \"dialog-box\",\n      dialogImport: loadGenericDialog,\n      dialogParams: {\n        ...dialogParams,\n        ...extra,\n        cancel: () => {\n          resolve(extra?.prompt ? null : false);\n          if (origCancel) {\n            origCancel();\n          }\n        },\n        confirm: (out) => {\n          resolve(extra?.prompt ? out : true);\n          if (origConfirm) {\n            origConfirm(out);\n          }\n        },\n      },\n    });\n  });\n\nexport const showAlertDialog = (\n  element: HTMLElement,\n  dialogParams: AlertDialogParams\n) => showDialogHelper(element, dialogParams);\n\nexport const showConfirmationDialog = (\n  element: HTMLElement,\n  dialogParams: ConfirmationDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { confirmation: true }) as Promise<\n    boolean\n  >;\n\nexport const showPromptDialog = (\n  element: HTMLElement,\n  dialogParams: PromptDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { prompt: true }) as Promise<\n    null | string\n  >;\n","export interface HassioResponse<T> {\n  data: T;\n  result: \"ok\";\n}\n\nexport const hassioApiResultExtractor = <T>(response: HassioResponse<T>) =>\n  response.data;\n","import { HomeAssistant, PanelInfo } from \"../../types\";\nimport { hassioApiResultExtractor, HassioResponse } from \"./common\";\n\nexport type HassioHomeAssistantInfo = any;\nexport type HassioSupervisorInfo = any;\n\nexport type HassioPanelInfo = PanelInfo<\n  | undefined\n  | {\n      ingress?: string;\n    }\n>;\n\nexport interface CreateSessionResponse {\n  session: string;\n}\n\nexport interface SupervisorOptions {\n  channel?: \"beta\" | \"dev\" | \"stable\";\n  addons_repositories?: string[];\n}\n\nexport const fetchHassioHomeAssistantInfo = async (hass: HomeAssistant) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioHomeAssistantInfo>>(\n      \"GET\",\n      \"hassio/core/info\"\n    )\n  );\n};\n\nexport const fetchHassioSupervisorInfo = async (hass: HomeAssistant) => {\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioSupervisorInfo>>(\n      \"GET\",\n      \"hassio/supervisor/info\"\n    )\n  );\n};\n\nexport const fetchHassioLogs = async (\n  hass: HomeAssistant,\n  provider: string\n) => {\n  return hass.callApi<string>(\"GET\", `hassio/${provider}/logs`);\n};\n\nexport const createHassioSession = async (hass: HomeAssistant) => {\n  const response = await hass.callApi<HassioResponse<CreateSessionResponse>>(\n    \"POST\",\n    \"hassio/ingress/session\"\n  );\n  document.cookie = `ingress_session=${response.data.session};path=/api/hassio_ingress/`;\n};\n\nexport const setSupervisorOption = async (\n  hass: HomeAssistant,\n  data: SupervisorOptions\n) => {\n  await hass.callApi<HassioResponse<void>>(\n    \"POST\",\n    \"hassio/supervisor/options\",\n    data\n  );\n};\n","import { LocalizeFunc } from \"../translations/localize\";\n\n/**\n * Calculate a string representing a date object as relative time from now.\n *\n * Example output: 5 minutes ago, in 3 days.\n */\nconst tests = [60, 60, 24, 7];\nconst langKey = [\"second\", \"minute\", \"hour\", \"day\"];\n\nexport default function relativeTime(\n  dateObj: Date,\n  localize: LocalizeFunc,\n  options: {\n    compareTime?: Date;\n    includeTense?: boolean;\n  } = {}\n): string {\n  const compareTime = options.compareTime || new Date();\n  let delta = (compareTime.getTime() - dateObj.getTime()) / 1000;\n  const tense = delta >= 0 ? \"past\" : \"future\";\n  delta = Math.abs(delta);\n\n  let timeDesc;\n\n  for (let i = 0; i < tests.length; i++) {\n    if (delta < tests[i]) {\n      delta = Math.floor(delta);\n      timeDesc = localize(\n        `ui.components.relative_time.duration.${langKey[i]}`,\n        \"count\",\n        delta\n      );\n      break;\n    }\n\n    delta /= tests[i];\n  }\n\n  if (timeDesc === undefined) {\n    delta = Math.floor(delta);\n    timeDesc = localize(\n      \"ui.components.relative_time.duration.week\",\n      \"count\",\n      delta\n    );\n  }\n\n  return options.includeTense === false\n    ? timeDesc\n    : localize(`ui.components.relative_time.${tense}`, \"time\", timeDesc);\n}\n","import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n/**\n * Polymer Mixin to enable a localize function powered by language/resources from hass object.\n *\n * @polymerMixin\n */\nexport default dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      static get properties() {\n        return {\n          hass: Object,\n\n          /**\n           * Translates a string to the current `language`. Any parameters to the\n           * string should be passed in order, as follows:\n           * `localize(stringKey, param1Name, param1Value, param2Name, param2Value)`\n           */\n          localize: {\n            type: Function,\n            computed: \"__computeLocalize(hass.localize)\",\n          },\n        };\n      }\n\n      __computeLocalize(localize) {\n        return localize;\n      }\n    }\n);\n","import { dom } from \"@polymer/polymer/lib/legacy/polymer.dom\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport relativeTime from \"../common/datetime/relative_time\";\nimport LocalizeMixin from \"../mixins/localize-mixin\";\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaRelativeTime extends LocalizeMixin(PolymerElement) {\n  static get properties() {\n    return {\n      hass: Object,\n      datetime: {\n        type: String,\n        observer: \"datetimeChanged\",\n      },\n\n      datetimeObj: {\n        type: Object,\n        observer: \"datetimeObjChanged\",\n      },\n\n      parsedDateTime: Object,\n    };\n  }\n\n  constructor() {\n    super();\n    this.updateRelative = this.updateRelative.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // update every 60 seconds\n    this.updateInterval = setInterval(this.updateRelative, 60000);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    clearInterval(this.updateInterval);\n  }\n\n  datetimeChanged(newVal) {\n    this.parsedDateTime = newVal ? new Date(newVal) : null;\n\n    this.updateRelative();\n  }\n\n  datetimeObjChanged(newVal) {\n    this.parsedDateTime = newVal;\n\n    this.updateRelative();\n  }\n\n  updateRelative() {\n    const root = dom(this);\n    if (!this.parsedDateTime) {\n      root.innerHTML = this.localize(\"ui.components.relative_time.never\");\n    } else {\n      root.innerHTML = relativeTime(this.parsedDateTime, this.localize);\n    }\n  }\n}\n\ncustomElements.define(\"ha-relative-time\", HaRelativeTime);\n","import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport \"../../../src/components/ha-relative-time\";\nimport \"../../../src/components/ha-icon\";\nimport { HomeAssistant } from \"../../../src/types\";\n\n@customElement(\"hassio-card-content\")\nclass HassioCardContent extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public title!: string;\n\n  @property() public description?: string;\n\n  @property({ type: Boolean }) public available = true;\n\n  @property({ type: Boolean }) public showTopbar = false;\n\n  @property() public topbarClass?: string;\n\n  @property() public datetime?: string;\n\n  @property() public iconTitle?: string;\n\n  @property() public iconClass?: string;\n\n  @property() public icon = \"hass:help-circle\";\n\n  @property() public iconImage?: string;\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.showTopbar\n        ? html` <div class=\"topbar ${this.topbarClass}\"></div> `\n        : \"\"}\n      ${this.iconImage\n        ? html`\n            <div class=\"icon_image ${this.iconClass}\">\n              <img src=\"${this.iconImage}\" title=\"${this.iconTitle}\" />\n              <div></div>\n            </div>\n          `\n        : html`\n            <ha-icon\n              class=${this.iconClass}\n              .icon=${this.icon}\n              .title=${this.iconTitle}\n            ></ha-icon>\n          `}\n      <div>\n        <div class=\"title\">\n          ${this.title}\n        </div>\n        <div class=\"addition\">\n          ${this.description}\n          ${/* treat as available when undefined */\n          this.available === false ? \" (Not available)\" : \"\"}\n          ${this.datetime\n            ? html`\n                <ha-relative-time\n                  .hass=${this.hass}\n                  class=\"addition\"\n                  .datetime=${this.datetime}\n                ></ha-relative-time>\n              `\n            : undefined}\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      ha-icon {\n        margin-right: 24px;\n        margin-left: 8px;\n        margin-top: 12px;\n        float: left;\n        color: var(--secondary-text-color);\n      }\n      ha-icon.update {\n        color: var(--paper-orange-400);\n      }\n      ha-icon.running,\n      ha-icon.installed {\n        color: var(--paper-green-400);\n      }\n      ha-icon.hassupdate,\n      ha-icon.snapshot {\n        color: var(--paper-item-icon-color);\n      }\n      ha-icon.not_available {\n        color: var(--google-red-500);\n      }\n      .title {\n        color: var(--primary-text-color);\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      .addition {\n        color: var(--secondary-text-color);\n        overflow: hidden;\n        position: relative;\n        height: 2.4em;\n        line-height: 1.2em;\n      }\n      ha-relative-time {\n        display: block;\n      }\n      .icon_image img {\n        max-height: 40px;\n        max-width: 40px;\n        margin-top: 4px;\n        margin-right: 16px;\n        float: left;\n      }\n      .icon_image.stopped,\n      .icon_image.not_available {\n        filter: grayscale(1);\n      }\n      .dot {\n        position: absolute;\n        background-color: var(--paper-orange-400);\n        width: 12px;\n        height: 12px;\n        top: 8px;\n        right: 8px;\n        border-radius: 50%;\n      }\n      .topbar {\n        position: absolute;\n        width: 100%;\n        height: 2px;\n        top: 0;\n        left: 0;\n        border-top-left-radius: 2px;\n        border-top-right-radius: 2px;\n      }\n      .topbar.installed {\n        background-color: var(--primary-color);\n      }\n      .topbar.update {\n        background-color: var(--accent-color);\n      }\n      .topbar.unavailable {\n        background-color: var(--error-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-card-content\": HassioCardContent;\n  }\n}\n","import \"@material/mwc-ripple\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  PropertyValues,\n  TemplateResult,\n} from \"lit-element\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport memoizeOne from \"memoize-one\";\nimport { isComponentLoaded } from \"../common/config/is_component_loaded\";\nimport { navigate } from \"../common/navigate\";\nimport \"../components/ha-menu-button\";\nimport \"../components/ha-icon-button-arrow-prev\";\nimport { HomeAssistant, Route } from \"../types\";\nimport \"../components/ha-icon\";\n\nexport interface PageNavigation {\n  path: string;\n  translationKey?: string;\n  component?: string;\n  name?: string;\n  core?: boolean;\n  advancedOnly?: boolean;\n  icon?: string;\n  info?: any;\n}\n\n@customElement(\"hass-tabs-subpage\")\nclass HassTabsSubpage extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property({ type: String, attribute: \"back-path\" }) public backPath?: string;\n\n  @property() public backCallback?: () => void;\n\n  @property({ type: Boolean }) public hassio = false;\n\n  @property({ type: Boolean, attribute: \"main-page\" }) public mainPage = false;\n\n  @property() public route!: Route;\n\n  @property() public tabs!: PageNavigation[];\n\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n\n  @property() private _activeTab?: PageNavigation;\n\n  private _getTabs = memoizeOne(\n    (\n      tabs: PageNavigation[],\n      activeTab: PageNavigation | undefined,\n      showAdvanced: boolean | undefined,\n      _components,\n      _language,\n      _narrow\n    ) => {\n      const shownTabs = tabs.filter(\n        (page) =>\n          (!page.component ||\n            page.core ||\n            isComponentLoaded(this.hass, page.component)) &&\n          (!page.advancedOnly || showAdvanced)\n      );\n\n      return shownTabs.map(\n        (page) =>\n          html`\n            <div\n              class=\"tab ${classMap({\n                active: page === activeTab,\n              })}\"\n              @click=${this._tabTapped}\n              .path=${page.path}\n            >\n              ${this.narrow\n                ? html` <ha-icon .icon=${page.icon}></ha-icon> `\n                : \"\"}\n              ${!this.narrow || page === activeTab\n                ? html`\n                    <span class=\"name\"\n                      >${page.translationKey\n                        ? this.hass.localize(page.translationKey)\n                        : page.name}</span\n                    >\n                  `\n                : \"\"}\n              <mwc-ripple></mwc-ripple>\n            </div>\n          `\n      );\n    }\n  );\n\n  protected updated(changedProperties: PropertyValues) {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"route\")) {\n      this._activeTab = this.tabs.find((tab) =>\n        `${this.route.prefix}${this.route.path}`.includes(tab.path)\n      );\n    }\n  }\n\n  protected render(): TemplateResult {\n    const tabs = this._getTabs(\n      this.tabs,\n      this._activeTab,\n      this.hass.userData?.showAdvanced,\n      this.hass.config.components,\n      this.hass.language,\n      this.narrow\n    );\n\n    return html`\n      <div class=\"toolbar\">\n        ${this.mainPage\n          ? html`\n              <ha-menu-button\n                .hass=${this.hass}\n                .hassio=${this.hassio}\n                .narrow=${this.narrow}\n              ></ha-menu-button>\n            `\n          : html`\n              <ha-icon-button-arrow-prev\n                aria-label=\"Back\"\n                @click=${this._backTapped}\n              ></ha-icon-button-arrow-prev>\n            `}\n        ${this.narrow\n          ? html` <div class=\"main-title\"><slot name=\"header\"></slot></div> `\n          : \"\"}\n        ${tabs.length > 1 || !this.narrow\n          ? html`\n              <div id=\"tabbar\" class=${classMap({ \"bottom-bar\": this.narrow })}>\n                ${tabs}\n              </div>\n            `\n          : \"\"}\n        <div id=\"toolbar-icon\">\n          <slot name=\"toolbar-icon\"></slot>\n        </div>\n      </div>\n      <div class=\"content\">\n        <slot></slot>\n      </div>\n    `;\n  }\n\n  private _tabTapped(ev: MouseEvent): void {\n    navigate(this, (ev.currentTarget as any).path, true);\n  }\n\n  private _backTapped(): void {\n    if (this.backPath) {\n      navigate(this, this.backPath);\n      return;\n    }\n    if (this.backCallback) {\n      this.backCallback();\n      return;\n    }\n    history.back();\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        height: 100%;\n        background-color: var(--primary-background-color);\n      }\n\n      .toolbar {\n        display: flex;\n        align-items: center;\n        font-size: 20px;\n        height: 65px;\n        background-color: var(--sidebar-background-color);\n        font-weight: 400;\n        color: var(--sidebar-text-color);\n        border-bottom: 1px solid var(--divider-color);\n        padding: 0 16px;\n        box-sizing: border-box;\n      }\n\n      #tabbar {\n        display: flex;\n        font-size: 14px;\n      }\n\n      #tabbar.bottom-bar {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        padding: 0 16px;\n        box-sizing: border-box;\n        background-color: var(--sidebar-background-color);\n        border-top: 1px solid var(--divider-color);\n        justify-content: space-between;\n        z-index: 1;\n        font-size: 12px;\n        width: 100%;\n      }\n\n      #tabbar:not(.bottom-bar) {\n        flex: 1;\n        justify-content: center;\n      }\n\n      .tab {\n        padding: 0 32px;\n        display: flex;\n        flex-direction: column;\n        text-align: center;\n        align-items: center;\n        justify-content: center;\n        height: 64px;\n        cursor: pointer;\n      }\n\n      .name {\n        white-space: nowrap;\n      }\n\n      .tab.active {\n        color: var(--primary-color);\n      }\n\n      #tabbar:not(.bottom-bar) .tab.active {\n        border-bottom: 2px solid var(--primary-color);\n      }\n\n      .bottom-bar .tab {\n        padding: 0 16px;\n        width: 20%;\n        min-width: 0;\n      }\n\n      :host(:not([narrow])) #toolbar-icon {\n        min-width: 40px;\n      }\n\n      ha-menu-button,\n      ha-icon-button-arrow-prev,\n      ::slotted([slot=\"toolbar-icon\"]) {\n        flex-shrink: 0;\n        pointer-events: auto;\n        color: var(--sidebar-icon-color);\n      }\n\n      .main-title {\n        flex: 1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-height: 40px;\n        line-height: 20px;\n      }\n\n      .content {\n        position: relative;\n        width: 100%;\n        height: calc(100% - 65px);\n        overflow-y: auto;\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      :host([narrow]) .content {\n        height: calc(100% - 128px);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hass-tabs-subpage\": HassTabsSubpage;\n  }\n}\n","import { HomeAssistant } from \"../../types\";\n\n/** Return if a component is loaded. */\nexport const isComponentLoaded = (\n  hass: HomeAssistant,\n  component: string\n): boolean => hass && hass.config.components.indexOf(component) !== -1;\n","import { html, LitElement } from \"lit-element\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"./ha-progress-button\";\n\nclass HaCallApiButton extends LitElement {\n  render() {\n    return html`\n      <ha-progress-button\n        .progress=\"${this.progress}\"\n        @click=\"${this._buttonTapped}\"\n        ?disabled=\"${this.disabled}\"\n        ><slot></slot\n      ></ha-progress-button>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.method = \"POST\";\n    this.data = {};\n    this.disabled = false;\n    this.progress = false;\n  }\n\n  static get properties() {\n    return {\n      hass: {},\n      progress: Boolean,\n      path: String,\n      method: String,\n      data: {},\n      disabled: Boolean,\n    };\n  }\n\n  get progressButton() {\n    return this.renderRoot.querySelector(\"ha-progress-button\");\n  }\n\n  async _buttonTapped() {\n    this.progress = true;\n    const eventData = {\n      method: this.method,\n      path: this.path,\n      data: this.data,\n    };\n\n    try {\n      const resp = await this.hass.callApi(this.method, this.path, this.data);\n      this.progress = false;\n      this.progressButton.actionSuccess();\n      eventData.success = true;\n      eventData.response = resp;\n    } catch (err) {\n      this.progress = false;\n      this.progressButton.actionError();\n      eventData.success = false;\n      eventData.response = err;\n    }\n\n    fireEvent(this, \"hass-api-called\", eventData);\n  }\n}\n\ncustomElements.define(\"ha-call-api-button\", HaCallApiButton);\n","import { HaIconButton } from \"./ha-icon-button\";\n\nexport class HaIconButtonArrowPrev extends HaIconButton {\n  public connectedCallback() {\n    super.connectedCallback();\n\n    // wait to check for direction since otherwise direction is wrong even though top level is RTL\n    setTimeout(() => {\n      this.icon =\n        window.getComputedStyle(this).direction === \"ltr\"\n          ? \"hass:arrow-left\"\n          : \"hass:arrow-right\";\n    }, 100);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon-button-arrow-prev\": HaIconButtonArrowPrev;\n  }\n}\n\ncustomElements.define(\"ha-icon-button-arrow-prev\", HaIconButtonArrowPrev);\n","import \"@polymer/paper-spinner/paper-spinner-lite\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  TemplateResult,\n} from \"lit-element\";\n\n@customElement(\"loading-screen\")\nclass LoadingScreen extends LitElement {\n  protected render(): TemplateResult {\n    return html` <paper-spinner-lite active></paper-spinner-lite> `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"loading-screen\": LoadingScreen;\n  }\n}\n","export const atLeastVersion = (\n  version: string,\n  major: number,\n  minor: number\n): boolean => {\n  const [haMajor, haMinor] = version.split(\".\", 2);\n  return (\n    Number(haMajor) > major ||\n    (Number(haMajor) === major && Number(haMinor) >= minor)\n  );\n};\n","import {\n  Connection,\n  createCollection,\n  HassEntity,\n} from \"home-assistant-js-websocket\";\n\nexport interface PersitentNotificationEntity extends HassEntity {\n  notification_id?: string;\n  created_at?: string;\n  title?: string;\n  message?: string;\n}\n\nexport interface PersistentNotification {\n  created_at: string;\n  message: string;\n  notification_id: string;\n  title: string;\n  status: \"read\" | \"unread\";\n}\n\nconst fetchNotifications = (conn) =>\n  conn.sendMessagePromise({\n    type: \"persistent_notification/get\",\n  });\n\nconst subscribeUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    () => fetchNotifications(conn).then((ntf) => store.setState(ntf, true)),\n    \"persistent_notifications_updated\"\n  );\n\nexport const subscribeNotifications = (\n  conn: Connection,\n  onChange: (notifications: PersistentNotification[]) => void\n) =>\n  createCollection<PersistentNotification[]>(\n    \"_ntf\",\n    fetchNotifications,\n    subscribeUpdates,\n    conn,\n    onChange\n  );\n","import { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { computeDomain } from \"../common/entity/compute_domain\";\nimport { subscribeNotifications } from \"../data/persistent_notification\";\nimport { HomeAssistant } from \"../types\";\nimport \"./ha-icon-button\";\n\n@customElement(\"ha-menu-button\")\nclass HaMenuButton extends LitElement {\n  @property({ type: Boolean }) public hassio = false;\n\n  @property() public narrow!: boolean;\n\n  @property() public hass!: HomeAssistant;\n\n  @property() private _hasNotifications = false;\n\n  private _alwaysVisible = false;\n\n  private _attachNotifOnConnect = false;\n\n  private _unsubNotifications?: UnsubscribeFunc;\n\n  public connectedCallback() {\n    super.connectedCallback();\n    if (this._attachNotifOnConnect) {\n      this._attachNotifOnConnect = false;\n      this._subscribeNotifications();\n    }\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsubNotifications) {\n      this._attachNotifOnConnect = true;\n      this._unsubNotifications();\n      this._unsubNotifications = undefined;\n    }\n  }\n\n  protected render(): TemplateResult {\n    const hasNotifications =\n      (this.narrow || this.hass.dockedSidebar === \"always_hidden\") &&\n      (this._hasNotifications ||\n        Object.keys(this.hass.states).some(\n          (entityId) => computeDomain(entityId) === \"configurator\"\n        ));\n    return html`\n      <ha-icon-button\n        aria-label=${this.hass.localize(\"ui.sidebar.sidebar_toggle\")}\n        icon=\"hass:menu\"\n        @click=${this._toggleMenu}\n      ></ha-icon-button>\n      ${hasNotifications ? html` <div class=\"dot\"></div> ` : \"\"}\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    if (!this.hassio) {\n      return;\n    }\n    // This component is used on Hass.io too, but Hass.io might run the UI\n    // on older frontends too, that don't have an always visible menu button\n    // in the sidebar.\n    this._alwaysVisible =\n      (Number((window.parent as any).frontendVersion) || 0) < 20190710;\n  }\n\n  protected updated(changedProps) {\n    super.updated(changedProps);\n\n    if (!changedProps.has(\"narrow\") && !changedProps.has(\"hass\")) {\n      return;\n    }\n\n    const oldHass = changedProps.get(\"hass\") as HomeAssistant | undefined;\n    const oldNarrow =\n      changedProps.get(\"narrow\") ||\n      (oldHass && oldHass.dockedSidebar === \"always_hidden\");\n    const newNarrow =\n      this.narrow || this.hass.dockedSidebar === \"always_hidden\";\n\n    if (oldNarrow === newNarrow) {\n      return;\n    }\n\n    this.style.visibility =\n      newNarrow || this._alwaysVisible ? \"initial\" : \"hidden\";\n\n    if (!newNarrow) {\n      this._hasNotifications = false;\n      if (this._unsubNotifications) {\n        this._unsubNotifications();\n        this._unsubNotifications = undefined;\n      }\n      return;\n    }\n\n    this._subscribeNotifications();\n  }\n\n  private _subscribeNotifications() {\n    this._unsubNotifications = subscribeNotifications(\n      this.hass.connection,\n      (notifications) => {\n        this._hasNotifications = notifications.length > 0;\n      }\n    );\n  }\n\n  private _toggleMenu(): void {\n    fireEvent(this, \"hass-toggle-menu\");\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        position: relative;\n      }\n      .dot {\n        pointer-events: none;\n        position: absolute;\n        background-color: var(--accent-color);\n        width: 12px;\n        height: 12px;\n        top: 5px;\n        right: 2px;\n        border-radius: 50%;\n        border: 2px solid var(--app-header-background-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-menu-button\": HaMenuButton;\n  }\n}\n","export const computeDomain = (entityId: string): string => {\n  return entityId.substr(0, entityId.indexOf(\".\"));\n};\n"],"sourceRoot":""}