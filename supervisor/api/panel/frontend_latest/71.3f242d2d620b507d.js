export const __rspack_esm_id="71";export const __rspack_esm_ids=["71"];export const __webpack_modules__={79(t,e,i){i.d(e,{xn:()=>n,T:()=>o});i(18111),i(22489),i(61701);var s=i(22786);i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var a=i(28978);const n=t=>(t.name_by_user||t.name)?.trim(),o=(t,e,i)=>n(t)||i&&r(e,i)||e.localize("ui.panel.config.devices.unnamed_device",{type:e.localize(`ui.panel.config.devices.type.${t.entry_type||"device"}`)}),r=(t,e)=>{for(const i of e||[]){const e="string"==typeof i?i:i.entity_id,s=t.states[e];if(s)return(0,a.u)(s)}};(0,s.A)(t=>function(t){const e=new Set,i=new Set;for(const s of t)i.has(s)?e.add(s):i.add(s);return e}(Object.values(t).map(t=>n(t)).filter(t=>void 0!==t)))},4358(t,e,i){i.d(e,{aH:()=>r});var s=i(79),a=i(28978);const n=[" ",": "," - "],o=t=>t.toLowerCase()!==t,r=(t,e,i)=>{const s=e[t.entity_id];return s?l(s,i):(0,a.u)(t)},l=(t,e,i)=>{const r=t.name||("original_name"in t&&null!=t.original_name?String(t.original_name):void 0),l=t.device_id?e[t.device_id]:void 0;if(!l)return r||(i?(0,a.u)(i):void 0);const d=(0,s.xn)(l);return d!==r?d&&r&&((t,e)=>{const i=t.toLowerCase(),s=e.toLowerCase();for(const e of n){const a=`${s}${e}`;if(i.startsWith(a)){const e=t.substring(a.length);if(e.length)return o(e.substr(0,e.indexOf(" ")))?e:e[0].toUpperCase()+e.slice(1)}}})(r,d)||r:void 0}},74705(t,e,i){i.d(e,{Cf:()=>l});i(18111),i(81148),i(22489),i(61701),i(13579);var s=i(65522),a=i(79),n=i(4358),o=i(55931),r=i(28455);const l=(t,e,i,l,d,c)=>{const{device:h,area:p,floor:u}=(0,r.l)(t,i,l,d,c);return e.map(e=>{switch(e.type){case"entity":return(0,n.aH)(t,i,l);case"device":return h?(0,a.xn)(h):void 0;case"area":return p?(0,s.A)(p):void 0;case"floor":return u?(0,o.X)(u):void 0;case"text":return e.text;default:return""}})}},68246(t,e,i){i.d(e,{Y:()=>s});const s=t=>t.slice(t.indexOf(".")+1)},28978(t,e,i){i.d(e,{u:()=>a});var s=i(68246);const a=t=>{return e=t.entity_id,void 0===(i=t.attributes).friendly_name?(0,s.Y)(e).replace(/_/g," "):(i.friendly_name??"").toString();var e,i}},78649(t,e,i){i.d(e,{n:()=>a});const s=/^(\w+)\.(\w+)$/,a=t=>s.test(t)},82474(t,e,i){i.a(t,async function(t,e){try{i(18111),i(61701);var s=i(62826),a=i(96196),n=i(77845),o=i(22786),r=i(1087),l=i(74705),d=i(78649),c=i(15638),h=i(53756),p=i(95350),u=i(24367),y=i(19711),m=(i(75064),i(38508)),g=(i(67094),i(74281)),v=t([m,g]);[m,g]=v.then?(await v)():v;const _="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",b="M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z",f="___create-new-entity___";class C extends a.WF{firstUpdated(t){super.firstUpdated(t),this.hass.loadBackendTranslation("title")}get _showEntityId(){return this.showEntityId||this.hass.userData?.showEntityIdPicker}render(){const t=this.placeholder??this.hass.localize("ui.components.entity.entity-picker.placeholder");return a.qy` <ha-generic-picker .hass="${this.hass}" .disabled="${this.disabled}" .autofocus="${this.autofocus}" .allowCustomValue="${this.allowCustomEntity}" .required="${this.required}" .label="${this.label}" .placeholder="${t}" .helper="${this.helper}" .value="${this.addButton?void 0:this.value}" .searchLabel="${this.searchLabel}" .notFoundLabel="${this._notFoundLabel}" .rowRenderer="${this._rowRenderer}" .getItems="${this._getItems}" .getAdditionalItems="${this._getAdditionalItems}" .hideClearIcon="${this.hideClearIcon}" .searchFn="${this._searchFn}" .valueRenderer="${this._valueRenderer}" .searchKeys="${h.t}" use-top-label .addButtonLabel="${this.addButton?this.hass.localize("ui.components.entity.entity-picker.add"):void 0}" .unknownItemText="${this.hass.localize("ui.components.entity.entity-picker.unknown")}" @value-changed="${this._valueChanged}"> </ha-generic-picker> `}async open(){await this.updateComplete,await(this._picker?.open())}_valueChanged(t){t.stopPropagation();const e=t.detail.value;if(e){if(e.startsWith(f)){const t=e.substring(f.length);return void(0,y.$)(this,{domain:t,dialogClosedCallback:t=>{t.entityId&&this._setValue(t.entityId)}})}(0,d.n)(e)&&this._setValue(e)}else this._setValue(void 0)}_setValue(t){this.value=t,(0,r.r)(this,"value-changed",{value:t}),(0,r.r)(this,"change")}constructor(...t){super(...t),this.autofocus=!1,this.disabled=!1,this.required=!1,this.showEntityId=!1,this.hideClearIcon=!1,this.addButton=!1,this._valueRenderer=t=>{const e=t||"",i=this.hass.states[e];if(!i)return a.qy` <ha-svg-icon slot="start" .path="${b}" style="margin:0 4px"></ha-svg-icon> <span slot="headline">${e}</span> `;const[s,n,o]=(0,l.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],this.hass.entities,this.hass.devices,this.hass.areas,this.hass.floors),r=(0,c.qC)(this.hass),d=s||n||e,h=[o,s?n:void 0].filter(Boolean).join(r?" ◂ ":" ▸ ");return a.qy` <state-badge .hass="${this.hass}" .stateObj="${i}" slot="start"></state-badge> <span slot="headline">${d}</span> <span slot="supporting-text">${h}</span> `},this._rowRenderer=(t,e)=>{const i=this._showEntityId;return a.qy` <ha-combo-box-item type="button" compact="compact" .borderTop="${0!==e}"> ${t.icon_path?a.qy` <ha-svg-icon slot="start" style="margin:0 4px" .path="${t.icon_path}"></ha-svg-icon> `:a.qy` <state-badge slot="start" .stateObj="${t.stateObj}" .hass="${this.hass}"></state-badge> `} <span slot="headline">${t.primary}</span> ${t.secondary?a.qy`<span slot="supporting-text">${t.secondary}</span>`:a.s6} ${t.stateObj&&i?a.qy` <span slot="supporting-text" class="code"> ${t.stateObj.entity_id} </span> `:a.s6} ${t.domain_name&&!i?a.qy` <div slot="trailing-supporting-text" class="domain"> ${t.domain_name} </div> `:a.s6} </ha-combo-box-item> `},this._getAdditionalItems=()=>this._getCreateItems(this.hass.localize,this.createDomains),this._getCreateItems=(0,o.A)((t,e)=>e?.length?(this.hass.loadFragmentTranslation("config"),e.map(e=>{const i=t("ui.components.entity.entity-picker.create_helper",{domain:(0,u.z)(e)?t(`ui.panel.config.helpers.types.${e}`)||e:(0,p.p$)(t,e)});return{id:f+e,primary:i,secondary:t("ui.components.entity.entity-picker.new_entity"),icon_path:_}})):[]),this._getEntitiesMemoized=(0,o.A)(h.w),this._getItems=()=>this._getEntitiesMemoized(this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities,this.value),this._searchFn=(t,e)=>{const i=e.findIndex(e=>e.stateObj?.entity_id===t);if(-1===i)return e;const[s]=e.splice(i,1);return e.unshift(s),e},this._notFoundLabel=t=>this.hass.localize("ui.components.entity.entity-picker.no_match",{term:a.qy`<b>‘${t}’</b>`})}}(0,s.Cg)([(0,n.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],C.prototype,"autofocus",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],C.prototype,"disabled",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],C.prototype,"required",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean,attribute:"allow-custom-entity"})],C.prototype,"allowCustomEntity",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean,attribute:"show-entity-id"})],C.prototype,"showEntityId",void 0),(0,s.Cg)([(0,n.MZ)()],C.prototype,"label",void 0),(0,s.Cg)([(0,n.MZ)()],C.prototype,"value",void 0),(0,s.Cg)([(0,n.MZ)()],C.prototype,"helper",void 0),(0,s.Cg)([(0,n.MZ)()],C.prototype,"placeholder",void 0),(0,s.Cg)([(0,n.MZ)({type:String,attribute:"search-label"})],C.prototype,"searchLabel",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1,type:Array})],C.prototype,"createDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-domains"})],C.prototype,"includeDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"exclude-domains"})],C.prototype,"excludeDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-device-classes"})],C.prototype,"includeDeviceClasses",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-unit-of-measurement"})],C.prototype,"includeUnitOfMeasurement",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-entities"})],C.prototype,"includeEntities",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"exclude-entities"})],C.prototype,"excludeEntities",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1})],C.prototype,"entityFilter",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"hide-clear-icon",type:Boolean})],C.prototype,"hideClearIcon",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"add-button",type:Boolean})],C.prototype,"addButton",void 0),(0,s.Cg)([(0,n.P)("ha-generic-picker")],C.prototype,"_picker",void 0),C=(0,s.Cg)([(0,n.EM)("ha-entity-picker")],C),e()}catch(t){e(t)}})},53756(t,e,i){i.d(e,{t:()=>l,w:()=>d});i(18111),i(22489),i(61701);var s=i(71727),a=i(74705),n=i(28978),o=i(15638),r=i(95350);const l=[{name:"search_labels.entityName",weight:10},{name:"search_labels.friendlyName",weight:8},{name:"search_labels.deviceName",weight:7},{name:"search_labels.areaName",weight:6},{name:"search_labels.domainName",weight:6},{name:"search_labels.entityId",weight:3}],d=(t,e,i,l,d,c,h,p,u,y="")=>{let m=[],g=Object.keys(t.states);return h&&(g=g.filter(t=>h.includes(t))),p&&(g=g.filter(t=>!p.includes(t))),e&&(g=g.filter(t=>e.includes((0,s.m)(t)))),i&&(g=g.filter(t=>!i.includes((0,s.m)(t)))),m=g.map(e=>{const i=t.states[e],l=(0,n.u)(i),[d,c,h]=(0,a.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],t.entities,t.devices,t.areas,t.floors),p=(0,r.p$)(t.localize,(0,s.m)(e)),u=(0,o.qC)(t),m=d||c||e,g=[h,d?c:void 0].filter(Boolean).join(u?" ◂ ":" ▸ ");return{id:`${y}${e}`,primary:m,secondary:g,domain_name:p,sorting_label:[m,g].filter(Boolean).join("_"),search_labels:{entityName:d||null,deviceName:c||null,areaName:h||null,domainName:p||null,friendlyName:l||null,entityId:e},stateObj:i}}),d&&(m=m.filter(t=>t.id===u||t.stateObj?.attributes.device_class&&d.includes(t.stateObj.attributes.device_class))),c&&(m=m.filter(t=>t.id===u||t.stateObj?.attributes.unit_of_measurement&&c.includes(t.stateObj.attributes.unit_of_measurement))),l&&(m=m.filter(t=>t.id===u||t.stateObj&&l(t.stateObj))),m}},95350(t,e,i){i.d(e,{QC:()=>n,fK:()=>a,p$:()=>s});const s=(t,e,i)=>t(`component.${e}.title`)||i?.name||e,a=(t,e)=>{const i={type:"manifest/list"};return e&&(i.integrations=e),t.callWS(i)},n=(t,e)=>t.callWS({type:"manifest/get",integration:e})},19711(t,e,i){i.d(e,{$:()=>n});var s=i(1087);const a=()=>Promise.all([i.e("3785"),i.e("1046")]).then(i.bind(i,79029)),n=(t,e)=>{(0,s.r)(t,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:a,dialogParams:e})}}};
//# sourceMappingURL=71.3f242d2d620b507d.js.map