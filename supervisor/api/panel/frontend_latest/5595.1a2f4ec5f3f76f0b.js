export const __rspack_esm_id="5595";export const __rspack_esm_ids=["5595"];export const __webpack_modules__={35270(a,s,t){t.a(a,async function(a,i){try{t.r(s);var r=t(62826),o=t(96196),e=t(77845),c=t(1087),n=(t(38962),t(18350)),p=t(65829),l=t(72554),h=t(61716),_=t(47351),u=t(65063),d=t(14503),g=t(98219),k=a([n,p,g]);[n,p,g]=k.then?(await k)():k;class m extends o.WF{showDialog(a){this._dialogParams=a,this._creatingBackup=!1}closeDialog(){this._dialogParams=void 0,this._creatingBackup=!1,this._error=void 0,(0,c.r)(this,"dialog-closed",{dialog:this.localName})}render(){return this._dialogParams?o.qy` <ha-dialog open scrimClickAction @closed="${this.closeDialog}" .heading="${(0,l.l)(this.hass,this._dialogParams.supervisor.localize("backup.create_backup"))}"> ${this._creatingBackup?o.qy`<ha-spinner></ha-spinner>`:o.qy`<supervisor-backup-content .hass="${this.hass}" .supervisor="${this._dialogParams.supervisor}" dialogInitialFocus> </supervisor-backup-content>`} ${this._error?o.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <ha-button appearance="plain" slot="secondaryAction" @click="${this.closeDialog}"> ${this._dialogParams.supervisor.localize("common.close")} </ha-button> <ha-button .disabled="${this._creatingBackup}" slot="primaryAction" @click="${this._createBackup}"> ${this._dialogParams.supervisor.localize("backup.create")} </ha-button> </ha-dialog> `:o.s6}async _createBackup(){if("running"!==this._dialogParams.supervisor.info.state)return void(0,u.K$)(this,{title:this._dialogParams.supervisor.localize("backup.could_not_create"),text:this._dialogParams.supervisor.localize("backup.create_blocked_not_running",{state:this._dialogParams.supervisor.info.state})});const a=this._backupContent.backupDetails();if(this._creatingBackup=!0,this._error="",a.password&&!a.password.length)return this._error=this._dialogParams.supervisor.localize("backup.enter_password"),void(this._creatingBackup=!1);if(a.password&&a.password!==a.confirm_password)return this._error=this._dialogParams.supervisor.localize("backup.passwords_not_matching"),void(this._creatingBackup=!1);delete a.confirm_password;try{"full"===this._backupContent.backupType?await(0,h.Tw)(this.hass,a):await(0,h.Di)(this.hass,a),this._dialogParams.onCreate(),this.closeDialog()}catch(a){this._error=(0,_.VR)(a)}this._creatingBackup=!1}static get styles(){return[d.RF,d.nA,o.AH`:host{direction:var(--direction)}`]}constructor(...a){super(...a),this._creatingBackup=!1}}(0,r.Cg)([(0,e.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,r.Cg)([(0,e.wk)()],m.prototype,"_dialogParams",void 0),(0,r.Cg)([(0,e.wk)()],m.prototype,"_error",void 0),(0,r.Cg)([(0,e.wk)()],m.prototype,"_creatingBackup",void 0),(0,r.Cg)([(0,e.P)("supervisor-backup-content")],m.prototype,"_backupContent",void 0),m=(0,r.Cg)([(0,e.EM)("dialog-hassio-create-backup")],m),i()}catch(a){i(a)}})}};
//# sourceMappingURL=5595.1a2f4ec5f3f76f0b.js.map