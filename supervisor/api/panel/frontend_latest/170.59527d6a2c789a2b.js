/*! For license information please see 170.59527d6a2c789a2b.js.LICENSE.txt */
export const ids=["170"];export const modules={46467:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{WB:()=>u,p6:()=>d});i(39527),i(67670);var o=i(16485),n=i(27486),s=i(20382),r=i(11104),l=t([o,r]);[o,r]=l.then?(await l)():l;(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,r.f)(t.time_zone,e)})));const d=(t,e,i)=>c(e,i.time_zone).format(t),c=(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,r.f)(t.time_zone,e)}))),u=((0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,r.f)(t.time_zone,e)}))),(t,e,i)=>{const a=h(e,i.time_zone);if(e.date_format===s.t6.language||e.date_format===s.t6.system)return a.format(t);const o=a.formatToParts(t),n=o.find((t=>"literal"===t.type))?.value,r=o.find((t=>"day"===t.type))?.value,l=o.find((t=>"month"===t.type))?.value,d=o.find((t=>"year"===t.type))?.value,c=o.at(o.length-1);let u="literal"===c?.type?c?.value:"";"bg"===e.language&&e.date_format===s.t6.YMD&&(u="");return{[s.t6.DMY]:`${r}${n}${l}${n}${d}${u}`,[s.t6.MDY]:`${l}${n}${r}${n}${d}${u}`,[s.t6.YMD]:`${d}${n}${l}${n}${r}${u}`}[e.date_format]}),h=(0,n.Z)(((t,e)=>{const i=t.date_format===s.t6.system?void 0:t.language;return t.date_format===s.t6.language||(t.date_format,s.t6.system),new Intl.DateTimeFormat(i,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,r.f)(t.time_zone,e)})}));(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{day:"numeric",month:"short",timeZone:(0,r.f)(t.time_zone,e)}))),(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",year:"numeric",timeZone:(0,r.f)(t.time_zone,e)}))),(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",timeZone:(0,r.f)(t.time_zone,e)}))),(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",timeZone:(0,r.f)(t.time_zone,e)}))),(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",timeZone:(0,r.f)(t.time_zone,e)}))),(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"short",timeZone:(0,r.f)(t.time_zone,e)})));a()}catch(t){a(t)}}))},64214:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{o0:()=>u});var o=i(16485),n=i(27486),s=i(46467),r=i(33570),l=i(11104),d=i(16922),c=t([o,s,r,l]);[o,s,r,l]=c.then?(await c)():c;const u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,d.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(t)?"h12":"h23",timeZone:(0,l.f)(t.time_zone,e)})));(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",hour:(0,d.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(t)?"h12":"h23",timeZone:(0,l.f)(t.time_zone,e)}))),(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"short",day:"numeric",hour:(0,d.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(t)?"h12":"h23",timeZone:(0,l.f)(t.time_zone,e)}))),(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,d.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,d.y)(t)?"h12":"h23",timeZone:(0,l.f)(t.time_zone,e)})));a()}catch(t){a(t)}}))},33570:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{Vu:()=>u,Zs:()=>p,mr:()=>d,xO:()=>m});var o=i(16485),n=i(27486),s=i(11104),r=i(16922),l=t([o,s]);[o,s]=l.then?(await l)():l;const d=(t,e,i)=>c(e,i.time_zone).format(t),c=(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:(0,s.f)(t.time_zone,e)}))),u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{hour:(0,r.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:(0,s.f)(t.time_zone,e)}))),m=(t,e,i)=>f(e,i.time_zone).format(t),f=(0,n.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",hour:(0,r.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:(0,s.f)(t.time_zone,e)}))),p=(t,e,i)=>y(e,i.time_zone).format(t),y=(0,n.Z)(((t,e)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,s.f)(t.time_zone,e)})));a()}catch(t){a(t)}}))},11104:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{f:()=>d});var o=i(16485),n=i(20382),s=t([o]);o=(s.then?(await s)():s)[0];const r=Intl.DateTimeFormat?.().resolvedOptions?.().timeZone,l=r??"UTC",d=(t,e)=>t===n.c_.local&&r?l:e;a()}catch(t){a(t)}}))},16922:function(t,e,i){i.d(e,{y:()=>n});var a=i(27486),o=i(20382);const n=(0,a.Z)((t=>{if(t.time_format===o.zt.language||t.time_format===o.zt.system){const e=t.time_format===o.zt.language?t.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(e).includes("10")}return t.time_format===o.zt.am_pm}))},91480:function(t,e,i){i.d(e,{F:()=>a});i(13334);const a=async t=>{if(!t.parentNode)throw new Error("Cannot setup Leaflet map on disconnected element");const e=(await Promise.all([i.e("3895"),i.e("9800")]).then(i.t.bind(i,94010,23))).default;e.Icon.Default.imagePath="/static/images/leaflet/images/";const a=e.map(t),n=document.createElement("link");n.setAttribute("href","/static/images/leaflet/leaflet.css"),n.setAttribute("rel","stylesheet"),t.parentNode.appendChild(n),a.setView([52.3731339,4.8903147],13);return[a,e,o(e).addTo(a)]},o=t=>t.tileLayer("https://basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}"+(t.Browser.retina?"@2x.png":".png"),{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",minZoom:0,maxZoom:20})},34363:function(t,e,i){var a=i(44249),o=i(57243),n=i(50778);(0,a.Z)([(0,n.Mo)("ha-input-helper-text")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"method",key:"render",value:function(){return o.dy`<slot></slot>`}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`:host{display:block;color:var(--mdc-text-field-label-ink-color,rgba(0,0,0,.6));font-size:.75rem;padding-left:16px;padding-right:16px;padding-inline-start:16px;padding-inline-end:16px}`}]}}),o.oi)},70579:function(t,e,i){i.a(t,(async function(t,a){try{i.r(e),i.d(e,{HaLocationSelector:()=>u});var o=i(44249),n=i(57243),s=i(50778),r=i(27486),l=i(36522),d=i(5346),c=(i(29073),t([d]));d=(c.then?(await c)():c)[0];let u=(0,o.Z)([(0,s.Mo)("ha-selector-location")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Object})],key:"value",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,reflect:!0})],key:"disabled",value:()=>!1},{kind:"field",key:"_schema",value:()=>(0,r.Z)(((t,e)=>[{name:"",type:"grid",schema:[{name:"latitude",required:!0,selector:{number:{step:"any"}}},{name:"longitude",required:!0,selector:{number:{step:"any"}}}]},...t?[{name:"radius",required:!0,default:1e3,disabled:!!e,selector:{number:{min:0,step:1,mode:"box"}}}]:[]]))},{kind:"method",key:"willUpdate",value:function(){this.value||(this.value={latitude:this.hass.config.latitude,longitude:this.hass.config.longitude,radius:this.selector.location?.radius?1e3:void 0})}},{kind:"method",key:"render",value:function(){return n.dy` <p>${this.label?this.label:""}</p> <ha-locations-editor class="flex" .hass="${this.hass}" .helper="${this.helper}" .locations="${this._location(this.selector,this.value)}" @location-updated="${this._locationChanged}" @radius-updated="${this._radiusChanged}" pin-on-click></ha-locations-editor> <ha-form .hass="${this.hass}" .schema="${this._schema(this.selector.location?.radius,this.selector.location?.radius_readonly)}" .data="${this.value}" .computeLabel="${this._computeLabel}" .disabled="${this.disabled}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"field",key:"_location",value(){return(0,r.Z)(((t,e)=>{const i=getComputedStyle(this),a=t.location?.radius?i.getPropertyValue("--zone-radius-color")||i.getPropertyValue("--accent-color"):void 0;return[{id:"location",latitude:!e||isNaN(e.latitude)?this.hass.config.latitude:e.latitude,longitude:!e||isNaN(e.longitude)?this.hass.config.longitude:e.longitude,radius:t.location?.radius?e?.radius||1e3:void 0,radius_color:a,icon:t.location?.icon||t.location?.radius?"mdi:map-marker-radius":"mdi:map-marker",location_editable:!0,radius_editable:!!t.location?.radius&&!t.location?.radius_readonly}]}))}},{kind:"method",key:"_locationChanged",value:function(t){const[e,i]=t.detail.location;(0,l.B)(this,"value-changed",{value:{...this.value,latitude:e,longitude:i}})}},{kind:"method",key:"_radiusChanged",value:function(t){const e=Math.round(t.detail.radius);(0,l.B)(this,"value-changed",{value:{...this.value,radius:e}})}},{kind:"method",key:"_valueChanged",value:function(t){t.stopPropagation();const e=t.detail.value,i=Math.round(t.detail.value.radius);(0,l.B)(this,"value-changed",{value:{latitude:e.latitude,longitude:e.longitude,...this.selector.location?.radius&&!this.selector.location?.radius_readonly?{radius:i}:{}}})}},{kind:"field",key:"_computeLabel",value(){return t=>t.name?this.hass.localize(`ui.components.selectors.location.${t.name}`):""}},{kind:"field",static:!0,key:"styles",value:()=>n.iv`ha-locations-editor{display:block;height:400px;margin-bottom:16px}p{margin-top:0}`}]}}),n.oi);a()}catch(t){a(t)}}))},51223:function(t,e,i){i.a(t,(async function(t,e){try{var a=i(44249),o=i(57243),n=i(50778),s=i(94571),r=i(59847),l=i(45729),d=(i(37583),t([l]));l=(d.then?(await d)():d)[0];(0,a.Z)([(0,n.Mo)("ha-state-icon")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"stateValue",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"icon",value:void 0},{kind:"method",key:"render",value:function(){const t=this.icon||this.stateObj&&this.hass?.entities[this.stateObj.entity_id]?.icon||this.stateObj?.attributes.icon;if(t)return o.dy`<ha-icon .icon="${t}"></ha-icon>`;if(!this.stateObj)return o.Ld;if(!this.hass)return this._renderFallback();const e=(0,l.gD)(this.hass,this.stateObj,this.stateValue).then((t=>t?o.dy`<ha-icon .icon="${t}"></ha-icon>`:this._renderFallback()));return o.dy`${(0,s.C)(e)}`}},{kind:"method",key:"_renderFallback",value:function(){const t=(0,r.N)(this.stateObj);return o.dy` <ha-svg-icon .path="${l.Ls[t]||l.Rb}"></ha-svg-icon> `}}]}}),o.oi);e()}catch(t){e(t)}}))},14502:function(t,e,i){i.a(t,(async function(t,e){try{var a=i(44249),o=i(57243),n=i(50778),s=i(46799),r=i(36522),l=i(51223),d=t([l]);l=(d.then?(await d)():d)[0];let c=(0,a.Z)(null,(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"entity-id",reflect:!0})],key:"entityId",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"entity-name"})],key:"entityName",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"entity-picture"})],key:"entityPicture",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"entity-color"})],key:"entityColor",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"show-icon",type:Boolean})],key:"showIcon",value:()=>!1},{kind:"method",key:"render",value:function(){return o.dy` <div class="marker ${this.entityPicture?"picture":""}" style="${(0,s.V)({"border-color":this.entityColor})}" @click="${this._badgeTap}"> ${this.entityPicture?o.dy`<div class="entity-picture" style="${(0,s.V)({"background-image":`url(${this.entityPicture})`})}"></div>`:this.showIcon&&this.entityId?o.dy`<ha-state-icon .hass="${this.hass}" .stateObj="${this.hass?.states[this.entityId]}"></ha-state-icon>`:this.entityName} </div> `}},{kind:"method",key:"_badgeTap",value:function(t){t.stopPropagation(),this.entityId&&(0,r.B)(this,"hass-more-info",{entityId:this.entityId})}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`.marker{display:flex;justify-content:center;text-align:center;align-items:center;box-sizing:border-box;width:48px;height:48px;font-size:var(--ha-marker-font-size, 1.5em);border-radius:var(--ha-marker-border-radius,50%);border:1px solid var(--ha-marker-color,var(--primary-color));color:var(--primary-text-color);background-color:var(--card-background-color)}.marker.picture{overflow:hidden}.entity-picture{background-size:cover;height:100%;width:100%}`}]}}),o.oi);customElements.define("ha-entity-marker",c),e()}catch(t){e(t)}}))},5346:function(t,e,i){i.a(t,(async function(t,e){try{var a=i(44249),o=i(72621),n=(i(92745),i(39527),i(99790),i(41360),i(13334),i(57243)),s=i(50778),r=i(27486),l=i(36522),d=(i(34363),i(65986)),c=t([d]);d=(c.then?(await c)():c)[0];(0,a.Z)([(0,s.Mo)("ha-locations-editor")],(function(t,e){class a extends e{constructor(){super(),t(this),this._loadPromise=Promise.all([i.e("3895"),i.e("9800")]).then(i.t.bind(i,94010,23)).then((t=>i.e("6090").then(i.t.bind(i,39135,23)).then((()=>(this.Leaflet=t.default,this._updateMarkers(),this.updateComplete.then((()=>this.fitMap())))))))}}return{F:a,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"locations",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"auto-fit",type:Boolean})],key:"autoFit",value:()=>!1},{kind:"field",decorators:[(0,s.Cb)({type:Number})],key:"zoom",value:()=>16},{kind:"field",decorators:[(0,s.Cb)({attribute:"theme-mode",type:String})],key:"themeMode",value:()=>"auto"},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,attribute:"pin-on-click"})],key:"pinOnClick",value:()=>!1},{kind:"field",decorators:[(0,s.SB)()],key:"_locationMarkers",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_circles",value:()=>({})},{kind:"field",decorators:[(0,s.IO)("ha-map",!0)],key:"map",value:void 0},{kind:"field",key:"Leaflet",value:void 0},{kind:"field",key:"_loadPromise",value:void 0},{kind:"method",key:"fitMap",value:function(t){this.map.fitMap(t)}},{kind:"method",key:"fitBounds",value:function(t,e){this.map.fitBounds(t,e)}},{kind:"method",key:"fitMarker",value:async function(t,e){if(this.Leaflet||await this._loadPromise,!this.map.leafletMap||!this._locationMarkers)return;const i=this._locationMarkers[t];if(i)if("getBounds"in i)this.map.leafletMap.fitBounds(i.getBounds()),i.bringToFront();else{const a=this._circles[t];a?this.map.leafletMap.fitBounds(a.getBounds()):this.map.leafletMap.setView(i.getLatLng(),e?.zoom||this.zoom)}}},{kind:"method",key:"render",value:function(){return n.dy` <ha-map .hass="${this.hass}" .layers="${this._getLayers(this._circles,this._locationMarkers)}" .zoom="${this.zoom}" .autoFit="${this.autoFit}" .themeMode="${this.themeMode}" .clickable="${this.pinOnClick}" @map-clicked="${this._mapClicked}"></ha-map> ${this.helper?n.dy`<ha-input-helper-text>${this.helper}</ha-input-helper-text>`:""} `}},{kind:"field",key:"_getLayers",value:()=>(0,r.Z)(((t,e)=>{const i=[];return Array.prototype.push.apply(i,Object.values(t)),e&&Array.prototype.push.apply(i,Object.values(e)),i}))},{kind:"method",key:"willUpdate",value:function(t){(0,o.Z)(a,"willUpdate",this,3)([t]),this.Leaflet&&t.has("locations")&&this._updateMarkers()}},{kind:"method",key:"updated",value:function(t){if(this.Leaflet&&t.has("locations")){const e=t.get("locations"),i=this.locations?.filter(((t,i)=>!e[i]||(t.latitude!==e[i].latitude||t.longitude!==e[i].longitude)&&this.map.leafletMap?.getBounds().contains({lat:e[i].latitude,lng:e[i].longitude})&&!this.map.leafletMap?.getBounds().contains({lat:t.latitude,lng:t.longitude})));1===i?.length&&this.map.leafletMap?.panTo({lat:i[0].latitude,lng:i[0].longitude})}}},{kind:"method",key:"_normalizeLongitude",value:function(t){return Math.abs(t)>180?(t%360+540)%360-180:t}},{kind:"method",key:"_updateLocation",value:function(t){const e=t.target,i=e.getLatLng(),a=[i.lat,this._normalizeLongitude(i.lng)];(0,l.B)(this,"location-updated",{id:e.id,location:a},{bubbles:!1})}},{kind:"method",key:"_updateRadius",value:function(t){const e=t.target,i=this._locationMarkers[e.id];(0,l.B)(this,"radius-updated",{id:e.id,radius:i.getRadius()},{bubbles:!1})}},{kind:"method",key:"_markerClicked",value:function(t){const e=t.target;(0,l.B)(this,"marker-clicked",{id:e.id},{bubbles:!1})}},{kind:"method",key:"_mapClicked",value:function(t){if(this.pinOnClick&&this._locationMarkers){const e=Object.keys(this._locationMarkers)[0],i=[t.detail.location[0],this._normalizeLongitude(t.detail.location[1])];(0,l.B)(this,"location-updated",{id:e,location:i},{bubbles:!1}),i[1]!==t.detail.location[1]&&this.map.leafletMap?.panTo({lat:i[0],lng:i[1]})}}},{kind:"method",key:"_updateMarkers",value:function(){if(!this.locations||!this.locations.length)return this._circles={},void(this._locationMarkers=void 0);const t={},e={},i=getComputedStyle(this).getPropertyValue("--accent-color");this.locations.forEach((a=>{let o;if(a.icon||a.iconPath){const t=document.createElement("div");let e;t.className="named-icon",void 0!==a.name&&(t.innerText=a.name),a.icon?(e=document.createElement("ha-icon"),e.setAttribute("icon",a.icon)):(e=document.createElement("ha-svg-icon"),e.setAttribute("path",a.iconPath)),t.prepend(e),o=this.Leaflet.divIcon({html:t.outerHTML,iconSize:[24,24],className:"light"})}if(a.radius){const n=this.Leaflet.circle([a.latitude,a.longitude],{color:a.radius_color||i,radius:a.radius});a.radius_editable||a.location_editable?(n.editing.enable(),n.addEventListener("add",(()=>{const t=n.editing._moveMarker,e=n.editing._resizeMarkers[0];o&&t.setIcon(o),e.id=t.id=a.id,t.addEventListener("dragend",(t=>this._updateLocation(t))).addEventListener("click",(t=>this._markerClicked(t))),a.radius_editable?e.addEventListener("dragend",(t=>this._updateRadius(t))):e.remove()})),t[a.id]=n):e[a.id]=n}if(!a.radius||!a.radius_editable&&!a.location_editable){const e={title:a.name,draggable:a.location_editable};o&&(e.icon=o);const i=this.Leaflet.marker([a.latitude,a.longitude],e).addEventListener("dragend",(t=>this._updateLocation(t))).addEventListener("click",(t=>this._markerClicked(t)));i.id=a.id,t[a.id]=i}})),this._circles=e,this._locationMarkers=t,(0,l.B)(this,"markers-updated")}},{kind:"field",static:!0,key:"styles",value:()=>n.iv`ha-map{display:block;height:100%}`}]}}),n.oi);e()}catch(t){e(t)}}))},65986:function(t,e,i){i.a(t,(async function(t,e){try{var a=i(44249),o=i(72621),n=(i(92745),i(39527),i(41360),i(13334),i(91155)),s=i(57243),r=i(50778),l=i(36522),d=i(64214),c=i(33570),u=i(91480),h=i(59847),m=i(47194),f=i(79291),p=(i(23043),i(14502)),y=t([p,d,c]);[p,d,c]=y.then?(await y)():y;const k=t=>"string"==typeof t?t:t.entity_id;(0,a.Z)([(0,r.Mo)("ha-map")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"entities",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"paths",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"layers",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"clickable",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({attribute:"auto-fit",type:Boolean})],key:"autoFit",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({attribute:"render-passive",type:Boolean})],key:"renderPassive",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({attribute:"interactive-zones",type:Boolean})],key:"interactiveZones",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({attribute:"fit-zones",type:Boolean})],key:"fitZones",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({attribute:"theme-mode",type:String})],key:"themeMode",value:()=>"auto"},{kind:"field",decorators:[(0,r.Cb)({type:Number})],key:"zoom",value:()=>14},{kind:"field",decorators:[(0,r.SB)()],key:"_loaded",value:()=>!1},{kind:"field",key:"leafletMap",value:void 0},{kind:"field",key:"Leaflet",value:void 0},{kind:"field",key:"_resizeObserver",value:void 0},{kind:"field",key:"_mapItems",value:()=>[]},{kind:"field",key:"_mapFocusItems",value:()=>[]},{kind:"field",key:"_mapZones",value:()=>[]},{kind:"field",key:"_mapFocusZones",value:()=>[]},{kind:"field",key:"_mapPaths",value:()=>[]},{kind:"field",key:"_clickCount",value:()=>0},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)(i,"connectedCallback",this,3)([]),this._loadMap(),this._attachObserver()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)(i,"disconnectedCallback",this,3)([]),this.leafletMap&&(this.leafletMap.remove(),this.leafletMap=void 0,this.Leaflet=void 0),this._loaded=!1,this._resizeObserver&&this._resizeObserver.unobserve(this)}},{kind:"method",key:"update",value:function(t){if((0,o.Z)(i,"update",this,3)([t]),!this._loaded)return;let e=!1;const a=t.get("hass");if(t.has("_loaded")||t.has("entities"))this._drawEntities(),e=!0;else if(this._loaded&&a&&this.entities)for(const t of this.entities)if(a.states[k(t)]!==this.hass.states[k(t)]){this._drawEntities(),e=!0;break}(t.has("_loaded")||t.has("paths"))&&this._drawPaths(),(t.has("_loaded")||t.has("layers"))&&(this._drawLayers(t.get("layers")),e=!0),(t.has("_loaded")||this.autoFit&&e)&&this.fitMap(),t.has("zoom")&&this.leafletMap.setZoom(this.zoom),(t.has("themeMode")||t.has("hass")&&(!a||a.themes?.darkMode!==this.hass.themes?.darkMode))&&this._updateMapStyle()}},{kind:"get",key:"_darkMode",value:function(){return"dark"===this.themeMode||"auto"===this.themeMode&&Boolean(this.hass.themes.darkMode)}},{kind:"method",key:"_updateMapStyle",value:function(){const t=this.renderRoot.querySelector("#map");t.classList.toggle("clickable",this.clickable),t.classList.toggle("dark",this._darkMode),t.classList.toggle("forced-dark","dark"===this.themeMode),t.classList.toggle("forced-light","light"===this.themeMode)}},{kind:"field",key:"_loading",value:()=>!1},{kind:"method",key:"_loadMap",value:async function(){if(this._loading)return;let t=this.shadowRoot.getElementById("map");t||(t=document.createElement("div"),t.id="map",this.shadowRoot.append(t)),this._loading=!0;try{[this.leafletMap,this.Leaflet]=await(0,u.F)(t),this._updateMapStyle(),this.leafletMap.on("click",(t=>{0===this._clickCount&&setTimeout((()=>{1===this._clickCount&&(0,l.B)(this,"map-clicked",{location:[t.latlng.lat,t.latlng.lng]}),this._clickCount=0}),250),this._clickCount++})),this._loaded=!0}finally{this._loading=!1}}},{kind:"method",key:"fitMap",value:function(t){if(!this.leafletMap||!this.Leaflet||!this.hass)return;if(!this._mapFocusItems.length&&!this._mapFocusZones.length&&!this.layers?.length)return void this.leafletMap.setView(new this.Leaflet.LatLng(this.hass.config.latitude,this.hass.config.longitude),t?.zoom||this.zoom);let e=this.Leaflet.latLngBounds(this._mapFocusItems?this._mapFocusItems.map((t=>t.getLatLng())):[]);this._mapFocusZones?.forEach((t=>{e.extend("getBounds"in t?t.getBounds():t.getLatLng())})),this.layers?.forEach((t=>{e.extend("getBounds"in t?t.getBounds():t.getLatLng())})),e=e.pad(t?.pad??.5),this.leafletMap.fitBounds(e,{maxZoom:t?.zoom||this.zoom})}},{kind:"method",key:"fitBounds",value:function(t,e){if(!this.leafletMap||!this.Leaflet||!this.hass)return;const i=this.Leaflet.latLngBounds(t).pad(e?.pad??.5);this.leafletMap.fitBounds(i,{maxZoom:e?.zoom||this.zoom})}},{kind:"method",key:"_drawLayers",value:function(t){if(t&&t.forEach((t=>t.remove())),!this.layers)return;const e=this.leafletMap;this.layers.forEach((t=>{e.addLayer(t)}))}},{kind:"method",key:"_computePathTooltip",value:function(t,e){let i;return i=t.fullDatetime?(0,d.o0)(e.timestamp,this.hass.locale,this.hass.config):(0,n.z)(e.timestamp)?(0,c.Vu)(e.timestamp,this.hass.locale,this.hass.config):(0,c.xO)(e.timestamp,this.hass.locale,this.hass.config),`${t.name}<br>${i}`}},{kind:"method",key:"_drawPaths",value:function(){const t=this.hass,e=this.leafletMap,i=this.Leaflet;if(!t||!e||!i)return;if(this._mapPaths.length&&(this._mapPaths.forEach((t=>t.remove())),this._mapPaths=[]),!this.paths)return;const a=getComputedStyle(this).getPropertyValue("--dark-primary-color");this.paths.forEach((t=>{let o,n;t.gradualOpacity&&(o=t.gradualOpacity/(t.points.length-2),n=1-t.gradualOpacity);for(let e=0;e<t.points.length-1;e++){const s=t.gradualOpacity?n+e*o:void 0;this._mapPaths.push(i.circleMarker(t.points[e].point,{radius:f.T?8:3,color:t.color||a,opacity:s,fillOpacity:s,interactive:!0}).bindTooltip(this._computePathTooltip(t,t.points[e]),{direction:"top"})),this._mapPaths.push(i.polyline([t.points[e].point,t.points[e+1].point],{color:t.color||a,opacity:s,interactive:!1}))}const s=t.points.length-1;if(s>=0){const e=t.gradualOpacity?n+s*o:void 0;this._mapPaths.push(i.circleMarker(t.points[s].point,{radius:f.T?8:3,color:t.color||a,opacity:e,fillOpacity:e,interactive:!0}).bindTooltip(this._computePathTooltip(t,t.points[s]),{direction:"top"}))}this._mapPaths.forEach((t=>e.addLayer(t)))}))}},{kind:"method",key:"_drawEntities",value:function(){const t=this.hass,e=this.leafletMap,i=this.Leaflet;if(!t||!e||!i)return;if(this._mapItems.length&&(this._mapItems.forEach((t=>t.remove())),this._mapItems=[],this._mapFocusItems=[]),this._mapZones.length&&(this._mapZones.forEach((t=>t.remove())),this._mapZones=[],this._mapFocusZones=[]),!this.entities)return;const a=getComputedStyle(this),o=a.getPropertyValue("--accent-color"),n=a.getPropertyValue("--secondary-text-color"),s=a.getPropertyValue("--dark-primary-color"),r=this._darkMode?"dark":"light";for(const e of this.entities){const a=t.states[k(e)];if(!a)continue;const l="string"!=typeof e?e.name:void 0,d=l??(0,m.C)(a),{latitude:c,longitude:u,passive:f,icon:p,radius:y,entity_picture:g,gps_accuracy:v}=a.attributes;if(!c||!u)continue;if("zone"===(0,h.N)(a)){if(f&&!this.renderPassive)continue;let t="";if(p){const e=document.createElement("ha-icon");e.setAttribute("icon",p),t=e.outerHTML}else{const e=document.createElement("span");e.innerHTML=d,t=e.outerHTML}this._mapZones.push(i.marker([c,u],{icon:i.divIcon({html:t,iconSize:[24,24],className:r}),interactive:this.interactiveZones,title:d}));const a=i.circle([c,u],{interactive:!1,color:f?n:o,radius:y});this._mapZones.push(a),!this.fitZones||"string"!=typeof e&&!1===e.focus||this._mapFocusZones.push(a);continue}const _="string"!=typeof e&&"state"===e.label_mode?this.hass.formatEntityState(a):l??d.split(" ").map((t=>t[0])).join("").substr(0,3),b=document.createElement("ha-entity-marker");b.hass=this.hass,b.showIcon="string"!=typeof e&&"icon"===e.label_mode,b.entityId=k(e),b.entityName=_,b.entityPicture=!g||"string"!=typeof e&&e.label_mode?"":this.hass.hassUrl(g),"string"!=typeof e&&(b.entityColor=e.color);const C=i.marker([c,u],{icon:i.divIcon({html:b,iconSize:[48,48],className:""}),title:d});this._mapItems.push(C),"string"!=typeof e&&!1===e.focus||this._mapFocusItems.push(C),v&&this._mapItems.push(i.circle([c,u],{interactive:!1,color:s,radius:v}))}this._mapItems.forEach((t=>e.addLayer(t))),this._mapZones.forEach((t=>e.addLayer(t)))}},{kind:"method",key:"_attachObserver",value:async function(){this._resizeObserver||(this._resizeObserver=new ResizeObserver((()=>{this.leafletMap?.invalidateSize({debounceMoveend:!0})}))),this._resizeObserver.observe(this)}},{kind:"field",static:!0,key:"styles",value:()=>s.iv`:host{display:block;height:300px}#map{height:100%}#map.clickable{cursor:pointer}#map.dark{background:#090909}#map.forced-dark{color:#fff;--map-filter:invert(0.9) hue-rotate(170deg) brightness(1.5) contrast(1.2) saturate(0.3)}#map.forced-light{background:#fff;color:#000;--map-filter:invert(0)}#map.clickable:active,#map:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.leaflet-tile-pane{filter:var(--map-filter)}.dark .leaflet-bar a{background-color:#1c1c1c;color:#fff}.dark .leaflet-bar a:hover{background-color:#313131}.leaflet-marker-draggable{cursor:move!important}.leaflet-edit-resize{border-radius:50%;cursor:nesw-resize!important}.named-icon{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;color:var(--primary-text-color)}.leaflet-pane{z-index:0!important}.leaflet-bottom,.leaflet-control,.leaflet-top{z-index:1!important}.leaflet-tooltip{padding:8px;font-size:90%;background:rgba(80,80,80,.9)!important;color:#fff!important;border-radius:4px;box-shadow:none!important;text-align:center}`}]}}),s.fl);e()}catch(t){e(t)}}))},79291:function(t,e,i){i.d(e,{T:()=>a});const a="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},18492:function(t,e,i){i.d(e,{d:()=>o});i(39527),i(67670),i(13334);var a=i(53907);function o(t,...e){const i=a.L.bind(null,t||e.find((t=>"object"==typeof t)));return e.map(i)}},76808:function(t,e,i){i.d(e,{I7:()=>r,dP:()=>o,jE:()=>a,vh:()=>s,yJ:()=>n});const a=6048e5,o=864e5,n=6e4,s=36e5,r=Symbol.for("constructDateFrom")},53907:function(t,e,i){i.d(e,{L:()=>o});var a=i(76808);function o(t,e){return"function"==typeof t?t(e):t&&"object"==typeof t&&a.I7 in t?t[a.I7](e):t instanceof Date?new t.constructor(e):new Date(e)}},97836:function(t,e,i){i.d(e,{K:()=>n});var a=i(18492),o=i(7591);function n(t,e,i){const[n,s]=(0,a.d)(i?.in,t,e);return+(0,o.b)(n)==+(0,o.b)(s)}},91155:function(t,e,i){i.d(e,{z:()=>s});var a=i(53907);function o(t){return(0,a.L)(t,Date.now())}var n=i(97836);function s(t,e){return(0,n.K)((0,a.L)(e?.in||t,t),o(e?.in||t))}},7591:function(t,e,i){i.d(e,{b:()=>o});var a=i(18112);function o(t,e){const i=(0,a.Q)(t,e?.in);return i.setHours(0,0,0,0),i}},18112:function(t,e,i){i.d(e,{Q:()=>o});var a=i(53907);function o(t,e){return(0,a.L)(e||t,t)}},1714:function(t,e,i){i.d(e,{sR:()=>u});i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814);var a=i(53232),o=i(45779);const n=(t,e)=>{var i,a;const o=t._$AN;if(void 0===o)return!1;for(const t of o)null===(a=(i=t)._$AO)||void 0===a||a.call(i,e,!1),n(t,e);return!0},s=t=>{let e,i;do{if(void 0===(e=t._$AM))break;i=e._$AN,i.delete(t),t=e}while(0===(null==i?void 0:i.size))},r=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(void 0===i)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),c(e)}};function l(t){void 0!==this._$AN?(s(this),this._$AM=t,r(this)):this._$AM=t}function d(t,e=!1,i=0){const a=this._$AH,o=this._$AN;if(void 0!==o&&0!==o.size)if(e)if(Array.isArray(a))for(let t=i;t<a.length;t++)n(a[t],!1),s(a[t]);else null!=a&&(n(a,!1),s(a));else n(this,t)}const c=t=>{var e,i,a,n;t.type==o.pX.CHILD&&(null!==(e=(a=t)._$AP)&&void 0!==e||(a._$AP=d),null!==(i=(n=t)._$AQ)&&void 0!==i||(n._$AQ=l))};class u extends o.Xe{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,i){super._$AT(t,e,i),r(this),this.isConnected=t._$AU}_$AO(t,e=!0){var i,a;t!==this.isConnected&&(this.isConnected=t,t?null===(i=this.reconnected)||void 0===i||i.call(this):null===(a=this.disconnected)||void 0===a||a.call(this)),e&&(n(this,t),s(this))}setValue(t){if((0,a.OR)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}},94571:function(t,e,i){i.d(e,{C:()=>h});i(39527),i(67670);var a=i(2841),o=i(53232),n=i(1714);class s{constructor(t){this.G=t}disconnect(){this.G=void 0}reconnect(t){this.G=t}deref(){return this.G}}class r{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){var t;null!==(t=this.Y)&&void 0!==t||(this.Y=new Promise((t=>this.Z=t)))}resume(){var t;null===(t=this.Z)||void 0===t||t.call(this),this.Y=this.Z=void 0}}var l=i(45779);const d=t=>!(0,o.pt)(t)&&"function"==typeof t.then,c=1073741823;class u extends n.sR{constructor(){super(...arguments),this._$C_t=c,this._$Cwt=[],this._$Cq=new s(this),this._$CK=new r}render(...t){var e;return null!==(e=t.find((t=>!d(t))))&&void 0!==e?e:a.Jb}update(t,e){const i=this._$Cwt;let o=i.length;this._$Cwt=e;const n=this._$Cq,s=this._$CK;this.isConnected||this.disconnected();for(let t=0;t<e.length&&!(t>this._$C_t);t++){const a=e[t];if(!d(a))return this._$C_t=t,a;t<o&&a===i[t]||(this._$C_t=c,o=0,Promise.resolve(a).then((async t=>{for(;s.get();)await s.get();const e=n.deref();if(void 0!==e){const i=e._$Cwt.indexOf(a);i>-1&&i<e._$C_t&&(e._$C_t=i,e.setValue(t))}})))}return a.Jb}disconnected(){this._$Cq.disconnect(),this._$CK.pause()}reconnected(){this._$Cq.reconnect(this),this._$CK.resume()}}const h=(0,l.XM)(u)}};
//# sourceMappingURL=170.59527d6a2c789a2b.js.map