/*! For license information please see 1599-Y3BZ6Wc-8I0.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[1599],{45233:(t,e,i)=>{var n=i(68144);class s extends n.oi{static get styles(){return[n.iv`:host{display:block;position:absolute;outline:0;z-index:1002;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:default;pointer-events:none}#tooltip{display:block;outline:0;font-size:var(--simple-tooltip-font-size,10px);line-height:1;background-color:var(--simple-tooltip-background,#616161);color:var(--simple-tooltip-text-color,#fff);padding:8px;border-radius:var(--simple-tooltip-border-radius,2px);width:var(--simple-tooltip-width)}@keyframes keyFrameScaleUp{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes keyFrameScaleDown{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes keyFrameFadeInOpacity{0%{opacity:0}100%{opacity:var(--simple-tooltip-opacity,.9)}}@keyframes keyFrameFadeOutOpacity{0%{opacity:var(--simple-tooltip-opacity,.9)}100%{opacity:0}}@keyframes keyFrameSlideDownIn{0%{transform:translateY(-2000px);opacity:0}10%{opacity:.2}100%{transform:translateY(0);opacity:var(--simple-tooltip-opacity,.9)}}@keyframes keyFrameSlideDownOut{0%{transform:translateY(0);opacity:var(--simple-tooltip-opacity,.9)}10%{opacity:.2}100%{transform:translateY(-2000px);opacity:0}}.fade-in-animation{opacity:0;animation-delay:var(--simple-tooltip-delay-in,500ms);animation-name:keyFrameFadeInOpacity;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:var(--simple-tooltip-duration-in,500ms);animation-fill-mode:forwards}.fade-out-animation{opacity:var(--simple-tooltip-opacity,.9);animation-delay:var(--simple-tooltip-delay-out,0ms);animation-name:keyFrameFadeOutOpacity;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:var(--simple-tooltip-duration-out,500ms);animation-fill-mode:forwards}.scale-up-animation{transform:scale(0);opacity:var(--simple-tooltip-opacity,.9);animation-delay:var(--simple-tooltip-delay-in,500ms);animation-name:keyFrameScaleUp;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:var(--simple-tooltip-duration-in,500ms);animation-fill-mode:forwards}.scale-down-animation{transform:scale(1);opacity:var(--simple-tooltip-opacity,.9);animation-delay:var(--simple-tooltip-delay-out,500ms);animation-name:keyFrameScaleDown;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:var(--simple-tooltip-duration-out,500ms);animation-fill-mode:forwards}.slide-down-animation{transform:translateY(-2000px);opacity:0;animation-delay:var(--simple-tooltip-delay-out,500ms);animation-name:keyFrameSlideDownIn;animation-iteration-count:1;animation-timing-function:cubic-bezier(0,0,.2,1);animation-duration:var(--simple-tooltip-duration-out,500ms);animation-fill-mode:forwards}.slide-down-animation-out{transform:translateY(0);opacity:var(--simple-tooltip-opacity,.9);animation-delay:var(--simple-tooltip-delay-out,500ms);animation-name:keyFrameSlideDownOut;animation-iteration-count:1;animation-timing-function:cubic-bezier(.4,0,1,1);animation-duration:var(--simple-tooltip-duration-out,500ms);animation-fill-mode:forwards}.cancel-animation{animation-delay:-30s!important}.hidden{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}`]}render(){return n.dy` <div id="tooltip" class="hidden" @animationend="${this._onAnimationEnd}"> <slot></slot> </div>`}static get properties(){return{...super.properties,for:{type:String},manualMode:{type:Boolean,attribute:"manual-mode"},position:{type:String},fitToVisibleBounds:{type:Boolean,attribute:"fit-to-visible-bounds"},offset:{type:Number},marginTop:{type:Number,attribute:"margin-top"},animationDelay:{type:Number,attribute:"animation-delay"},animationEntry:{type:String,attribute:"animation-entry"},animationExit:{type:String,attribute:"animation-exit"},_showing:{type:Boolean}}}static get tag(){return"simple-tooltip"}constructor(){super(),this.manualMode=!1,this.position="bottom",this.fitToVisibleBounds=!1,this.offset=14,this.marginTop=14,this.animationEntry="",this.animationExit="",this.animationConfig={entry:[{name:"fade-in-animation",node:this,timing:{delay:0}}],exit:[{name:"fade-out-animation",node:this}]},setTimeout((()=>{this.addEventListener("webkitAnimationEnd",this._onAnimationEnd.bind(this)),this.addEventListener("mouseenter",this.hide.bind(this))}),0)}get target(){var t=this.parentNode,e=this.getRootNode();return this.for?e.querySelector("#"+this.for):t.nodeType==Node.DOCUMENT_FRAGMENT_NODE?e.host:t}disconnectedCallback(){this.manualMode||this._removeListeners(),super.disconnectedCallback()}playAnimation(t){"entry"===t?this.show():"exit"===t&&this.hide()}cancelAnimation(){this.shadowRoot.querySelector("#tooltip").classList.add("cancel-animation")}show(){if(!this._showing){if(""===this.textContent.trim()){for(var t=!0,e=this.children,i=0;i<e.length;i++)if(""!==e[i].textContent.trim()){t=!1;break}if(t)return}this._showing=!0,this.shadowRoot.querySelector("#tooltip").classList.remove("hidden"),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.updatePosition(),this._animationPlaying=!0,this.shadowRoot.querySelector("#tooltip").classList.add(this._getAnimationType("entry"))}}hide(){if(this._showing){if(this._animationPlaying)return this._showing=!1,void this._cancelAnimation();this._onAnimationFinish(),this._showing=!1,this._animationPlaying=!0,clearTimeout(this.__debounceCancel),this.__debounceCancel=setTimeout((()=>{this._cancelAnimation()}),5e3)}}updatePosition(){if(this._target&&this.offsetParent){var t=this.offset;14!=this.marginTop&&14==this.offset&&(t=this.marginTop);var e,i,n=this.offsetParent.getBoundingClientRect(),s=this._target.getBoundingClientRect(),o=this.getBoundingClientRect(),r=(s.width-o.width)/2,a=(s.height-o.height)/2,c=s.left-n.left,h=s.top-n.top;switch(this.position){case"top":e=c+r,i=h-o.height-t;break;case"bottom":e=c+r,i=h+s.height+t;break;case"left":e=c-o.width-t,i=h+a;break;case"right":e=c+s.width+t,i=h+a}this.fitToVisibleBounds?(n.left+e+o.width>window.innerWidth?(this.style.right="0px",this.style.left="auto"):(this.style.left=Math.max(0,e)+"px",this.style.right="auto"),n.top+i+o.height>window.innerHeight?(this.style.bottom=n.height-h+t+"px",this.style.top="auto"):(this.style.top=Math.max(-n.top,i)+"px",this.style.bottom="auto")):(this.style.left=e+"px",this.style.top=i+"px")}}_addListeners(){this._target&&(this._target.addEventListener("mouseenter",this.show.bind(this)),this._target.addEventListener("focus",this.show.bind(this)),this._target.addEventListener("mouseleave",this.hide.bind(this)),this._target.addEventListener("blur",this.hide.bind(this)),this._target.addEventListener("tap",this.hide.bind(this)))}_findTarget(){this.manualMode||this._removeListeners(),this._target=this.target,this.manualMode||this._addListeners()}_manualModeChanged(){this.manualMode?this._removeListeners():this._addListeners()}_cancelAnimation(){this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("entry")),this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.add("hidden")}_onAnimationFinish(){this._showing&&(this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("entry")),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.add(this._getAnimationType("exit")))}_onAnimationEnd(){this._animationPlaying=!1,this._showing||(this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.shadowRoot.querySelector("#tooltip").classList.add("hidden"))}_getAnimationType(t){if("entry"===t&&""!==this.animationEntry)return this.animationEntry;if("exit"===t&&""!==this.animationExit)return this.animationExit;if(this.animationConfig[t]&&"string"==typeof this.animationConfig[t][0].name){if(this.animationConfig[t][0].timing&&this.animationConfig[t][0].timing.delay&&0!==this.animationConfig[t][0].timing.delay){var e=this.animationConfig[t][0].timing.delay;"entry"===t?document.documentElement.style.setProperty("--simple-tooltip-delay-in",e+"ms"):"exit"===t&&document.documentElement.style.setProperty("--simple-tooltip-delay-out",e+"ms")}return this.animationConfig[t][0].name}}_removeListeners(){this._target&&(this._target.removeEventListener("mouseover",this.show.bind(this)),this._target.removeEventListener("focusin",this.show.bind(this)),this._target.removeEventListener("mouseout",this.hide.bind(this)),this._target.removeEventListener("focusout",this.hide.bind(this)),this._target.removeEventListener("click",this.hide.bind(this)))}firstUpdated(t){this.setAttribute("role","tooltip"),this.setAttribute("tabindex",-1),this._findTarget()}updated(t){t.forEach(((t,e)=>{"for"==e&&this._findTarget(this[e],t),"manualMode"==e&&this._manualModeChanged(this[e],t),"animationDelay"==e&&this._delayChange(this[e],t)}))}_delayChange(t){500!==t&&document.documentElement.style.setProperty("--simple-tooltip-delay-in",t+"ms")}}customElements.define(s.tag,s)},89194:(t,e,i)=>{i(39975),i(65660),i(70019);var n=i(71132),s=i(50856);(0,n.k)({_template:s.d`
    <style>
      :host {
        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */
        @apply --layout-vertical;
        @apply --layout-center-justified;
        @apply --layout-flex;
      }

      :host([two-line]) {
        min-height: var(--paper-item-body-two-line-min-height, 72px);
      }

      :host([three-line]) {
        min-height: var(--paper-item-body-three-line-min-height, 88px);
      }

      :host > ::slotted(*) {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      :host > ::slotted([secondary]) {
        @apply --paper-font-body1;

        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));

        @apply --paper-item-body-secondary;
      }
    </style>

    <slot></slot>
`,is:"paper-item-body"})},33507:(t,e,i)=>{i(39975),i(65660),i(70019);const n=document.createElement("template");n.setAttribute("style","display: none;"),n.innerHTML="<dom-module id=\"paper-item-shared-styles\">\n  <template>\n    <style>\n      :host, .paper-item {\n        display: block;\n        position: relative;\n        min-height: var(--paper-item-min-height, 48px);\n        padding: 0px 16px;\n      }\n\n      .paper-item {\n        @apply --paper-font-subhead;\n        border:none;\n        outline: none;\n        background: white;\n        width: 100%;\n        text-align: left;\n      }\n\n      :host([hidden]), .paper-item[hidden] {\n        display: none !important;\n      }\n\n      :host(.iron-selected), .paper-item.iron-selected {\n        font-weight: var(--paper-item-selected-weight, bold);\n\n        @apply --paper-item-selected;\n      }\n\n      :host([disabled]), .paper-item[disabled] {\n        color: var(--paper-item-disabled-color, var(--disabled-text-color));\n\n        @apply --paper-item-disabled;\n      }\n\n      :host(:focus), .paper-item:focus {\n        position: relative;\n        outline: 0;\n\n        @apply --paper-item-focused;\n      }\n\n      :host(:focus):before, .paper-item:focus:before {\n        @apply --layout-fit;\n\n        background: currentColor;\n        content: '';\n        opacity: var(--dark-divider-opacity);\n        pointer-events: none;\n\n        @apply --paper-item-focused-before;\n      }\n    </style>\n  </template>\n</dom-module>",document.head.appendChild(n.content);var s=i(71132),o=i(50856),r=i(51644),a=i(26110);const c=[r.P,a.a,{hostAttributes:{role:"option",tabindex:"0"}}];(0,s.k)({_template:o.d`
    <style include="paper-item-shared-styles">
      :host {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --paper-font-subhead;

        @apply --paper-item;
      }
    </style>
    <slot></slot>
`,is:"paper-item",behaviors:[c]})},81480:(t,e,i)=>{function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===u(t)}i.d(e,{Z:()=>H});const s=1/0;function o(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-s?"-0":e}(t)}function r(t){return"string"==typeof t}function a(t){return"number"==typeof t}function c(t){return!0===t||!1===t||function(t){return h(t)&&null!==t}(t)&&"[object Boolean]"==u(t)}function h(t){return"object"==typeof t}function l(t){return null!=t}function d(t){return!t.trim().length}function u(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const p=t=>`Missing ${t} property in key`,m=t=>`Property 'weight' in key '${t}' must be a positive integer`,g=Object.prototype.hasOwnProperty;class f{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let i=y(t);e+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,e+=i.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function y(t){let e=null,i=null,s=null,o=1,a=null;if(r(t)||n(t))s=t,e=v(t),i=x(t);else{if(!g.call(t,"name"))throw new Error(p("name"));const n=t.name;if(s=n,g.call(t,"weight")&&(o=t.weight,o<=0))throw new Error(m(n));e=v(n),i=x(n),a=t.getFn}return{path:e,id:i,weight:o,src:s,getFn:a}}function v(t){return n(t)?t:t.split(".")}function x(t){return n(t)?t.join("."):t}var _={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let i=[],s=!1;const h=(t,e,d)=>{if(l(t))if(e[d]){const u=t[e[d]];if(!l(u))return;if(d===e.length-1&&(r(u)||a(u)||c(u)))i.push(o(u));else if(n(u)){s=!0;for(let t=0,i=u.length;t<i;t+=1)h(u[t],e,d+1)}else e.length&&h(u,e,d+1)}else i.push(t)};return h(t,r(e)?e.split("."):e,0),s?i:i[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const b=/[^ ]+/g;class M{constructor({getFn:t=_.getFn,fieldNormWeight:e=_.fieldNormWeight}={}){this.norm=function(t=1,e=3){const i=new Map,n=Math.pow(10,e);return{get(e){const s=e.match(b).length;if(i.has(s))return i.get(s);const o=1/Math.pow(s,.5*t),r=parseFloat(Math.round(o*n)/n);return i.set(s,r),r},clear(){i.clear()}}}(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,r(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();r(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,i=this.size();e<i;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!l(t)||d(t))return;let i={v:t,i:e,n:this.norm.get(t)};this.records.push(i)}_addObject(t,e){let i={i:e,$:{}};this.keys.forEach(((e,s)=>{let o=e.getFn?e.getFn(t):this.getFn(t,e.path);if(l(o))if(n(o)){let t=[];const e=[{nestedArrIndex:-1,value:o}];for(;e.length;){const{nestedArrIndex:i,value:s}=e.pop();if(l(s))if(r(s)&&!d(s)){let e={v:s,i,n:this.norm.get(s)};t.push(e)}else n(s)&&s.forEach(((t,i)=>{e.push({nestedArrIndex:i,value:t})}))}i.$[s]=t}else if(r(o)&&!d(o)){let t={v:o,n:this.norm.get(o)};i.$[s]=t}})),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function w(t,e,{getFn:i=_.getFn,fieldNormWeight:n=_.fieldNormWeight}={}){const s=new M({getFn:i,fieldNormWeight:n});return s.setKeys(t.map(y)),s.setSources(e),s.create(),s}function L(t,{errors:e=0,currentLocation:i=0,expectedLocation:n=0,distance:s=_.distance,ignoreLocation:o=_.ignoreLocation}={}){const r=e/t.length;if(o)return r;const a=Math.abs(n-i);return s?r+a/s:a?1:r}const k=32;function S(t,e,i,{location:n=_.location,distance:s=_.distance,threshold:o=_.threshold,findAllMatches:r=_.findAllMatches,minMatchCharLength:a=_.minMatchCharLength,includeMatches:c=_.includeMatches,ignoreLocation:h=_.ignoreLocation}={}){if(e.length>k)throw new Error(`Pattern length exceeds max of ${k}.`);const l=e.length,d=t.length,u=Math.max(0,Math.min(n,d));let p=o,m=u;const g=a>1||c,f=g?Array(d):[];let y;for(;(y=t.indexOf(e,m))>-1;){let t=L(e,{currentLocation:y,expectedLocation:u,distance:s,ignoreLocation:h});if(p=Math.min(t,p),m=y+l,g){let t=0;for(;t<l;)f[y+t]=1,t+=1}}m=-1;let v=[],x=1,b=l+d;const M=1<<l-1;for(let n=0;n<l;n+=1){let o=0,a=b;for(;o<a;){L(e,{errors:n,currentLocation:u+a,expectedLocation:u,distance:s,ignoreLocation:h})<=p?o=a:b=a,a=Math.floor((b-o)/2+o)}b=a;let c=Math.max(1,u-a+1),y=r?d:Math.min(u+a,d)+l,_=Array(y+2);_[y+1]=(1<<n)-1;for(let o=y;o>=c;o-=1){let r=o-1,a=i[t.charAt(r)];if(g&&(f[r]=+!!a),_[o]=(_[o+1]<<1|1)&a,n&&(_[o]|=(v[o+1]|v[o])<<1|1|v[o+1]),_[o]&M&&(x=L(e,{errors:n,currentLocation:r,expectedLocation:u,distance:s,ignoreLocation:h}),x<=p)){if(p=x,m=r,m<=u)break;c=Math.max(1,2*u-m)}}if(L(e,{errors:n+1,currentLocation:u,expectedLocation:u,distance:s,ignoreLocation:h})>p)break;v=_}const w={isMatch:m>=0,score:Math.max(.001,x)};if(g){const t=function(t=[],e=_.minMatchCharLength){let i=[],n=-1,s=-1,o=0;for(let r=t.length;o<r;o+=1){let r=t[o];r&&-1===n?n=o:r||-1===n||(s=o-1,s-n+1>=e&&i.push([n,s]),n=-1)}return t[o-1]&&o-n>=e&&i.push([n,o-1]),i}(f,a);t.length?c&&(w.indices=t):w.isMatch=!1}return w}function C(t){let e={};for(let i=0,n=t.length;i<n;i+=1){const s=t.charAt(i);e[s]=(e[s]||0)|1<<n-i-1}return e}class E{constructor(t,{location:e=_.location,threshold:i=_.threshold,distance:n=_.distance,includeMatches:s=_.includeMatches,findAllMatches:o=_.findAllMatches,minMatchCharLength:r=_.minMatchCharLength,isCaseSensitive:a=_.isCaseSensitive,ignoreLocation:c=_.ignoreLocation}={}){if(this.options={location:e,threshold:i,distance:n,includeMatches:s,findAllMatches:o,minMatchCharLength:r,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(t,e)=>{this.chunks.push({pattern:t,alphabet:C(t),startIndex:e})},l=this.pattern.length;if(l>k){let t=0;const e=l%k,i=l-e;for(;t<i;)h(this.pattern.substr(t,k),t),t+=k;if(e){const t=l-k;h(this.pattern.substr(t),t)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:i}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return i&&(e.indices=[[0,t.length-1]]),e}const{location:n,distance:s,threshold:o,findAllMatches:r,minMatchCharLength:a,ignoreLocation:c}=this.options;let h=[],l=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:u,startIndex:p})=>{const{isMatch:m,score:g,indices:f}=S(t,e,u,{location:n+p,distance:s,threshold:o,findAllMatches:r,minMatchCharLength:a,includeMatches:i,ignoreLocation:c});m&&(d=!0),l+=g,m&&f&&(h=[...h,...f])}));let u={isMatch:d,score:d?l/this.chunks.length:1};return d&&i&&(u.indices=h),u}}class A{constructor(t){this.pattern=t}static isMultiMatch(t){return F(t,this.multiRegex)}static isSingleMatch(t){return F(t,this.singleRegex)}search(){}}function F(t,e){const i=t.match(e);return i?i[1]:null}class I extends A{constructor(t,{location:e=_.location,threshold:i=_.threshold,distance:n=_.distance,includeMatches:s=_.includeMatches,findAllMatches:o=_.findAllMatches,minMatchCharLength:r=_.minMatchCharLength,isCaseSensitive:a=_.isCaseSensitive,ignoreLocation:c=_.ignoreLocation}={}){super(t),this._bitapSearch=new E(t,{location:e,threshold:i,distance:n,includeMatches:s,findAllMatches:o,minMatchCharLength:r,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class R extends A{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,i=0;const n=[],s=this.pattern.length;for(;(e=t.indexOf(this.pattern,i))>-1;)i=e+s,n.push([e,i-1]);const o=!!n.length;return{isMatch:o,score:o?0:1,indices:n}}}const $=[class extends A{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},R,class extends A{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends A{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends A{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends A{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends A{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},I],N=$.length,O=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const T=new Set([I.type,R.type]);class q{constructor(t,{isCaseSensitive:e=_.isCaseSensitive,includeMatches:i=_.includeMatches,minMatchCharLength:n=_.minMatchCharLength,ignoreLocation:s=_.ignoreLocation,findAllMatches:o=_.findAllMatches,location:r=_.location,threshold:a=_.threshold,distance:c=_.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:i,minMatchCharLength:n,findAllMatches:o,ignoreLocation:s,location:r,threshold:a,distance:c},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let i=t.trim().split(O).filter((t=>t&&!!t.trim())),n=[];for(let t=0,s=i.length;t<s;t+=1){const s=i[t];let o=!1,r=-1;for(;!o&&++r<N;){const t=$[r];let i=t.isMultiMatch(s);i&&(n.push(new t(i,e)),o=!0)}if(!o)for(r=-1;++r<N;){const t=$[r];let i=t.isSingleMatch(s);if(i){n.push(new t(i,e));break}}}return n}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:n}=this.options;t=n?t:t.toLowerCase();let s=0,o=[],r=0;for(let n=0,a=e.length;n<a;n+=1){const a=e[n];o.length=0,s=0;for(let e=0,n=a.length;e<n;e+=1){const n=a[e],{isMatch:c,indices:h,score:l}=n.search(t);if(!c){r=0,s=0,o.length=0;break}if(s+=1,r+=l,i){const t=n.constructor.type;T.has(t)?o=[...o,...h]:o.push(h)}}if(s){let t={isMatch:!0,score:r/s};return i&&(t.indices=o),t}}return{isMatch:!1,score:1}}}const j=[];function P(t,e){for(let i=0,n=j.length;i<n;i+=1){let n=j[i];if(n.condition(t,e))return new n(t,e)}return new E(t,e)}const W="$and",z="$or",B="$path",D="$val",Y=t=>!(!t[W]&&!t[z]),K=t=>({[W]:Object.keys(t).map((e=>({[e]:t[e]})))});function U(t,e,{auto:i=!0}={}){const s=t=>{let o=Object.keys(t);const a=(t=>!!t[B])(t);if(!a&&o.length>1&&!Y(t))return s(K(t));if((t=>!n(t)&&h(t)&&!Y(t))(t)){const n=a?t[B]:o[0],s=a?t[D]:t[n];if(!r(s))throw new Error((t=>`Invalid value for key ${t}`)(n));const c={keyId:x(n),pattern:s};return i&&(c.searcher=P(s,e)),c}let c={children:[],operator:o[0]};return o.forEach((e=>{const i=t[e];n(i)&&i.forEach((t=>{c.children.push(s(t))}))})),c};return Y(t)||(t=K(t)),s(t)}function V(t,e){const i=t.matches;e.matches=[],l(i)&&i.forEach((t=>{if(!l(t.indices)||!t.indices.length)return;const{indices:i,value:n}=t;let s={indices:i,value:n};t.key&&(s.key=t.key.src),t.idx>-1&&(s.refIndex=t.idx),e.matches.push(s)}))}function J(t,e){e.score=t.score}class H{constructor(t,e={},i){this.options={..._,...e},this.options.useExtendedSearch,this._keyStore=new f(this.options.keys),this.setCollection(t,i)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof M))throw new Error("Incorrect 'index' type");this._myIndex=e||w(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){l(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let i=0,n=this._docs.length;i<n;i+=1){const s=this._docs[i];t(s,i)&&(this.removeAt(i),i-=1,n-=1,e.push(s))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:i,includeScore:n,shouldSort:s,sortFn:o,ignoreFieldNorm:c}=this.options;let h=r(t)?r(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=_.ignoreFieldNorm}){t.forEach((t=>{let i=1;t.matches.forEach((({key:t,norm:n,score:s})=>{const o=t?t.weight:null;i*=Math.pow(0===s&&o?Number.EPSILON:s,(o||1)*(e?1:n))})),t.score=i}))}(h,{ignoreFieldNorm:c}),s&&h.sort(o),a(e)&&e>-1&&(h=h.slice(0,e)),function(t,e,{includeMatches:i=_.includeMatches,includeScore:n=_.includeScore}={}){const s=[];return i&&s.push(V),n&&s.push(J),t.map((t=>{const{idx:i}=t,n={item:e[i],refIndex:i};return s.length&&s.forEach((e=>{e(t,n)})),n}))}(h,this._docs,{includeMatches:i,includeScore:n})}_searchStringList(t){const e=P(t,this.options),{records:i}=this._myIndex,n=[];return i.forEach((({v:t,i,n:s})=>{if(!l(t))return;const{isMatch:o,score:r,indices:a}=e.searchIn(t);o&&n.push({item:t,idx:i,matches:[{score:r,value:t,norm:s,indices:a}]})})),n}_searchLogical(t){const e=U(t,this.options),i=(t,e,n)=>{if(!t.children){const{keyId:i,searcher:s}=t,o=this._findMatches({key:this._keyStore.get(i),value:this._myIndex.getValueForItemAtKeyId(e,i),searcher:s});return o&&o.length?[{idx:n,item:e,matches:o}]:[]}const s=[];for(let o=0,r=t.children.length;o<r;o+=1){const r=t.children[o],a=i(r,e,n);if(a.length)s.push(...a);else if(t.operator===W)return[]}return s},n=this._myIndex.records,s={},o=[];return n.forEach((({$:t,i:n})=>{if(l(t)){let r=i(e,t,n);r.length&&(s[n]||(s[n]={idx:n,item:t,matches:[]},o.push(s[n])),r.forEach((({matches:t})=>{s[n].matches.push(...t)})))}})),o}_searchObjectList(t){const e=P(t,this.options),{keys:i,records:n}=this._myIndex,s=[];return n.forEach((({$:t,i:n})=>{if(!l(t))return;let o=[];i.forEach(((i,n)=>{o.push(...this._findMatches({key:i,value:t[n],searcher:e}))})),o.length&&s.push({idx:n,item:t,matches:o})})),s}_findMatches({key:t,value:e,searcher:i}){if(!l(e))return[];let s=[];if(n(e))e.forEach((({v:e,i:n,n:o})=>{if(!l(e))return;const{isMatch:r,score:a,indices:c}=i.searchIn(e);r&&s.push({score:a,key:t,value:e,idx:n,norm:o,indices:c})}));else{const{v:n,n:o}=e,{isMatch:r,score:a,indices:c}=i.searchIn(n);r&&s.push({score:a,key:t,value:n,norm:o,indices:c})}return s}}H.version="6.6.2",H.createIndex=w,H.parseIndex=function(t,{getFn:e=_.getFn,fieldNormWeight:i=_.fieldNormWeight}={}){const{keys:n,records:s}=t,o=new M({getFn:e,fieldNormWeight:i});return o.setKeys(n),o.setIndexRecords(s),o},H.config=_,H.parseQuery=U,function(...t){j.push(...t)}(q)}}]);
//# sourceMappingURL=1599-Y3BZ6Wc-8I0.js.map