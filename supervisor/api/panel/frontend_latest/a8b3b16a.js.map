{"version":3,"file":"a8b3b16a.js","mappings":";;AAqDA;;;AAGA;;;AAKA;AAGA;;;;;AAKA;;AAEA;AAGA;AACA;;;;;;AAOA;AAGA;;;;;AAKA;;AAEA;AAGA;AACA;;;;;;;AAQA;AACA;;;;;;;;;;;;;;;;;AC1EA;AACA;;AApBA;;;;;AAAA;;;;;;;ACCA;;ACeA;AACA;AACA;AACA;AACA;;AAEA;;AA1BA;;AC4BA;;AAEA;;AAGA;AACA;;AAEA;;;;AAKA;AACA;AACA;AACA;AAGA;;;;AAIA;;;AAIA;AACA;AACA;AACA;AACA;;AApDA;;;;;;;;AAAA;;;;;;;;ACoCA;AAGA;;;;;;;;;;;;;;;;AAgBA;AACA;AACA;;AAKA;AAGA;;AAEA;;;AAGA;;;;;AAnEA;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+MA;;AC9LA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvBA;AACA;AACA;;AAtBA;;;;;;;;ACkCA;AACA;;;;;AAKA;;;AAIA;;;AAGA;;;;;;;;;AAUA;AACA;;AAKA;AAEA;AACA;;;;;AA1DA;;;;;;;;;;;;AAAA;;AC0BA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;;;AAGA;;;;AAIA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAnDA;;;;;AAAA;AC6GA;;AAGA;;AAEA;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAOA;AACA;;AAGA;;AAEA;AAEA;AAzDA;;;;AAAA;;;;AC/EA;ACmCA;;AAEA;;AAEA;AACA;;AA1CA;AC2EA;;;;AAIA;;;AAGA;;;;AAIA;AACA;;;AASA;;;;;;;AAOA;AAEA;AACA;AACA;AACA;AAMA;AAEA;AACA;;AAEA;AAGA;;AAMA;;;;AAMA;;AAGA;;;AAKA;AACA;;;AAGA;;;AAIA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA1HA;;ACUA;;;AAKA;;;;;;AAQA;;;AAKA;;AAIA;;AAEA;;AAGA;;;AAGA;AACA;AAGA;AACA;;;;AAIA;;;;;;;AAQA;AACA;;AAEA;AACA;;;;AAxDA;;;;;;;;;;;AAlBA;;ACPA;AAEA;;AAGA;AACA;AACA;;AAEA;AAEA;;AAGA;AACA;AACA;;AAEA;AAEA;;AAGA;AACA;AACA;;AAEA;AAEA;;;;;;;;;;;;;AA9CA;;;AC4BA;;AAIA;;;;AATA;;;;;;;;;;;;;;ACZA;AACA;AACA;;;;;;;AApBA;ACsYA;AACA;AAPA;;;;AApBA;;;;ACtVA;;;AAMA;AAGA;;;AAKA;;AAGA;;AAKA;;AAEA;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0DA;;AAGA;;;;AAQA;AACA;AAOA;;;;AAQA;;AAcA;;AAdA;;AAOA;;AAeA;;;AAIA;AAEA;AACA;;AAEA;AAEA;AACA;;;;AAIA;AAEA;;AAGA;;;AAKA;;;AAGA;AACA;;;;;;;;;;AAaA;;AAEA;AAEA;;AAGA;;AAIA;;AAEA;;AAGA;;AAIA;;;AAGA;;;;AAKA;AAEA;AACA;;AAEA;;;AAKA;AAEA;;;;;AAOA;AACA;AAIA;;;;;AAMA;;;AAIA;;AAEA;;AAGA;AAEA;AAIA;;AAEA;;;;AAMA;;AAEA;;;AAIA;AAKA;;AAEA;;;;AAIA;;AAGA;;AAEA;;;;;AAOA;AAEA;;AAGA;;AAEA;;;;;AAOA;AAEA;;AAGA;;AAEA;;;AAKA;;AAEA;AAEA;;AAGA;;AAEA;AAGA;;AAIA;;AAEA;AAEA;;AAGA;;AAEA;;;;;AAOA;AAEA;;AAGA;;AAEA;;;;;AAOA;AAEA;;AAGA;AACA;;AAEA;;;;;AAOA;AAEA;;AAGA;;AAEA;;;;;AAOA;AAEA;;AAGA;;AAEA;;;;;;;AASA;;;AAIA;;AAGA;;AAKA;;AAEA;;;AAKA;;;AAKA;AACA;;;;;AAKA;AAEA;;AAEA;;;AAKA;;;AAKA;AACA;;;;AAIA;AAEA;AAGA;;AAEA;;;AAKA;;;AAKA;AACA;;;;AAIA;AAEA;AAEA;;AAEA;;;AAKA;;;AAKA;AACA;;;;AAIA;AAEA;AAEA;;AAEA;;;AAKA;;;AAKA;AACA;;;;AAIA;;AAGA;;;AAIA;;AAGA;;AAEA;;AAEA;;AAIA;AACA;AACA;;AALA;;;AAYA;AAGA;;AAcA;;AAdA;;AAOA;;;;;;AAoBA;;;AAKA;;AAEA;;;;AAIA;;AAEA;;AAEA;AAEA;AACA;;AAEA;;AAGA;AACA;;AAEA;;;;;AAKA;;AAIA;;;;;;AAMA;;;AAKA;AAEA;AAEA;AACA;;AAIA;;;AAIA;;AAEA;;AAEA;;;AAIA;AACA;;AAEA;;AAEA;;;;;AAOA;;;;AAKA;;;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAtmBA;;;AChDA;AACA;AACA;AACA;;;AATA;;;;;;AAXA;ACwBA;;AAEA;;AAIA;AAEA;AACA;;;AAIA;AACA;;;;;;;;;;;;ACxBA;AACA;AACA;;;AAPA;;;;;;AATA;ACqDA;AAIA;;AAuCA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA","sources":["webpack://home-assistant-frontend/./hassio/src/addon-view/config/hassio-addon-audio.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form-boolean.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form-constant.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form-float.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form-integer.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form-multi_select.ts","webpack://home-assistant-frontend/./src/components/paper-time-input.js","webpack://home-assistant-frontend/./src/components/ha-duration-input.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form-positive_time_period_dict.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form-select.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form-string.ts","webpack://home-assistant-frontend/./src/components/ha-form/ha-form.ts","webpack://home-assistant-frontend/./src/components/ha-code-editor.ts","webpack://home-assistant-frontend/./src/components/ha-yaml-editor.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/config/hassio-addon-config.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/config/hassio-addon-network.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/config/hassio-addon-config-tab.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/documentation/hassio-addon-documentation-tab.ts","webpack://home-assistant-frontend/./src/components/buttons/ha-call-api-button.ts","webpack://home-assistant-frontend/./src/components/ha-icon.ts","webpack://home-assistant-frontend/./src/components/ha-label-badge.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/info/hassio-addon-info.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/info/hassio-addon-info-tab.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/log/hassio-addon-logs.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/log/hassio-addon-log-tab.ts","webpack://home-assistant-frontend/./hassio/src/addon-view/hassio-addon-dashboard.ts"],"sourcesContent":["import \"@material/mwc-button\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport \"web-animations-js/web-animations-next-lite.min\";\nimport \"../../../../src/components/buttons/ha-progress-button\";\nimport \"../../../../src/components/ha-alert\";\nimport \"../../../../src/components/ha-card\";\nimport {\n  HassioAddonDetails,\n  HassioAddonSetOptionParams,\n  setHassioAddonOption,\n} from \"../../../../src/data/hassio/addon\";\nimport {\n  fetchHassioHardwareAudio,\n  HassioHardwareAudioDevice,\n} from \"../../../../src/data/hassio/hardware\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../../src/types\";\nimport { suggestAddonRestart } from \"../../dialogs/suggestAddonRestart\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\n\n@customElement(\"hassio-addon-audio\")\nclass HassioAddonAudio extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public addon!: HassioAddonDetails;\n\n  @state() private _error?: string;\n\n  @state() private _inputDevices?: HassioHardwareAudioDevice[];\n\n  @state() private _outputDevices?: HassioHardwareAudioDevice[];\n\n  @state() private _selectedInput!: null | string;\n\n  @state() private _selectedOutput!: null | string;\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-card\n        .header=${this.supervisor.localize(\"addon.configuration.audio.header\")}\n      >\n        <div class=\"card-content\">\n          ${this._error\n            ? html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`\n            : \"\"}\n\n          <paper-dropdown-menu\n            .label=${this.supervisor.localize(\n              \"addon.configuration.audio.input\"\n            )}\n            @iron-select=${this._setInputDevice}\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              attr-for-selected=\"device\"\n              .selected=${this._selectedInput!}\n            >\n              ${this._inputDevices &&\n              this._inputDevices.map(\n                (item) => html`\n                  <paper-item device=${item.device || \"\"}>\n                    ${item.name}\n                  </paper-item>\n                `\n              )}\n            </paper-listbox>\n          </paper-dropdown-menu>\n          <paper-dropdown-menu\n            .label=${this.supervisor.localize(\n              \"addon.configuration.audio.output\"\n            )}\n            @iron-select=${this._setOutputDevice}\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              attr-for-selected=\"device\"\n              .selected=${this._selectedOutput!}\n            >\n              ${this._outputDevices &&\n              this._outputDevices.map(\n                (item) => html`\n                  <paper-item device=${item.device || \"\"}\n                    >${item.name}</paper-item\n                  >\n                `\n              )}\n            </paper-listbox>\n          </paper-dropdown-menu>\n        </div>\n        <div class=\"card-actions\">\n          <ha-progress-button @click=${this._saveSettings}>\n            ${this.supervisor.localize(\"common.save\")}\n          </ha-progress-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        :host,\n        ha-card,\n        paper-dropdown-menu {\n          display: block;\n        }\n        paper-item {\n          width: 450px;\n        }\n        .card-actions {\n          text-align: right;\n        }\n      `,\n    ];\n  }\n\n  protected update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n    if (changedProperties.has(\"addon\")) {\n      this._addonChanged();\n    }\n  }\n\n  private _setInputDevice(ev): void {\n    const device = ev.detail.item.getAttribute(\"device\");\n    this._selectedInput = device;\n  }\n\n  private _setOutputDevice(ev): void {\n    const device = ev.detail.item.getAttribute(\"device\");\n    this._selectedOutput = device;\n  }\n\n  private async _addonChanged(): Promise<void> {\n    this._selectedInput =\n      this.addon.audio_input === null ? \"default\" : this.addon.audio_input;\n    this._selectedOutput =\n      this.addon.audio_output === null ? \"default\" : this.addon.audio_output;\n    if (this._outputDevices) {\n      return;\n    }\n\n    const noDevice: HassioHardwareAudioDevice = {\n      device: \"default\",\n      name: this.supervisor.localize(\"addon.configuration.audio.default\"),\n    };\n\n    try {\n      const { audio } = await fetchHassioHardwareAudio(this.hass);\n      const input = Object.keys(audio.input).map((key) => ({\n        device: key,\n        name: audio.input[key],\n      }));\n      const output = Object.keys(audio.output).map((key) => ({\n        device: key,\n        name: audio.output[key],\n      }));\n\n      this._inputDevices = [noDevice, ...input];\n      this._outputDevices = [noDevice, ...output];\n    } catch {\n      this._error = \"Failed to fetch audio hardware\";\n      this._inputDevices = [noDevice];\n      this._outputDevices = [noDevice];\n    }\n  }\n\n  private async _saveSettings(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n\n    this._error = undefined;\n    const data: HassioAddonSetOptionParams = {\n      audio_input:\n        this._selectedInput === \"default\" ? null : this._selectedInput,\n      audio_output:\n        this._selectedOutput === \"default\" ? null : this._selectedOutput,\n    };\n    try {\n      await setHassioAddonOption(this.hass, this.addon.slug, data);\n      if (this.addon?.state === \"started\") {\n        await suggestAddonRestart(this, this.hass, this.supervisor, this.addon);\n      }\n    } catch {\n      this._error = \"Failed to set addon audio device\";\n    }\n\n    button.progress = false;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-audio\": HassioAddonAudio;\n  }\n}\n","import \"@polymer/paper-checkbox/paper-checkbox\";\nimport type { PaperCheckboxElement } from \"@polymer/paper-checkbox/paper-checkbox\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type {\n  HaFormBooleanData,\n  HaFormBooleanSchema,\n  HaFormElement,\n} from \"./ha-form\";\n\n@customElement(\"ha-form-boolean\")\nexport class HaFormBoolean extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormBooleanSchema;\n\n  @property() public data!: HaFormBooleanData;\n\n  @property() public label!: string;\n\n  @property() public suffix!: string;\n\n  @query(\"paper-checkbox\", true) private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <paper-checkbox .checked=${this.data} @change=${this._valueChanged}>\n        ${this.label}\n      </paper-checkbox>\n    `;\n  }\n\n  private _valueChanged(ev: Event) {\n    fireEvent(this, \"value-changed\", {\n      value: (ev.target as PaperCheckboxElement).checked,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      paper-checkbox {\n        display: block;\n        padding: 22px 0;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-boolean\": HaFormBoolean;\n  }\n}\n","import {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HaFormConstantSchema, HaFormElement } from \"./ha-form\";\n\n@customElement(\"ha-form-constant\")\nexport class HaFormConstant extends LitElement implements HaFormElement {\n  @property({ attribute: false }) public schema!: HaFormConstantSchema;\n\n  @property() public label!: string;\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    fireEvent(this, \"value-changed\", {\n      value: this.schema.value,\n    });\n  }\n\n  protected render(): TemplateResult {\n    return html`<span class=\"label\">${this.label}</span>: ${this.schema.value}`;\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: block;\n      }\n      .label {\n        font-weight: 500;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-constant\": HaFormConstant;\n  }\n}\n","import \"@polymer/paper-input/paper-input\";\nimport type { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport { html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HaFormElement, HaFormFloatData, HaFormFloatSchema } from \"./ha-form\";\n\n@customElement(\"ha-form-float\")\nexport class HaFormFloat extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormFloatSchema;\n\n  @property() public data!: HaFormFloatData;\n\n  @property() public label!: string;\n\n  @property() public suffix!: string;\n\n  @query(\"paper-input\", true) private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <paper-input\n        .label=${this.label}\n        .value=${this._value}\n        .required=${this.schema.required}\n        .autoValidate=${this.schema.required}\n        @value-changed=${this._valueChanged}\n      >\n        <span suffix slot=\"suffix\">${this.suffix}</span>\n      </paper-input>\n    `;\n  }\n\n  private get _value() {\n    return this.data;\n  }\n\n  private _valueChanged(ev: Event) {\n    const value: number | undefined = (ev.target as PaperInputElement).value\n      ? Number((ev.target as PaperInputElement).value)\n      : undefined;\n    if (this._value === value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-float\": HaFormFloat;\n  }\n}\n","import \"@polymer/paper-input/paper-input\";\nimport type { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HaCheckbox } from \"../ha-checkbox\";\nimport \"../ha-slider\";\nimport type { HaSlider } from \"../ha-slider\";\nimport {\n  HaFormElement,\n  HaFormIntegerData,\n  HaFormIntegerSchema,\n} from \"./ha-form\";\n\n@customElement(\"ha-form-integer\")\nexport class HaFormInteger extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormIntegerSchema;\n\n  @property() public data?: HaFormIntegerData;\n\n  @property() public label?: string;\n\n  @property() public suffix?: string;\n\n  @query(\"paper-input ha-slider\") private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return \"valueMin\" in this.schema && \"valueMax\" in this.schema\n      ? html`\n          <div>\n            ${this.label}\n            <div class=\"flex\">\n              ${this.schema.optional && this.schema.default === undefined\n                ? html`\n                    <ha-checkbox\n                      @change=${this._handleCheckboxChange}\n                      .checked=${this.data !== undefined}\n                    ></ha-checkbox>\n                  `\n                : \"\"}\n              <ha-slider\n                pin\n                editable\n                .value=${this._value}\n                .min=${this.schema.valueMin}\n                .max=${this.schema.valueMax}\n                .disabled=${this.data === undefined &&\n                this.schema.optional &&\n                this.schema.default === undefined}\n                @value-changed=${this._valueChanged}\n              ></ha-slider>\n            </div>\n          </div>\n        `\n      : html`\n          <paper-input\n            type=\"number\"\n            .label=${this.label}\n            .value=${this._value}\n            .required=${this.schema.required}\n            .autoValidate=${this.schema.required}\n            @value-changed=${this._valueChanged}\n          ></paper-input>\n        `;\n  }\n\n  private get _value() {\n    return (\n      this.data ||\n      this.schema.description?.suggested_value ||\n      this.schema.default ||\n      0\n    );\n  }\n\n  private _handleCheckboxChange(ev: Event) {\n    const checked = (ev.target as HaCheckbox).checked;\n    fireEvent(this, \"value-changed\", {\n      value: checked ? this._value : undefined,\n    });\n  }\n\n  private _valueChanged(ev: Event) {\n    const value = Number((ev.target as PaperInputElement | HaSlider).value);\n    if (this._value === value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      .flex {\n        display: flex;\n      }\n      ha-slider {\n        width: 100%;\n        margin-right: 16px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-integer\": HaFormInteger;\n  }\n}\n","import { mdiMenuDown } from \"@mdi/js\";\nimport \"@polymer/paper-checkbox/paper-checkbox\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-menu-button/paper-menu-button\";\nimport \"@polymer/paper-ripple/paper-ripple\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"../ha-svg-icon\";\nimport {\n  HaFormElement,\n  HaFormMultiSelectData,\n  HaFormMultiSelectSchema,\n} from \"./ha-form\";\n\n@customElement(\"ha-form-multi_select\")\nexport class HaFormMultiSelect extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormMultiSelectSchema;\n\n  @property() public data!: HaFormMultiSelectData;\n\n  @property() public label!: string;\n\n  @property() public suffix!: string;\n\n  @state() private _init = false;\n\n  @query(\"paper-menu-button\", true) private _input?: HTMLElement;\n\n  public focus(): void {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    const options = Array.isArray(this.schema.options)\n      ? this.schema.options\n      : Object.entries(this.schema.options!);\n\n    const data = this.data || [];\n    return html`\n      <paper-menu-button horizontal-align=\"right\" vertical-offset=\"8\">\n        <div class=\"dropdown-trigger\" slot=\"dropdown-trigger\">\n          <paper-ripple></paper-ripple>\n          <paper-input\n            id=\"input\"\n            type=\"text\"\n            readonly\n            value=${data\n              .map((value) => this.schema.options![value] || value)\n              .join(\", \")}\n            label=${this.label}\n            input-role=\"button\"\n            input-aria-haspopup=\"listbox\"\n            autocomplete=\"off\"\n          >\n            <ha-svg-icon\n              .path=${mdiMenuDown}\n              suffix\n              slot=\"suffix\"\n            ></ha-svg-icon>\n          </paper-input>\n        </div>\n        <paper-listbox\n          multi\n          slot=\"dropdown-content\"\n          attr-for-selected=\"item-value\"\n          .selectedValues=${data}\n          @selected-items-changed=${this._valueChanged}\n          @iron-select=${this._onSelect}\n        >\n          ${\n            // TS doesn't work with union array types https://github.com/microsoft/TypeScript/issues/36390\n            // @ts-ignore\n            options.map((item: string | [string, string]) => {\n              const value = this._optionValue(item);\n              return html`\n                <paper-icon-item .itemValue=${value}>\n                  <paper-checkbox\n                    .checked=${data.includes(value)}\n                    slot=\"item-icon\"\n                  ></paper-checkbox>\n                  ${this._optionLabel(item)}\n                </paper-icon-item>\n              `;\n            })\n          }\n        </paper-listbox>\n      </paper-menu-button>\n    `;\n  }\n\n  protected firstUpdated() {\n    this.updateComplete.then(() => {\n      const input = (\n        this.shadowRoot?.querySelector(\"paper-input\")?.inputElement as any\n      )?.inputElement;\n      if (input) {\n        input.style.textOverflow = \"ellipsis\";\n      }\n    });\n  }\n\n  private _optionValue(item: string | string[]): string {\n    return Array.isArray(item) ? item[0] : item;\n  }\n\n  private _optionLabel(item: string | string[]): string {\n    return Array.isArray(item) ? item[1] || item[0] : item;\n  }\n\n  private _onSelect(ev: Event) {\n    ev.stopPropagation();\n  }\n\n  private _valueChanged(ev: CustomEvent): void {\n    if (!ev.detail.value || !this._init) {\n      // ignore first call because that is the init of the component\n      this._init = true;\n      return;\n    }\n\n    fireEvent(\n      this,\n      \"value-changed\",\n      {\n        value: ev.detail.value.map((element) => element.itemValue),\n      },\n      { bubbles: false }\n    );\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      paper-menu-button {\n        display: block;\n        padding: 0;\n        --paper-item-icon-width: 34px;\n      }\n      paper-ripple {\n        top: 12px;\n        left: 0px;\n        bottom: 8px;\n        right: 0px;\n      }\n      paper-input {\n        text-overflow: ellipsis;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-multi_select\": HaFormMultiSelect;\n  }\n}\n","/**\nAdapted from paper-time-input from\nhttps://github.com/ryanburns23/paper-time-input\nMIT Licensed. Copyright (c) 2017 Ryan Burns\n\n`<paper-time-input>` Polymer element to accept a time with paper-input & paper-dropdown-menu\nInspired by the time input in google forms\n\n### Styling\n\n`<paper-time-input>` provides the following custom properties and mixins for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-time-input-dropdown-ripple-color` | dropdown ripple color | `--primary-color`\n`--paper-time-input-cotnainer` | Mixin applied to the inputs | `{}`\n`--paper-time-dropdown-input-cotnainer` | Mixin applied to the dropdown input | `{}`\n*/\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nexport class PaperTimeInput extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          @apply --paper-font-common-base;\n        }\n\n        paper-input {\n          width: 30px;\n          text-align: center;\n          --paper-input-container-input: {\n            /* Damn you firefox\n             * Needed to hide spin num in firefox\n             * http://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-input-s-spin-box\n             */\n            -moz-appearance: textfield;\n            @apply --paper-time-input-cotnainer;\n          }\n          --paper-input-container-input-webkit-spinner: {\n            -webkit-appearance: none;\n            margin: 0;\n            display: none;\n          }\n          --paper-input-container-shared-input-style_-_-webkit-appearance: textfield;\n        }\n\n        paper-dropdown-menu {\n          width: 55px;\n          padding: 0;\n          /* Force ripple to use the whole container */\n          --paper-dropdown-menu-ripple: {\n            color: var(\n              --paper-time-input-dropdown-ripple-color,\n              var(--primary-color)\n            );\n          }\n          --paper-input-container-input: {\n            @apply --paper-font-button;\n            text-align: center;\n            padding-left: 5px;\n            @apply --paper-time-dropdown-input-cotnainer;\n          }\n          --paper-input-container-underline: {\n            border-color: transparent;\n          }\n          --paper-input-container-underline-focus: {\n            border-color: transparent;\n          }\n        }\n\n        paper-item {\n          cursor: pointer;\n          text-align: center;\n          font-size: 14px;\n        }\n\n        paper-listbox {\n          padding: 0;\n        }\n\n        label {\n          @apply --paper-font-caption;\n          color: var(\n            --paper-input-container-color,\n            var(--secondary-text-color)\n          );\n        }\n\n        .time-input-wrap {\n          @apply --layout-horizontal;\n          @apply --layout-no-wrap;\n          justify-content: var(--paper-time-input-justify-content, normal);\n        }\n\n        [hidden] {\n          display: none !important;\n        }\n\n        #millisec {\n          width: 38px;\n        }\n\n        .no-suffix {\n          margin-left: -2px;\n        }\n      </style>\n\n      <label hidden$=\"[[hideLabel]]\">[[label]]</label>\n      <div class=\"time-input-wrap\">\n        <!-- Hour Input -->\n        <paper-input\n          id=\"hour\"\n          type=\"number\"\n          value=\"{{hour}}\"\n          label=\"[[hourLabel]]\"\n          on-change=\"_shouldFormatHour\"\n          on-focus=\"_onFocus\"\n          required\n          prevent-invalid-input\n          auto-validate=\"[[autoValidate]]\"\n          maxlength=\"2\"\n          max=\"[[_computeHourMax(format)]]\"\n          min=\"0\"\n          no-label-float$=\"[[!floatInputLabels]]\"\n          always-float-label$=\"[[alwaysFloatInputLabels]]\"\n          disabled=\"[[disabled]]\"\n        >\n          <span suffix slot=\"suffix\">:</span>\n        </paper-input>\n\n        <!-- Min Input -->\n        <paper-input\n          class$=\"[[_computeClassNames(enableSecond)]]\"\n          id=\"min\"\n          type=\"number\"\n          value=\"{{min}}\"\n          label=\"[[minLabel]]\"\n          on-change=\"_formatMin\"\n          on-focus=\"_onFocus\"\n          required\n          auto-validate=\"[[autoValidate]]\"\n          prevent-invalid-input\n          maxlength=\"2\"\n          max=\"59\"\n          min=\"0\"\n          no-label-float$=\"[[!floatInputLabels]]\"\n          always-float-label$=\"[[alwaysFloatInputLabels]]\"\n          disabled=\"[[disabled]]\"\n        >\n          <span hidden$=\"[[!enableSecond]]\" suffix slot=\"suffix\">:</span>\n        </paper-input>\n\n        <!-- Sec Input -->\n        <paper-input\n          class$=\"[[_computeClassNames(enableMillisecond)]]\"\n          id=\"sec\"\n          type=\"number\"\n          value=\"{{sec}}\"\n          label=\"[[secLabel]]\"\n          on-change=\"_formatSec\"\n          on-focus=\"_onFocus\"\n          required\n          auto-validate=\"[[autoValidate]]\"\n          prevent-invalid-input\n          maxlength=\"2\"\n          max=\"59\"\n          min=\"0\"\n          no-label-float$=\"[[!floatInputLabels]]\"\n          always-float-label$=\"[[alwaysFloatInputLabels]]\"\n          disabled=\"[[disabled]]\"\n          hidden$=\"[[!enableSecond]]\"\n        >\n          <span hidden$=\"[[!enableMillisecond]]\" suffix slot=\"suffix\">:</span>\n        </paper-input>\n\n        <!-- Millisec Input -->\n        <paper-input\n          id=\"millisec\"\n          type=\"number\"\n          value=\"{{millisec}}\"\n          label=\"[[millisecLabel]]\"\n          on-change=\"_formatMillisec\"\n          on-focus=\"_onFocus\"\n          required\n          auto-validate=\"[[autoValidate]]\"\n          prevent-invalid-input\n          maxlength=\"3\"\n          max=\"999\"\n          min=\"0\"\n          no-label-float$=\"[[!floatInputLabels]]\"\n          always-float-label$=\"[[alwaysFloatInputLabels]]\"\n          disabled=\"[[disabled]]\"\n          hidden$=\"[[!enableMillisecond]]\"\n        >\n        </paper-input>\n\n        <!-- Dropdown Menu -->\n        <paper-dropdown-menu\n          id=\"dropdown\"\n          required=\"\"\n          hidden$=\"[[_equal(format, 24)]]\"\n          no-label-float=\"\"\n          disabled=\"[[disabled]]\"\n        >\n          <paper-listbox\n            attr-for-selected=\"name\"\n            selected=\"{{amPm}}\"\n            slot=\"dropdown-content\"\n          >\n            <paper-item name=\"AM\">AM</paper-item>\n            <paper-item name=\"PM\">PM</paper-item>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Label for the input\n       */\n      label: {\n        type: String,\n        value: \"Time\",\n      },\n      /**\n       * auto validate time inputs\n       */\n      autoValidate: {\n        type: Boolean,\n        value: true,\n      },\n      /**\n       * hides the label\n       */\n      hideLabel: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * float the input labels\n       */\n      floatInputLabels: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * always float the input labels\n       */\n      alwaysFloatInputLabels: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * 12 or 24 hr format\n       */\n      format: {\n        type: Number,\n        value: 12,\n      },\n      /**\n       * disables the inputs\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * hour\n       */\n      hour: {\n        type: String,\n        notify: true,\n      },\n      /**\n       * minute\n       */\n      min: {\n        type: String,\n        notify: true,\n      },\n      /**\n       * second\n       */\n      sec: {\n        type: String,\n        notify: true,\n      },\n      /**\n       * milli second\n       */\n      millisec: {\n        type: String,\n        notify: true,\n      },\n      /**\n       * Label for the hour input\n       */\n      hourLabel: {\n        type: String,\n        value: \"\",\n      },\n      /**\n       * Label for the min input\n       */\n      minLabel: {\n        type: String,\n        value: \"\",\n      },\n      /**\n       * Label for the sec input\n       */\n      secLabel: {\n        type: String,\n        value: \"\",\n      },\n      /**\n       * Label for the milli sec input\n       */\n      millisecLabel: {\n        type: String,\n        value: \"\",\n      },\n      /**\n       * show the sec field\n       */\n      enableSecond: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * show the milli sec field\n       */\n      enableMillisecond: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * limit hours input\n       */\n      noHoursLimit: {\n        type: Boolean,\n        value: false,\n      },\n      /**\n       * AM or PM\n       */\n      amPm: {\n        type: String,\n        notify: true,\n        value: \"AM\",\n      },\n      /**\n       * Formatted time string\n       */\n      value: {\n        type: String,\n        notify: true,\n        readOnly: true,\n        computed: \"_computeTime(min, hour, sec, millisec, amPm)\",\n      },\n    };\n  }\n\n  /**\n   * Validate the inputs\n   * @return {boolean}\n   */\n  validate() {\n    let valid = true;\n    // Validate hour & min fields\n    if (!this.$.hour.validate() || !this.$.min.validate()) {\n      valid = false;\n    }\n    // Validate second field\n    if (this.enableSecond && !this.$.sec.validate()) {\n      valid = false;\n    }\n    // Validate milli second field\n    if (this.enableMillisecond && !this.$.millisec.validate()) {\n      valid = false;\n    }\n    // Validate AM PM if 12 hour time\n    if (this.format === 12 && !this.$.dropdown.validate()) {\n      valid = false;\n    }\n    return valid;\n  }\n\n  /**\n   * Create time string\n   */\n  _computeTime(min, hour, sec, millisec, amPm) {\n    let str;\n    if (\n      hour ||\n      min ||\n      (sec && this.enableSecond) ||\n      (millisec && this.enableMillisecond)\n    ) {\n      hour = hour || \"00\";\n      min = min || \"00\";\n      sec = sec || \"00\";\n      millisec = millisec || \"000\";\n      str = hour + \":\" + min;\n      // add sec field\n      if (this.enableSecond && sec) {\n        str = str + \":\" + sec;\n      }\n      // add milli sec field\n      if (this.enableMillisecond && millisec) {\n        str = str + \":\" + millisec;\n      }\n      // No ampm on 24 hr time\n      if (this.format === 12) {\n        str = str + \" \" + amPm;\n      }\n    }\n\n    return str;\n  }\n\n  _onFocus(ev) {\n    ev.target.inputElement.inputElement.select();\n  }\n\n  /**\n   * Format milli sec\n   */\n  _formatMillisec() {\n    if (this.millisec.toString().length === 1) {\n      this.millisec = this.millisec.toString().padStart(3, \"0\");\n    }\n  }\n\n  /**\n   * Format sec\n   */\n  _formatSec() {\n    if (this.sec.toString().length === 1) {\n      this.sec = this.sec.toString().padStart(2, \"0\");\n    }\n  }\n\n  /**\n   * Format min\n   */\n  _formatMin() {\n    if (this.min.toString().length === 1) {\n      this.min = this.min.toString().padStart(2, \"0\");\n    }\n  }\n\n  /**\n   * Format hour\n   */\n  _shouldFormatHour() {\n    if (this.format === 24 && this.hour.toString().length === 1) {\n      this.hour = this.hour.toString().padStart(2, \"0\");\n    }\n  }\n\n  /**\n   * 24 hour format has a max hr of 23\n   */\n  _computeHourMax(format) {\n    if (this.noHoursLimit) {\n      return null;\n    }\n    if (format === 12) {\n      return format;\n    }\n    return 23;\n  }\n\n  _equal(n1, n2) {\n    return n1 === n2;\n  }\n\n  _computeClassNames(hasSuffix) {\n    return hasSuffix ? \" \" : \"no-suffix\";\n  }\n}\n\ncustomElements.define(\"paper-time-input\", PaperTimeInput);\n","import { html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport \"./paper-time-input\";\n\nexport interface HaDurationData {\n  hours?: number;\n  minutes?: number;\n  seconds?: number;\n  milliseconds?: number;\n}\n\n@customElement(\"ha-duration-input\")\nclass HaDurationInput extends LitElement {\n  @property({ attribute: false }) public data!: HaDurationData;\n\n  @property() public label?: string;\n\n  @property() public suffix?: string;\n\n  @property({ type: Boolean }) public required?: boolean;\n\n  @property({ type: Boolean }) public enableMillisecond?: boolean;\n\n  @query(\"paper-time-input\", true) private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <paper-time-input\n        .label=${this.label}\n        .required=${this.required}\n        .autoValidate=${this.required}\n        error-message=\"Required\"\n        enable-second\n        .enableMillisecond=${this.enableMillisecond}\n        format=\"24\"\n        .hour=${this._parseDuration(this._hours)}\n        .min=${this._parseDuration(this._minutes)}\n        .sec=${this._parseDuration(this._seconds)}\n        .millisec=${this._parseDurationMillisec(this._milliseconds)}\n        @hour-changed=${this._hourChanged}\n        @min-changed=${this._minChanged}\n        @sec-changed=${this._secChanged}\n        @millisec-changed=${this._millisecChanged}\n        float-input-labels\n        no-hours-limit\n        always-float-input-labels\n        hour-label=\"hh\"\n        min-label=\"mm\"\n        sec-label=\"ss\"\n        millisec-label=\"ms\"\n      ></paper-time-input>\n    `;\n  }\n\n  private get _hours() {\n    return this.data && this.data.hours ? Number(this.data.hours) : 0;\n  }\n\n  private get _minutes() {\n    return this.data && this.data.minutes ? Number(this.data.minutes) : 0;\n  }\n\n  private get _seconds() {\n    return this.data && this.data.seconds ? Number(this.data.seconds) : 0;\n  }\n\n  private get _milliseconds() {\n    return this.data && this.data.milliseconds\n      ? Number(this.data.milliseconds)\n      : 0;\n  }\n\n  private _parseDuration(value) {\n    return value.toString().padStart(2, \"0\");\n  }\n\n  private _parseDurationMillisec(value) {\n    return value.toString().padStart(3, \"0\");\n  }\n\n  private _hourChanged(ev) {\n    this._durationChanged(ev, \"hours\");\n  }\n\n  private _minChanged(ev) {\n    this._durationChanged(ev, \"minutes\");\n  }\n\n  private _secChanged(ev) {\n    this._durationChanged(ev, \"seconds\");\n  }\n\n  private _millisecChanged(ev) {\n    this._durationChanged(ev, \"milliseconds\");\n  }\n\n  private _durationChanged(ev, unit) {\n    let value = Number(ev.detail.value);\n\n    if (value === this[`_${unit}`]) {\n      return;\n    }\n\n    let hours = this._hours;\n    let minutes = this._minutes;\n\n    if (unit === \"seconds\" && value > 59) {\n      minutes += Math.floor(value / 60);\n      value %= 60;\n    }\n\n    if (unit === \"minutes\" && value > 59) {\n      hours += Math.floor(value / 60);\n      value %= 60;\n    }\n\n    fireEvent(this, \"value-changed\", {\n      value: {\n        hours,\n        minutes,\n        seconds: this._seconds,\n        milliseconds: this._milliseconds,\n        ...{ [unit]: value },\n      },\n    });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-duration-input\": HaDurationInput;\n  }\n}\n","import { html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport \"../ha-duration-input\";\nimport { HaFormElement, HaFormTimeData, HaFormTimeSchema } from \"./ha-form\";\n\n@customElement(\"ha-form-positive_time_period_dict\")\nexport class HaFormTimePeriod extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormTimeSchema;\n\n  @property() public data!: HaFormTimeData;\n\n  @property() public label!: string;\n\n  @property() public suffix!: string;\n\n  @query(\"ha-time-input\", true) private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-duration-input\n        .label=${this.label}\n        .required=${this.schema.required}\n        .data=${this.data}\n      ></ha-duration-input>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-positive_time_period_dict\": HaFormTimePeriod;\n  }\n}\n","import \"@material/mwc-icon-button/mwc-icon-button\";\nimport { mdiClose, mdiMenuDown } from \"@mdi/js\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport \"@polymer/paper-menu-button/paper-menu-button\";\nimport \"@polymer/paper-ripple/paper-ripple\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"../ha-svg-icon\";\nimport { HaFormElement, HaFormSelectData, HaFormSelectSchema } from \"./ha-form\";\n\n@customElement(\"ha-form-select\")\nexport class HaFormSelect extends LitElement implements HaFormElement {\n  @property({ attribute: false }) public schema!: HaFormSelectSchema;\n\n  @property() public data!: HaFormSelectData;\n\n  @property() public label!: string;\n\n  @property() public suffix!: string;\n\n  @query(\"ha-paper-dropdown-menu\", true) private _input?: HTMLElement;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <paper-menu-button horizontal-align=\"right\" vertical-offset=\"8\">\n        <div class=\"dropdown-trigger\" slot=\"dropdown-trigger\">\n          <paper-ripple></paper-ripple>\n          <paper-input\n            id=\"input\"\n            type=\"text\"\n            readonly\n            value=${this.data}\n            label=${this.label}\n            input-role=\"button\"\n            input-aria-haspopup=\"listbox\"\n            autocomplete=\"off\"\n          >\n            ${this.data && this.schema.optional\n              ? html`<mwc-icon-button\n                  slot=\"suffix\"\n                  class=\"clear-button\"\n                  @click=${this._clearValue}\n                >\n                  <ha-svg-icon .path=${mdiClose}></ha-svg-icon>\n                </mwc-icon-button>`\n              : \"\"}\n            <mwc-icon-button slot=\"suffix\">\n              <ha-svg-icon .path=${mdiMenuDown}></ha-svg-icon>\n            </mwc-icon-button>\n          </paper-input>\n        </div>\n        <paper-listbox\n          slot=\"dropdown-content\"\n          attr-for-selected=\"item-value\"\n          .selected=${this.data}\n          @selected-item-changed=${this._valueChanged}\n        >\n          ${\n            // TS doesn't work with union array types https://github.com/microsoft/TypeScript/issues/36390\n            // @ts-ignore\n            this.schema.options!.map(\n              (item: string | [string, string]) => html`\n                <paper-item .itemValue=${this._optionValue(item)}>\n                  ${this._optionLabel(item)}\n                </paper-item>\n              `\n            )\n          }\n        </paper-listbox>\n      </paper-menu-button>\n    `;\n  }\n\n  private _optionValue(item: string | [string, string]) {\n    return Array.isArray(item) ? item[0] : item;\n  }\n\n  private _optionLabel(item: string | [string, string]) {\n    return Array.isArray(item) ? item[1] || item[0] : item;\n  }\n\n  private _clearValue(ev: CustomEvent) {\n    ev.stopPropagation();\n    fireEvent(this, \"value-changed\", { value: undefined });\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    if (!ev.detail.value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value: ev.detail.value.itemValue,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      paper-menu-button {\n        display: block;\n        padding: 0;\n      }\n      paper-input > mwc-icon-button {\n        --mdc-icon-button-size: 24px;\n        padding: 2px;\n      }\n      .clear-button {\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-select\": HaFormSelect;\n  }\n}\n","import \"@material/mwc-icon-button/mwc-icon-button\";\nimport { mdiEye, mdiEyeOff } from \"@mdi/js\";\nimport \"@polymer/paper-input/paper-input\";\nimport type { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport \"../ha-svg-icon\";\nimport type {\n  HaFormElement,\n  HaFormStringData,\n  HaFormStringSchema,\n} from \"./ha-form\";\n\nconst MASKED_FIELDS = [\"password\", \"secret\", \"token\"];\n\n@customElement(\"ha-form-string\")\nexport class HaFormString extends LitElement implements HaFormElement {\n  @property() public schema!: HaFormStringSchema;\n\n  @property() public data!: HaFormStringData;\n\n  @property() public label!: string;\n\n  @property() public suffix!: string;\n\n  @state() private _unmaskedPassword = false;\n\n  @query(\"paper-input\") private _input?: HTMLElement;\n\n  public focus(): void {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return MASKED_FIELDS.some((field) => this.schema.name.includes(field))\n      ? html`\n          <paper-input\n            .type=${this._unmaskedPassword ? \"text\" : \"password\"}\n            .label=${this.label}\n            .value=${this.data}\n            .required=${this.schema.required}\n            .autoValidate=${this.schema.required}\n            @value-changed=${this._valueChanged}\n          >\n            <mwc-icon-button\n              toggles\n              slot=\"suffix\"\n              id=\"iconButton\"\n              title=\"Click to toggle between masked and clear password\"\n              @click=${this._toggleUnmaskedPassword}\n              tabindex=\"-1\"\n              ><ha-svg-icon\n                .path=${this._unmaskedPassword ? mdiEyeOff : mdiEye}\n              ></ha-svg-icon>\n            </mwc-icon-button>\n          </paper-input>\n        `\n      : html`\n          <paper-input\n            .type=${this._stringType}\n            .label=${this.label}\n            .value=${this.data}\n            .required=${this.schema.required}\n            .autoValidate=${this.schema.required}\n            error-message=\"Required\"\n            @value-changed=${this._valueChanged}\n          ></paper-input>\n        `;\n  }\n\n  private _toggleUnmaskedPassword(): void {\n    this._unmaskedPassword = !this._unmaskedPassword;\n  }\n\n  private _valueChanged(ev: Event): void {\n    const value = (ev.target as PaperInputElement).value;\n    if (this.data === value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n\n  private get _stringType(): string {\n    if (this.schema.format) {\n      if ([\"email\", \"url\"].includes(this.schema.format)) {\n        return this.schema.format;\n      }\n      if (this.schema.format === \"fqdnurl\") {\n        return \"url\";\n      }\n    }\n    return \"text\";\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      mwc-icon-button {\n        --mdc-icon-button-size: 24px;\n        color: var(--secondary-text-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-string\": HaFormString;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { dynamicElement } from \"../../common/dom/dynamic-element-directive\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HaDurationData } from \"../ha-duration-input\";\nimport \"./ha-form-boolean\";\nimport \"./ha-form-constant\";\nimport \"./ha-form-float\";\nimport \"./ha-form-integer\";\nimport \"./ha-form-multi_select\";\nimport \"./ha-form-positive_time_period_dict\";\nimport \"./ha-form-select\";\nimport \"./ha-form-string\";\n\nexport type HaFormSchema =\n  | HaFormConstantSchema\n  | HaFormStringSchema\n  | HaFormIntegerSchema\n  | HaFormFloatSchema\n  | HaFormBooleanSchema\n  | HaFormSelectSchema\n  | HaFormMultiSelectSchema\n  | HaFormTimeSchema;\n\nexport interface HaFormBaseSchema {\n  name: string;\n  default?: HaFormData;\n  required?: boolean;\n  optional?: boolean;\n  description?: { suffix?: string; suggested_value?: HaFormData };\n}\n\nexport interface HaFormConstantSchema extends HaFormBaseSchema {\n  type: \"constant\";\n  value: string;\n}\n\nexport interface HaFormIntegerSchema extends HaFormBaseSchema {\n  type: \"integer\";\n  default?: HaFormIntegerData;\n  valueMin?: number;\n  valueMax?: number;\n}\n\nexport interface HaFormSelectSchema extends HaFormBaseSchema {\n  type: \"select\";\n  options?: string[] | Array<[string, string]>;\n}\n\nexport interface HaFormMultiSelectSchema extends HaFormBaseSchema {\n  type: \"multi_select\";\n  options?: Record<string, string> | string[] | Array<[string, string]>;\n}\n\nexport interface HaFormFloatSchema extends HaFormBaseSchema {\n  type: \"float\";\n}\n\nexport interface HaFormStringSchema extends HaFormBaseSchema {\n  type: \"string\";\n  format?: string;\n}\n\nexport interface HaFormBooleanSchema extends HaFormBaseSchema {\n  type: \"boolean\";\n}\n\nexport interface HaFormTimeSchema extends HaFormBaseSchema {\n  type: \"positive_time_period_dict\";\n}\n\nexport interface HaFormDataContainer {\n  [key: string]: HaFormData;\n}\n\nexport type HaFormData =\n  | HaFormStringData\n  | HaFormIntegerData\n  | HaFormFloatData\n  | HaFormBooleanData\n  | HaFormSelectData\n  | HaFormMultiSelectData\n  | HaFormTimeData;\n\nexport type HaFormStringData = string;\nexport type HaFormIntegerData = number;\nexport type HaFormFloatData = number;\nexport type HaFormBooleanData = boolean;\nexport type HaFormSelectData = string;\nexport type HaFormMultiSelectData = string[];\nexport type HaFormTimeData = HaDurationData;\n\nexport interface HaFormElement extends LitElement {\n  schema: HaFormSchema | HaFormSchema[];\n  data?: HaFormDataContainer | HaFormData;\n  label?: string;\n  suffix?: string;\n}\n\n@customElement(\"ha-form\")\nexport class HaForm extends LitElement implements HaFormElement {\n  @property() public data!: HaFormDataContainer | HaFormData;\n\n  @property() public schema!: HaFormSchema | HaFormSchema[];\n\n  @property() public error;\n\n  @property() public computeError?: (schema: HaFormSchema, error) => string;\n\n  @property() public computeLabel?: (schema: HaFormSchema) => string;\n\n  @property() public computeSuffix?: (schema: HaFormSchema) => string;\n\n  public focus() {\n    const input =\n      this.shadowRoot!.getElementById(\"child-form\") ||\n      this.shadowRoot!.querySelector(\"ha-form\");\n    if (!input) {\n      return;\n    }\n    (input as HTMLElement).focus();\n  }\n\n  protected render() {\n    if (Array.isArray(this.schema)) {\n      return html`\n        ${this.error && this.error.base\n          ? html`\n              <div class=\"error\">\n                ${this._computeError(this.error.base, this.schema)}\n              </div>\n            `\n          : \"\"}\n        ${this.schema.map(\n          (item) => html`\n            <ha-form\n              .data=${this._getValue(this.data, item)}\n              .schema=${item}\n              .error=${this._getValue(this.error, item)}\n              @value-changed=${this._valueChanged}\n              .computeError=${this.computeError}\n              .computeLabel=${this.computeLabel}\n              .computeSuffix=${this.computeSuffix}\n            ></ha-form>\n          `\n        )}\n      `;\n    }\n\n    return html`\n      ${this.error\n        ? html`\n            <div class=\"error\">\n              ${this._computeError(this.error, this.schema)}\n            </div>\n          `\n        : \"\"}\n      ${dynamicElement(`ha-form-${this.schema.type}`, {\n        schema: this.schema,\n        data: this.data,\n        label: this._computeLabel(this.schema),\n        suffix: this._computeSuffix(this.schema),\n        id: \"child-form\",\n      })}\n    `;\n  }\n\n  private _computeLabel(schema: HaFormSchema) {\n    return this.computeLabel\n      ? this.computeLabel(schema)\n      : schema\n      ? schema.name\n      : \"\";\n  }\n\n  private _computeSuffix(schema: HaFormSchema) {\n    return this.computeSuffix\n      ? this.computeSuffix(schema)\n      : schema && schema.description\n      ? schema.description.suffix\n      : \"\";\n  }\n\n  private _computeError(error, schema: HaFormSchema | HaFormSchema[]) {\n    return this.computeError ? this.computeError(error, schema) : error;\n  }\n\n  private _getValue(obj, item) {\n    if (obj) {\n      return obj[item.name];\n    }\n    return null;\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    ev.stopPropagation();\n    const schema = (ev.target as HaFormElement).schema as HaFormSchema;\n    const data = this.data as HaFormDataContainer;\n    fireEvent(this, \"value-changed\", {\n      value: { ...data, [schema.name]: ev.detail.value },\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      .error {\n        color: var(--error-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form\": HaForm;\n  }\n}\n","import type { EditorView, KeyBinding, ViewUpdate } from \"@codemirror/view\";\nimport { css, CSSResultGroup, PropertyValues, ReactiveElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { loadCodeMirror } from \"../resources/codemirror.ondemand\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"editor-save\": undefined;\n  }\n}\n\nconst saveKeyBinding: KeyBinding = {\n  key: \"Mod-s\",\n  run: (view: EditorView) => {\n    fireEvent(view.dom, \"editor-save\");\n    return true;\n  },\n};\n\n@customElement(\"ha-code-editor\")\nexport class HaCodeEditor extends ReactiveElement {\n  public codemirror?: EditorView;\n\n  @property() public mode = \"yaml\";\n\n  @property({ type: Boolean }) public autofocus = false;\n\n  @property({ type: Boolean }) public readOnly = false;\n\n  @property() public error = false;\n\n  @state() private _value = \"\";\n\n  private _loadedCodeMirror?: typeof import(\"../resources/codemirror\");\n\n  public set value(value: string) {\n    this._value = value;\n  }\n\n  public get value(): string {\n    return this.codemirror ? this.codemirror.state.doc.toString() : this._value;\n  }\n\n  public get hasComments(): boolean {\n    if (!this.codemirror || !this._loadedCodeMirror) {\n      return false;\n    }\n    const className = this._loadedCodeMirror.HighlightStyle.get(\n      this.codemirror.state,\n      this._loadedCodeMirror.tags.comment\n    );\n    return !!this.shadowRoot!.querySelector(`span.${className}`);\n  }\n\n  public connectedCallback() {\n    super.connectedCallback();\n    if (!this.codemirror) {\n      return;\n    }\n    if (this.autofocus !== false) {\n      this.codemirror.focus();\n    }\n  }\n\n  protected update(changedProps: PropertyValues): void {\n    super.update(changedProps);\n\n    if (!this.codemirror) {\n      return;\n    }\n\n    if (changedProps.has(\"mode\")) {\n      this.codemirror.dispatch({\n        effects: this._loadedCodeMirror!.langCompartment!.reconfigure(\n          this._mode\n        ),\n      });\n    }\n    if (changedProps.has(\"readOnly\")) {\n      this.codemirror.dispatch({\n        effects: this._loadedCodeMirror!.readonlyCompartment!.reconfigure(\n          this._loadedCodeMirror!.EditorView!.editable.of(!this.readOnly)\n        ),\n      });\n    }\n    if (changedProps.has(\"_value\") && this._value !== this.value) {\n      this.codemirror.dispatch({\n        changes: {\n          from: 0,\n          to: this.codemirror.state.doc.length,\n          insert: this._value,\n        },\n      });\n    }\n    if (changedProps.has(\"error\")) {\n      this.classList.toggle(\"error-state\", this.error);\n    }\n  }\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n    this._blockKeyboardShortcuts();\n    this._load();\n  }\n\n  private get _mode() {\n    return this._loadedCodeMirror!.langs[this.mode];\n  }\n\n  private async _load(): Promise<void> {\n    this._loadedCodeMirror = await loadCodeMirror();\n\n    this.codemirror = new this._loadedCodeMirror.EditorView({\n      state: this._loadedCodeMirror.EditorState.create({\n        doc: this._value,\n        extensions: [\n          this._loadedCodeMirror.lineNumbers(),\n          this._loadedCodeMirror.EditorState.allowMultipleSelections.of(true),\n          this._loadedCodeMirror.history(),\n          this._loadedCodeMirror.highlightSelectionMatches(),\n          this._loadedCodeMirror.highlightActiveLine(),\n          this._loadedCodeMirror.drawSelection(),\n          this._loadedCodeMirror.rectangularSelection(),\n          this._loadedCodeMirror.keymap.of([\n            ...this._loadedCodeMirror.defaultKeymap,\n            ...this._loadedCodeMirror.searchKeymap,\n            ...this._loadedCodeMirror.historyKeymap,\n            ...this._loadedCodeMirror.tabKeyBindings,\n            saveKeyBinding,\n          ] as KeyBinding[]),\n          this._loadedCodeMirror.langCompartment.of(this._mode),\n          this._loadedCodeMirror.theme,\n          this._loadedCodeMirror.Prec.fallback(\n            this._loadedCodeMirror.highlightStyle\n          ),\n          this._loadedCodeMirror.readonlyCompartment.of(\n            this._loadedCodeMirror.EditorView.editable.of(!this.readOnly)\n          ),\n          this._loadedCodeMirror.EditorView.updateListener.of((update) =>\n            this._onUpdate(update)\n          ),\n        ],\n      }),\n      root: this.shadowRoot!,\n      parent: this.shadowRoot!,\n    });\n  }\n\n  private _blockKeyboardShortcuts() {\n    this.addEventListener(\"keydown\", (ev) => ev.stopPropagation());\n  }\n\n  private _onUpdate(update: ViewUpdate): void {\n    if (!update.docChanged) {\n      return;\n    }\n    const newValue = this.value;\n    if (newValue === this._value) {\n      return;\n    }\n    this._value = newValue;\n    fireEvent(this, \"value-changed\", { value: this._value });\n  }\n\n  // Only Lit 2.0 will use this\n  static get styles(): CSSResultGroup {\n    return css`\n      :host(.error-state) div.cm-wrap .cm-gutters {\n        border-color: var(--error-state-color, red);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-code-editor\": HaCodeEditor;\n  }\n}\n","import { DEFAULT_SCHEMA, dump, load, Schema } from \"js-yaml\";\nimport { html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport \"./ha-code-editor\";\n\nconst isEmpty = (obj: Record<string, unknown>): boolean => {\n  if (typeof obj !== \"object\") {\n    return false;\n  }\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n@customElement(\"ha-yaml-editor\")\nexport class HaYamlEditor extends LitElement {\n  @property() public value?: any;\n\n  @property({ attribute: false }) public yamlSchema: Schema = DEFAULT_SCHEMA;\n\n  @property() public defaultValue?: any;\n\n  @property() public isValid = true;\n\n  @property() public label?: string;\n\n  @state() private _yaml = \"\";\n\n  public setValue(value): void {\n    try {\n      this._yaml =\n        value && !isEmpty(value)\n          ? dump(value, { schema: this.yamlSchema })\n          : \"\";\n    } catch (err: any) {\n      // eslint-disable-next-line no-console\n      console.error(err, value);\n      alert(`There was an error converting to YAML: ${err}`);\n    }\n  }\n\n  protected firstUpdated(): void {\n    if (this.defaultValue) {\n      this.setValue(this.defaultValue);\n    }\n  }\n\n  protected render(): TemplateResult {\n    if (this._yaml === undefined) {\n      return html``;\n    }\n    return html`\n      ${this.label ? html`<p>${this.label}</p>` : \"\"}\n      <ha-code-editor\n        .value=${this._yaml}\n        mode=\"yaml\"\n        .error=${this.isValid === false}\n        @value-changed=${this._onChange}\n      ></ha-code-editor>\n    `;\n  }\n\n  private _onChange(ev: CustomEvent): void {\n    ev.stopPropagation();\n    this._yaml = ev.detail.value;\n    let parsed;\n    let isValid = true;\n\n    if (this._yaml) {\n      try {\n        parsed = load(this._yaml, { schema: this.yamlSchema });\n      } catch (err: any) {\n        // Invalid YAML\n        isValid = false;\n      }\n    } else {\n      parsed = {};\n    }\n\n    this.value = parsed;\n    this.isValid = isValid;\n\n    fireEvent(this, \"value-changed\", { value: parsed, isValid } as any);\n  }\n\n  get yaml() {\n    return this._yaml;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-yaml-editor\": HaYamlEditor;\n  }\n}\n","import \"@material/mwc-button\";\nimport { ActionDetail } from \"@material/mwc-list\";\nimport \"@material/mwc-list/mwc-list-item\";\nimport { mdiDotsVertical } from \"@mdi/js\";\nimport { DEFAULT_SCHEMA, Type } from \"js-yaml\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../../../src/common/dom/fire_event\";\nimport \"../../../../src/components/buttons/ha-progress-button\";\nimport \"../../../../src/components/ha-button-menu\";\nimport \"../../../../src/components/ha-card\";\nimport \"../../../../src/components/ha-alert\";\nimport \"../../../../src/components/ha-form/ha-form\";\nimport type { HaFormSchema } from \"../../../../src/components/ha-form/ha-form\";\nimport \"../../../../src/components/ha-formfield\";\nimport \"../../../../src/components/ha-switch\";\nimport \"../../../../src/components/ha-yaml-editor\";\nimport type { HaYamlEditor } from \"../../../../src/components/ha-yaml-editor\";\nimport {\n  HassioAddonDetails,\n  HassioAddonSetOptionParams,\n  setHassioAddonOption,\n  validateHassioAddonOption,\n} from \"../../../../src/data/hassio/addon\";\nimport { extractApiErrorMessage } from \"../../../../src/data/hassio/common\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\nimport { showConfirmationDialog } from \"../../../../src/dialogs/generic/show-dialog-box\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport type { HomeAssistant } from \"../../../../src/types\";\nimport { suggestAddonRestart } from \"../../dialogs/suggestAddonRestart\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\n\nconst SUPPORTED_UI_TYPES = [\"string\", \"select\", \"boolean\", \"integer\", \"float\"];\n\nconst ADDON_YAML_SCHEMA = DEFAULT_SCHEMA.extend([\n  new Type(\"!secret\", {\n    kind: \"scalar\",\n    construct: (data) => `!secret ${data}`,\n  }),\n]);\n\n@customElement(\"hassio-addon-config\")\nclass HassioAddonConfig extends LitElement {\n  @property({ attribute: false }) public addon!: HassioAddonDetails;\n\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ type: Boolean }) private _configHasChanged = false;\n\n  @property({ type: Boolean }) private _valid = true;\n\n  @state() private _canShowSchema = false;\n\n  @state() private _showOptional = false;\n\n  @state() private _error?: string;\n\n  @state() private _options?: Record<string, unknown>;\n\n  @state() private _yamlMode = false;\n\n  @query(\"ha-yaml-editor\") private _editor?: HaYamlEditor;\n\n  public computeLabel = (entry: HaFormSchema): string =>\n    this.addon.translations[this.hass.language]?.configuration?.[entry.name]\n      ?.name ||\n    this.addon.translations.en?.configuration?.[entry.name].name ||\n    entry.name;\n\n  private _filteredShchema = memoizeOne(\n    (options: Record<string, unknown>, schema: HaFormSchema[]) =>\n      schema.filter((entry) => entry.name in options || entry.required)\n  );\n\n  protected render(): TemplateResult {\n    const showForm =\n      !this._yamlMode && this._canShowSchema && this.addon.schema;\n    const hasHiddenOptions =\n      showForm &&\n      JSON.stringify(this.addon.schema) !==\n        JSON.stringify(\n          this._filteredShchema(this.addon.options, this.addon.schema!)\n        );\n    return html`\n      <h1>${this.addon.name}</h1>\n      <ha-card>\n        <div class=\"header\">\n          <h2>\n            ${this.supervisor.localize(\"addon.configuration.options.header\")}\n          </h2>\n          <div class=\"card-menu\">\n            <ha-button-menu corner=\"BOTTOM_START\" @action=${this._handleAction}>\n              <mwc-icon-button slot=\"trigger\">\n                <ha-svg-icon .path=${mdiDotsVertical}></ha-svg-icon>\n              </mwc-icon-button>\n              <mwc-list-item .disabled=${!this._canShowSchema}>\n                ${this._yamlMode\n                  ? this.supervisor.localize(\n                      \"addon.configuration.options.edit_in_ui\"\n                    )\n                  : this.supervisor.localize(\n                      \"addon.configuration.options.edit_in_yaml\"\n                    )}\n              </mwc-list-item>\n              <mwc-list-item class=\"warning\">\n                ${this.supervisor.localize(\"common.reset_defaults\")}\n              </mwc-list-item>\n            </ha-button-menu>\n          </div>\n        </div>\n\n        <div class=\"card-content\">\n          ${showForm\n            ? html`<ha-form\n                .data=${this._options!}\n                @value-changed=${this._configChanged}\n                .computeLabel=${this.computeLabel}\n                .schema=${this._showOptional\n                  ? this.addon.schema!\n                  : this._filteredShchema(\n                      this.addon.options,\n                      this.addon.schema!\n                    )}\n              ></ha-form>`\n            : html` <ha-yaml-editor\n                @value-changed=${this._configChanged}\n                .yamlSchema=${ADDON_YAML_SCHEMA}\n              ></ha-yaml-editor>`}\n          ${this._error\n            ? html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`\n            : \"\"}\n          ${!this._yamlMode ||\n          (this._canShowSchema && this.addon.schema) ||\n          this._valid\n            ? \"\"\n            : html`\n                <ha-alert alert-type=\"error\">\n                  ${this.supervisor.localize(\n                    \"addon.configuration.options.invalid_yaml\"\n                  )}\n                </ha-alert>\n              `}\n        </div>\n        ${hasHiddenOptions\n          ? html`<ha-formfield\n              class=\"show-additional\"\n              .label=${this.supervisor.localize(\n                \"addon.configuration.options.show_unused_optional\"\n              )}\n            >\n              <ha-switch\n                @change=${this._toggleOptional}\n                .checked=${this._showOptional}\n              >\n              </ha-switch>\n            </ha-formfield>`\n          : \"\"}\n        <div class=\"card-actions right\">\n          <ha-progress-button\n            @click=${this._saveTapped}\n            .disabled=${!this._configHasChanged || !this._valid}\n          >\n            ${this.supervisor.localize(\"common.save\")}\n          </ha-progress-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this._canShowSchema = !this.addon.schema!.find(\n      // @ts-ignore\n      (entry) => !SUPPORTED_UI_TYPES.includes(entry.type) || entry.multiple\n    );\n    this._yamlMode = !this._canShowSchema;\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    if (changedProperties.has(\"addon\")) {\n      this._options = { ...this.addon.options };\n    }\n    super.updated(changedProperties);\n    if (\n      changedProperties.has(\"_yamlMode\") ||\n      changedProperties.has(\"_options\")\n    ) {\n      if (this._yamlMode) {\n        const editor = this._editor;\n        if (editor) {\n          editor.setValue(this._options!);\n        }\n      }\n    }\n  }\n\n  private _handleAction(ev: CustomEvent<ActionDetail>) {\n    switch (ev.detail.index) {\n      case 0:\n        this._yamlMode = !this._yamlMode;\n        break;\n      case 1:\n        this._resetTapped(ev);\n        break;\n    }\n  }\n\n  private _toggleOptional() {\n    this._showOptional = !this._showOptional;\n  }\n\n  private _configChanged(ev): void {\n    if (this.addon.schema && this._canShowSchema && !this._yamlMode) {\n      this._valid = true;\n      this._configHasChanged = true;\n      this._options! = ev.detail.value;\n    } else {\n      this._configHasChanged = true;\n      this._valid = ev.detail.isValid;\n    }\n  }\n\n  private async _resetTapped(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n\n    const confirmed = await showConfirmationDialog(this, {\n      title: this.supervisor.localize(\"confirm.reset_options.title\"),\n      text: this.supervisor.localize(\"confirm.reset_options.text\"),\n      confirmText: this.supervisor.localize(\"common.reset_options\"),\n      dismissText: this.supervisor.localize(\"common.cancel\"),\n    });\n\n    if (!confirmed) {\n      button.progress = false;\n      return;\n    }\n\n    this._error = undefined;\n    const data: HassioAddonSetOptionParams = {\n      options: null,\n    };\n    try {\n      await setHassioAddonOption(this.hass, this.addon.slug, data);\n      this._configHasChanged = false;\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"options\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.common.update_available\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n    button.progress = false;\n  }\n\n  private async _saveTapped(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    const options: Record<string, unknown> = this._yamlMode\n      ? this._editor?.value\n      : this._options;\n    const eventdata = {\n      success: true,\n      response: undefined,\n      path: \"options\",\n    };\n    button.progress = true;\n\n    this._error = undefined;\n\n    try {\n      const validation = await validateHassioAddonOption(\n        this.hass,\n        this.addon.slug,\n        options\n      );\n      if (!validation.valid) {\n        throw Error(validation.message);\n      }\n      await setHassioAddonOption(this.hass, this.addon.slug, {\n        options,\n      });\n\n      this._configHasChanged = false;\n      if (this.addon?.state === \"started\") {\n        await suggestAddonRestart(this, this.hass, this.supervisor, this.addon);\n      }\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.failed_to_save\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n      eventdata.success = false;\n    }\n    button.progress = false;\n    fireEvent(this, \"hass-api-called\", eventdata);\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        :host {\n          display: block;\n        }\n        ha-card {\n          display: block;\n        }\n        .card-actions {\n          display: flex;\n          justify-content: space-between;\n        }\n\n        .card-menu {\n          float: right;\n          z-index: 3;\n          --mdc-theme-text-primary-on-background: var(--primary-text-color);\n        }\n        mwc-list-item[disabled] {\n          --mdc-theme-text-primary-on-background: var(--disabled-text-color);\n        }\n        .header {\n          display: flex;\n          justify-content: space-between;\n        }\n        .header h2 {\n          color: var(--ha-card-header-color, --primary-text-color);\n          font-family: var(--ha-card-header-font-family, inherit);\n          font-size: var(--ha-card-header-font-size, 24px);\n          letter-spacing: -0.012em;\n          line-height: 48px;\n          padding: 12px 16px 16px;\n          display: block;\n          margin-block: 0px;\n          font-weight: normal;\n        }\n        .card-actions.right {\n          justify-content: flex-end;\n        }\n\n        .show-additional {\n          padding: 16px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-config\": HassioAddonConfig;\n  }\n}\n","import { PaperInputElement } from \"@polymer/paper-input/paper-input\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../../src/common/dom/fire_event\";\nimport \"../../../../src/components/buttons/ha-progress-button\";\nimport \"../../../../src/components/ha-alert\";\nimport \"../../../../src/components/ha-card\";\nimport {\n  HassioAddonDetails,\n  HassioAddonSetOptionParams,\n  setHassioAddonOption,\n} from \"../../../../src/data/hassio/addon\";\nimport { extractApiErrorMessage } from \"../../../../src/data/hassio/common\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../../src/types\";\nimport { suggestAddonRestart } from \"../../dialogs/suggestAddonRestart\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\n\ninterface NetworkItem {\n  description: string;\n  container: string;\n  host: number | null;\n}\n\ninterface NetworkItemInput extends PaperInputElement {\n  container: string;\n}\n\n@customElement(\"hassio-addon-network\")\nclass HassioAddonNetwork extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public addon!: HassioAddonDetails;\n\n  @state() private _error?: string;\n\n  @state() private _config?: NetworkItem[];\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    this._setNetworkConfig();\n  }\n\n  protected render(): TemplateResult {\n    if (!this._config) {\n      return html``;\n    }\n\n    return html`\n      <ha-card\n        .header=${this.supervisor.localize(\n          \"addon.configuration.network.header\"\n        )}\n      >\n        <div class=\"card-content\">\n          ${this._error\n            ? html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`\n            : \"\"}\n\n          <table>\n            <tbody>\n              <tr>\n                <th>\n                  ${this.supervisor.localize(\n                    \"addon.configuration.network.container\"\n                  )}\n                </th>\n                <th>\n                  ${this.supervisor.localize(\n                    \"addon.configuration.network.host\"\n                  )}\n                </th>\n                <th>${this.supervisor.localize(\"common.description\")}</th>\n              </tr>\n              ${this._config!.map(\n                (item) => html`\n                  <tr>\n                    <td>${item.container}</td>\n                    <td>\n                      <paper-input\n                        @value-changed=${this._configChanged}\n                        placeholder=${this.supervisor.localize(\n                          \"addon.configuration.network.disabled\"\n                        )}\n                        .value=${item.host ? String(item.host) : \"\"}\n                        .container=${item.container}\n                        no-label-float\n                      ></paper-input>\n                    </td>\n                    <td>${this._computeDescription(item)}</td>\n                  </tr>\n                `\n              )}\n            </tbody>\n          </table>\n        </div>\n        <div class=\"card-actions\">\n          <ha-progress-button class=\"warning\" @click=${this._resetTapped}>\n            ${this.supervisor.localize(\"common.reset_defaults\")}\n          </ha-progress-button>\n          <ha-progress-button @click=${this._saveTapped}>\n            ${this.supervisor.localize(\"common.save\")}\n          </ha-progress-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n    if (changedProperties.has(\"addon\")) {\n      this._setNetworkConfig();\n    }\n  }\n\n  private _computeDescription = (item: NetworkItem): string =>\n    this.addon.translations[this.hass.language]?.network?.[item.container]\n      ?.description ||\n    this.addon.translations.en?.network?.[item.container]?.description ||\n    item.description;\n\n  private _setNetworkConfig(): void {\n    const network = this.addon.network || {};\n    const description = this.addon.network_description || {};\n    const items: NetworkItem[] = Object.keys(network).map((key) => ({\n      container: key,\n      host: network[key],\n      description: description[key],\n    }));\n    this._config = items.sort((a, b) => (a.container > b.container ? 1 : -1));\n  }\n\n  private async _configChanged(ev: Event): Promise<void> {\n    const target = ev.target as NetworkItemInput;\n    this._config!.forEach((item) => {\n      if (\n        item.container === target.container &&\n        item.host !== parseInt(String(target.value), 10)\n      ) {\n        item.host = target.value ? parseInt(String(target.value), 10) : null;\n      }\n    });\n  }\n\n  private async _resetTapped(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n\n    const data: HassioAddonSetOptionParams = {\n      network: null,\n    };\n\n    try {\n      await setHassioAddonOption(this.hass, this.addon.slug, data);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"option\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n      if (this.addon?.state === \"started\") {\n        await suggestAddonRestart(this, this.hass, this.supervisor, this.addon);\n      }\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.failed_to_reset\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n\n    button.progress = false;\n  }\n\n  private async _saveTapped(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n\n    this._error = undefined;\n    const networkconfiguration = {};\n    this._config!.forEach((item) => {\n      networkconfiguration[item.container] = parseInt(String(item.host), 10);\n    });\n\n    const data: HassioAddonSetOptionParams = {\n      network: networkconfiguration,\n    };\n\n    try {\n      await setHassioAddonOption(this.hass, this.addon.slug, data);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"option\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n      if (this.addon?.state === \"started\") {\n        await suggestAddonRestart(this, this.hass, this.supervisor, this.addon);\n      }\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.failed_to_save\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n    button.progress = false;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        :host {\n          display: block;\n        }\n        ha-card {\n          display: block;\n        }\n        .card-actions {\n          display: flex;\n          justify-content: space-between;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-network\": HassioAddonNetwork;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport \"../../../../src/components/ha-circular-progress\";\nimport { HassioAddonDetails } from \"../../../../src/data/hassio/addon\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../../src/types\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\nimport \"./hassio-addon-audio\";\nimport \"./hassio-addon-config\";\nimport \"./hassio-addon-network\";\n\n@customElement(\"hassio-addon-config-tab\")\nclass HassioAddonConfigDashboard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public addon?: HassioAddonDetails;\n\n  protected render(): TemplateResult {\n    if (!this.addon) {\n      return html`<ha-circular-progress active></ha-circular-progress>`;\n    }\n    const hasConfiguration =\n      (this.addon.options && Object.keys(this.addon.options).length) ||\n      (this.addon.schema && Object.keys(this.addon.schema).length);\n\n    return html`\n      <div class=\"content\">\n        ${hasConfiguration || this.addon.network || this.addon.audio\n          ? html`\n              ${hasConfiguration\n                ? html`\n                    <hassio-addon-config\n                      .hass=${this.hass}\n                      .addon=${this.addon}\n                      .supervisor=${this.supervisor}\n                    ></hassio-addon-config>\n                  `\n                : \"\"}\n              ${this.addon.network\n                ? html`\n                    <hassio-addon-network\n                      .hass=${this.hass}\n                      .addon=${this.addon}\n                      .supervisor=${this.supervisor}\n                    ></hassio-addon-network>\n                  `\n                : \"\"}\n              ${this.addon.audio\n                ? html`\n                    <hassio-addon-audio\n                      .hass=${this.hass}\n                      .addon=${this.addon}\n                      .supervisor=${this.supervisor}\n                    ></hassio-addon-audio>\n                  `\n                : \"\"}\n            `\n          : this.supervisor.localize(\"addon.configuration.no_configuration\")}\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        .content {\n          margin: auto;\n          padding: 8px;\n          max-width: 1024px;\n        }\n        hassio-addon-network,\n        hassio-addon-audio,\n        hassio-addon-config {\n          margin-bottom: 24px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-config-tab\": HassioAddonConfigDashboard;\n  }\n}\n","import \"../../../../src/components/ha-card\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport \"../../../../src/components/ha-alert\";\nimport \"../../../../src/components/ha-circular-progress\";\nimport \"../../../../src/components/ha-markdown\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport {\n  fetchHassioAddonDocumentation,\n  HassioAddonDetails,\n} from \"../../../../src/data/hassio/addon\";\nimport { extractApiErrorMessage } from \"../../../../src/data/hassio/common\";\nimport \"../../../../src/layouts/hass-loading-screen\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../../src/types\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\n\n@customElement(\"hassio-addon-documentation-tab\")\nclass HassioAddonDocumentationDashboard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public addon?: HassioAddonDetails;\n\n  @state() private _error?: string;\n\n  @state() private _content?: string;\n\n  public async connectedCallback(): Promise<void> {\n    super.connectedCallback();\n    await this._loadData();\n  }\n\n  protected render(): TemplateResult {\n    if (!this.addon) {\n      return html`<ha-circular-progress active></ha-circular-progress>`;\n    }\n    return html`\n      <div class=\"content\">\n        <ha-card>\n          ${this._error\n            ? html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`\n            : \"\"}\n          <div class=\"card-content\">\n            ${this._content\n              ? html`<ha-markdown .content=${this._content}></ha-markdown>`\n              : html`<hass-loading-screen no-toolbar></hass-loading-screen>`}\n          </div>\n        </ha-card>\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        ha-card {\n          display: block;\n        }\n        .content {\n          margin: auto;\n          padding: 8px;\n          max-width: 1024px;\n        }\n        ha-markdown {\n          padding: 16px;\n        }\n      `,\n    ];\n  }\n\n  private async _loadData(): Promise<void> {\n    this._error = undefined;\n    try {\n      this._content = await fetchHassioAddonDocumentation(\n        this.hass,\n        this.addon!.slug\n      );\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.documentation.get_logs\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-documentation-tab\": HassioAddonDocumentationDashboard;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement } from \"lit\";\nimport { property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../types\";\nimport \"./ha-progress-button\";\n\nclass HaCallApiButton extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public method: \"POST\" | \"GET\" | \"PUT\" | \"DELETE\" = \"POST\";\n\n  @property() public data = {};\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @property({ type: Boolean }) public progress = false;\n\n  @property() public path?: string;\n\n  @query(\"ha-progress-button\", true) private _progressButton;\n\n  render() {\n    return html`\n      <ha-progress-button\n        .progress=${this.progress}\n        @click=${this._buttonTapped}\n        ?disabled=${this.disabled}\n        ><slot></slot\n      ></ha-progress-button>\n    `;\n  }\n\n  async _buttonTapped() {\n    this.progress = true;\n    const eventData: {\n      method: string;\n      path: string;\n      data: any;\n      success?: boolean;\n      response?: any;\n    } = {\n      method: this.method,\n      path: this.path!,\n      data: this.data,\n    };\n\n    try {\n      const resp = await this.hass.callApi(this.method, this.path!, this.data);\n      this.progress = false;\n      this._progressButton.actionSuccess();\n      eventData.success = true;\n      eventData.response = resp;\n    } catch (err: any) {\n      this.progress = false;\n      this._progressButton.actionError();\n      eventData.success = false;\n      eventData.response = err;\n    }\n\n    fireEvent(this, \"hass-api-called\", eventData as any);\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host([disabled]) {\n        pointer-events: none;\n      }\n    `;\n  }\n}\n\ncustomElements.define(\"ha-call-api-button\", HaCallApiButton);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-call-api-button\": HaCallApiButton;\n  }\n}\n","import \"@polymer/iron-icon/iron-icon\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { debounce } from \"../common/util/debounce\";\nimport { CustomIcon, customIconsets } from \"../data/custom_iconsets\";\nimport {\n  checkCacheVersion,\n  Chunks,\n  findIconChunk,\n  getIcon,\n  Icons,\n  MDI_PREFIXES,\n  writeCache,\n} from \"../data/iconsets\";\nimport \"./ha-svg-icon\";\n\ninterface DeprecatedIcon {\n  [key: string]: {\n    removeIn: string;\n    newName?: string;\n  };\n}\n\nconst mdiDeprecatedIcons: DeprecatedIcon = {\n  \"adobe-acrobat\": {\n    removeIn: \"2021.12\",\n  },\n  adobe: {\n    removeIn: \"2021.12\",\n  },\n  \"amazon-alexa\": {\n    removeIn: \"2021.12\",\n  },\n  amazon: {\n    removeIn: \"2021.12\",\n  },\n  \"android-auto\": {\n    removeIn: \"2021.12\",\n  },\n  \"android-debug-bridge\": {\n    removeIn: \"2021.12\",\n  },\n  \"apple-airplay\": {\n    newName: \"cast-variant\",\n    removeIn: \"2021.12\",\n  },\n  application: {\n    newName: \"application-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"application-cog\": {\n    newName: \"application-cog-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"application-settings\": {\n    newName: \"application-settings-outline\",\n    removeIn: \"2021.12\",\n  },\n  bandcamp: {\n    removeIn: \"2021.12\",\n  },\n  battlenet: {\n    removeIn: \"2021.12\",\n  },\n  blogger: {\n    removeIn: \"2021.12\",\n  },\n  \"bolnisi-cross\": {\n    newName: \"cross-bolnisi\",\n    removeIn: \"2021.12\",\n  },\n  \"boom-gate-up\": {\n    newName: \"boom-gate-arrow-up\",\n    removeIn: \"2021.12\",\n  },\n  \"boom-gate-up-outline\": {\n    newName: \"boom-gate-arrow-up-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"boom-gate-down\": {\n    newName: \"boom-gate-arrow-down\",\n    removeIn: \"2021.12\",\n  },\n  \"boom-gate-down-outline\": {\n    newName: \"boom-gate-arrow-down-outline\",\n    removeIn: \"2021.12\",\n  },\n  buddhism: {\n    newName: \"dharmachakra\",\n    removeIn: \"2021.12\",\n  },\n  buffer: {\n    removeIn: \"2021.12\",\n  },\n  \"cash-usd-outline\": {\n    removeIn: \"2021.12\",\n  },\n  \"cash-usd\": {\n    removeIn: \"2021.12\",\n  },\n  \"cellphone-android\": {\n    newName: \"cellphone\",\n    removeIn: \"2021.12\",\n  },\n  \"cellphone-erase\": {\n    newName: \"cellphone-remove\",\n    removeIn: \"2021.12\",\n  },\n  \"cellphone-iphone\": {\n    newName: \"cellphone\",\n    removeIn: \"2021.12\",\n  },\n  \"celtic-cross\": {\n    newName: \"cross-celtic\",\n    removeIn: \"2021.12\",\n  },\n  christianity: {\n    newName: \"cross\",\n    removeIn: \"2021.12\",\n  },\n  \"christianity-outline\": {\n    newName: \"cross-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"concourse-ci\": {\n    removeIn: \"2021.12\",\n  },\n  \"currency-usd-circle\": {\n    removeIn: \"2021.12\",\n  },\n  \"currency-usd-circle-outline\": {\n    removeIn: \"2021.12\",\n  },\n  \"do-not-disturb-off\": {\n    newName: \"minus-circle-off\",\n    removeIn: \"2021.12\",\n  },\n  \"do-not-disturb\": {\n    newName: \"minus-circle\",\n    removeIn: \"2021.12\",\n  },\n  douban: {\n    removeIn: \"2021.12\",\n  },\n  face: {\n    newName: \"face-man\",\n    removeIn: \"2021.12\",\n  },\n  \"face-outline\": {\n    newName: \"face-man-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"face-profile-woman\": {\n    newName: \"face-woman-profile\",\n    removeIn: \"2021.12\",\n  },\n  \"face-shimmer\": {\n    newName: \"face-man-shimmer\",\n    removeIn: \"2021.12\",\n  },\n  \"face-shimmer-outline\": {\n    newName: \"face-man-shimmer-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"file-pdf\": {\n    newName: \"file-pdf-box\",\n    removeIn: \"2021.12\",\n  },\n  \"file-pdf-outline\": {\n    newName: \"file-pdf-box\",\n    removeIn: \"2021.12\",\n  },\n  \"file-pdf-box-outline\": {\n    newName: \"file-pdf-box\",\n    removeIn: \"2021.12\",\n  },\n  \"flash-circle\": {\n    newName: \"lightning-bolt-circle\",\n    removeIn: \"2021.12\",\n  },\n  \"floor-lamp-variant\": {\n    newName: \"floor-lamp-torchiere-variant\",\n    removeIn: \"2021.12\",\n  },\n  gif: {\n    newName: \"file-gif-box\",\n    removeIn: \"2021.12\",\n  },\n  \"google-photos\": {\n    removeIn: \"2021.12\",\n  },\n  gradient: {\n    newName: \"gradient-vertical\",\n    removeIn: \"2021.12\",\n  },\n  hand: {\n    newName: \"hand-front-right\",\n    removeIn: \"2021.12\",\n  },\n  \"hand-left\": {\n    newName: \"hand-back-left\",\n    removeIn: \"2021.12\",\n  },\n  \"hand-right\": {\n    newName: \"hand-back-right\",\n    removeIn: \"2021.12\",\n  },\n  hinduism: {\n    newName: \"om\",\n    removeIn: \"2021.12\",\n  },\n  \"home-currency-usd\": {\n    removeIn: \"2021.12\",\n  },\n  iframe: {\n    newName: \"application-brackets\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-outline\": {\n    newName: \"application-brackets-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-array\": {\n    newName: \"application-array\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-array-outline\": {\n    newName: \"application-array-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-braces\": {\n    newName: \"application-braces\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-braces-outline\": {\n    newName: \"application-braces-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-parentheses\": {\n    newName: \"application-parentheses\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-parentheses-outline\": {\n    newName: \"application-parentheses-outline\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-variable\": {\n    newName: \"application-variable\",\n    removeIn: \"2021.12\",\n  },\n  \"iframe-variable-outline\": {\n    newName: \"application-variable-outline\",\n    removeIn: \"2021.12\",\n  },\n  islam: {\n    newName: \"star-crescent\",\n    removeIn: \"2021.12\",\n  },\n  judaism: {\n    newName: \"star-david\",\n    removeIn: \"2021.12\",\n  },\n  \"laptop-chromebook\": {\n    newName: \"laptop\",\n    removeIn: \"2021.12\",\n  },\n  \"laptop-mac\": {\n    newName: \"laptop\",\n    removeIn: \"2021.12\",\n  },\n  \"laptop-windows\": {\n    newName: \"laptop\",\n    removeIn: \"2021.12\",\n  },\n  \"microsoft-edge-legacy\": {\n    removeIn: \"2021.12\",\n  },\n  \"microsoft-yammer\": {\n    removeIn: \"2021.12\",\n  },\n  \"monitor-clean\": {\n    newName: \"monitor-shimmer\",\n    removeIn: \"2021.12\",\n  },\n  \"pdf-box\": {\n    newName: \"file-pdf-box\",\n    removeIn: \"2021.12\",\n  },\n  pharmacy: {\n    newName: \"mortar-pestle-plus\",\n    removeIn: \"2021.12\",\n  },\n  \"plus-one\": {\n    newName: \"numeric-positive-1\",\n    removeIn: \"2021.12\",\n  },\n  \"poll-box\": {\n    newName: \"chart-box\",\n    removeIn: \"2021.12\",\n  },\n  \"poll-box-outline\": {\n    newName: \"chart-box-outline\",\n    removeIn: \"2021.12\",\n  },\n  sparkles: {\n    newName: \"shimmer\",\n    removeIn: \"2021.12\",\n  },\n  \"tablet-ipad\": {\n    newName: \"tablet\",\n    removeIn: \"2021.12\",\n  },\n  teach: {\n    newName: \"human-male-board\",\n    removeIn: \"2021.12\",\n  },\n  telegram: {\n    removeIn: \"2021.12\",\n  },\n  \"television-clean\": {\n    newName: \"television-shimmer\",\n    removeIn: \"2021.12\",\n  },\n  \"text-subject\": {\n    newName: \"text-long\",\n    removeIn: \"2021.12\",\n  },\n  \"twitter-retweet\": {\n    newName: \"repeat-variant\",\n    removeIn: \"2021.12\",\n  },\n  untappd: {\n    removeIn: \"2021.12\",\n  },\n  vk: {\n    removeIn: \"2021.12\",\n  },\n  \"voice-off\": {\n    newName: \"account-voice-off\",\n    removeIn: \"2021.12\",\n  },\n  \"xamarian-outline\": {\n    newName: \"xamarian\",\n    removeIn: \"2021.12\",\n  },\n  xing: {\n    removeIn: \"2021.12\",\n  },\n  \"y-combinator\": {\n    removeIn: \"2021.12\",\n  },\n};\n\nconst chunks: Chunks = {};\n\ncheckCacheVersion();\n\nconst debouncedWriteCache = debounce(() => writeCache(chunks), 2000);\n\nconst cachedIcons: Record<string, string> = {};\n\n@customElement(\"ha-icon\")\nexport class HaIcon extends LitElement {\n  @property() public icon?: string;\n\n  @state() private _path?: string;\n\n  @state() private _viewBox?;\n\n  @state() private _legacy = false;\n\n  public willUpdate(changedProps: PropertyValues) {\n    super.willUpdate(changedProps);\n    if (changedProps.has(\"icon\")) {\n      this._path = undefined;\n      this._viewBox = undefined;\n      this._loadIcon();\n    }\n  }\n\n  protected render(): TemplateResult {\n    if (!this.icon) {\n      return html``;\n    }\n    if (this._legacy) {\n      return html`<iron-icon .icon=${this.icon}></iron-icon>`;\n    }\n    return html`<ha-svg-icon\n      .path=${this._path}\n      .viewBox=${this._viewBox}\n    ></ha-svg-icon>`;\n  }\n\n  private async _loadIcon() {\n    if (!this.icon) {\n      return;\n    }\n    const [iconPrefix, origIconName] = this.icon.split(\":\", 2);\n\n    let iconName = origIconName;\n\n    if (!iconPrefix || !iconName) {\n      return;\n    }\n\n    if (!MDI_PREFIXES.includes(iconPrefix)) {\n      if (iconPrefix in customIconsets) {\n        const customIconset = customIconsets[iconPrefix];\n        if (customIconset) {\n          this._setCustomPath(customIconset(iconName));\n        }\n        return;\n      }\n      this._legacy = true;\n      return;\n    }\n\n    this._legacy = false;\n\n    if (iconName in mdiDeprecatedIcons) {\n      const deprecatedIcon = mdiDeprecatedIcons[iconName];\n      let message: string;\n\n      if (deprecatedIcon.newName) {\n        message = `Icon ${iconPrefix}:${iconName} was renamed to ${iconPrefix}:${deprecatedIcon.newName}, please change your config, it will be removed in version ${deprecatedIcon.removeIn}.`;\n        iconName = deprecatedIcon.newName!;\n      } else {\n        message = `Icon ${iconPrefix}:${iconName} was removed from MDI, please replace this icon with an other icon in your config, it will be removed in version ${deprecatedIcon.removeIn}.`;\n      }\n      // eslint-disable-next-line no-console\n      console.warn(message);\n      fireEvent(this, \"write_log\", {\n        level: \"warning\",\n        message,\n      });\n    }\n\n    if (iconName in cachedIcons) {\n      this._path = cachedIcons[iconName];\n      return;\n    }\n\n    let databaseIcon: string | undefined;\n    try {\n      databaseIcon = await getIcon(iconName);\n    } catch (_err) {\n      // Firefox in private mode doesn't support IDB\n      // iOS Safari sometimes doesn't open the DB\n      databaseIcon = undefined;\n    }\n\n    if (databaseIcon) {\n      this._path = databaseIcon;\n      cachedIcons[iconName] = databaseIcon;\n      return;\n    }\n    const chunk = findIconChunk(iconName);\n\n    if (chunk in chunks) {\n      this._setPath(chunks[chunk], iconName);\n      return;\n    }\n\n    const iconPromise = fetch(`/static/mdi/${chunk}.json`).then((response) =>\n      response.json()\n    );\n    chunks[chunk] = iconPromise;\n    this._setPath(iconPromise, iconName);\n    debouncedWriteCache();\n  }\n\n  private async _setCustomPath(promise: Promise<CustomIcon>) {\n    const icon = await promise;\n    this._path = icon.path;\n    this._viewBox = icon.viewBox;\n  }\n\n  private async _setPath(promise: Promise<Icons>, iconName: string) {\n    const iconPack = await promise;\n    this._path = iconPack[iconName];\n    cachedIcons[iconName] = iconPack[iconName];\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        fill: currentcolor;\n      }\n    `;\n  }\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n","import {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport \"./ha-icon\";\n\nclass HaLabelBadge extends LitElement {\n  @property() public value?: string;\n\n  @property() public icon?: string;\n\n  @property() public label?: string;\n\n  @property() public description?: string;\n\n  @property() public image?: string;\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"badge-container\">\n        <div class=\"label-badge\" id=\"badge\">\n          <div\n            class=${classMap({\n              value: true,\n              big: Boolean(this.value && this.value.length > 4),\n            })}\n          >\n            <slot>\n              ${this.icon && !this.value && !this.image\n                ? html`<ha-icon .icon=${this.icon}></ha-icon>`\n                : \"\"}\n              ${this.value && !this.image\n                ? html`<span>${this.value}</span>`\n                : \"\"}\n            </slot>\n          </div>\n          ${this.label\n            ? html`\n                <div\n                  class=${classMap({\n                    label: true,\n                    big: this.label.length > 5,\n                  })}\n                >\n                  <span>${this.label}</span>\n                </div>\n              `\n            : \"\"}\n        </div>\n        ${this.description\n          ? html` <div class=\"title\">${this.description}</div> `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      css`\n        .badge-container {\n          display: inline-block;\n          text-align: center;\n          vertical-align: top;\n          padding: var(--ha-label-badge-padding, 0 0 0 0);\n        }\n        .label-badge {\n          position: relative;\n          display: block;\n          margin: 0 auto;\n          width: var(--ha-label-badge-size, 2.5em);\n          text-align: center;\n          height: var(--ha-label-badge-size, 2.5em);\n          line-height: var(--ha-label-badge-size, 2.5em);\n          font-size: var(--ha-label-badge-font-size, 1.5em);\n          border-radius: 50%;\n          border: 0.1em solid var(--ha-label-badge-color, var(--primary-color));\n          color: var(--label-badge-text-color, rgb(76, 76, 76));\n\n          white-space: nowrap;\n          background-color: var(--label-badge-background-color, white);\n          background-size: cover;\n          transition: border 0.3s ease-in-out;\n        }\n        .label-badge .value {\n          font-size: 90%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .label-badge .value.big {\n          font-size: 70%;\n        }\n        .label-badge .label {\n          position: absolute;\n          bottom: -1em;\n          /* Make the label as wide as container+border. (parent_borderwidth / font-size) */\n          left: -0.2em;\n          right: -0.2em;\n          line-height: 1em;\n          font-size: 0.5em;\n        }\n        .label-badge .label span {\n          box-sizing: border-box;\n          max-width: 100%;\n          display: inline-block;\n          background-color: var(--ha-label-badge-color, var(--primary-color));\n          color: var(--ha-label-badge-label-color, white);\n          border-radius: 1em;\n          padding: 9% 16% 8% 16%; /* mostly apitalized text, not much descenders => bit more top margin */\n          font-weight: 500;\n          overflow: hidden;\n          text-transform: uppercase;\n          text-overflow: ellipsis;\n          transition: background-color 0.3s ease-in-out;\n          text-transform: var(--ha-label-badge-label-text-transform, uppercase);\n        }\n        .label-badge .label.big span {\n          font-size: 90%;\n          padding: 10% 12% 7% 12%; /* push smaller text a bit down to center vertically */\n        }\n        .badge-container .title {\n          margin-top: 1em;\n          font-size: var(--ha-label-badge-title-font-size, 0.9em);\n          width: var(--ha-label-badge-title-width, 5em);\n          font-weight: var(--ha-label-badge-title-font-weight, 400);\n          overflow: hidden;\n          text-overflow: ellipsis;\n          line-height: normal;\n        }\n      `,\n    ];\n  }\n\n  protected updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"image\")) {\n      this.shadowRoot!.getElementById(\"badge\")!.style.backgroundImage = this\n        .image\n        ? `url(${this.image})`\n        : \"\";\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-label-badge\": HaLabelBadge;\n  }\n}\n\ncustomElements.define(\"ha-label-badge\", HaLabelBadge);\n","import \"@material/mwc-button\";\nimport {\n  mdiArrowUpBoldCircle,\n  mdiCheckCircle,\n  mdiChip,\n  mdiCircle,\n  mdiCursorDefaultClickOutline,\n  mdiDocker,\n  mdiExclamationThick,\n  mdiFlask,\n  mdiHomeAssistant,\n  mdiKey,\n  mdiNetwork,\n  mdiPound,\n  mdiShield,\n} from \"@mdi/js\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport memoizeOne from \"memoize-one\";\nimport { atLeastVersion } from \"../../../../src/common/config/version\";\nimport { fireEvent } from \"../../../../src/common/dom/fire_event\";\nimport { navigate } from \"../../../../src/common/navigate\";\nimport \"../../../../src/components/buttons/ha-call-api-button\";\nimport \"../../../../src/components/buttons/ha-progress-button\";\nimport \"../../../../src/components/ha-alert\";\nimport \"../../../../src/components/ha-card\";\nimport \"../../../../src/components/ha-label-badge\";\nimport \"../../../../src/components/ha-markdown\";\nimport \"../../../../src/components/ha-settings-row\";\nimport \"../../../../src/components/ha-svg-icon\";\nimport \"../../../../src/components/ha-switch\";\nimport {\n  fetchHassioAddonChangelog,\n  fetchHassioAddonInfo,\n  HassioAddonDetails,\n  HassioAddonSetOptionParams,\n  HassioAddonSetSecurityParams,\n  installHassioAddon,\n  restartHassioAddon,\n  setHassioAddonOption,\n  setHassioAddonSecurity,\n  startHassioAddon,\n  stopHassioAddon,\n  uninstallHassioAddon,\n  updateHassioAddon,\n  validateHassioAddonOption,\n} from \"../../../../src/data/hassio/addon\";\nimport {\n  extractApiErrorMessage,\n  fetchHassioStats,\n  HassioStats,\n} from \"../../../../src/data/hassio/common\";\nimport { StoreAddon } from \"../../../../src/data/supervisor/store\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\nimport {\n  showAlertDialog,\n  showConfirmationDialog,\n} from \"../../../../src/dialogs/generic/show-dialog-box\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../../src/types\";\nimport { bytesToString } from \"../../../../src/util/bytes-to-string\";\nimport \"../../components/hassio-card-content\";\nimport \"../../components/supervisor-metric\";\nimport { showHassioMarkdownDialog } from \"../../dialogs/markdown/show-dialog-hassio-markdown\";\nimport { showDialogSupervisorUpdate } from \"../../dialogs/update/show-dialog-update\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\nimport { addonArchIsSupported } from \"../../util/addon\";\n\nconst STAGE_ICON = {\n  stable: mdiCheckCircle,\n  experimental: mdiFlask,\n  deprecated: mdiExclamationThick,\n};\n\n@customElement(\"hassio-addon-info\")\nclass HassioAddonInfo extends LitElement {\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public addon!: HassioAddonDetails;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @state() private _metrics?: HassioStats;\n\n  @state() private _error?: string;\n\n  private _addonStoreInfo = memoizeOne(\n    (slug: string, storeAddons: StoreAddon[]) =>\n      storeAddons.find((addon) => addon.slug === slug)\n  );\n\n  protected render(): TemplateResult {\n    const addonStoreInfo =\n      !this.addon.detached && !this.addon.available\n        ? this._addonStoreInfo(this.addon.slug, this.supervisor.store.addons)\n        : undefined;\n    const metrics = [\n      {\n        description: this.supervisor.localize(\"addon.dashboard.cpu_usage\"),\n        value: this._metrics?.cpu_percent,\n      },\n      {\n        description: this.supervisor.localize(\"addon.dashboard.ram_usage\"),\n        value: this._metrics?.memory_percent,\n        tooltip: `${bytesToString(this._metrics?.memory_usage)}/${bytesToString(\n          this._metrics?.memory_limit\n        )}`,\n      },\n    ];\n    return html`\n      ${this.addon.update_available\n        ? html`\n            <ha-card\n              .header=\"${this.supervisor.localize(\n                \"common.update_available\",\n                \"count\",\n                1\n              )}🎉\"\n            >\n              <div class=\"card-content\">\n                <hassio-card-content\n                  .hass=${this.hass}\n                  .title=${this.supervisor.localize(\n                    \"addon.dashboard.new_update_available\",\n                    \"name\",\n                    this.addon.name,\n                    \"version\",\n                    this.addon.version_latest\n                  )}\n                  .description=${this.supervisor.localize(\n                    \"common.running_version\",\n                    \"version\",\n                    this.addon.version\n                  )}\n                  icon=${mdiArrowUpBoldCircle}\n                  iconClass=\"update\"\n                ></hassio-card-content>\n                ${!this.addon.available && addonStoreInfo\n                  ? !addonArchIsSupported(\n                      this.supervisor.info.supported_arch,\n                      this.addon.arch\n                    )\n                    ? html`\n                        <ha-alert alert-type=\"warning\">\n                          ${this.supervisor.localize(\n                            \"addon.dashboard.not_available_arch\"\n                          )}\n                        </ha-alert>\n                      `\n                    : html`\n                        <ha-alert alert-type=\"warning\">\n                          ${this.supervisor.localize(\n                            \"addon.dashboard.not_available_arch\",\n                            \"core_version_installed\",\n                            this.supervisor.core.version,\n                            \"core_version_needed\",\n                            addonStoreInfo.homeassistant\n                          )}\n                        </ha-alert>\n                      `\n                  : \"\"}\n              </div>\n              <div class=\"card-actions\">\n                ${this.addon.changelog\n                  ? html`\n                      <mwc-button @click=${this._openChangelog}>\n                        ${this.supervisor.localize(\"addon.dashboard.changelog\")}\n                      </mwc-button>\n                    `\n                  : html`<span></span>`}\n                <mwc-button @click=${this._updateClicked}>\n                  ${this.supervisor.localize(\"common.update\")}\n                </mwc-button>\n              </div>\n            </ha-card>\n          `\n        : \"\"}\n      ${!this.addon.protected\n        ? html`\n        <ha-card class=\"warning\">\n          <h1 class=\"card-header\">${this.supervisor.localize(\n            \"addon.dashboard.protection_mode.title\"\n          )}\n          </h1>\n          <div class=\"card-content\">\n          ${this.supervisor.localize(\"addon.dashboard.protection_mode.content\")}\n          </div>\n          <div class=\"card-actions protection-enable\">\n              <mwc-button @click=${this._protectionToggled}>\n              ${this.supervisor.localize(\n                \"addon.dashboard.protection_mode.enable\"\n              )}\n              </mwc-button>\n            </div>\n          </div>\n        </ha-card>\n      `\n        : \"\"}\n\n      <ha-card>\n        <div class=\"card-content\">\n          <div class=\"addon-header\">\n            ${!this.narrow ? this.addon.name : \"\"}\n            <div class=\"addon-version light-color\">\n              ${this.addon.version\n                ? html`\n                    ${this._computeIsRunning\n                      ? html`\n                          <ha-svg-icon\n                            .title=${this.supervisor.localize(\n                              \"dashboard.addon_running\"\n                            )}\n                            class=\"running\"\n                            .path=${mdiCircle}\n                          ></ha-svg-icon>\n                        `\n                      : html`\n                          <ha-svg-icon\n                            .title=${this.supervisor.localize(\n                              \"dashboard.addon_stopped\"\n                            )}\n                            class=\"stopped\"\n                            .path=${mdiCircle}\n                          ></ha-svg-icon>\n                        `}\n                  `\n                : html` ${this.addon.version_latest} `}\n            </div>\n          </div>\n          <div class=\"description light-color\">\n            ${this.addon.version\n              ? html`\n                  Current version: ${this.addon.version}\n                  <div class=\"changelog\" @click=${this._openChangelog}>\n                    (<span class=\"changelog-link\"\n                      >${this.supervisor.localize(\n                        \"addon.dashboard.changelog\"\n                      )}</span\n                    >)\n                  </div>\n                `\n              : html`<span class=\"changelog-link\" @click=${this._openChangelog}\n                  >${this.supervisor.localize(\n                    \"addon.dashboard.changelog\"\n                  )}</span\n                >`}\n          </div>\n\n          <div class=\"description light-color\">\n            ${this.addon.description}.<br />\n            ${this.supervisor.localize(\n              \"addon.dashboard.visit_addon_page\",\n              \"name\",\n              html`<a href=${this.addon.url!} target=\"_blank\" rel=\"noreferrer\"\n                >${this.addon.name}</a\n              >`\n            )}\n          </div>\n          <div class=\"addon-container\">\n            <div>\n              ${this.addon.logo\n                ? html`\n                    <img\n                      class=\"logo\"\n                      src=\"/api/hassio/addons/${this.addon.slug}/logo\"\n                    />\n                  `\n                : \"\"}\n              <div class=\"security\">\n                ${this.addon.stage !== \"stable\"\n                  ? html` <ha-label-badge\n                      class=${classMap({\n                        yellow: this.addon.stage === \"experimental\",\n                        red: this.addon.stage === \"deprecated\",\n                      })}\n                      @click=${this._showMoreInfo}\n                      id=\"stage\"\n                      .label=${this.supervisor.localize(\n                        \"addon.dashboard.capability.label.stage\"\n                      )}\n                      description=\"\"\n                    >\n                      <ha-svg-icon\n                        .path=${STAGE_ICON[this.addon.stage]}\n                      ></ha-svg-icon>\n                    </ha-label-badge>`\n                  : \"\"}\n\n                <ha-label-badge\n                  class=${classMap({\n                    green: [5, 6].includes(Number(this.addon.rating)),\n                    yellow: [3, 4].includes(Number(this.addon.rating)),\n                    red: [1, 2].includes(Number(this.addon.rating)),\n                  })}\n                  @click=${this._showMoreInfo}\n                  id=\"rating\"\n                  .value=${this.addon.rating}\n                  label=\"rating\"\n                  description=\"\"\n                ></ha-label-badge>\n                ${this.addon.host_network\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        id=\"host_network\"\n                        .label=${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.host\"\n                        )}\n                        description=\"\"\n                      >\n                        <ha-svg-icon .path=${mdiNetwork}></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n                ${this.addon.full_access\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        id=\"full_access\"\n                        .label=${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.hardware\"\n                        )}\n                        description=\"\"\n                      >\n                        <ha-svg-icon .path=${mdiChip}></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n                ${this.addon.homeassistant_api\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        id=\"homeassistant_api\"\n                        .label=${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.hass\"\n                        )}\n                        description=\"\"\n                      >\n                        <ha-svg-icon .path=${mdiHomeAssistant}></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n                ${this._computeHassioApi\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        id=\"hassio_api\"\n                        .label=${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.hassio\"\n                        )}\n                        .description=${this.supervisor.localize(\n                          `addon.dashboard.capability.role.${this.addon.hassio_role}`\n                        ) || this.addon.hassio_role}\n                      >\n                        <ha-svg-icon .path=${mdiHomeAssistant}></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n                ${this.addon.docker_api\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        id=\"docker_api\"\n                        .label=\".${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.docker\"\n                        )}\"\n                        description=\"\"\n                      >\n                        <ha-svg-icon .path=${mdiDocker}></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n                ${this.addon.host_pid\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        id=\"host_pid\"\n                        .label=${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.host_pid\"\n                        )}\n                        description=\"\"\n                      >\n                        <ha-svg-icon .path=${mdiPound}></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n                ${this.addon.apparmor\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        class=${this._computeApparmorClassName}\n                        id=\"apparmor\"\n                        .label=${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.apparmor\"\n                        )}\n                        description=\"\"\n                      >\n                        <ha-svg-icon .path=${mdiShield}></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n                ${this.addon.auth_api\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        id=\"auth_api\"\n                        .label=${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.auth\"\n                        )}\n                        description=\"\"\n                      >\n                        <ha-svg-icon .path=${mdiKey}></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n                ${this.addon.ingress\n                  ? html`\n                      <ha-label-badge\n                        @click=${this._showMoreInfo}\n                        id=\"ingress\"\n                        .label=${this.supervisor.localize(\n                          \"addon.dashboard.capability.label.ingress\"\n                        )}\n                        description=\"\"\n                      >\n                        <ha-svg-icon\n                          .path=${mdiCursorDefaultClickOutline}\n                        ></ha-svg-icon>\n                      </ha-label-badge>\n                    `\n                  : \"\"}\n              </div>\n\n              ${this.addon.version\n                ? html`\n                    <div\n                      class=${classMap({\n                        \"addon-options\": true,\n                        started: this.addon.state === \"started\",\n                      })}\n                    >\n                      <ha-settings-row ?three-line=${this.narrow}>\n                        <span slot=\"heading\">\n                          ${this.supervisor.localize(\n                            \"addon.dashboard.option.boot.title\"\n                          )}\n                        </span>\n                        <span slot=\"description\">\n                          ${this.supervisor.localize(\n                            \"addon.dashboard.option.boot.description\"\n                          )}\n                        </span>\n                        <ha-switch\n                          @change=${this._startOnBootToggled}\n                          .checked=${this.addon.boot === \"auto\"}\n                          haptic\n                        ></ha-switch>\n                      </ha-settings-row>\n\n                      ${this.addon.startup !== \"once\"\n                        ? html`\n                            <ha-settings-row ?three-line=${this.narrow}>\n                              <span slot=\"heading\">\n                                ${this.supervisor.localize(\n                                  \"addon.dashboard.option.watchdog.title\"\n                                )}\n                              </span>\n                              <span slot=\"description\">\n                                ${this.supervisor.localize(\n                                  \"addon.dashboard.option.watchdog.description\"\n                                )}\n                              </span>\n                              <ha-switch\n                                @change=${this._watchdogToggled}\n                                .checked=${this.addon.watchdog}\n                                haptic\n                              ></ha-switch>\n                            </ha-settings-row>\n                          `\n                        : \"\"}\n                      ${this.addon.auto_update ||\n                      this.hass.userData?.showAdvanced\n                        ? html`\n                            <ha-settings-row ?three-line=${this.narrow}>\n                              <span slot=\"heading\">\n                                ${this.supervisor.localize(\n                                  \"addon.dashboard.option.auto_update.title\"\n                                )}\n                              </span>\n                              <span slot=\"description\">\n                                ${this.supervisor.localize(\n                                  \"addon.dashboard.option.auto_update.description\"\n                                )}\n                              </span>\n                              <ha-switch\n                                @change=${this._autoUpdateToggled}\n                                .checked=${this.addon.auto_update}\n                                haptic\n                              ></ha-switch>\n                            </ha-settings-row>\n                          `\n                        : \"\"}\n                      ${!this._computeCannotIngressSidebar && this.addon.ingress\n                        ? html`\n                            <ha-settings-row ?three-line=${this.narrow}>\n                              <span slot=\"heading\">\n                                ${this.supervisor.localize(\n                                  \"addon.dashboard.option.ingress_panel.title\"\n                                )}\n                              </span>\n                              <span slot=\"description\">\n                                ${this.supervisor.localize(\n                                  \"addon.dashboard.option.ingress_panel.description\"\n                                )}\n                              </span>\n                              <ha-switch\n                                @change=${this._panelToggled}\n                                .checked=${this.addon.ingress_panel}\n                                haptic\n                              ></ha-switch>\n                            </ha-settings-row>\n                          `\n                        : \"\"}\n                      ${this._computeUsesProtectedOptions\n                        ? html`\n                            <ha-settings-row ?three-line=${this.narrow}>\n                              <span slot=\"heading\">\n                                ${this.supervisor.localize(\n                                  \"addon.dashboard.option.protected.title\"\n                                )}\n                              </span>\n                              <span slot=\"description\">\n                                ${this.supervisor.localize(\n                                  \"addon.dashboard.option.protected.description\"\n                                )}\n                              </span>\n                              <ha-switch\n                                @change=${this._protectionToggled}\n                                .checked=${this.addon.protected}\n                                haptic\n                              ></ha-switch>\n                            </ha-settings-row>\n                          `\n                        : \"\"}\n                    </div>\n                  `\n                : \"\"}\n            </div>\n            <div>\n              ${this.addon.state === \"started\"\n                ? html`<ha-settings-row ?three-line=${this.narrow}>\n                      <span slot=\"heading\">\n                        ${this.supervisor.localize(\"addon.dashboard.hostname\")}\n                      </span>\n                      <code slot=\"description\"> ${this.addon.hostname} </code>\n                    </ha-settings-row>\n                    ${metrics.map(\n                      (metric) =>\n                        html`\n                          <supervisor-metric\n                            .description=${metric.description}\n                            .value=${metric.value ?? 0}\n                            .tooltip=${metric.tooltip}\n                          ></supervisor-metric>\n                        `\n                    )}`\n                : \"\"}\n            </div>\n          </div>\n          ${this._error\n            ? html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`\n            : \"\"}\n          ${!this.addon.version && addonStoreInfo && !this.addon.available\n            ? !addonArchIsSupported(\n                this.supervisor.info.supported_arch,\n                this.addon.arch\n              )\n              ? html`\n                  <ha-alert alert-type=\"warning\">\n                    ${this.supervisor.localize(\n                      \"addon.dashboard.not_available_arch\"\n                    )}\n                  </ha-alert>\n                `\n              : html`\n                  <ha-alert alert-type=\"warning\">\n                    ${this.supervisor.localize(\n                      \"addon.dashboard.not_available_version\",\n                      \"core_version_installed\",\n                      this.supervisor.core.version,\n                      \"core_version_needed\",\n                      addonStoreInfo!.homeassistant\n                    )}\n                  </ha-alert>\n                `\n            : \"\"}\n        </div>\n        <div class=\"card-actions\">\n          <div>\n            ${this.addon.version\n              ? this._computeIsRunning\n                ? html`\n                    <ha-progress-button\n                      class=\"warning\"\n                      @click=${this._stopClicked}\n                    >\n                      ${this.supervisor.localize(\"addon.dashboard.stop\")}\n                    </ha-progress-button>\n                    <ha-progress-button\n                      class=\"warning\"\n                      @click=${this._restartClicked}\n                    >\n                      ${this.supervisor.localize(\"addon.dashboard.restart\")}\n                    </ha-progress-button>\n                  `\n                : html`\n                    <ha-progress-button @click=${this._startClicked}>\n                      ${this.supervisor.localize(\"addon.dashboard.start\")}\n                    </ha-progress-button>\n                  `\n              : html`\n                  <ha-progress-button\n                    .disabled=${!this.addon.available}\n                    @click=${this._installClicked}\n                  >\n                    ${this.supervisor.localize(\"addon.dashboard.install\")}\n                  </ha-progress-button>\n                `}\n          </div>\n          <div>\n            ${this.addon.version\n              ? html` ${this._computeShowWebUI\n                    ? html`\n                        <a\n                          href=${this._pathWebui!}\n                          tabindex=\"-1\"\n                          target=\"_blank\"\n                          rel=\"noopener\"\n                        >\n                          <mwc-button>\n                            ${this.supervisor.localize(\n                              \"addon.dashboard.open_web_ui\"\n                            )}\n                          </mwc-button>\n                        </a>\n                      `\n                    : \"\"}\n                  ${this._computeShowIngressUI\n                    ? html`\n                        <mwc-button @click=${this._openIngress}>\n                          ${this.supervisor.localize(\n                            \"addon.dashboard.open_web_ui\"\n                          )}\n                        </mwc-button>\n                      `\n                    : \"\"}\n                  <ha-progress-button\n                    class=\"warning\"\n                    @click=${this._uninstallClicked}\n                  >\n                    ${this.supervisor.localize(\"addon.dashboard.uninstall\")}\n                  </ha-progress-button>\n                  ${this.addon.build\n                    ? html`\n                        <ha-call-api-button\n                          class=\"warning\"\n                          .hass=${this.hass}\n                          .path=\"hassio/addons/${this.addon.slug}/rebuild\"\n                        >\n                          ${this.supervisor.localize(\"addon.dashboard.rebuild\")}\n                        </ha-call-api-button>\n                      `\n                    : \"\"}`\n              : \"\"}\n          </div>\n        </div>\n      </ha-card>\n\n      ${this.addon.long_description\n        ? html`\n            <ha-card>\n              <div class=\"card-content\">\n                <ha-markdown\n                  .content=${this.addon.long_description}\n                ></ha-markdown>\n              </div>\n            </ha-card>\n          `\n        : \"\"}\n    `;\n  }\n\n  protected updated(changedProps) {\n    super.updated(changedProps);\n    if (changedProps.has(\"addon\")) {\n      this._loadData();\n    }\n  }\n\n  private async _loadData(): Promise<void> {\n    if (this.addon.state === \"started\") {\n      this._metrics = await fetchHassioStats(\n        this.hass,\n        `addons/${this.addon.slug}`\n      );\n    }\n  }\n\n  private get _computeHassioApi(): boolean {\n    return (\n      this.addon.hassio_api &&\n      (this.addon.hassio_role === \"manager\" ||\n        this.addon.hassio_role === \"admin\")\n    );\n  }\n\n  private get _computeApparmorClassName(): string {\n    if (this.addon.apparmor === \"profile\") {\n      return \"green\";\n    }\n    if (this.addon.apparmor === \"disable\") {\n      return \"red\";\n    }\n    return \"\";\n  }\n\n  private _showMoreInfo(ev): void {\n    const id = ev.currentTarget.id;\n    showHassioMarkdownDialog(this, {\n      title: this.supervisor.localize(`addon.dashboard.capability.${id}.title`),\n      content:\n        id === \"stage\"\n          ? this.supervisor.localize(\n              `addon.dashboard.capability.${id}.description`,\n              \"icon_stable\",\n              `<ha-svg-icon path=\"${STAGE_ICON.stable}\"></ha-svg-icon>`,\n              \"icon_experimental\",\n              `<ha-svg-icon path=\"${STAGE_ICON.experimental}\"></ha-svg-icon>`,\n              \"icon_deprecated\",\n              `<ha-svg-icon path=\"${STAGE_ICON.deprecated}\"></ha-svg-icon>`\n            )\n          : this.supervisor.localize(\n              `addon.dashboard.capability.${id}.description`\n            ),\n    });\n  }\n\n  private get _computeIsRunning(): boolean {\n    return this.addon?.state === \"started\";\n  }\n\n  private get _pathWebui(): string | null {\n    return (\n      this.addon.webui &&\n      this.addon.webui.replace(\"[HOST]\", document.location.hostname)\n    );\n  }\n\n  private get _computeShowWebUI(): boolean | \"\" | null {\n    return !this.addon.ingress && this.addon.webui && this._computeIsRunning;\n  }\n\n  private _openIngress(): void {\n    navigate(`/hassio/ingress/${this.addon.slug}`);\n  }\n\n  private get _computeShowIngressUI(): boolean {\n    return this.addon.ingress && this._computeIsRunning;\n  }\n\n  private get _computeCannotIngressSidebar(): boolean {\n    return (\n      !this.addon.ingress || !atLeastVersion(this.hass.config.version, 0, 92)\n    );\n  }\n\n  private get _computeUsesProtectedOptions(): boolean {\n    return (\n      this.addon.docker_api || this.addon.full_access || this.addon.host_pid\n    );\n  }\n\n  private async _startOnBootToggled(): Promise<void> {\n    this._error = undefined;\n    const data: HassioAddonSetOptionParams = {\n      boot: this.addon.boot === \"auto\" ? \"manual\" : \"auto\",\n    };\n    try {\n      await setHassioAddonOption(this.hass, this.addon.slug, data);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"option\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.failed_to_save\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n  }\n\n  private async _watchdogToggled(): Promise<void> {\n    this._error = undefined;\n    const data: HassioAddonSetOptionParams = {\n      watchdog: !this.addon.watchdog,\n    };\n    try {\n      await setHassioAddonOption(this.hass, this.addon.slug, data);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"option\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.failed_to_save\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n  }\n\n  private async _autoUpdateToggled(): Promise<void> {\n    this._error = undefined;\n    const data: HassioAddonSetOptionParams = {\n      auto_update: !this.addon.auto_update,\n    };\n    try {\n      await setHassioAddonOption(this.hass, this.addon.slug, data);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"option\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.failed_to_save\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n  }\n\n  private async _protectionToggled(): Promise<void> {\n    this._error = undefined;\n    const data: HassioAddonSetSecurityParams = {\n      protected: !this.addon.protected,\n    };\n    try {\n      await setHassioAddonSecurity(this.hass, this.addon.slug, data);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"security\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.failed_to_save\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n  }\n\n  private async _panelToggled(): Promise<void> {\n    this._error = undefined;\n    const data: HassioAddonSetOptionParams = {\n      ingress_panel: !this.addon.ingress_panel,\n    };\n    try {\n      await setHassioAddonOption(this.hass, this.addon.slug, data);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"option\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.failed_to_save\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n  }\n\n  private async _openChangelog(): Promise<void> {\n    try {\n      let content = await fetchHassioAddonChangelog(this.hass, this.addon.slug);\n      if (\n        content.includes(`# ${this.addon.version}`) &&\n        content.includes(`# ${this.addon.version_latest}`)\n      ) {\n        const newcontent = content.split(`# ${this.addon.version}`)[0];\n        if (newcontent.includes(`# ${this.addon.version_latest}`)) {\n          // Only change the content if the new version still exist\n          // if the changelog does not have the newests version on top\n          // this will not be true, and we don't modify the content\n          content = newcontent;\n        }\n      }\n      showHassioMarkdownDialog(this, {\n        title: this.supervisor.localize(\"addon.dashboard.changelog\"),\n        content,\n      });\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.supervisor.localize(\n          \"addon.dashboard.action_error.get_changelog\"\n        ),\n        text: extractApiErrorMessage(err),\n      });\n    }\n  }\n\n  private async _installClicked(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n\n    try {\n      await installHassioAddon(this.hass, this.addon.slug);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"install\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.supervisor.localize(\"addon.dashboard.action_error.install\"),\n        text: extractApiErrorMessage(err),\n      });\n    }\n    button.progress = false;\n  }\n\n  private async _stopClicked(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n\n    try {\n      await stopHassioAddon(this.hass, this.addon.slug);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"stop\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.supervisor.localize(\"addon.dashboard.action_error.stop\"),\n        text: extractApiErrorMessage(err),\n      });\n    }\n    button.progress = false;\n  }\n\n  private async _restartClicked(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n\n    try {\n      await restartHassioAddon(this.hass, this.addon.slug);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"stop\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.supervisor.localize(\"addon.dashboard.action_error.restart\"),\n        text: extractApiErrorMessage(err),\n      });\n    }\n    button.progress = false;\n  }\n\n  private async _updateClicked(): Promise<void> {\n    showDialogSupervisorUpdate(this, {\n      supervisor: this.supervisor,\n      name: this.addon.name,\n      version: this.addon.version_latest,\n      backupParams: {\n        name: `addon_${this.addon.slug}_${this.addon.version}`,\n        addons: [this.addon.slug],\n        homeassistant: false,\n      },\n      updateHandler: async () => this._updateAddon(),\n    });\n  }\n\n  private async _updateAddon(): Promise<void> {\n    await updateHassioAddon(this.hass, this.addon.slug);\n    fireEvent(this, \"supervisor-collection-refresh\", {\n      collection: \"addon\",\n    });\n    const eventdata = {\n      success: true,\n      response: undefined,\n      path: \"update\",\n    };\n    fireEvent(this, \"hass-api-called\", eventdata);\n  }\n\n  private async _startClicked(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n    try {\n      const validate = await validateHassioAddonOption(\n        this.hass,\n        this.addon.slug\n      );\n      if (!validate.valid) {\n        await showConfirmationDialog(this, {\n          title: this.supervisor.localize(\n            \"addon.dashboard.action_error.start_invalid_config\"\n          ),\n          text: validate.message.split(\" Got \")[0],\n          confirm: () => this._openConfiguration(),\n          confirmText: this.supervisor.localize(\n            \"addon.dashboard.action_error.go_to_config\"\n          ),\n          dismissText: this.supervisor.localize(\"common.cancel\"),\n        });\n        button.progress = false;\n        return;\n      }\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: \"Failed to validate addon configuration\",\n        text: extractApiErrorMessage(err),\n      });\n      button.progress = false;\n      return;\n    }\n\n    try {\n      await startHassioAddon(this.hass, this.addon.slug);\n      this.addon = await fetchHassioAddonInfo(this.hass, this.addon.slug);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"start\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.supervisor.localize(\"addon.dashboard.action_error.start\"),\n        text: extractApiErrorMessage(err),\n      });\n    }\n    button.progress = false;\n  }\n\n  private _openConfiguration(): void {\n    navigate(`/hassio/addon/${this.addon.slug}/config`);\n  }\n\n  private async _uninstallClicked(ev: CustomEvent): Promise<void> {\n    const button = ev.currentTarget as any;\n    button.progress = true;\n\n    const confirmed = await showConfirmationDialog(this, {\n      title: this.addon.name,\n      text: \"Are you sure you want to uninstall this add-on?\",\n      confirmText: \"uninstall add-on\",\n      dismissText: \"no\",\n    });\n\n    if (!confirmed) {\n      button.progress = false;\n      return;\n    }\n\n    this._error = undefined;\n    try {\n      await uninstallHassioAddon(this.hass, this.addon.slug);\n      const eventdata = {\n        success: true,\n        response: undefined,\n        path: \"uninstall\",\n      };\n      fireEvent(this, \"hass-api-called\", eventdata);\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.supervisor.localize(\n          \"addon.dashboard.action_error.uninstall\"\n        ),\n        text: extractApiErrorMessage(err),\n      });\n    }\n    button.progress = false;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        :host {\n          display: block;\n        }\n        ha-card {\n          display: block;\n          margin-bottom: 16px;\n        }\n        ha-card.warning {\n          background-color: var(--error-color);\n          color: white;\n        }\n        ha-card.warning .card-header {\n          color: white;\n        }\n        ha-card.warning .card-content {\n          color: white;\n        }\n        ha-card.warning mwc-button {\n          --mdc-theme-primary: white !important;\n        }\n        .warning {\n          color: var(--error-color);\n          --mdc-theme-primary: var(--error-color);\n        }\n        .light-color {\n          color: var(--secondary-text-color);\n        }\n        .addon-header {\n          padding-left: 8px;\n          font-size: 24px;\n          color: var(--ha-card-header-color, --primary-text-color);\n        }\n        .addon-version {\n          float: right;\n          font-size: 15px;\n          vertical-align: middle;\n        }\n        .errors {\n          color: var(--error-color);\n          margin-bottom: 16px;\n        }\n        .description {\n          margin-bottom: 16px;\n        }\n        img.logo {\n          max-width: 100%;\n          max-height: 60px;\n          margin: 16px 0;\n          display: block;\n        }\n\n        ha-switch {\n          display: flex;\n        }\n        ha-svg-icon.running {\n          color: var(--success-color);\n        }\n        ha-svg-icon.stopped {\n          color: var(--error-color);\n        }\n        ha-call-api-button {\n          font-weight: 500;\n          color: var(--primary-color);\n        }\n        protection-enable mwc-button {\n          --mdc-theme-primary: white;\n        }\n        .description a {\n          color: var(--primary-color);\n        }\n        .red {\n          --ha-label-badge-color: var(--label-badge-red, #df4c1e);\n        }\n        .blue {\n          --ha-label-badge-color: var(--label-badge-blue, #039be5);\n        }\n        .green {\n          --ha-label-badge-color: var(--label-badge-green, #0da035);\n        }\n        .yellow {\n          --ha-label-badge-color: var(--label-badge-yellow, #f4b400);\n        }\n        .security {\n          margin-bottom: 16px;\n        }\n        .card-actions {\n          justify-content: space-between;\n          display: flex;\n        }\n        .security h3 {\n          margin-bottom: 8px;\n          font-weight: normal;\n        }\n        .security ha-label-badge {\n          cursor: pointer;\n          margin-right: 4px;\n          --ha-label-badge-padding: 8px 0 0 0;\n        }\n        .changelog {\n          display: contents;\n        }\n        .changelog-link {\n          color: var(--primary-color);\n          text-decoration: underline;\n          cursor: pointer;\n        }\n        ha-markdown {\n          padding: 16px;\n        }\n        ha-settings-row {\n          padding: 0;\n          height: 54px;\n          width: 100%;\n        }\n        ha-settings-row > span[slot=\"description\"] {\n          white-space: normal;\n          color: var(--secondary-text-color);\n        }\n        ha-settings-row[three-line] {\n          height: 74px;\n        }\n\n        .addon-options {\n          max-width: 90%;\n        }\n\n        .addon-container {\n          display: grid;\n          grid-auto-flow: column;\n          grid-template-columns: 60% 40%;\n        }\n\n        .addon-container > div:last-of-type {\n          align-self: end;\n        }\n\n        @media (max-width: 720px) {\n          .addon-options {\n            max-width: 100%;\n          }\n          .addon-container {\n            display: block;\n          }\n        }\n      `,\n    ];\n  }\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-info\": HassioAddonInfo;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport \"../../../../src/components/ha-circular-progress\";\nimport { HassioAddonDetails } from \"../../../../src/data/hassio/addon\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../../src/types\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\nimport \"./hassio-addon-info\";\n\n@customElement(\"hassio-addon-info-tab\")\nclass HassioAddonInfoDashboard extends LitElement {\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public addon?: HassioAddonDetails;\n\n  protected render(): TemplateResult {\n    if (!this.addon) {\n      return html`<ha-circular-progress active></ha-circular-progress>`;\n    }\n\n    return html`\n      <div class=\"content\">\n        <hassio-addon-info\n          .narrow=${this.narrow}\n          .hass=${this.hass}\n          .supervisor=${this.supervisor}\n          .addon=${this.addon}\n        ></hassio-addon-info>\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        .content {\n          margin: auto;\n          padding: 8px;\n          max-width: 1024px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-info-tab\": HassioAddonInfoDashboard;\n  }\n}\n","import \"@material/mwc-button\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport \"../../../../src/components/ha-alert\";\nimport \"../../../../src/components/ha-card\";\nimport {\n  fetchHassioAddonLogs,\n  HassioAddonDetails,\n} from \"../../../../src/data/hassio/addon\";\nimport { extractApiErrorMessage } from \"../../../../src/data/hassio/common\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../../src/types\";\nimport \"../../components/hassio-ansi-to-html\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\n\n@customElement(\"hassio-addon-logs\")\nclass HassioAddonLogs extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public addon!: HassioAddonDetails;\n\n  @state() private _error?: string;\n\n  @state() private _content?: string;\n\n  public async connectedCallback(): Promise<void> {\n    super.connectedCallback();\n    await this._loadData();\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <h1>${this.addon.name}</h1>\n      <ha-card>\n        ${this._error\n          ? html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`\n          : \"\"}\n        <div class=\"card-content\">\n          ${this._content\n            ? html`<hassio-ansi-to-html\n                .content=${this._content}\n              ></hassio-ansi-to-html>`\n            : \"\"}\n        </div>\n        <div class=\"card-actions\">\n          <mwc-button @click=${this._refresh}>\n            ${this.supervisor.localize(\"common.refresh\")}\n          </mwc-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        :host,\n        ha-card {\n          display: block;\n        }\n      `,\n    ];\n  }\n\n  private async _loadData(): Promise<void> {\n    this._error = undefined;\n    try {\n      this._content = await fetchHassioAddonLogs(this.hass, this.addon.slug);\n    } catch (err: any) {\n      this._error = this.supervisor.localize(\n        \"addon.logs.get_logs\",\n        \"error\",\n        extractApiErrorMessage(err)\n      );\n    }\n  }\n\n  private async _refresh(): Promise<void> {\n    await this._loadData();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-logs\": HassioAddonLogs;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport \"../../../../src/components/ha-circular-progress\";\nimport { HassioAddonDetails } from \"../../../../src/data/hassio/addon\";\nimport { Supervisor } from \"../../../../src/data/supervisor/supervisor\";\nimport { haStyle } from \"../../../../src/resources/styles\";\nimport { HomeAssistant } from \"../../../../src/types\";\nimport { hassioStyle } from \"../../resources/hassio-style\";\nimport \"./hassio-addon-logs\";\n\n@customElement(\"hassio-addon-log-tab\")\nclass HassioAddonLogDashboard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public addon?: HassioAddonDetails;\n\n  protected render(): TemplateResult {\n    if (!this.addon) {\n      return html` <ha-circular-progress active></ha-circular-progress> `;\n    }\n    return html`\n      <div class=\"content\">\n        <hassio-addon-logs\n          .hass=${this.hass}\n          .supervisor=${this.supervisor}\n          .addon=${this.addon}\n        ></hassio-addon-logs>\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        .content {\n          margin: auto;\n          padding: 8px;\n          max-width: 1024px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-log-tab\": HassioAddonLogDashboard;\n  }\n}\n","import {\n  mdiCogs,\n  mdiFileDocument,\n  mdiInformationVariant,\n  mdiMathLog,\n} from \"@mdi/js\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../../src/common/dom/fire_event\";\nimport { navigate } from \"../../../src/common/navigate\";\nimport { extractSearchParam } from \"../../../src/common/url/search-params\";\nimport \"../../../src/components/ha-circular-progress\";\nimport {\n  fetchHassioAddonInfo,\n  fetchHassioAddonsInfo,\n  HassioAddonDetails,\n} from \"../../../src/data/hassio/addon\";\nimport { extractApiErrorMessage } from \"../../../src/data/hassio/common\";\nimport { Supervisor } from \"../../../src/data/supervisor/supervisor\";\nimport \"../../../src/layouts/hass-error-screen\";\nimport \"../../../src/layouts/hass-loading-screen\";\nimport \"../../../src/layouts/hass-tabs-subpage\";\nimport type { PageNavigation } from \"../../../src/layouts/hass-tabs-subpage\";\nimport { haStyle } from \"../../../src/resources/styles\";\nimport { HomeAssistant, Route } from \"../../../src/types\";\nimport { hassioStyle } from \"../resources/hassio-style\";\nimport \"./config/hassio-addon-audio\";\nimport \"./config/hassio-addon-config\";\nimport \"./config/hassio-addon-network\";\nimport \"./hassio-addon-router\";\nimport \"./info/hassio-addon-info\";\nimport \"./log/hassio-addon-logs\";\n\n@customElement(\"hassio-addon-dashboard\")\nclass HassioAddonDashboard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ attribute: false }) public addon?: HassioAddonDetails;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @state() _error?: string;\n\n  private _computeTail = memoizeOne((route: Route) => {\n    const dividerPos = route.path.indexOf(\"/\", 1);\n    return dividerPos === -1\n      ? {\n          prefix: route.prefix + route.path,\n          path: \"\",\n        }\n      : {\n          prefix: route.prefix + route.path.substr(0, dividerPos),\n          path: route.path.substr(dividerPos),\n        };\n  });\n\n  protected render(): TemplateResult {\n    if (this._error) {\n      return html`<hass-error-screen\n        .error=${this._error}\n      ></hass-error-screen>`;\n    }\n\n    if (!this.addon) {\n      return html`<hass-loading-screen></hass-loading-screen>`;\n    }\n\n    const addonTabs: PageNavigation[] = [\n      {\n        translationKey: \"addon.panel.info\",\n        path: `/hassio/addon/${this.addon.slug}/info`,\n        iconPath: mdiInformationVariant,\n      },\n    ];\n\n    if (this.addon.documentation) {\n      addonTabs.push({\n        translationKey: \"addon.panel.documentation\",\n        path: `/hassio/addon/${this.addon.slug}/documentation`,\n        iconPath: mdiFileDocument,\n      });\n    }\n\n    if (this.addon.version) {\n      addonTabs.push(\n        {\n          translationKey: \"addon.panel.configuration\",\n          path: `/hassio/addon/${this.addon.slug}/config`,\n          iconPath: mdiCogs,\n        },\n        {\n          translationKey: \"addon.panel.log\",\n          path: `/hassio/addon/${this.addon.slug}/logs`,\n          iconPath: mdiMathLog,\n        }\n      );\n    }\n\n    const route = this._computeTail(this.route);\n\n    return html`\n      <hass-tabs-subpage\n        .hass=${this.hass}\n        .localizeFunc=${this.supervisor.localize}\n        .narrow=${this.narrow}\n        .backPath=${this.addon.version ? \"/hassio/dashboard\" : \"/hassio/store\"}\n        .route=${route}\n        .tabs=${addonTabs}\n        supervisor\n      >\n        <span slot=\"header\">${this.addon.name}</span>\n        <hassio-addon-router\n          .route=${route}\n          .narrow=${this.narrow}\n          .hass=${this.hass}\n          .supervisor=${this.supervisor}\n          .addon=${this.addon}\n        ></hassio-addon-router>\n      </hass-tabs-subpage>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      hassioStyle,\n      css`\n        :host {\n          color: var(--primary-text-color);\n        }\n        .content {\n          padding: 24px 0 32px;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n        hassio-addon-info,\n        hassio-addon-network,\n        hassio-addon-audio,\n        hassio-addon-config {\n          margin-bottom: 24px;\n          width: 600px;\n        }\n        hassio-addon-logs {\n          max-width: calc(100% - 8px);\n          min-width: 600px;\n        }\n        @media only screen and (max-width: 600px) {\n          hassio-addon-info,\n          hassio-addon-network,\n          hassio-addon-audio,\n          hassio-addon-config,\n          hassio-addon-logs {\n            max-width: 100%;\n            min-width: 100%;\n          }\n        }\n      `,\n    ];\n  }\n\n  protected async firstUpdated(): Promise<void> {\n    if (this.route.path === \"\") {\n      const requestedAddon = extractSearchParam(\"addon\");\n      if (requestedAddon) {\n        const addonsInfo = await fetchHassioAddonsInfo(this.hass);\n        const validAddon = addonsInfo.addons.some(\n          (addon) => addon.slug === requestedAddon\n        );\n        if (!validAddon) {\n          this._error = this.supervisor.localize(\"my.error_addon_not_found\");\n        } else {\n          navigate(`/hassio/addon/${requestedAddon}`, { replace: true });\n        }\n      }\n    }\n    this.addEventListener(\"hass-api-called\", (ev) => this._apiCalled(ev));\n  }\n\n  private async _apiCalled(ev): Promise<void> {\n    if (!ev.detail.success) {\n      return;\n    }\n\n    const pathSplit: string[] = ev.detail.path?.split(\"/\");\n\n    if (!pathSplit || pathSplit.length === 0) {\n      return;\n    }\n\n    const path: string = pathSplit[pathSplit.length - 1];\n\n    if ([\"uninstall\", \"install\", \"update\", \"start\", \"stop\"].includes(path)) {\n      fireEvent(this, \"supervisor-collection-refresh\", {\n        collection: \"supervisor\",\n      });\n    }\n\n    if (path === \"uninstall\") {\n      window.history.back();\n    } else {\n      await this._routeDataChanged();\n    }\n  }\n\n  protected updated(changedProperties) {\n    if (changedProperties.has(\"route\") && !this.addon) {\n      this._routeDataChanged();\n    }\n  }\n\n  private async _routeDataChanged(): Promise<void> {\n    const addon = this.route.path.split(\"/\")[1];\n    if (!addon) {\n      return;\n    }\n    try {\n      const addoninfo = await fetchHassioAddonInfo(this.hass, addon);\n      this.addon = addoninfo;\n    } catch (err: any) {\n      this._error = `Error fetching addon info: ${extractApiErrorMessage(err)}`;\n      this.addon = undefined;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hassio-addon-dashboard\": HassioAddonDashboard;\n  }\n}\n"],"names":[],"sourceRoot":""}