{"version":3,"file":"d20d6a95.js","mappings":";;AAsDA;;AAKA;;;AAGA;;AAMA;AACA;;;;AAUA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAjBA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAvBA;;;;AAAA","sources":["webpack://home-assistant-frontend/./src/components/ha-config-entry-picker.ts","webpack://home-assistant-frontend/./src/components/ha-selector/ha-selector-config-entry.ts"],"sourcesContent":["import \"@material/mwc-list/mwc-list-item\";\nimport { html, LitElement, TemplateResult } from \"lit\";\nimport { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { PolymerChangedEvent } from \"../polymer-types\";\nimport { HomeAssistant } from \"../types\";\nimport type { HaComboBox } from \"./ha-combo-box\";\nimport { ConfigEntry, getConfigEntries } from \"../data/config_entries\";\nimport { domainToName } from \"../data/integration\";\nimport { caseInsensitiveStringCompare } from \"../common/string/compare\";\nimport { brandsUrl } from \"../util/brands-url\";\nimport \"./ha-combo-box\";\n\nexport interface ConfigEntryExtended extends ConfigEntry {\n  localized_domain_name?: string;\n}\n\n@customElement(\"ha-config-entry-picker\")\nclass HaConfigEntryPicker extends LitElement {\n  public hass!: HomeAssistant;\n\n  @property() public integration?: string;\n\n  @property() public label?: string;\n\n  @property() public value = \"\";\n\n  @property() public helper?: string;\n\n  @state() private _configEntries?: ConfigEntryExtended[];\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @query(\"ha-combo-box\") private _comboBox!: HaComboBox;\n\n  public open() {\n    this._comboBox?.open();\n  }\n\n  public focus() {\n    this._comboBox?.focus();\n  }\n\n  protected firstUpdated() {\n    this._getConfigEntries();\n  }\n\n  private _rowRenderer: ComboBoxLitRenderer<ConfigEntryExtended> = (\n    item\n  ) => html`<mwc-list-item twoline graphic=\"icon\">\n    <span\n      >${item.title ||\n      this.hass.localize(\n        \"ui.panel.config.integrations.config_entry.unnamed_entry\"\n      )}</span\n    >\n    <span slot=\"secondary\">${item.localized_domain_name}</span>\n    <img\n      slot=\"graphic\"\n      src=${brandsUrl({\n        domain: item.domain,\n        type: \"icon\",\n        darkOptimized: this.hass.themes?.darkMode,\n      })}\n      referrerpolicy=\"no-referrer\"\n      @error=${this._onImageError}\n      @load=${this._onImageLoad}\n    />\n  </mwc-list-item>`;\n\n  protected render(): TemplateResult {\n    if (!this._configEntries) {\n      return html``;\n    }\n    return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass\n          ? this.hass.localize(\"ui.components.config-entry-picker.config_entry\")\n          : this.label}\n        .value=${this._value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        .helper=${this.helper}\n        .renderer=${this._rowRenderer}\n        .items=${this._configEntries}\n        item-value-path=\"entry_id\"\n        item-id-path=\"entry_id\"\n        item-label-path=\"title\"\n        @value-changed=${this._valueChanged}\n      ></ha-combo-box>\n    `;\n  }\n\n  private _onImageLoad(ev) {\n    ev.target.style.visibility = \"initial\";\n  }\n\n  private _onImageError(ev) {\n    ev.target.style.visibility = \"hidden\";\n  }\n\n  private async _getConfigEntries() {\n    getConfigEntries(this.hass, {\n      type: [\"device\", \"hub\", \"service\"],\n      domain: this.integration,\n    }).then((configEntries) => {\n      this._configEntries = configEntries\n        .map(\n          (entry: ConfigEntry): ConfigEntryExtended => ({\n            ...entry,\n            localized_domain_name: domainToName(\n              this.hass.localize,\n              entry.domain\n            ),\n          })\n        )\n        .sort((conf1, conf2) =>\n          caseInsensitiveStringCompare(\n            conf1.localized_domain_name + conf1.title,\n            conf2.localized_domain_name + conf2.title\n          )\n        );\n    });\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _valueChanged(ev: PolymerChangedEvent<string>) {\n    ev.stopPropagation();\n    const newValue = ev.detail.value;\n\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-entry-picker\": HaConfigEntryPicker;\n  }\n}\n","import { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { ConfigEntrySelector } from \"../../data/selector\";\nimport { HomeAssistant } from \"../../types\";\nimport \"../ha-config-entry-picker\";\n\n@customElement(\"ha-selector-config_entry\")\nexport class HaConfigEntrySelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: ConfigEntrySelector;\n\n  @property() public value?: any;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  protected render() {\n    return html`<ha-config-entry-picker\n      .hass=${this.hass}\n      .value=${this.value}\n      .label=${this.label}\n      .helper=${this.helper}\n      .disabled=${this.disabled}\n      .required=${this.required}\n      .integration=${this.selector.config_entry.integration}\n      allow-custom-entity\n    ></ha-config-entry-picker>`;\n  }\n\n  static styles = css`\n    ha-config-entry-picker {\n      width: 100%;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-config_entry\": HaConfigEntrySelector;\n  }\n}\n"],"names":[],"sourceRoot":""}