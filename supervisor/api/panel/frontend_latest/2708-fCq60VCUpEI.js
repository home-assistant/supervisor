/*! For license information please see 2708-fCq60VCUpEI.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[2708],{52708:(e,t,i)=>{i.r(t);var a=i(17463),o=(i(44577),i(68144)),n=i(79932),s=i(14516),r=i(47181),l=(i(76870),i(65189),i(86630),i(41682)),c=i(35460),d=i(26765),u=i(11654);const h=(0,s.Z)((e=>{const t=""!==e.host.disk_life_time?30:10,i=1e3*e.host.disk_used/60/t,a=4*e.host.startup_time/60;return 10*Math.ceil((i+a)/10)}));(0,a.Z)([(0,n.Mo)("dialog-hassio-datadisk")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"dialogParams",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"selectedDevice",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"devices",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"moving",value:()=>!1},{kind:"method",key:"showDialog",value:function(e){this.dialogParams=e,(0,c.ou)(this.hass).then((e=>{this.devices=e.devices}))}},{kind:"method",key:"closeDialog",value:function(){this.dialogParams=void 0,this.selectedDevice=void 0,this.devices=void 0,this.moving=!1,(0,r.B)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){var e;return this.dialogParams?o.dy` <ha-dialog open scrimClickAction escapeKeyAction .heading="${this.moving?this.dialogParams.supervisor.localize("dialog.datadisk_move.moving"):this.dialogParams.supervisor.localize("dialog.datadisk_move.title")}" @closed="${this.closeDialog}" ?hideActions="${this.moving}"> ${this.moving?o.dy` <ha-circular-progress alt="Moving" size="large" active> </ha-circular-progress> <p class="progress-text"> ${this.dialogParams.supervisor.localize("dialog.datadisk_move.moving_desc")} </p>`:o.dy` ${null!==(e=this.devices)&&void 0!==e&&e.length?o.dy` ${this.dialogParams.supervisor.localize("dialog.datadisk_move.description",{current_path:this.dialogParams.supervisor.os.data_disk,time:h(this.dialogParams.supervisor)})} <br><br> <ha-select .label="${this.dialogParams.supervisor.localize("dialog.datadisk_move.select_device")}" @selected="${this._select_device}" dialogInitialFocus> ${this.devices.map((e=>o.dy`<mwc-list-item .value="${e}">${e}</mwc-list-item>`))} </ha-select> `:void 0===this.devices?this.dialogParams.supervisor.localize("dialog.datadisk_move.loading_devices"):this.dialogParams.supervisor.localize("dialog.datadisk_move.no_devices")} <mwc-button slot="secondaryAction" @click="${this.closeDialog}" dialogInitialFocus> ${this.dialogParams.supervisor.localize("dialog.datadisk_move.cancel")} </mwc-button> <mwc-button .disabled="${!this.selectedDevice}" slot="primaryAction" @click="${this._moveDatadisk}"> ${this.dialogParams.supervisor.localize("dialog.datadisk_move.move")} </mwc-button>`} </ha-dialog> `:o.Ld}},{kind:"method",key:"_select_device",value:function(e){this.selectedDevice=e.target.value}},{kind:"method",key:"_moveDatadisk",value:async function(){this.moving=!0;try{await(0,c.Sx)(this.hass,this.selectedDevice)}catch(e){this.hass.connection.connected&&!(0,l.yz)(e)&&((0,d.Ys)(this,{title:this.dialogParams.supervisor.localize("system.host.failed_to_move"),text:(0,l.js)(e)}),this.closeDialog())}}},{kind:"get",static:!0,key:"styles",value:function(){return[u.Qx,u.yu,o.iv`ha-select{width:100%}ha-circular-progress{display:block;margin:32px;text-align:center}.progress-text{text-align:center}`]}}]}}),o.oi)},65189:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(34541),r=i(47838),l=i(47181),c=i(93217);let d;(0,a.Z)([(0,n.Mo)("ha-markdown-element")],(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,n.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"allowSvg",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"breaks",value:()=>!1},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"update",value:function(e){(0,s.Z)((0,r.Z)(a.prototype),"update",this).call(this,e),void 0!==this.content&&this._render()}},{kind:"method",key:"_render",value:async function(){this.innerHTML=await(async(e,t,a)=>(d||(d=(0,c.Ud)(new Worker(new URL(i.p+i.u(4971),i.b)))),d.renderMarkdown(e,t,a)))(String(this.content),{breaks:this.breaks,gfm:!0},{allowSvg:this.allowSvg}),this._resize();const e=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,null);for(;e.nextNode();){const t=e.currentNode;t instanceof HTMLAnchorElement&&t.host!==document.location.host?(t.target="_blank",t.rel="noreferrer noopener"):t instanceof HTMLImageElement&&t.addEventListener("load",this._resize)}}},{kind:"field",key:"_resize",value(){return()=>(0,l.B)(this,"iron-resize")}}]}}),o.fl);i(9381),i(52039);(0,a.Z)([(0,n.Mo)("ha-markdown")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"allowSvg",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"breaks",value:()=>!1},{kind:"method",key:"render",value:function(){return this.content?o.dy`<ha-markdown-element .content="${this.content}" .allowSvg="${this.allowSvg}" .breaks="${this.breaks}"></ha-markdown-element>`:o.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`:host{display:block}ha-markdown-element{-ms-user-select:text;-webkit-user-select:text;-moz-user-select:text}ha-markdown-element>:first-child{margin-top:0}ha-markdown-element>:last-child{margin-bottom:0}a{color:var(--primary-color)}img{max-width:100%}code,pre{background-color:var(--markdown-code-background-color,none);border-radius:3px}svg{background-color:var(--markdown-svg-background-color,none);color:var(--markdown-svg-color,none)}code{font-size:85%;padding:.2em .4em}pre code{padding:0}pre{padding:16px;overflow:auto;line-height:1.45;font-family:var(--code-font-family,monospace)}h1,h2,h3,h4,h5,h6{line-height:initial}h2{font-size:1.5em;font-weight:700}`}}]}}),o.oi)},93217:(e,t,i)=>{i.d(t,{Ud:()=>h});const a=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),n=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.finalizer"),r=Symbol("Comlink.thrown"),l=e=>"object"==typeof e&&null!==e||"function"==typeof e,c=new Map([["proxy",{canHandle:e=>l(e)&&e[a],serialize(e){const{port1:t,port2:i}=new MessageChannel;return d(e,t),[i,[i]]},deserialize:e=>(e.start(),h(e))}],["throw",{canHandle:e=>l(e)&&r in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function d(e,t=globalThis,i=["*"]){t.addEventListener("message",(function o(n){if(!n||!n.data)return;if(!function(e,t){for(const i of e){if(t===i||"*"===i)return!0;if(i instanceof RegExp&&i.test(t))return!0}return!1}(i,n.origin))return void console.warn(`Invalid origin '${n.origin}' for comlink proxy`);const{id:l,type:c,path:h}=Object.assign({path:[]},n.data),m=(n.data.argumentList||[]).map(w);let v;try{const t=h.slice(0,-1).reduce(((e,t)=>e[t]),e),i=h.reduce(((e,t)=>e[t]),e);switch(c){case"GET":v=i;break;case"SET":t[h.slice(-1)[0]]=w(n.data.value),v=!0;break;case"APPLY":v=i.apply(t,m);break;case"CONSTRUCT":v=function(e){return Object.assign(e,{[a]:!0})}(new i(...m));break;case"ENDPOINT":{const{port1:t,port2:i}=new MessageChannel;d(e,i),v=function(e,t){return y.set(e,t),e}(t,[t])}break;case"RELEASE":v=void 0;break;default:return}}catch(e){v={value:e,[r]:0}}Promise.resolve(v).catch((e=>({value:e,[r]:0}))).then((i=>{const[a,n]=b(i);t.postMessage(Object.assign(Object.assign({},a),{id:l}),n),"RELEASE"===c&&(t.removeEventListener("message",o),u(t),s in e&&"function"==typeof e[s]&&e[s]())})).catch((e=>{const[i,a]=b({value:new TypeError("Unserializable return value"),[r]:0});t.postMessage(Object.assign(Object.assign({},i),{id:l}),a)}))})),t.start&&t.start()}function u(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function h(e,t){return p(e,[],t)}function m(e){if(e)throw new Error("Proxy has been released and is not useable")}function v(e){return _(e,{type:"RELEASE"}).then((()=>{u(e)}))}const g=new WeakMap,k="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(g.get(e)||0)-1;g.set(e,t),0===t&&v(e)}));function p(e,t=[],i=function(){}){let a=!1;const s=new Proxy(i,{get(i,o){if(m(a),o===n)return()=>{!function(e){k&&k.unregister(e)}(s),v(e),a=!0};if("then"===o){if(0===t.length)return{then:()=>s};const i=_(e,{type:"GET",path:t.map((e=>e.toString()))}).then(w);return i.then.bind(i)}return p(e,[...t,o])},set(i,o,n){m(a);const[s,r]=b(n);return _(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:s},r).then(w)},apply(i,n,s){m(a);const r=t[t.length-1];if(r===o)return _(e,{type:"ENDPOINT"}).then(w);if("bind"===r)return p(e,t.slice(0,-1));const[l,c]=f(s);return _(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:l},c).then(w)},construct(i,o){m(a);const[n,s]=f(o);return _(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:n},s).then(w)}});return function(e,t){const i=(g.get(t)||0)+1;g.set(t,i),k&&k.register(e,t,e)}(s,e),s}function f(e){const t=e.map(b);return[t.map((e=>e[0])),(i=t.map((e=>e[1])),Array.prototype.concat.apply([],i))];var i}const y=new WeakMap;function b(e){for(const[t,i]of c)if(i.canHandle(e)){const[a,o]=i.serialize(e);return[{type:"HANDLER",name:t,value:a},o]}return[{type:"RAW",value:e},y.get(e)||[]]}function w(e){switch(e.type){case"HANDLER":return c.get(e.name).deserialize(e.value);case"RAW":return e.value}}function _(e,t,i){return new Promise((a=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(i){i.data&&i.data.id&&i.data.id===o&&(e.removeEventListener("message",t),a(i.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),i)}))}}}]);
//# sourceMappingURL=2708-fCq60VCUpEI.js.map