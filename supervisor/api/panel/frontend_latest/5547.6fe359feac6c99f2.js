export const __rspack_esm_id="5547";export const __rspack_esm_ids=["5547"];export const __webpack_modules__={65522(e,a,t){t.d(a,{A:()=>s});const s=e=>e.name?.trim()},66033(e,a,t){t.d(a,{L:()=>s});const s=(e,a)=>{const t=e.floor_id;return{area:e,floor:(t?a[t]:void 0)||null}}},13467(e,a,t){var s=t(62826),i=t(41216),o=t(78960),r=t(75640),l=t(91735),n=t(43826),h=t(96196),d=t(77845);class c extends i.R{}c.styles=[l.R,n.R,r.R,o.R,h.AH`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-input-chip-container-shape:16px;--md-input-chip-outline-color:var(--outline-color);--md-input-chip-selected-container-color:rgba(
          var(--rgb-primary-text-color),
          0.15
        );--ha-input-chip-selected-container-opacity:1;--md-input-chip-label-text-font:Roboto,sans-serif}::slotted([slot=icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.selected::before{opacity:var(--ha-input-chip-selected-container-opacity)}`],c=(0,s.Cg)([(0,d.EM)("ha-input-chip")],c)},66086(e,a,t){t.a(e,async function(e,a){try{t(18111),t(81148),t(22489),t(61701),t(13579);var s=t(62826),i=t(96196),o=t(77845),r=t(22786),l=t(1087),n=t(65522),h=t(71727),d=t(55931),c=t(66033),p=t(21489),_=t(44927),u=t(65063),m=t(34023),v=(t(75064),t(38508)),g=(t(50888),t(67094),e([v]));v=(g.then?(await g)():g)[0];const y="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",f="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",$="___ADD_NEW___",b=[{name:"search_labels.areaName",weight:10},{name:"search_labels.aliases",weight:8},{name:"search_labels.floorName",weight:6},{name:"search_labels.id",weight:3}];class A extends i.WF{async open(){await this.updateComplete,await(this._picker?.open())}render(){const e=this.label??this.hass.localize("ui.components.area-picker.area"),a=this._computeValueRenderer(this.hass.areas);let t=e;if(this.value&&e){const e=this.hass.areas[this.value];if(e){const{floor:a}=(0,c.L)(e,this.hass.floors);a&&(t=void 0)}}return i.qy` <ha-generic-picker .hass="${this.hass}" .autofocus="${this.autofocus}" .label="${t}" .helper="${this.helper}" .notFoundLabel="${this._notFoundLabel}" .emptyLabel="${this.hass.localize("ui.components.area-picker.no_areas")}" .disabled="${this.disabled}" .required="${this.required}" .value="${this.value}" .getItems="${this._getItems}" .getAdditionalItems="${this._getAdditionalItems}" .valueRenderer="${a}" .addButtonLabel="${this.addButtonLabel}" .searchKeys="${b}" .unknownItemText="${this.hass.localize("ui.components.area-picker.unknown")}" @value-changed="${this._valueChanged}"> </ha-generic-picker> `}_valueChanged(e){e.stopPropagation();const a=e.detail.value;if(a){if(a.startsWith($)){this.hass.loadFragmentTranslation("config");const e=a.substring($.length);return void(0,m.J)(this,{suggestedName:e,createEntry:async e=>{try{const a=await(0,p.L3)(this.hass,e);this._setValue(a.area_id)}catch(e){(0,u.K$)(this,{title:this.hass.localize("ui.components.area-picker.failed_create_area"),text:e.message})}}})}this._setValue(a)}else this._setValue(void 0)}_setValue(e){this.value=e,(0,l.r)(this,"value-changed",{value:e}),(0,l.r)(this,"change")}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._computeValueRenderer=(0,r.A)(e=>e=>{const a=this.hass.areas[e];if(!a)return i.qy` <ha-svg-icon slot="start" .path="${f}"></ha-svg-icon> <span slot="headline">${a}</span> `;const{floor:t}=(0,c.L)(a,this.hass.floors),s=a?(0,n.A)(a):void 0,o=t?(0,d.X)(t):void 0,r=a.icon;return i.qy` ${r?i.qy`<ha-icon slot="start" .icon="${r}"></ha-icon>`:i.qy`<ha-svg-icon slot="start" .path="${f}"></ha-svg-icon>`} <span slot="headline">${s}</span> ${o?i.qy`<span slot="supporting-text">${o}</span>`:i.s6} `}),this._getAreas=(0,r.A)((e,a,t,s,i,o,r,l,p)=>{let u,m,v={};const g=Object.values(e),y=Object.values(a),$=Object.values(t);(s||i||o||r||l)&&(v=(0,_.g2)($),u=y,m=$.filter(e=>e.area_id),s&&(u=u.filter(e=>{const a=v[e.id];return!(!a||!a.length)&&v[e.id].some(e=>s.includes((0,h.m)(e.entity_id)))}),m=m.filter(e=>s.includes((0,h.m)(e.entity_id)))),i&&(u=u.filter(e=>{const a=v[e.id];return!a||!a.length||$.every(e=>!i.includes((0,h.m)(e.entity_id)))}),m=m.filter(e=>!i.includes((0,h.m)(e.entity_id)))),o&&(u=u.filter(e=>{const a=v[e.id];return!(!a||!a.length)&&v[e.id].some(e=>{const a=this.hass.states[e.entity_id];return!!a&&(a.attributes.device_class&&o.includes(a.attributes.device_class))})}),m=m.filter(e=>{const a=this.hass.states[e.entity_id];return a.attributes.device_class&&o.includes(a.attributes.device_class)})),r&&(u=u.filter(e=>r(e))),l&&(u=u.filter(e=>{const a=v[e.id];return!(!a||!a.length)&&v[e.id].some(e=>{const a=this.hass.states[e.entity_id];return!!a&&l(a)})}),m=m.filter(e=>{const a=this.hass.states[e.entity_id];return!!a&&l(a)})));let b,A=g;u&&(b=u.filter(e=>e.area_id).map(e=>e.area_id)),m&&(b=(b??[]).concat(m.filter(e=>e.area_id).map(e=>e.area_id))),b&&(A=A.filter(e=>b.includes(e.area_id))),p&&(A=A.filter(e=>!p.includes(e.area_id)));return A.map(e=>{const{floor:a}=(0,c.L)(e,this.hass.floors),t=a?(0,d.X)(a):void 0,s=(0,n.A)(e);return{id:e.area_id,primary:s||e.area_id,secondary:t,icon:e.icon||void 0,icon_path:e.icon?void 0:f,search_labels:{areaName:s||null,floorName:t||null,id:e.area_id,aliases:e.aliases.join(" ")}}})}),this._getItems=()=>this._getAreas(this.hass.areas,this.hass.devices,this.hass.entities,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeAreas),this._allAreaNames=(0,r.A)(e=>Object.values(e).map(e=>(0,n.A)(e)?.toLowerCase()).filter(Boolean)),this._getAdditionalItems=e=>{if(this.noAdd)return[];const a=this._allAreaNames(this.hass.areas);return e&&!a.includes(e.toLowerCase())?[{id:$+e,primary:this.hass.localize("ui.components.area-picker.add_new_sugestion",{name:e}),icon_path:y}]:[{id:$,primary:this.hass.localize("ui.components.area-picker.add_new"),icon_path:y}]},this._notFoundLabel=e=>this.hass.localize("ui.components.area-picker.no_match",{term:i.qy`<b>‘${e}’</b>`})}}(0,s.Cg)([(0,o.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,s.Cg)([(0,o.MZ)()],A.prototype,"label",void 0),(0,s.Cg)([(0,o.MZ)()],A.prototype,"value",void 0),(0,s.Cg)([(0,o.MZ)()],A.prototype,"helper",void 0),(0,s.Cg)([(0,o.MZ)()],A.prototype,"placeholder",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean,attribute:"no-add"})],A.prototype,"noAdd",void 0),(0,s.Cg)([(0,o.MZ)({type:Array,attribute:"include-domains"})],A.prototype,"includeDomains",void 0),(0,s.Cg)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],A.prototype,"excludeDomains",void 0),(0,s.Cg)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],A.prototype,"includeDeviceClasses",void 0),(0,s.Cg)([(0,o.MZ)({type:Array,attribute:"exclude-areas"})],A.prototype,"excludeAreas",void 0),(0,s.Cg)([(0,o.MZ)({attribute:!1})],A.prototype,"deviceFilter",void 0),(0,s.Cg)([(0,o.MZ)({attribute:!1})],A.prototype,"entityFilter",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean})],A.prototype,"disabled",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean})],A.prototype,"required",void 0),(0,s.Cg)([(0,o.MZ)({attribute:"add-button-label"})],A.prototype,"addButtonLabel",void 0),(0,s.Cg)([(0,o.P)("ha-generic-picker")],A.prototype,"_picker",void 0),A=(0,s.Cg)([(0,o.EM)("ha-area-picker")],A),a()}catch(e){a(e)}})},91622(e,a,t){t.a(e,async function(e,s){try{t.r(a);t(18111),t(22489),t(61701),t(17642),t(58004),t(33853),t(45876),t(32475),t(15024),t(31698);var i=t(62826),o=t(96196),r=t(77845),l=t(4937),n=t(22786),h=t(1087),d=(t(5745),t(13467),t(38962),t(832)),c=t(66086),p=t(18350),_=(t(93444),t(18198),t(8034),t(67094),t(75709),t(45331)),u=t(21489),m=t(14503),v=t(34023),g=e([d,c,p,_]);[d,c,p,_]=g.then?(await g)():g;const y="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z";class f extends o.WF{showDialog(e){this._params=e,this._error=void 0,this._name=this._params.entry?this._params.entry.name:this._params.suggestedName||"",this._aliases=this._params.entry?.aliases||[],this._icon=this._params.entry?.icon||null,this._level=this._params.entry?.level??null,this._addedAreas.clear(),this._removedAreas.clear(),this._open=!0}closeDialog(){this._open=!1}_dialogClosed(){this._error="",this._params=void 0,this._addedAreas.clear(),this._removedAreas.clear(),(0,h.r)(this,"dialog-closed",{dialog:this.localName})}render(){const e=this._floorAreas(this._params?.entry,this.hass.areas,this._addedAreas,this._removedAreas);if(!this._params)return o.s6;const a=this._params.entry;return o.qy` <ha-wa-dialog .hass="${this.hass}" .open="${this._open}" header-title="${a?this.hass.localize("ui.panel.config.floors.editor.update_floor"):this.hass.localize("ui.panel.config.floors.editor.create_floor")}" @closed="${this._dialogClosed}"> <div> ${this._error?o.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <div class="form"> ${a?o.qy` <ha-settings-row> <span slot="heading"> ${this.hass.localize("ui.panel.config.floors.editor.floor_id")} </span> <span slot="description">${a.floor_id}</span> </ha-settings-row> `:o.s6} <ha-textfield autofocus .value="${this._name}" @input="${this._nameChanged}" .label="${this.hass.localize("ui.panel.config.floors.editor.name")}" .validationMessage="${this.hass.localize("ui.panel.config.floors.editor.name_required")}" required></ha-textfield> <ha-textfield .value="${this._level}" @input="${this._levelChanged}" .label="${this.hass.localize("ui.panel.config.floors.editor.level")}" type="number" .helper="${this.hass.localize("ui.panel.config.floors.editor.level_helper")}" helperPersistent></ha-textfield> <ha-icon-picker .hass="${this.hass}" .value="${this._icon}" @value-changed="${this._iconChanged}" .label="${this.hass.localize("ui.panel.config.areas.editor.icon")}"> ${this._icon?o.s6:o.qy` <ha-floor-icon slot="start" .floor="${{level:this._level}}"></ha-floor-icon> `} </ha-icon-picker> <h3 class="header"> ${this.hass.localize("ui.panel.config.floors.editor.areas_section")} </h3> ${e.length?o.qy`<ha-chip-set> ${(0,l.u)(e,e=>e.area_id,e=>o.qy`<ha-input-chip .area="${e}" @click="${this._openArea}" @remove="${this._removeArea}" .label="${e?.name}"> ${e.icon?o.qy`<ha-icon slot="icon" .icon="${e.icon}"></ha-icon>`:o.qy`<ha-svg-icon slot="icon" .path="${y}"></ha-svg-icon>`} </ha-input-chip>`)} </ha-chip-set>`:o.qy`<p class="description"> ${this.hass.localize("ui.panel.config.floors.editor.areas_description")} </p>`} <ha-area-picker no-add .hass="${this.hass}" @value-changed="${this._addArea}" .excludeAreas="${e.map(e=>e.area_id)}" .addButtonLabel="${this.hass.localize("ui.panel.config.floors.editor.add_area")}"></ha-area-picker> <h3 class="header"> ${this.hass.localize("ui.panel.config.floors.editor.aliases_section")} </h3> <p class="description"> ${this.hass.localize("ui.panel.config.floors.editor.aliases_description")} </p> <ha-aliases-editor .hass="${this.hass}" .aliases="${this._aliases}" @value-changed="${this._aliasesChanged}"></ha-aliases-editor> </div> </div> <ha-dialog-footer slot="footer"> <ha-button appearance="plain" slot="secondaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.cancel")} </ha-button> <ha-button slot="primaryAction" @click="${this._updateEntry}" .disabled="${!!this._submitting}"> ${a?this.hass.localize("ui.common.save"):this.hass.localize("ui.common.create")} </ha-button> </ha-dialog-footer> </ha-wa-dialog> `}_openArea(e){const a=e.target.area;(0,v.J)(this,{entry:a,updateEntry:e=>(0,u.gs)(this.hass,a.area_id,e)})}_removeArea(e){const a=e.target.area.area_id;if(this._addedAreas.has(a))return this._addedAreas.delete(a),void(this._addedAreas=new Set(this._addedAreas));this._removedAreas.add(a),this._removedAreas=new Set(this._removedAreas)}_addArea(e){const a=e.detail.value;if(a){if(e.target.value="",this._removedAreas.has(a))return this._removedAreas.delete(a),void(this._removedAreas=new Set(this._removedAreas));this._addedAreas.add(a),this._addedAreas=new Set(this._addedAreas)}}_nameChanged(e){this._error=void 0,this._name=e.target.value}_levelChanged(e){this._error=void 0,this._level=""===e.target.value?null:Number(e.target.value)}_iconChanged(e){this._error=void 0,this._icon=e.detail.value}async _updateEntry(){if(""===this._name.trim())return void(this._error=this.hass.localize("ui.panel.config.floors.editor.name_required"));this._error=void 0,this._submitting=!0;const e=!this._params.entry;try{const a={name:this._name.trim(),icon:this._icon||(e?void 0:null),level:this._level,aliases:this._aliases};e?await this._params.createEntry(a,this._addedAreas):await this._params.updateEntry(a,this._addedAreas,this._removedAreas),this.closeDialog()}catch(e){this._error=e.message||this.hass.localize("ui.panel.config.floors.editor.unknown_error")}finally{this._submitting=!1}}_aliasesChanged(e){this._aliases=e.detail.value}static get styles(){return[m.RF,m.nA,o.AH`ha-textfield{display:block;margin-bottom:var(--ha-space-4)}ha-floor-icon{color:var(--secondary-text-color)}ha-chip-set{margin-bottom:var(--ha-space-2)}`]}constructor(...e){super(...e),this._addedAreas=new Set,this._removedAreas=new Set,this._open=!1,this._floorAreas=(0,n.A)((e,a,t,s)=>Object.values(a).filter(a=>(a.floor_id===e?.floor_id||t.has(a.area_id))&&!s.has(a.area_id)))}}(0,i.Cg)([(0,r.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_name",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_aliases",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_icon",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_level",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_error",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_params",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_submitting",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_addedAreas",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_removedAreas",void 0),(0,i.Cg)([(0,r.wk)()],f.prototype,"_open",void 0),f=(0,i.Cg)([(0,r.EM)("dialog-floor-registry-detail")],f),s()}catch(e){s(e)}})},34023(e,a,t){t.d(a,{J:()=>o});var s=t(1087);const i=()=>Promise.all([t.e("969"),t.e("4328"),t.e("8851"),t.e("6770"),t.e("71"),t.e("6201"),t.e("9038"),t.e("1361"),t.e("5462")]).then(t.bind(t,39803)),o=(e,a)=>{(0,s.r)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:i,dialogParams:a})}}};
//# sourceMappingURL=5547.6fe359feac6c99f2.js.map