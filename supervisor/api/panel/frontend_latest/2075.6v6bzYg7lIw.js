export const id=2075;export const ids=[2075];export const modules={32075:(e,a,i)=>{i.a(e,(async(e,s)=>{try{i.r(a);var t=i(62659),o=(i(21950),i(55888),i(66274),i(85038),i(98168),i(15445),i(24483),i(13478),i(46355),i(14612),i(53691),i(48455),i(8339),i(58068),i(29805),i(98597)),l=i(196),r=i(66580),d=i(45081),n=i(77664),h=(i(9028),i(2090),i(12261),i(99233),i(95439)),c=i(61327),u=(i(93487),i(1683),i(42398),i(14126)),_=i(38630),v=i(86464),m=e([c]);c=(m.then?(await m)():m)[0];const f="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z";let p=(0,t.A)(null,(function(e,a){return{F:class extends a{constructor(...a){super(...a),e(this)}},d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_name",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_aliases",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_icon",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_level",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_submitting",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_addedAreas",value:()=>new Set},{kind:"field",decorators:[(0,l.wk)()],key:"_removedAreas",value:()=>new Set},{kind:"method",key:"showDialog",value:function(e){var a,i,s,t;this._params=e,this._error=void 0,this._name=this._params.entry?this._params.entry.name:this._params.suggestedName||"",this._aliases=(null===(a=this._params.entry)||void 0===a?void 0:a.aliases)||[],this._icon=(null===(i=this._params.entry)||void 0===i?void 0:i.icon)||null,this._level=null!==(s=null===(t=this._params.entry)||void 0===t?void 0:t.level)&&void 0!==s?s:null,this._addedAreas.clear(),this._removedAreas.clear()}},{kind:"method",key:"closeDialog",value:function(){this._error="",this._params=void 0,this._addedAreas.clear(),this._removedAreas.clear(),(0,n.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"field",key:"_floorAreas",value:()=>(0,d.A)(((e,a,i,s)=>Object.values(a).filter((a=>(a.floor_id===(null==e?void 0:e.floor_id)||i.has(a.area_id))&&!s.has(a.area_id)))))},{kind:"method",key:"render",value:function(){var e;const a=this._floorAreas(null===(e=this._params)||void 0===e?void 0:e.entry,this.hass.areas,this._addedAreas,this._removedAreas);if(!this._params)return o.s6;const i=this._params.entry,s=!this._isNameValid();return o.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${(0,h.l)(this.hass,i?this.hass.localize("ui.panel.config.floors.editor.update_floor"):this.hass.localize("ui.panel.config.floors.editor.create_floor"))}"> <div> ${this._error?o.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <div class="form"> ${i?o.qy` <ha-settings-row> <span slot="heading"> ${this.hass.localize("ui.panel.config.floors.editor.floor_id")} </span> <span slot="description">${i.floor_id}</span> </ha-settings-row> `:o.s6} <ha-textfield .value="${this._name}" @input="${this._nameChanged}" .label="${this.hass.localize("ui.panel.config.floors.editor.name")}" .validationMessage="${this.hass.localize("ui.panel.config.floors.editor.name_required")}" required dialogInitialFocus></ha-textfield> <ha-textfield .value="${this._level}" @input="${this._levelChanged}" .label="${this.hass.localize("ui.panel.config.floors.editor.level")}" type="number"></ha-textfield> <ha-icon-picker .hass="${this.hass}" .value="${this._icon}" @value-changed="${this._iconChanged}" .label="${this.hass.localize("ui.panel.config.areas.editor.icon")}"> ${this._icon?o.s6:o.qy` <ha-floor-icon slot="fallback" .floor="${{level:this._level}}"></ha-floor-icon> `} </ha-icon-picker> <h3 class="header"> ${this.hass.localize("ui.panel.config.floors.editor.areas_section")} </h3> <p class="description"> ${this.hass.localize("ui.panel.config.floors.editor.areas_description")} </p> ${a.length?o.qy`<ha-chip-set> ${(0,r.u)(a,(e=>e.area_id),(e=>o.qy`<ha-input-chip .area="${e}" @click="${this._openArea}" @remove="${this._removeArea}" .label="${null==e?void 0:e.name}"> ${e.icon?o.qy`<ha-icon slot="icon" .icon="${e.icon}"></ha-icon>`:o.qy`<ha-svg-icon slot="icon" .path="${f}"></ha-svg-icon>`} </ha-input-chip>`))} </ha-chip-set>`:o.s6} <ha-area-picker no-add .hass="${this.hass}" @value-changed="${this._addArea}" .excludeAreas="${a.map((e=>e.area_id))}" .label="${this.hass.localize("ui.panel.config.floors.editor.add_area")}"></ha-area-picker> <h3 class="header"> ${this.hass.localize("ui.panel.config.floors.editor.aliases_section")} </h3> <p class="description"> ${this.hass.localize("ui.panel.config.floors.editor.aliases_description")} </p> <ha-aliases-editor .hass="${this.hass}" .aliases="${this._aliases}" @value-changed="${this._aliasesChanged}"></ha-aliases-editor> </div> </div> <mwc-button slot="secondaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.cancel")} </mwc-button> <mwc-button slot="primaryAction" @click="${this._updateEntry}" .disabled="${s||this._submitting}"> ${i?this.hass.localize("ui.common.save"):this.hass.localize("ui.common.add")} </mwc-button> </ha-dialog> `}},{kind:"method",key:"_openArea",value:function(e){const a=e.target.area;(0,_.J)(this,{entry:a,updateEntry:e=>(0,v.gs)(this.hass,a.area_id,e)})}},{kind:"method",key:"_removeArea",value:function(e){const a=e.target.area.area_id;if(this._addedAreas.has(a))return this._addedAreas.delete(a),void(this._addedAreas=new Set(this._addedAreas));this._removedAreas.add(a),this._removedAreas=new Set(this._removedAreas)}},{kind:"method",key:"_addArea",value:function(e){const a=e.detail.value;if(a){if(e.target.value="",this._removedAreas.has(a))return this._removedAreas.delete(a),void(this._removedAreas=new Set(this._removedAreas));this._addedAreas.add(a),this._addedAreas=new Set(this._addedAreas)}}},{kind:"method",key:"_isNameValid",value:function(){return""!==this._name.trim()}},{kind:"method",key:"_nameChanged",value:function(e){this._error=void 0,this._name=e.target.value}},{kind:"method",key:"_levelChanged",value:function(e){this._error=void 0,this._level=""===e.target.value?null:Number(e.target.value)}},{kind:"method",key:"_iconChanged",value:function(e){this._error=void 0,this._icon=e.detail.value}},{kind:"method",key:"_updateEntry",value:async function(){this._submitting=!0;const e=!this._params.entry;try{const a={name:this._name.trim(),icon:this._icon||(e?void 0:null),level:this._level,aliases:this._aliases};e?await this._params.createEntry(a,this._addedAreas):await this._params.updateEntry(a,this._addedAreas,this._removedAreas),this.closeDialog()}catch(e){this._error=e.message||this.hass.localize("ui.panel.config.floors.editor.unknown_error")}finally{this._submitting=!1}}},{kind:"method",key:"_aliasesChanged",value:function(e){this._aliases=e.detail.value}},{kind:"get",static:!0,key:"styles",value:function(){return[u.RF,u.nA,o.AH`ha-textfield{display:block;margin-bottom:16px}ha-floor-icon{color:var(--secondary-text-color)}ha-chip-set{margin-bottom:8px}`]}}]}}),o.WF);customElements.define("dialog-floor-registry-detail",p),s()}catch(e){s(e)}}))},38630:(e,a,i)=>{i.d(a,{J:()=>o});i(21950),i(55888),i(8339);var s=i(77664);const t=()=>Promise.all([i.e(2658),i.e(4655),i.e(5309),i.e(7339),i.e(5932),i.e(4960)]).then(i.bind(i,64960)),o=(e,a)=>{(0,s.r)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:t,dialogParams:a})}}};
//# sourceMappingURL=2075.6v6bzYg7lIw.js.map