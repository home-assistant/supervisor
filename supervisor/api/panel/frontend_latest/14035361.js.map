{"version":3,"file":"14035361.js","mappings":";;AAcA;AACA;AACA;;;AAKA;;;;;;;;;;;;;;;;;;;AAhBA;;;;ACDA;;;;;;;;;;;;;;;;;AAAA;;ACsCA;;AAIA;;;AAIA;;;AAOA;;AAIA;;;AAQA;;AAEA;;;;;;AAOA;AAEA;AACA;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAjEA;;AC0GA;;;AAKA;AAGA;AAEA;;AAGA;;;AAGA;;;AAIA;;;AAOA;;AAGA;;;;AAMA;AAEA;;;AAIA;;;AAWA;;AAGA;;AAGA;;;AAKA;;;AAIA;AAGA;;;AAGA;;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAnHA","sources":["webpack://home-assistant-frontend/./src/components/ha-faded.ts","webpack://home-assistant-frontend/./src/components/ha-logo-svg.ts","webpack://home-assistant-frontend/./src/panels/config/dashboard/ha-config-updates.ts","webpack://home-assistant-frontend/./hassio/src/update-available/update-available-card.ts"],"sourcesContent":["import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\n\n@customElement(\"ha-faded\")\nclass HaFaded extends LitElement {\n  @property({ type: Number, attribute: \"faded-height\" })\n  public fadedHeight = 102;\n\n  @state() _contentShown = false;\n\n  protected render(): TemplateResult {\n    return html`\n      <div\n        class=\"container ${classMap({ faded: !this._contentShown })}\"\n        style=${!this._contentShown ? `max-height: ${this.fadedHeight}px` : \"\"}\n        @click=${this._showContent}\n      >\n        <slot\n          @iron-resize=${\n            // ha-markdown-element fire this when render is complete\n            this._setShowContent\n          }\n        ></slot>\n      </div>\n    `;\n  }\n\n  get _slottedHeight(): number {\n    return (\n      (\n        this.shadowRoot!.querySelector(\".container\")\n          ?.firstElementChild as HTMLSlotElement\n      )\n        .assignedElements()\n        .reduce(\n          (partial, element) => partial + (element as HTMLElement).offsetHeight,\n          0\n        ) || 0\n    );\n  }\n\n  private _setShowContent() {\n    const height = this._slottedHeight;\n    this._contentShown = height !== 0 && height <= this.fadedHeight + 50;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this._setShowContent();\n  }\n\n  private _showContent(): void {\n    this._contentShown = true;\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      .container {\n        display: block;\n        height: auto;\n        cursor: default;\n      }\n      .faded {\n        cursor: pointer;\n        -webkit-mask-image: linear-gradient(\n          to bottom,\n          black 25%,\n          transparent 100%\n        );\n        mask-image: linear-gradient(to bottom, black 25%, transparent 100%);\n        overflow-y: hidden;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-faded\": HaFaded;\n  }\n}\n","import { css, CSSResultGroup, LitElement, svg, SVGTemplateResult } from \"lit\";\nimport { customElement } from \"lit/decorators\";\n\n@customElement(\"ha-logo-svg\")\nexport class HaLogoSvg extends LitElement {\n  protected render(): SVGTemplateResult {\n    return svg`\n      <svg version=\"1.1\" viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect fill=\"#41bdf5\" width=\"200\" height=\"200\" ry=\"16.4\"/>\n        <path fill=\"#fff\" d=\"m38.416 165.29v-53.456h-13.901a3.7332 3.7332 0 0 1-2.662-6.3504l74.804-76.084c1.8068-1.8376 4.7612-1.8628 6.5992-0.056l0.048 0.048 39.04 39.518v-7.3188a3.1112 3.1112 0 0 1 3.1112-3.1112h12.964a3.1112 3.1112 0 0 1 3.1116 3.1112v26.855l16.627 17.047a3.7332 3.7332 0 0 1-2.6728 6.34h-13.954v53.456a3.1112 3.1112 0 0 1-3.1112 3.1112h-116.89a3.1112 3.1112 0 0 1-3.1112-3.1112zm82.556-65.304a6.0116 6.0116 0 0 0 0.584-2.5944c0-3.3232-2.684-6.0172-5.9956-6.0172-3.3112 0-5.9956 2.694-5.9956 6.0172s2.6844 6.0176 5.996 6.0176c0.9256 0 1.802-0.2108 2.5848-0.5868l8.6072 8.6384v8.3672l-10.792 10.831v-7.936a6.0184 6.0184 0 0 0 3.9972-5.6748c0-3.3232-2.6844-6.0176-5.996-6.0176-3.3112 0-5.996 2.6944-5.996 6.0176 0 2.62 1.6688 4.8488 3.9976 5.6748v11.947l-9.9932 10.029v-58.912l8.2076-8.2368a5.9544 5.9544 0 0 0 2.5848 0.5864c3.3116 0 5.996-2.694 5.996-6.0176 0-3.3232-2.6844-6.0172-5.996-6.0172-3.3112 0-5.9956 2.694-5.9956 6.0172 0 0.9292 0.2096 1.8088 0.584 2.5944l-7.3792 7.406-7.3796-7.406a6.0116 6.0116 0 0 0 0.584-2.5944c0-3.3232-2.684-6.0172-5.9956-6.0172-3.3112 0-5.9956 2.694-5.9956 6.0172 0 3.3236 2.6844 6.0176 5.996 6.0176 0.9256 0 1.802-0.2108 2.5848-0.5864l8.2072 8.2368v42.064l-14.39-14.442v-11.546a6.0184 6.0184 0 0 0 3.9972-5.6748c0-3.3236-2.6844-6.0176-5.996-6.0176-3.3112 0-5.996 2.694-5.996 6.0176 0 2.62 1.6688 4.8488 3.9976 5.6748v7.5348l-11.192-11.232v-11.145a6.0184 6.0184 0 0 0 3.9972-5.6748c0-3.3232-2.6844-6.0176-5.996-6.0176-3.3112 0-5.996 2.6944-5.996 6.0176 0 2.62 1.6688 4.8488 3.9976 5.6748v12.807l12.363 12.407h-7.108c-0.8232-2.3372-3.044-4.0116-5.6548-4.0116-3.3112 0-5.996 2.694-5.996 6.0172 0 3.3236 2.6848 6.0176 5.996 6.0176 2.6108 0 4.832-1.6744 5.6548-4.012h11.105l17.216 17.278v30.03l-9.1932-9.2264v-11.546a6.0184 6.0184 0 0 0 3.9972-5.6748c0-3.3232-2.6844-6.0172-5.996-6.0172-3.3112 0-5.996 2.694-5.996 6.0172 0 2.62 1.6688 4.8488 3.9976 5.6748v7.5348l-13.376-13.423a6.0116 6.0116 0 0 0 0.5844-2.5944c0-3.3232-2.684-6.0172-5.996-6.0172-3.3112 0-5.9956 2.694-5.9956 6.0172s2.6844 6.0172 5.996 6.0172c0.9256 0 1.8024-0.2104 2.5848-0.5864l13.376 13.424h-7.108c-0.8232-2.3372-3.044-4.012-5.6548-4.012-3.3112 0-5.996 2.6944-5.996 6.0176s2.6848 6.0172 5.996 6.0172c2.6108 0 4.8316-1.6744 5.6548-4.0116h11.105l11.192 11.232h5.6528l11.592-11.633h10.705c0.8232 2.3368 3.044 4.0112 5.6548 4.0112 3.3112 0 5.996-2.694 5.996-6.0172s-2.6848-6.0172-5.996-6.0172c-2.6108 0-4.8316 1.6744-5.6548 4.0116h-12.361l-10.764 10.802v-13.18l12.82-12.866h20.698c0.8232 2.3372 3.044 4.0116 5.6544 4.0116 3.3116 0 5.996-2.694 5.996-6.0172 0-3.3236-2.6844-6.0176-5.996-6.0176-2.6104 0-4.8312 1.6744-5.6544 4.012h-16.702l11.963-12.006v-10.029l8.6068-8.6384a5.9544 5.9544 0 0 0 2.5852 0.5868c3.3112 0 5.996-2.6944 5.996-6.0176s-2.6848-6.0172-5.996-6.0172-5.996 2.694-5.996 6.0172c0 0.9292 0.21 1.8088 0.5844 2.5944l-5.7804 5.8016v-18.367a6.0184 6.0184 0 0 0 3.9972-5.6748c0-3.3236-2.6844-6.0176-5.996-6.0176-3.3112 0-5.996 2.694-5.996 6.0176 0 2.62 1.6688 4.8488 3.9976 5.6748v18.366l-5.7808-5.8016zm-51.78 57.58c-1.3244 0-2.3984-1.0776-2.3984-2.4068s1.074-2.4068 2.3984-2.4068c1.3248 0 2.3984 1.0776 2.3984 2.4068s-1.0736 2.4068-2.3984 2.4068zm17.588-18.052c-1.3248 0-2.3988-1.0776-2.3988-2.4068s1.074-2.4068 2.3984-2.4068c1.3248 0 2.3984 1.0776 2.3984 2.4068s-1.0736 2.4068-2.3984 2.4068zm-20.786-2.808c-1.3248 0-2.3984-1.0776-2.3984-2.4068s1.0736-2.4068 2.3984-2.4068c1.3244 0 2.3984 1.0776 2.3984 2.4068s-1.074 2.4068-2.3984 2.4068zm-1.9988-20.058c-1.3244 0-2.398-1.0776-2.398-2.4072 0-1.3292 1.0736-2.4068 2.398-2.4068 1.3248 0 2.3984 1.0776 2.3984 2.4068 0 1.3296-1.0736 2.4072-2.3984 2.4072zm49.964 2.808c-1.3244 0-2.398-1.0776-2.398-2.4068 0-1.3296 1.0736-2.4072 2.398-2.4072 1.3248 0 2.3984 1.0776 2.3984 2.4072 0 1.3292-1.0736 2.4068-2.3984 2.4068zm27.181 18.453c-1.324 0-2.398-1.0776-2.398-2.4068 0-1.3296 1.0736-2.4072 2.398-2.4072 1.3248 0 2.3984 1.0776 2.3984 2.4072 0 1.3292-1.0736 2.4068-2.3984 2.4068zm-10.392 19.255c-1.3248 0-2.3984-1.0776-2.3984-2.4068s1.0736-2.4068 2.3984-2.4068c1.3244 0 2.3984 1.0776 2.3984 2.4068s-1.074 2.4068-2.3984 2.4068zm11.192-57.364c-1.3244 0-2.3984-1.078-2.3984-2.4072s1.074-2.4068 2.3984-2.4068 2.3984 1.0776 2.3984 2.4068-1.074 2.4072-2.3984 2.4072zm-13.191-15.645c-1.3244 0-2.3984-1.0776-2.3984-2.4068 0-1.3296 1.074-2.4072 2.3984-2.4072 1.3248 0 2.3984 1.0776 2.3984 2.4072 0 1.3292-1.0736 2.4068-2.3984 2.4068zm-15.989-9.628c-1.3244 0-2.398-1.0772-2.398-2.4068 0-1.3292 1.0736-2.4068 2.398-2.4068 1.3248 0 2.3984 1.0776 2.3984 2.4068 0 1.3296-1.0736 2.4072-2.3984 2.4072zm-25.582 0c-1.324 0-2.398-1.0772-2.398-2.4068 0-1.3292 1.0736-2.4068 2.398-2.4068 1.3248 0 2.3984 1.0776 2.3984 2.4068 0 1.3296-1.0736 2.4072-2.3984 2.4072zm-20.785 9.2268c-1.3244 0-2.3984-1.0776-2.3984-2.4068 0-1.3296 1.074-2.4072 2.3984-2.4072s2.3984 1.0776 2.3984 2.4072c0 1.3292-1.074 2.4068-2.3984 2.4068zm15.189 14.843c-1.3244 0-2.398-1.0776-2.398-2.4068 0-1.3296 1.0736-2.4072 2.398-2.4072 1.3248 0 2.3984 1.0776 2.3984 2.4072 0 1.3292-1.0736 2.4068-2.3984 2.4068zm33.976 1.2036c-1.324 0-2.398-1.078-2.398-2.4072s1.0736-2.4068 2.398-2.4068c1.3248 0 2.3984 1.0776 2.3984 2.4068s-1.0736 2.4072-2.3984 2.4072z\"/>\n      </svg>`;\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: var(--ha-icon-display, inline-flex);\n        align-items: center;\n        justify-content: center;\n        position: relative;\n        vertical-align: middle;\n        fill: currentcolor;\n        width: var(--mdc-icon-size, 24px);\n        height: var(--mdc-icon-size, 24px);\n      }\n      svg {\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        display: block;\n      }\n    `;\n  }\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-logo-svg\": HaLogoSvg;\n  }\n}\n","import \"@material/mwc-button/mwc-button\";\nimport { mdiPackageVariant } from \"@mdi/js\";\nimport \"@polymer/paper-item/paper-icon-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport \"../../../components/ha-alert\";\nimport \"../../../components/ha-logo-svg\";\nimport \"../../../components/ha-svg-icon\";\nimport { SupervisorAvailableUpdates } from \"../../../data/supervisor/supervisor\";\nimport { buttonLinkStyle } from \"../../../resources/styles\";\nimport { HomeAssistant } from \"../../../types\";\n\nexport const SUPERVISOR_UPDATE_NAMES = {\n  core: \"Home Assistant Core\",\n  os: \"Home Assistant Operating System\",\n  supervisor: \"Home Assistant Supervisor\",\n};\n\n@customElement(\"ha-config-updates\")\nclass HaConfigUpdates extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false })\n  public supervisorUpdates?: SupervisorAvailableUpdates[] | null;\n\n  @state() private _showAll = false;\n\n  protected render(): TemplateResult {\n    if (!this.supervisorUpdates?.length) {\n      return html``;\n    }\n\n    const updates =\n      this._showAll || this.supervisorUpdates.length <= 3\n        ? this.supervisorUpdates\n        : this.supervisorUpdates.slice(0, 2);\n\n    return html`\n      <div class=\"title\">\n        ${this.hass.localize(\"ui.panel.config.updates.title\", {\n          count: this.supervisorUpdates.length,\n        })}\n      </div>\n      ${updates.map(\n        (update) => html`\n          <paper-icon-item>\n            <span slot=\"item-icon\" class=\"icon\">\n              ${update.update_type === \"addon\"\n                ? update.icon\n                  ? html`<img src=\"/api/hassio${update.icon}\" />`\n                  : html`<ha-svg-icon .path=${mdiPackageVariant}></ha-svg-icon>`\n                : html`<ha-logo-svg></ha-logo-svg>`}\n            </span>\n            <paper-item-body two-line>\n              ${update.update_type === \"addon\"\n                ? update.name\n                : SUPERVISOR_UPDATE_NAMES[update.update_type!]}\n              <div secondary>\n                ${this.hass.localize(\n                  \"ui.panel.config.updates.version_available\",\n                  {\n                    version_available: update.version_latest,\n                  }\n                )}\n              </div>\n            </paper-item-body>\n            <a href=\"/hassio${update.panel_path}\">\n              <mwc-button\n                .label=${this.hass.localize(\"ui.panel.config.updates.show\")}\n              >\n              </mwc-button>\n            </a>\n          </paper-icon-item>\n        `\n      )}\n      ${!this._showAll && this.supervisorUpdates.length >= 4\n        ? html`\n            <button class=\"link show-all\" @click=${this._showAllClicked}>\n              ${this.hass.localize(\"ui.panel.config.updates.more_updates\", {\n                count: this.supervisorUpdates!.length - updates.length,\n              })}\n            </button>\n          `\n        : \"\"}\n    `;\n  }\n\n  private _showAllClicked() {\n    this._showAll = true;\n  }\n\n  static get styles(): CSSResultGroup[] {\n    return [\n      buttonLinkStyle,\n      css`\n        .title {\n          font-size: 16px;\n          padding: 16px;\n          padding-bottom: 0;\n        }\n        a {\n          text-decoration: none;\n          color: var(--primary-text-color);\n        }\n        .icon {\n          display: inline-flex;\n          height: 100%;\n          align-items: center;\n        }\n        img,\n        ha-svg-icon,\n        ha-logo-svg {\n          --mdc-icon-size: 32px;\n          max-height: 32px;\n          width: 32px;\n        }\n        ha-logo-svg {\n          color: var(--secondary-text-color);\n        }\n        button.show-all {\n          color: var(--primary-color);\n          text-decoration: none;\n          margin: 16px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-updates\": HaConfigUpdates;\n  }\n}\n","import \"@material/mwc-list/mwc-list-item\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../../src/common/dom/fire_event\";\nimport \"../../../src/common/search/search-input\";\nimport \"../../../src/components/buttons/ha-progress-button\";\nimport \"../../../src/components/ha-alert\";\nimport \"../../../src/components/ha-button-menu\";\nimport \"../../../src/components/ha-card\";\nimport \"../../../src/components/ha-checkbox\";\nimport \"../../../src/components/ha-faded\";\nimport \"../../../src/components/ha-formfield\";\nimport \"../../../src/components/ha-icon-button\";\nimport \"../../../src/components/ha-markdown\";\nimport \"../../../src/components/ha-settings-row\";\nimport \"../../../src/components/ha-svg-icon\";\nimport \"../../../src/components/ha-switch\";\nimport {\n  fetchHassioAddonChangelog,\n  fetchHassioAddonInfo,\n  HassioAddonDetails,\n  updateHassioAddon,\n} from \"../../../src/data/hassio/addon\";\nimport {\n  createHassioPartialBackup,\n  HassioPartialBackupCreateParams,\n} from \"../../../src/data/hassio/backup\";\nimport {\n  extractApiErrorMessage,\n  ignoreSupervisorError,\n} from \"../../../src/data/hassio/common\";\nimport { updateOS } from \"../../../src/data/hassio/host\";\nimport { updateSupervisor } from \"../../../src/data/hassio/supervisor\";\nimport { updateCore } from \"../../../src/data/supervisor/core\";\nimport { StoreAddon } from \"../../../src/data/supervisor/store\";\nimport { Supervisor } from \"../../../src/data/supervisor/supervisor\";\nimport { showAlertDialog } from \"../../../src/dialogs/generic/show-dialog-box\";\nimport \"../../../src/layouts/hass-loading-screen\";\nimport \"../../../src/layouts/hass-subpage\";\nimport \"../../../src/layouts/hass-tabs-subpage\";\nimport { SUPERVISOR_UPDATE_NAMES } from \"../../../src/panels/config/dashboard/ha-config-updates\";\nimport { HomeAssistant, Route } from \"../../../src/types\";\nimport { documentationUrl } from \"../../../src/util/documentation-url\";\nimport { addonArchIsSupported, extractChangelog } from \"../util/addon\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"update-complete\": undefined;\n  }\n}\n\ntype updateType = \"os\" | \"supervisor\" | \"core\" | \"addon\";\n\nconst changelogUrl = (\n  hass: HomeAssistant,\n  entry: updateType,\n  version: string\n): string | undefined => {\n  if (entry === \"addon\") {\n    return undefined;\n  }\n  if (entry === \"core\") {\n    return version?.includes(\"dev\")\n      ? \"https://github.com/home-assistant/core/commits/dev\"\n      : documentationUrl(hass, \"/latest-release-notes/\");\n  }\n  if (entry === \"os\") {\n    return version?.includes(\"dev\")\n      ? \"https://github.com/home-assistant/operating-system/commits/dev\"\n      : `https://github.com/home-assistant/operating-system/releases/tag/${version}`;\n  }\n  if (entry === \"supervisor\") {\n    return version?.includes(\"dev\")\n      ? \"https://github.com/home-assistant/supervisor/commits/main\"\n      : `https://github.com/home-assistant/supervisor/releases/tag/${version}`;\n  }\n  return undefined;\n};\n\n@customElement(\"update-available-card\")\nclass UpdateAvailableCard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public supervisor!: Supervisor;\n\n  @property({ attribute: false }) public route!: Route;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ attribute: false }) public addonSlug?: string;\n\n  @state() private _updateType?: updateType;\n\n  @state() private _changelogContent?: string;\n\n  @state() private _addonInfo?: HassioAddonDetails;\n\n  @state() private _action: \"backup\" | \"update\" | null = null;\n\n  @state() private _error?: string;\n\n  private _addonStoreInfo = memoizeOne(\n    (slug: string, storeAddons: StoreAddon[]) =>\n      storeAddons.find((addon) => addon.slug === slug)\n  );\n\n  protected render(): TemplateResult {\n    if (\n      !this._updateType ||\n      (this._updateType === \"addon\" && !this._addonInfo)\n    ) {\n      return html``;\n    }\n\n    const changelog = changelogUrl(this.hass, this._updateType, this._version);\n\n    return html`\n      <ha-card\n        .header=${this.supervisor.localize(\"update_available.update_name\", {\n          name: this._name,\n        })}\n      >\n        <div class=\"card-content\">\n          ${this._error\n            ? html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`\n            : \"\"}\n          ${this._action === null\n            ? html`\n                ${this._changelogContent\n                  ? html`\n                      <ha-faded>\n                        <ha-markdown .content=${this._changelogContent}>\n                        </ha-markdown>\n                      </ha-faded>\n                    `\n                  : \"\"}\n                <div class=\"versions\">\n                  <p>\n                    ${this.supervisor.localize(\"update_available.description\", {\n                      name: this._name,\n                      version: this._version,\n                      newest_version: this._version_latest,\n                    })}\n                  </p>\n                </div>\n                ${[\"core\", \"addon\"].includes(this._updateType)\n                  ? html`\n                      <ha-formfield\n                        .label=${this.supervisor.localize(\n                          \"update_available.create_backup\"\n                        )}\n                      >\n                        <ha-checkbox checked></ha-checkbox>\n                      </ha-formfield>\n                    `\n                  : \"\"}\n              `\n            : html`<ha-circular-progress alt=\"Updating\" size=\"large\" active>\n                </ha-circular-progress>\n                <p class=\"progress-text\">\n                  ${this._action === \"update\"\n                    ? this.supervisor.localize(\"update_available.updating\", {\n                        name: this._name,\n                        version: this._version_latest,\n                      })\n                    : this.supervisor.localize(\n                        \"update_available.creating_backup\",\n                        { name: this._name }\n                      )}\n                </p>`}\n        </div>\n        ${this._action === null\n          ? html`\n              <div class=\"card-actions\">\n                ${changelog\n                  ? html`<a .href=${changelog} target=\"_blank\" rel=\"noreferrer\">\n                      <mwc-button\n                        .label=${this.supervisor.localize(\n                          \"update_available.open_release_notes\"\n                        )}\n                      >\n                      </mwc-button>\n                    </a>`\n                  : \"\"}\n                <span></span>\n                <ha-progress-button\n                  .disabled=${!this._version ||\n                  (this._shouldCreateBackup &&\n                    this.supervisor.info?.state !== \"running\")}\n                  @click=${this._update}\n                  raised\n                >\n                  ${this.supervisor.localize(\"common.update\")}\n                </ha-progress-button>\n              </div>\n            `\n          : \"\"}\n      </ha-card>\n    `;\n  }\n\n  protected firstUpdated(changedProps: PropertyValues) {\n    super.firstUpdated(changedProps);\n    const pathPart = this.route?.path.substring(1, this.route.path.length);\n    const updateType = [\"core\", \"os\", \"supervisor\"].includes(pathPart)\n      ? pathPart\n      : \"addon\";\n    this._updateType = updateType as updateType;\n\n    if (updateType === \"addon\") {\n      if (!this.addonSlug) {\n        this.addonSlug = pathPart;\n      }\n      this._loadAddonData();\n    }\n  }\n\n  get _shouldCreateBackup(): boolean {\n    const checkbox = this.shadowRoot?.querySelector(\"ha-checkbox\");\n    if (checkbox) {\n      return checkbox.checked;\n    }\n    return true;\n  }\n\n  get _version(): string {\n    return this._updateType\n      ? this._updateType === \"addon\"\n        ? this._addonInfo!.version\n        : this.supervisor[this._updateType]?.version || \"\"\n      : \"\";\n  }\n\n  get _version_latest(): string {\n    return this._updateType\n      ? this._updateType === \"addon\"\n        ? this._addonInfo!.version_latest\n        : this.supervisor[this._updateType]?.version_latest || \"\"\n      : \"\";\n  }\n\n  get _name(): string {\n    return this._updateType\n      ? this._updateType === \"addon\"\n        ? this._addonInfo!.name\n        : SUPERVISOR_UPDATE_NAMES[this._updateType]\n      : \"\";\n  }\n\n  private async _loadAddonData() {\n    try {\n      this._addonInfo = await fetchHassioAddonInfo(this.hass, this.addonSlug!);\n    } catch (err) {\n      showAlertDialog(this, {\n        title: this._updateType,\n        text: extractApiErrorMessage(err),\n      });\n      return;\n    }\n    const addonStoreInfo =\n      !this._addonInfo.detached && !this._addonInfo.available\n        ? this._addonStoreInfo(\n            this._addonInfo.slug,\n            this.supervisor.store.addons\n          )\n        : undefined;\n\n    if (this._addonInfo.changelog) {\n      try {\n        const content = await fetchHassioAddonChangelog(\n          this.hass,\n          this.addonSlug!\n        );\n        this._changelogContent = extractChangelog(this._addonInfo, content);\n      } catch (err) {\n        this._error = extractApiErrorMessage(err);\n        return;\n      }\n    }\n\n    if (!this._addonInfo.available && addonStoreInfo) {\n      if (\n        !addonArchIsSupported(\n          this.supervisor.info.supported_arch,\n          this._addonInfo.arch\n        )\n      ) {\n        this._error = this.supervisor.localize(\n          \"addon.dashboard.not_available_arch\"\n        );\n      } else {\n        this._error = this.supervisor.localize(\n          \"addon.dashboard.not_available_version\",\n          {\n            core_version_installed: this.supervisor.core.version,\n            core_version_needed: addonStoreInfo.homeassistant,\n          }\n        );\n      }\n    }\n  }\n\n  private async _update() {\n    this._error = undefined;\n    if (this._shouldCreateBackup) {\n      let backupArgs: HassioPartialBackupCreateParams;\n      if (this._updateType === \"addon\") {\n        backupArgs = {\n          name: `addon_${this.addonSlug}_${this._version}`,\n          addons: [this.addonSlug!],\n          homeassistant: false,\n        };\n      } else {\n        backupArgs = {\n          name: `${this._updateType}_${this._version}`,\n          folders: [\"homeassistant\"],\n          homeassistant: true,\n        };\n      }\n      this._action = \"backup\";\n      try {\n        await createHassioPartialBackup(this.hass, backupArgs);\n      } catch (err: any) {\n        this._error = extractApiErrorMessage(err);\n        this._action = null;\n        return;\n      }\n    }\n\n    this._action = \"update\";\n    try {\n      if (this._updateType === \"addon\") {\n        await updateHassioAddon(this.hass, this.addonSlug!);\n      } else if (this._updateType === \"core\") {\n        await updateCore(this.hass);\n      } else if (this._updateType === \"os\") {\n        await updateOS(this.hass);\n      } else if (this._updateType === \"supervisor\") {\n        await updateSupervisor(this.hass);\n      }\n    } catch (err: any) {\n      if (this.hass.connection.connected && !ignoreSupervisorError(err)) {\n        this._error = extractApiErrorMessage(err);\n        this._action = null;\n        return;\n      }\n    }\n    fireEvent(this, \"update-complete\");\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: block;\n      }\n      ha-card {\n        margin: auto;\n      }\n      a {\n        text-decoration: none;\n        color: var(--primary-text-color);\n      }\n      ha-settings-row {\n        padding: 0;\n      }\n      .card-actions {\n        display: flex;\n        justify-content: space-between;\n        border-top: none;\n        padding: 0 8px 8px;\n      }\n\n      ha-circular-progress {\n        display: block;\n        margin: 32px;\n        text-align: center;\n      }\n\n      .progress-text {\n        text-align: center;\n      }\n\n      ha-markdown {\n        padding-bottom: 8px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"update-available-card\": UpdateAvailableCard;\n  }\n}\n"],"names":[],"sourceRoot":""}