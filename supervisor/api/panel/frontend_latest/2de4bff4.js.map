{"version":3,"file":"2de4bff4.js","mappings":";AAeA;AACA;AACA;;;AAyCA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAjBA;AC9BA;AACA;AACA;AACA;AACA;AACA;;AAGA;;;;AAMA","sources":["webpack://home-assistant-frontend/./src/components/ha-addon-picker.ts","webpack://home-assistant-frontend/./src/components/ha-selector/ha-selector-addon.ts"],"sourcesContent":["import { html, LitElement, TemplateResult } from \"lit\";\nimport { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { isComponentLoaded } from \"../common/config/is_component_loaded\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stringCompare } from \"../common/string/compare\";\nimport { fetchHassioAddonsInfo, HassioAddonInfo } from \"../data/hassio/addon\";\nimport { showAlertDialog } from \"../dialogs/generic/show-dialog-box\";\nimport { PolymerChangedEvent } from \"../polymer-types\";\nimport { HomeAssistant } from \"../types\";\nimport { HaComboBox } from \"./ha-combo-box\";\n\nconst rowRenderer: ComboBoxLitRenderer<HassioAddonInfo> = (\n  item\n) => html`<mwc-list-item twoline graphic=\"icon\">\n  <span>${item.name}</span>\n  <span slot=\"secondary\">${item.slug}</span>\n  ${item.icon\n    ? html`<img slot=\"graphic\" .src=\"/api/hassio/addons/${item.slug}/icon\" />`\n    : \"\"}\n</mwc-list-item>`;\n\n@customElement(\"ha-addon-picker\")\nclass HaAddonPicker extends LitElement {\n  public hass!: HomeAssistant;\n\n  @property() public label?: string;\n\n  @property() public value = \"\";\n\n  @property() public helper?: string;\n\n  @state() private _addons?: HassioAddonInfo[];\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @query(\"ha-combo-box\") private _comboBox!: HaComboBox;\n\n  public open() {\n    this._comboBox?.open();\n  }\n\n  public focus() {\n    this._comboBox?.focus();\n  }\n\n  protected firstUpdated() {\n    this._getAddons();\n  }\n\n  protected render(): TemplateResult {\n    if (!this._addons) {\n      return html``;\n    }\n    return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass\n          ? this.hass.localize(\"ui.components.addon-picker.addon\")\n          : this.label}\n        .value=${this._value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        .helper=${this.helper}\n        .renderer=${rowRenderer}\n        .items=${this._addons}\n        item-value-path=\"slug\"\n        item-id-path=\"slug\"\n        item-label-path=\"name\"\n        @value-changed=${this._addonChanged}\n      ></ha-combo-box>\n    `;\n  }\n\n  private async _getAddons() {\n    try {\n      if (isComponentLoaded(this.hass, \"hassio\")) {\n        const addonsInfo = await fetchHassioAddonsInfo(this.hass);\n        this._addons = addonsInfo.addons\n          .filter((addon) => addon.version)\n          .sort((a, b) => stringCompare(a.name, b.name));\n      } else {\n        showAlertDialog(this, {\n          title: this.hass.localize(\n            \"ui.components.addon-picker.error.no_supervisor.title\"\n          ),\n          text: this.hass.localize(\n            \"ui.components.addon-picker.error.no_supervisor.description\"\n          ),\n        });\n      }\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: this.hass.localize(\n          \"ui.components.addon-picker.error.fetch_addons.title\"\n        ),\n        text: this.hass.localize(\n          \"ui.components.addon-picker.error.fetch_addons.description\"\n        ),\n      });\n    }\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _addonChanged(ev: PolymerChangedEvent<string>) {\n    ev.stopPropagation();\n    const newValue = ev.detail.value;\n\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-addon-picker\": HaAddonPicker;\n  }\n}\n","import { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { AddonSelector } from \"../../data/selector\";\nimport { HomeAssistant } from \"../../types\";\nimport \"../ha-addon-picker\";\n\n@customElement(\"ha-selector-addon\")\nexport class HaAddonSelector extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property() public selector!: AddonSelector;\n\n  @property() public value?: any;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  protected render() {\n    return html`<ha-addon-picker\n      .hass=${this.hass}\n      .value=${this.value}\n      .label=${this.label}\n      .helper=${this.helper}\n      .disabled=${this.disabled}\n      .required=${this.required}\n      allow-custom-entity\n    ></ha-addon-picker>`;\n  }\n\n  static styles = css`\n    ha-addon-picker {\n      width: 100%;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-addon\": HaAddonSelector;\n  }\n}\n"],"names":[],"sourceRoot":""}