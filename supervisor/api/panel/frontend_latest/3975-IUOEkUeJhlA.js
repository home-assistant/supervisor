export const id=3975;export const ids=[3975];export const modules={71350:(e,t,i)=>{i.d(t,{c:()=>a});const a=e=>{if(void 0===e)return;if("object"!=typeof e){if("string"==typeof e||isNaN(e)){const t=(null==e?void 0:e.toString().split(":"))||[];if(1===t.length)return{seconds:Number(t[0])};if(t.length>3)return;const i=Number(t[2])||0,a=Math.floor(i);return{hours:Number(t[0])||0,minutes:Number(t[1])||0,seconds:a,milliseconds:Math.floor(1e3*(i-a))}}return{seconds:e}}if(!("days"in e))return e;const{days:t,minutes:i,seconds:a,milliseconds:o}=e;let n=e.hours||0;return n=(n||0)+24*(t||0),{hours:n,minutes:i,seconds:a,milliseconds:o}}},26410:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{Bt:()=>l});var o=i(22075),n=i(66477),s=i(4631),d=e([s]);s=(d.then?(await d)():d)[0];const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],l=e=>e.first_weekday===n.FS.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(e.language).weekInfo.firstDay%7:(0,o.L)(e.language)%7:r.includes(e.first_weekday)?r.indexOf(e.first_weekday):1;a()}catch(e){a(e)}}))},8395:(e,t,i)=>{i.d(t,{L:()=>o});const a=e=>e<10?`0${e}`:e,o=e=>{const t=e.days||0,i=e.hours||0,o=e.minutes||0,n=e.seconds||0,s=e.milliseconds||0;return t>0?`${t} day${1===t?"":"s"} ${i}:${a(o)}:${a(n)}`:i>0?`${i}:${a(o)}:${a(n)}`:o>0?`${o}:${a(n)}`:n>0?`${n} second${1===n?"":"s"}`:s>0?`${s} millisecond${1===s?"":"s"}`:null}},91168:(e,t,i)=>{i.d(t,{Z:()=>o});const a=e=>e<10?`0${e}`:e;function o(e){const t=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return t>0?`${t}:${a(i)}:${a(o)}`:i>0?`${i}:${a(o)}`:o>0?""+o:null}},85157:(e,t,i)=>{i.d(t,{t:()=>n});class a{constructor(e=window.localStorage){this.storage=void 0,this._storage={},this._listeners={},this.storage=e,e===window.localStorage&&window.addEventListener("storage",(e=>{e.key&&this.hasKey(e.key)&&(this._storage[e.key]=e.newValue?JSON.parse(e.newValue):e.newValue,this._listeners[e.key]&&this._listeners[e.key].forEach((t=>t(e.oldValue?JSON.parse(e.oldValue):e.oldValue,this._storage[e.key]))))}))}addFromStorage(e){if(!this._storage[e]){const t=this.storage.getItem(e);t&&(this._storage[e]=JSON.parse(t))}}subscribeChanges(e,t){return this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],()=>{this.unsubscribeChanges(e,t)}}unsubscribeChanges(e,t){if(!(e in this._listeners))return;const i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}hasKey(e){return e in this._storage}getValue(e){return this._storage[e]}setValue(e,t){const i=this._storage[e];this._storage[e]=t;try{void 0===t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify(t))}catch(e){}finally{this._listeners[e]&&this._listeners[e].forEach((e=>e(i,t)))}}}const o={},n=e=>t=>{const i=e.storage||"localStorage";let n;i&&i in o?n=o[i]:(n=new a(window[i]),o[i]=n);const s=String(t.key),d=e.key||String(t.key),r=t.initializer?t.initializer():void 0;n.addFromStorage(d);const l=!1!==e.subscribe?e=>n.subscribeChanges(d,((i,a)=>{e.requestUpdate(t.key,i)})):void 0,c=()=>n.hasKey(d)?n.getValue(d):r;return{kind:"method",placement:"prototype",key:t.key,descriptor:{set(i){((i,a)=>{let o;e.state&&(o=c()),n.setValue(d,a),e.state&&i.requestUpdate(t.key,o)})(this,i)},get:()=>c(),enumerable:!0,configurable:!0},finisher(i){if(e.state&&e.subscribe){const e=i.prototype.connectedCallback,t=i.prototype.disconnectedCallback;i.prototype.connectedCallback=function(){e.call(this),this[`__unbsubLocalStorage${s}`]=null==l?void 0:l(this)},i.prototype.disconnectedCallback=function(){var e;t.call(this),null===(e=this[`__unbsubLocalStorage${s}`])||void 0===e||e.call(this),this[`__unbsubLocalStorage${s}`]=void 0}}e.state&&i.createProperty(t.key,{noAccessor:!0,...e.stateOptions})}}}},74829:(e,t,i)=>{i.d(t,{t:()=>a});const a=e=>"latitude"in e.attributes&&"longitude"in e.attributes},34992:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{z:()=>d});var o=i(14516),n=i(4631),s=e([n]);n=(s.then?(await s)():s)[0];const d=(e,t)=>r(e).format(t),r=(0,o.Z)((e=>new Intl.ListFormat(e.language,{style:"long",type:"conjunction"})));(0,o.Z)((e=>new Intl.ListFormat(e.language,{style:"long",type:"disjunction"})));a()}catch(e){a(e)}}))},61761:(e,t,i)=>{i.d(t,{J:()=>o,_:()=>n});const a=/{%|{{/,o=e=>a.test(e),n=e=>{if(!e)return!1;if("string"==typeof e)return o(e);if("object"==typeof e){return(Array.isArray(e)?e:Object.values(e)).some((e=>e&&n(e)))}return!1}},34620:(e,t,i)=>{i.d(t,{p:()=>o});var a=i(38768);const o=(e,t)=>{if(!(t instanceof a.DD))return{warnings:[t.message],errors:void 0};const i=[],o=[];for(const a of t.failures())if(void 0===a.value)i.push(e.localize("ui.errors.config.key_missing","key",a.path.join(".")));else if("never"===a.type)o.push(e.localize("ui.errors.config.key_not_expected","key",a.path.join(".")));else{if("union"===a.type)continue;"enums"===a.type?o.push(e.localize("ui.errors.config.key_wrong_type","key",a.path.join("."),"type_correct",a.message.replace("Expected ","").split(", ")[0],"type_wrong",JSON.stringify(a.value))):o.push(e.localize("ui.errors.config.key_wrong_type","key",a.path.join("."),"type_correct",a.refinement||a.type,"type_wrong",JSON.stringify(a.value)))}return{warnings:o,errors:i}}},50577:(e,t,i)=>{i.d(t,{v:()=>a});const a=async e=>{if(navigator.clipboard)try{return void await navigator.clipboard.writeText(e)}catch(e){}const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},2926:(e,t,i)=>{i.d(t,{g:()=>v});var a=i(17463),o=i(34541),n=i(47838),s=i(92610),d=(i(44577),i(68144)),r=i(79932),l=i(47181),c=i(96339),u=i(26945);i(86630);const h="NO_AUTOMATION",p="UNKNOWN_AUTOMATION";let v=(0,a.Z)(null,(function(e,t){class i extends t{constructor(t,i,a){super(),e(this),this._localizeDeviceAutomation=t,this._fetchDeviceAutomations=i,this._createNoAutomation=a}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"deviceId",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_automations",value:()=>[]},{kind:"field",decorators:[(0,r.SB)()],key:"_renderEmpty",value:()=>!1},{kind:"field",decorators:[(0,r.SB)(),(0,s.F)({context:c.we,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"get",key:"NO_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.no_actions")}},{kind:"get",key:"UNKNOWN_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.unknown_action")}},{kind:"field",key:"_localizeDeviceAutomation",value:void 0},{kind:"field",key:"_fetchDeviceAutomations",value:void 0},{kind:"field",key:"_createNoAutomation",value:void 0},{kind:"get",key:"_value",value:function(){if(!this.value)return"";if(!this._automations.length)return h;const e=this._automations.findIndex((e=>(0,u.hH)(this._entityReg,e,this.value)));return-1===e?p:`${this._automations[e].device_id}_${e}`}},{kind:"method",key:"render",value:function(){if(this._renderEmpty)return d.Ld;const e=this._value;return d.dy` <ha-select .label="${this.label}" .value="${e}" @selected="${this._automationChanged}" .disabled="${0===this._automations.length}"> ${e===h?d.dy`<mwc-list-item .value="${h}"> ${this.NO_AUTOMATION_TEXT} </mwc-list-item>`:""} ${e===p?d.dy`<mwc-list-item .value="${p}"> ${this.UNKNOWN_AUTOMATION_TEXT} </mwc-list-item>`:""} ${this._automations.map(((e,t)=>d.dy` <mwc-list-item .value="${`${e.device_id}_${t}`}"> ${this._localizeDeviceAutomation(this.hass,this._entityReg,e)} </mwc-list-item> `))} </ha-select> `}},{kind:"method",key:"updated",value:function(e){(0,o.Z)((0,n.Z)(i.prototype),"updated",this).call(this,e),e.has("deviceId")&&this._updateDeviceInfo()}},{kind:"method",key:"_updateDeviceInfo",value:async function(){this._automations=this.deviceId?(await this._fetchDeviceAutomations(this.hass,this.deviceId)).sort(u.h6):[],this.value&&this.value.device_id===this.deviceId||this._setValue(this._automations.length?this._automations[0]:this._createNoAutomation(this.deviceId)),this._renderEmpty=!0,await this.updateComplete,this._renderEmpty=!1}},{kind:"method",key:"_automationChanged",value:function(e){const t=e.target.value;if(!t||[p,h].includes(t))return;const[i,a]=t.split("_"),o=this._automations[a];o.device_id===i&&this._setValue(o)}},{kind:"method",key:"_setValue",value:function(e){if(this.value&&(0,u.hH)(this._entityReg,e,this.value))return;const t={...e};delete t.metadata,(0,l.B)(this,"value-changed",{value:t})}},{kind:"get",static:!0,key:"styles",value:function(){return d.iv`ha-select{display:block}`}}]}}),d.oi)},74535:(e,t,i)=>{var a=i(17463),o=(i(73366),i(68144)),n=i(79932),s=i(14516),d=i(47181),r=i(58831),l=i(91741),c=i(40163),u=(i(77576),i(5666),i(52039),i(71281),i(85415));const h=e=>o.dy`<ha-list-item graphic="avatar" .twoline="${!!e.entity_id}"> ${e.state?o.dy`<state-badge slot="graphic" .stateObj="${e}"></state-badge>`:""} <span>${e.friendly_name}</span> <span slot="secondary">${e.entity_id}</span> </ha-list-item>`;(0,a.Z)([(0,n.Mo)("ha-entity-picker")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"autofocus",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"required",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,attribute:"allow-custom-entity"})],key:"allowCustomEntity",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Array,attribute:"include-unit-of-measurement"})],key:"includeUnitOfMeasurement",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Array,attribute:"include-entities"})],key:"includeEntities",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Array,attribute:"exclude-entities"})],key:"excludeEntities",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"hideClearIcon",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:"item-label-path"})],key:"itemLabelPath",value:()=>"friendly_name"},{kind:"field",decorators:[(0,n.SB)()],key:"_opened",value:()=>!1},{kind:"field",decorators:[(0,n.IO)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"method",key:"open",value:async function(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.open())}},{kind:"method",key:"focus",value:async function(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.focus())}},{kind:"field",key:"_initedStates",value:()=>!1},{kind:"field",key:"_states",value:()=>[]},{kind:"field",key:"_getStates",value(){return(0,s.Z)(((e,t,i,a,o,n,s,d,c)=>{let h=[];if(!t)return[];let p=Object.keys(t.states);return p.length?d?(p=p.filter((e=>this.includeEntities.includes(e))),p.map((e=>{const i=(0,l.C)(t.states[e])||e;return{...t.states[e],friendly_name:i,strings:[e,i]}})).sort(((e,t)=>(0,u.f)(e.friendly_name,t.friendly_name,this.hass.locale.language)))):(c&&(p=p.filter((e=>!c.includes(e)))),i&&(p=p.filter((e=>i.includes((0,r.M)(e))))),a&&(p=p.filter((e=>!a.includes((0,r.M)(e))))),h=p.map((e=>{const i=(0,l.C)(t.states[e])||e;return{...t.states[e],friendly_name:i,strings:[e,i]}})).sort(((e,t)=>(0,u.f)(e.friendly_name,t.friendly_name,this.hass.locale.language))),n&&(h=h.filter((e=>e.entity_id===this.value||e.attributes.device_class&&n.includes(e.attributes.device_class)))),s&&(h=h.filter((e=>e.entity_id===this.value||e.attributes.unit_of_measurement&&s.includes(e.attributes.unit_of_measurement)))),o&&(h=h.filter((e=>e.entity_id===this.value||o(e)))),h.length?h:[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_match"),attributes:{friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_match"),icon:"mdi:magnify"},strings:[]}]):[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_entities"),attributes:{friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_entities"),icon:"mdi:magnify"},strings:[]}]}))}},{kind:"method",key:"shouldUpdate",value:function(e){return!!(e.has("value")||e.has("label")||e.has("disabled"))||!(!e.has("_opened")&&this._opened)}},{kind:"method",key:"willUpdate",value:function(e){(!this._initedStates||e.has("_opened")&&this._opened)&&(this._states=this._getStates(this._opened,this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities),this._initedStates&&(this.comboBox.filteredItems=this._states),this._initedStates=!0)}},{kind:"method",key:"render",value:function(){return o.dy` <ha-combo-box item-value-path="entity_id" .itemLabelPath="${this.itemLabelPath}" .hass="${this.hass}" .value="${this._value}" .label="${void 0===this.label?this.hass.localize("ui.components.entity.entity-picker.entity"):this.label}" .helper="${this.helper}" .allowCustomValue="${this.allowCustomEntity}" .filteredItems="${this._states}" .renderer="${h}" .required="${this.required}" .disabled="${this.disabled}" @opened-changed="${this._openedChanged}" @value-changed="${this._valueChanged}" @filter-changed="${this._filterChanged}"> </ha-combo-box> `}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;t!==this._value&&this._setValue(t)}},{kind:"method",key:"_filterChanged",value:function(e){const t=e.target,i=e.detail.value.toLowerCase();t.filteredItems=i.length?(0,c.q)(i,this._states):this._states}},{kind:"method",key:"_setValue",value:function(e){this.value=e,setTimeout((()=>{(0,d.B)(this,"value-changed",{value:e}),(0,d.B)(this,"change")}),0)}}]}}),o.oi)},12545:(e,t,i)=>{var a=i(17463),o=(i(44577),i(68144)),n=i(79932),s=i(30153),d=i(47181),r=i(32594);i(86630),i(16235);(0,a.Z)([(0,n.Mo)("ha-base-time-input")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"autoValidate",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"required",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"format",value:()=>12},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"days",value:()=>0},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"hours",value:()=>0},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"minutes",value:()=>0},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"seconds",value:()=>0},{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"milliseconds",value:()=>0},{kind:"field",decorators:[(0,n.Cb)()],key:"dayLabel",value:()=>""},{kind:"field",decorators:[(0,n.Cb)()],key:"hourLabel",value:()=>""},{kind:"field",decorators:[(0,n.Cb)()],key:"minLabel",value:()=>""},{kind:"field",decorators:[(0,n.Cb)()],key:"secLabel",value:()=>""},{kind:"field",decorators:[(0,n.Cb)()],key:"millisecLabel",value:()=>""},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"enableSecond",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"enableMillisecond",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"enableDay",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"noHoursLimit",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)()],key:"amPm",value:()=>"AM"},{kind:"method",key:"render",value:function(){return o.dy` ${this.label?o.dy`<label>${this.label}${this.required?" *":""}</label>`:""} <div class="time-input-wrap"> ${this.enableDay?o.dy` <ha-textfield id="day" type="number" inputmode="numeric" .value="${this.days.toFixed()}" .label="${this.dayLabel}" name="days" @change="${this._valueChanged}" @focusin="${this._onFocus}" no-spinner .required="${this.required}" .autoValidate="${this.autoValidate}" min="0" .disabled="${this.disabled}" suffix=":" class="hasSuffix"> </ha-textfield> `:""} <ha-textfield id="hour" type="number" inputmode="numeric" .value="${this.hours.toFixed()}" .label="${this.hourLabel}" name="hours" @change="${this._valueChanged}" @focusin="${this._onFocus}" no-spinner .required="${this.required}" .autoValidate="${this.autoValidate}" maxlength="2" max="${(0,s.o)(this._hourMax)}" min="0" .disabled="${this.disabled}" suffix=":" class="hasSuffix"> </ha-textfield> <ha-textfield id="min" type="number" inputmode="numeric" .value="${this._formatValue(this.minutes)}" .label="${this.minLabel}" @change="${this._valueChanged}" @focusin="${this._onFocus}" name="minutes" no-spinner .required="${this.required}" .autoValidate="${this.autoValidate}" maxlength="2" max="59" min="0" .disabled="${this.disabled}" .suffix="${this.enableSecond?":":""}" class="${this.enableSecond?"has-suffix":""}"> </ha-textfield> ${this.enableSecond?o.dy`<ha-textfield id="sec" type="number" inputmode="numeric" .value="${this._formatValue(this.seconds)}" .label="${this.secLabel}" @change="${this._valueChanged}" @focusin="${this._onFocus}" name="seconds" no-spinner .required="${this.required}" .autoValidate="${this.autoValidate}" maxlength="2" max="59" min="0" .disabled="${this.disabled}" .suffix="${this.enableMillisecond?":":""}" class="${this.enableMillisecond?"has-suffix":""}"> </ha-textfield>`:""} ${this.enableMillisecond?o.dy`<ha-textfield id="millisec" type="number" .value="${this._formatValue(this.milliseconds,3)}" .label="${this.millisecLabel}" @change="${this._valueChanged}" @focusin="${this._onFocus}" name="milliseconds" no-spinner .required="${this.required}" .autoValidate="${this.autoValidate}" maxlength="3" max="999" min="0" .disabled="${this.disabled}"> </ha-textfield>`:""} ${24===this.format?"":o.dy`<ha-select .required="${this.required}" .value="${this.amPm}" .disabled="${this.disabled}" name="amPm" naturalMenuWidth fixedMenuPosition @selected="${this._valueChanged}" @closed="${r.U}"> <mwc-list-item value="AM">AM</mwc-list-item> <mwc-list-item value="PM">PM</mwc-list-item> </ha-select>`} </div> ${this.helper?o.dy`<ha-input-helper-text>${this.helper}</ha-input-helper-text>`:""} `}},{kind:"method",key:"_valueChanged",value:function(e){const t=e.currentTarget;this[t.name]="amPm"===t.name?t.value:Number(t.value);const i={hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds};this.enableDay&&(i.days=this.days),12===this.format&&(i.amPm=this.amPm),(0,d.B)(this,"value-changed",{value:i})}},{kind:"method",key:"_onFocus",value:function(e){e.currentTarget.select()}},{kind:"method",key:"_formatValue",value:function(e,t=2){return e.toString().padStart(t,"0")}},{kind:"get",key:"_hourMax",value:function(){if(!this.noHoursLimit)return 12===this.format?12:23}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`:host{display:block}.time-input-wrap{display:flex;border-radius:var(--mdc-shape-small,4px) var(--mdc-shape-small,4px) 0 0;overflow:hidden;position:relative;direction:ltr}ha-textfield{width:40px;text-align:center;--mdc-shape-small:0;--text-field-appearance:none;--text-field-padding:0 4px;--text-field-suffix-padding-left:2px;--text-field-suffix-padding-right:0;--text-field-text-align:center}ha-textfield.hasSuffix{--text-field-padding:0 0 0 4px}ha-textfield:first-child{--text-field-border-top-left-radius:var(--mdc-shape-medium)}ha-textfield:last-child{--text-field-border-top-right-radius:var(--mdc-shape-medium)}ha-select{--mdc-shape-small:0;width:85px}label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:var(--mdc-typography-body2-font-size,.875rem);line-height:var(--mdc-typography-body2-line-height,1.25rem);font-weight:var(--mdc-typography-body2-font-weight,400);letter-spacing:var(--mdc-typography-body2-letter-spacing,.0178571429em);text-decoration:var(--mdc-typography-body2-text-decoration,inherit);text-transform:var(--mdc-typography-body2-text-transform,inherit);color:var(--mdc-theme-text-primary-on-background,rgba(0,0,0,.87));padding-left:4px}`}]}}),o.oi)},74834:(e,t,i)=>{var a=i(17463),o=i(14271),n=i(68144),s=i(79932),d=i(3712);(0,a.Z)([(0,s.Mo)("ha-button")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",static:!0,key:"styles",value:()=>[d.W,n.iv`::slotted([slot=icon]){margin-inline-start:0px;margin-inline-end:8px;direction:var(--direction)}.mdc-button{height:var(--button-height,36px)}`]}]}}),o.z)},84431:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(63335),s=i(21270),d=i(96762),r=i(79932);(0,a.Z)([(0,r.Mo)("ha-check-list-item")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",static:!0,key:"styles",value:()=>[d.W,s.W,o.iv`:host{--mdc-theme-secondary:var(--primary-color)}:host([graphic=avatar]) .mdc-deprecated-list-item__graphic,:host([graphic=control]) .mdc-deprecated-list-item__graphic,:host([graphic=large]) .mdc-deprecated-list-item__graphic,:host([graphic=medium]) .mdc-deprecated-list-item__graphic{margin-inline-end:var(--mdc-list-item-graphic-margin,16px);margin-inline-start:0px;direction:var(--direction)}`]}]}}),n.F)},47289:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(47181);i(12545);(0,a.Z)([(0,n.Mo)("ha-duration-input")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"required",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"enableMillisecond",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"enableDay",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.IO)("paper-time-input",!0)],key:"_input",value:void 0},{kind:"method",key:"focus",value:function(){this._input&&this._input.focus()}},{kind:"method",key:"render",value:function(){return o.dy` <ha-base-time-input .label="${this.label}" .helper="${this.helper}" .required="${this.required}" .autoValidate="${this.required}" .disabled="${this.disabled}" errorMessage="Required" enableSecond .enableMillisecond="${this.enableMillisecond}" .enableDay="${this.enableDay}" format="24" .days="${this._days}" .hours="${this._hours}" .minutes="${this._minutes}" .seconds="${this._seconds}" .milliseconds="${this._milliseconds}" @value-changed="${this._durationChanged}" noHoursLimit dayLabel="dd" hourLabel="hh" minLabel="mm" secLabel="ss" millisecLabel="ms"></ha-base-time-input> `}},{kind:"get",key:"_days",value:function(){var e;return null!==(e=this.data)&&void 0!==e&&e.days?Number(this.data.days):0}},{kind:"get",key:"_hours",value:function(){var e;return null!==(e=this.data)&&void 0!==e&&e.hours?Number(this.data.hours):0}},{kind:"get",key:"_minutes",value:function(){var e;return null!==(e=this.data)&&void 0!==e&&e.minutes?Number(this.data.minutes):0}},{kind:"get",key:"_seconds",value:function(){var e;return null!==(e=this.data)&&void 0!==e&&e.seconds?Number(this.data.seconds):0}},{kind:"get",key:"_milliseconds",value:function(){var e;return null!==(e=this.data)&&void 0!==e&&e.milliseconds?Number(this.data.milliseconds):0}},{kind:"method",key:"_durationChanged",value:function(e){e.stopPropagation();const t={...e.detail.value};var i;(this.enableMillisecond||t.milliseconds?t.milliseconds>999&&(t.seconds+=Math.floor(t.milliseconds/1e3),t.milliseconds%=1e3):delete t.milliseconds,t.seconds>59&&(t.minutes+=Math.floor(t.seconds/60),t.seconds%=60),t.minutes>59&&(t.hours+=Math.floor(t.minutes/60),t.minutes%=60),this.enableDay&&t.hours>24)&&(t.days=(null!==(i=t.days)&&void 0!==i?i:0)+Math.floor(t.hours/24),t.hours%=24);(0,s.B)(this,"value-changed",{value:t})}}]}}),o.oi)},46583:(e,t,i)=>{var a=i(17463),o=i(34541),n=i(47838),s=i(68144),d=i(79932),r=i(83448),l=i(47181),c=i(96151);i(52039);const u="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z";(0,a.Z)([(0,d.Mo)("ha-expansion-panel")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)({type:Boolean,reflect:!0})],key:"expanded",value:()=>!1},{kind:"field",decorators:[(0,d.Cb)({type:Boolean,reflect:!0})],key:"outlined",value:()=>!1},{kind:"field",decorators:[(0,d.Cb)({type:Boolean,reflect:!0})],key:"leftChevron",value:()=>!1},{kind:"field",decorators:[(0,d.Cb)()],key:"header",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"secondary",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_showContent",value(){return this.expanded}},{kind:"field",decorators:[(0,d.IO)(".container")],key:"_container",value:void 0},{kind:"method",key:"render",value:function(){return s.dy` <div class="top ${(0,r.$)({expanded:this.expanded})}"> <div id="summary" @click="${this._toggleContainer}" @keydown="${this._toggleContainer}" @focus="${this._focusChanged}" @blur="${this._focusChanged}" role="button" tabindex="0" aria-expanded="${this.expanded}" aria-controls="sect1"> ${this.leftChevron?s.dy` <ha-svg-icon .path="${u}" class="summary-icon ${(0,r.$)({expanded:this.expanded})}"></ha-svg-icon> `:""} <slot name="header"> <div class="header"> ${this.header} <slot class="secondary" name="secondary">${this.secondary}</slot> </div> </slot> ${this.leftChevron?"":s.dy` <ha-svg-icon .path="${u}" class="summary-icon ${(0,r.$)({expanded:this.expanded})}"></ha-svg-icon> `} </div> <slot name="icons"></slot> </div> <div class="container ${(0,r.$)({expanded:this.expanded})}" @transitionend="${this._handleTransitionEnd}" role="region" aria-labelledby="summary" aria-hidden="${!this.expanded}" tabindex="-1"> ${this._showContent?s.dy`<slot></slot>`:""} </div> `}},{kind:"method",key:"willUpdate",value:function(e){(0,o.Z)((0,n.Z)(i.prototype),"willUpdate",this).call(this,e),e.has("expanded")&&this.expanded&&(this._showContent=this.expanded,setTimeout((()=>{this.expanded&&(this._container.style.overflow="initial")}),300))}},{kind:"method",key:"_handleTransitionEnd",value:function(){this._container.style.removeProperty("height"),this._container.style.overflow=this.expanded?"initial":"hidden",this._showContent=this.expanded}},{kind:"method",key:"_toggleContainer",value:async function(e){if(e.defaultPrevented)return;if("keydown"===e.type&&"Enter"!==e.key&&" "!==e.key)return;e.preventDefault();const t=!this.expanded;(0,l.B)(this,"expanded-will-change",{expanded:t}),this._container.style.overflow="hidden",t&&(this._showContent=!0,await(0,c.y)());const i=this._container.scrollHeight;this._container.style.height=`${i}px`,t||setTimeout((()=>{this._container.style.height="0px"}),0),this.expanded=t,(0,l.B)(this,"expanded-changed",{expanded:this.expanded})}},{kind:"method",key:"_focusChanged",value:function(e){this.shadowRoot.querySelector(".top").classList.toggle("focused","focus"===e.type)}},{kind:"get",static:!0,key:"styles",value:function(){return s.iv`:host{display:block}.top{display:flex;align-items:center;border-radius:var(--ha-card-border-radius,12px)}.top.expanded{border-bottom-left-radius:0px;border-bottom-right-radius:0px}.top.focused{background:var(--input-fill-color)}:host([outlined]){box-shadow:none;border-width:1px;border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));border-radius:var(--ha-card-border-radius,12px)}.summary-icon{margin-left:8px}:host([leftchevron]) .summary-icon{margin-left:0;margin-right:8px}#summary{flex:1;display:flex;padding:var(--expansion-panel-summary-padding,0 8px);min-height:48px;align-items:center;cursor:pointer;overflow:hidden;font-weight:500;outline:0}.summary-icon{transition:transform 150ms cubic-bezier(.4,0,.2,1);direction:var(--direction)}.summary-icon.expanded{transform:rotate(180deg)}.header,::slotted([slot=header]){flex:1}.container{padding:var(--expansion-panel-content-padding,0 8px);overflow:hidden;transition:height .3s cubic-bezier(.4,0,.2,1);height:0px}.container.expanded{height:auto}.secondary{display:block;color:var(--secondary-text-color);font-size:12px}`}}]}}),s.oi)},83927:(e,t,i)=>{var a=i(17463),o=i(8485),n=i(92038),s=i(68144),d=i(79932),r=i(47181);(0,a.Z)([(0,d.Mo)("ha-formfield")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"method",key:"_labelClick",value:function(){const e=this.input;if(e)switch(e.focus(),e.tagName){case"HA-CHECKBOX":case"HA-RADIO":if(e.disabled)break;e.checked=!e.checked,(0,r.B)(e,"change");break;default:e.click()}}},{kind:"field",static:!0,key:"styles",value:()=>[n.W,s.iv`:host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding-inline-start:4px;padding-inline-end:0}`]}]}}),o.a)},16235:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932);(0,a.Z)([(0,n.Mo)("ha-input-helper-text")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"method",key:"render",value:function(){return o.dy`<slot></slot>`}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`:host{display:block;color:var(--mdc-text-field-label-ink-color,rgba(0,0,0,.6));font-size:.75rem;padding-left:16px;padding-right:16px}`}]}}),o.oi)},73975:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.r(t),i.d(t,{HaActionSelector:()=>l});var o=i(17463),n=i(68144),s=i(79932),d=i(61788),r=e([d]);d=(r.then?(await r)():r)[0];let l=(0,o.Z)([(0,s.Mo)("ha-selector-action")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)()],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"selector",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,reflect:!0})],key:"disabled",value:()=>!1},{kind:"method",key:"render",value:function(){return n.dy` <ha-automation-action .disabled="${this.disabled}" .actions="${this.value||[]}" .hass="${this.hass}"></ha-automation-action> `}},{kind:"get",static:!0,key:"styles",value:function(){return n.iv`ha-automation-action{display:block;margin-bottom:16px}:host([disabled]) ha-automation-action{opacity:var(--light-disabled-opacity);pointer-events:none}`}}]}}),n.oi);a()}catch(e){a(e)}}))},53297:(e,t,i)=>{var a=i(17463),o=i(34541),n=i(47838),s=i(89833),d=i(31338),r=i(96791),l=i(68144),c=i(79932);(0,a.Z)([(0,c.Mo)("ha-textarea")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,c.Cb)({type:Boolean,reflect:!0})],key:"autogrow",value:()=>!1},{kind:"method",key:"firstUpdated",value:function(){(0,o.Z)((0,n.Z)(i.prototype),"firstUpdated",this).call(this),this.setAttribute("dir",document.dir)}},{kind:"method",key:"updated",value:function(e){(0,o.Z)((0,n.Z)(i.prototype),"updated",this).call(this,e),this.autogrow&&e.has("value")&&(this.mdcRoot.dataset.value=this.value+'=​"')}},{kind:"field",static:!0,key:"styles",value:()=>[d.W,r.W,l.iv`:host([autogrow]) .mdc-text-field{position:relative;min-height:74px;min-width:178px;max-height:200px}:host([autogrow]) .mdc-text-field:after{content:attr(data-value);margin-top:23px;margin-bottom:9px;line-height:1.5rem;min-height:42px;padding:0px 32px 0 16px;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing,.009375em);visibility:hidden;white-space:pre-wrap}:host([autogrow]) .mdc-text-field__input{position:absolute;height:calc(100% - 32px)}:host([autogrow]) .mdc-text-field.mdc-text-field--no-label:after{margin-top:16px;margin-bottom:16px}:host([dir=rtl]) .mdc-floating-label{right:16px;left:initial}`]}]}}),s.O)},33049:(e,t,i)=>{var a=i(17463),o=i(34541),n=i(47838),s=i(68144),d=i(79932),r=i(34990),l=i(14516),c=i(47181);const u=async e=>e.callWS({type:"config/auth/list"});i(5666),i(44577);var h=i(85415),p=(i(86630),i(83448)),v=i(76538),m=i(22311);(0,a.Z)([(0,d.Mo)("ha-user-badge")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"user",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_personPicture",value:void 0},{kind:"field",key:"_personEntityId",value:void 0},{kind:"method",key:"willUpdate",value:function(e){if((0,o.Z)((0,n.Z)(i.prototype),"willUpdate",this).call(this,e),e.has("user"))return void this._getPersonPicture();const t=e.get("hass");if(this._personEntityId&&t&&this.hass.states[this._personEntityId]!==t.states[this._personEntityId]){const e=this.hass.states[this._personEntityId];e?this._personPicture=e.attributes.entity_picture:this._getPersonPicture()}else!this._personEntityId&&t&&this._getPersonPicture()}},{kind:"method",key:"render",value:function(){if(!this.hass||!this.user)return s.Ld;const e=this._personPicture;if(e)return s.dy`<div style="${(0,v.V)({backgroundImage:`url(${e})`})}" class="picture"></div>`;const t=(i=this.user.name)?i.trim().split(" ").slice(0,3).map((e=>e.substring(0,1))).join(""):"?";var i;return s.dy`<div class="initials ${(0,p.$)({long:t.length>2})}"> ${t} </div>`}},{kind:"method",key:"_getPersonPicture",value:function(){if(this._personEntityId=void 0,this._personPicture=void 0,this.hass&&this.user)for(const e of Object.values(this.hass.states))if(e.attributes.user_id===this.user.id&&"person"===(0,m.N)(e)){this._personEntityId=e.entity_id,this._personPicture=e.attributes.entity_picture;break}}},{kind:"get",static:!0,key:"styles",value:function(){return s.iv`:host{display:contents}.picture{width:40px;height:40px;background-size:cover;border-radius:50%}.initials{display:inline-block;box-sizing:border-box;width:40px;line-height:40px;border-radius:50%;text-align:center;background-color:var(--light-primary-color);text-decoration:none;color:var(--text-light-primary-color,var(--primary-text-color));overflow:hidden}.initials.long{font-size:80%}`}}]}}),s.oi);i(73366);let g=(0,a.Z)(null,(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"noUserLabel",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"value",value:()=>""},{kind:"field",decorators:[(0,d.Cb)()],key:"users",value:void 0},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",key:"_sortedUsers",value(){return(0,l.Z)((e=>e?e.filter((e=>!e.system_generated)).sort(((e,t)=>(0,h.$)(e.name,t.name,this.hass.locale.language))):[]))}},{kind:"method",key:"render",value:function(){var e,t;return s.dy` <ha-select .label="${this.label}" .disabled="${this.disabled}" .value="${this.value}" @selected="${this._userChanged}"> ${0===(null===(e=this.users)||void 0===e?void 0:e.length)?s.dy`<mwc-list-item value=""> ${this.noUserLabel||(null===(t=this.hass)||void 0===t?void 0:t.localize("ui.components.user-picker.no_user"))} </mwc-list-item>`:""} ${this._sortedUsers(this.users).map((e=>s.dy` <ha-list-item graphic="avatar" .value="${e.id}"> <ha-user-badge .hass="${this.hass}" .user="${e}" slot="graphic"></ha-user-badge> ${e.name} </ha-list-item> `))} </ha-select> `}},{kind:"method",key:"firstUpdated",value:function(e){(0,o.Z)((0,n.Z)(i.prototype),"firstUpdated",this).call(this,e),void 0===this.users&&u(this.hass).then((e=>{this.users=e}))}},{kind:"method",key:"_userChanged",value:function(e){const t=e.target.value;t!==this.value&&(this.value=t,setTimeout((()=>{(0,c.B)(this,"value-changed",{value:t}),(0,c.B)(this,"change")}),0))}},{kind:"get",static:!0,key:"styles",value:function(){return s.iv`:host{display:inline-block}mwc-list{display:block}`}}]}}),s.oi);customElements.define("ha-user-picker",g);(0,a.Z)([(0,d.Mo)("ha-users-picker")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,d.Cb)({attribute:"picked-user-label"})],key:"pickedUserLabel",value:void 0},{kind:"field",decorators:[(0,d.Cb)({attribute:"pick-user-label"})],key:"pickUserLabel",value:void 0},{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"users",value:void 0},{kind:"method",key:"firstUpdated",value:function(e){(0,o.Z)((0,n.Z)(i.prototype),"firstUpdated",this).call(this,e),void 0===this.users&&u(this.hass).then((e=>{this.users=e}))}},{kind:"method",key:"render",value:function(){if(!this.hass||!this.users)return s.Ld;const e=this._notSelectedUsers(this.users,this.value);return s.dy` ${(0,r.l)([e],(()=>{var t;return null===(t=this.value)||void 0===t?void 0:t.map(((t,i)=>s.dy` <div> <ha-user-picker .label="${this.pickedUserLabel}" .noUserLabel="${this.hass.localize("ui.components.user-picker.remove_user")}" .index="${i}" .hass="${this.hass}" .value="${t}" .users="${this._notSelectedUsersAndSelected(t,this.users,e)}" @value-changed="${this._userChanged}"></ha-user-picker> <ha-icon-button .userId="${t}" .label="${this.hass.localize("ui.components.user-picker.remove_user")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" @click="${this._removeUser}"> ></ha-icon-button> </div> `))}))} <ha-user-picker .label="${this.pickUserLabel||this.hass.localize("ui.components.user-picker.add_user")}" .hass="${this.hass}" .users="${e}" .disabled="${!(null!=e&&e.length)}" @value-changed="${this._addUser}"></ha-user-picker> `}},{kind:"field",key:"_notSelectedUsers",value:()=>(0,l.Z)(((e,t)=>t?null==e?void 0:e.filter((e=>!e.system_generated&&!t.includes(e.id))):null==e?void 0:e.filter((e=>!e.system_generated))))},{kind:"field",key:"_notSelectedUsersAndSelected",value:()=>(e,t,i)=>{const a=null==t?void 0:t.find((t=>t.id===e));return a?i?[...i,a]:[a]:i}},{kind:"get",key:"_currentUsers",value:function(){return this.value||[]}},{kind:"method",key:"_updateUsers",value:async function(e){this.value=e,(0,c.B)(this,"value-changed",{value:e})}},{kind:"method",key:"_userChanged",value:function(e){e.stopPropagation();const t=e.currentTarget.index,i=e.detail.value,a=[...this._currentUsers];""===i?a.splice(t,1):a.splice(t,1,i),this._updateUsers(a)}},{kind:"method",key:"_addUser",value:async function(e){e.stopPropagation();const t=e.detail.value;if(e.currentTarget.value="",!t)return;const i=this._currentUsers;i.includes(t)||this._updateUsers([...i,t])}},{kind:"method",key:"_removeUser",value:function(e){const t=e.currentTarget.userId;this._updateUsers(this._currentUsers.filter((e=>e!==t)))}},{kind:"get",static:!0,key:"styles",value:function(){return s.iv`:host{display:block}div{display:flex;align-items:center}`}}]}}),s.oi)},29891:(e,t,i)=>{i.d(t,{a:()=>a,l:()=>o});const a={condition:"M4 2A2 2 0 0 0 2 4V12H4V8H6V12H8V4A2 2 0 0 0 6 2H4M4 4H6V6H4M22 15.5V14A2 2 0 0 0 20 12H16V22H20A2 2 0 0 0 22 20V18.5A1.54 1.54 0 0 0 20.5 17A1.54 1.54 0 0 0 22 15.5M20 20H18V18H20V20M20 16H18V14H20M5.79 21.61L4.21 20.39L18.21 2.39L19.79 3.61Z",delay:"M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M11,14H13V8H11M15,1H9V3H15V1Z",event:"M10,9A1,1 0 0,1 11,8A1,1 0 0,1 12,9V13.47L13.21,13.6L18.15,15.79C18.68,16.03 19,16.56 19,17.14V21.5C18.97,22.32 18.32,22.97 17.5,23H11C10.62,23 10.26,22.85 10,22.57L5.1,18.37L5.84,17.6C6.03,17.39 6.3,17.28 6.58,17.28H6.8L10,19V9M11,5A4,4 0 0,1 15,9C15,10.5 14.2,11.77 13,12.46V11.24C13.61,10.69 14,9.89 14,9A3,3 0 0,0 11,6A3,3 0 0,0 8,9C8,9.89 8.39,10.69 9,11.24V12.46C7.8,11.77 7,10.5 7,9A4,4 0 0,1 11,5M11,3A6,6 0 0,1 17,9C17,10.7 16.29,12.23 15.16,13.33L14.16,12.88C15.28,11.96 16,10.56 16,9A5,5 0 0,0 11,4A5,5 0 0,0 6,9C6,11.05 7.23,12.81 9,13.58V14.66C6.67,13.83 5,11.61 5,9A6,6 0 0,1 11,3Z",play_media:"M8,5.14V19.14L19,12.14L8,5.14Z",activate_scene:"M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z",service:"M12,5A2,2 0 0,1 14,7C14,7.24 13.96,7.47 13.88,7.69C17.95,8.5 21,11.91 21,16H3C3,11.91 6.05,8.5 10.12,7.69C10.04,7.47 10,7.24 10,7A2,2 0 0,1 12,5M22,19H2V17H22V19Z",wait_template:"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",wait_for_trigger:"M12,9A2,2 0 0,1 10,7C10,5.89 10.9,5 12,5C13.11,5 14,5.89 14,7A2,2 0 0,1 12,9M12,14A2,2 0 0,1 10,12C10,10.89 10.9,10 12,10C13.11,10 14,10.89 14,12A2,2 0 0,1 12,14M12,19A2,2 0 0,1 10,17C10,15.89 10.9,15 12,15C13.11,15 14,15.89 14,17A2,2 0 0,1 12,19M20,10H17V8.86C18.72,8.41 20,6.86 20,5H17V4A1,1 0 0,0 16,3H8A1,1 0 0,0 7,4V5H4C4,6.86 5.28,8.41 7,8.86V10H4C4,11.86 5.28,13.41 7,13.86V15H4C4,16.86 5.28,18.41 7,18.86V20A1,1 0 0,0 8,21H16A1,1 0 0,0 17,20V18.86C18.72,18.41 20,16.86 20,15H17V13.86C18.72,13.41 20,11.86 20,10Z",repeat:"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",choose:"M11,5H8L12,1L16,5H13V9.43C12.25,9.89 11.58,10.46 11,11.12V5M22,11L18,7V10C14.39,9.85 11.31,12.57 11,16.17C9.44,16.72 8.62,18.44 9.17,20C9.72,21.56 11.44,22.38 13,21.83C14.56,21.27 15.38,19.56 14.83,18C14.53,17.14 13.85,16.47 13,16.17C13.47,12.17 17.47,11.97 17.95,11.97V14.97L22,11M10.63,11.59C9.3,10.57 7.67,10 6,10V7L2,11L6,15V12C7.34,12.03 8.63,12.5 9.64,13.4C9.89,12.76 10.22,12.15 10.63,11.59Z",if:"M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29",device_id:"M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",stop:"M13 24C9.74 24 6.81 22 5.6 19L2.57 11.37C2.26 10.58 3 9.79 3.81 10.05L4.6 10.31C5.16 10.5 5.62 10.92 5.84 11.47L7.25 15H8V3.25C8 2.56 8.56 2 9.25 2S10.5 2.56 10.5 3.25V12H11.5V1.25C11.5 .56 12.06 0 12.75 0S14 .56 14 1.25V12H15V2.75C15 2.06 15.56 1.5 16.25 1.5C16.94 1.5 17.5 2.06 17.5 2.75V12H18.5V5.75C18.5 5.06 19.06 4.5 19.75 4.5S21 5.06 21 5.75V16C21 20.42 17.42 24 13 24Z",parallel:"M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16",variables:"M21 2H3C1.9 2 1 2.9 1 4V20C1 21.1 1.9 22 3 22H21C22.1 22 23 21.1 23 20V4C23 2.9 22.1 2 21 2M21 20H3V6H21V20M16.6 8C18.1 9.3 19 11.1 19 13C19 14.9 18.1 16.7 16.6 18L15 17.4C16.3 16.4 17 14.7 17 13S16.3 9.6 15 8.6L16.6 8M7.4 8L9 8.6C7.7 9.6 7 11.3 7 13S7.7 16.4 9 17.4L7.4 18C5.9 16.7 5 14.9 5 13S5.9 9.3 7.4 8M12.1 12L13.5 10H15L12.8 13L14.1 16H12.8L12 14L10.6 16H9L11.3 12.9L10 10H11.3L12.1 12Z"},o=new Set(["variables"])},93748:(e,t,i)=>{i.d(t,{Gd:()=>a,J8:()=>n,Xm:()=>o});i(83849);const a=e=>{if("condition"in e&&Array.isArray(e.condition))return{condition:"and",conditions:e.condition};for(const t of["and","or","not"])if(t in e)return{condition:t,conditions:e[t]};return e};const o=(e,t,i,a)=>e.connection.subscribeMessage(t,{type:"subscribe_trigger",trigger:i,variables:a}),n=(e,t,i)=>e.callWS({type:"test_condition",condition:t,variables:i})},29937:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{R:()=>y,m:()=>k});var o=i(76680),n=i(8395),s=i(49684),d=i(91168),r=i(95664),l=i(29171),c=i(91741),u=i(4631),h=i(26945),p=e([s,r,l,u]);[s,r,l,u]=p.then?(await p)():p;const v="ui.panel.config.automation.editor.triggers.type",m=e=>{let t;return t="number"==typeof e?(0,d.Z)(e):"string"==typeof e?e:(0,n.L)(e),t},g=(e,t,i)=>{const a=e.split(":");if(a.length<2||a.length>3)return e;try{const o=new Date("1970-01-01T"+e);return 2===a.length||0===Number(a[2])?(0,s.mr)(o,t,i):(0,s.Vu)(o,t,i)}catch(t){return e}},f=e=>[11,12,13].includes(e%=100)?"th":e%10==1?"st":e%10==2?"nd":e%10==3?"rd":"th",y=(e,t,i,a=!1)=>{try{return _(e,t,i,a)}catch(e){console.error(e);let t="Error in describing trigger";return e.message&&(t+=": "+e.message),t}},_=(e,t,i,a=!1)=>{if(e.alias&&!a)return e.alias;const n=new Intl.ListFormat("en",{style:"long",type:"disjunction"});if("event"===e.platform&&e.event_type){const i=[];if(Array.isArray(e.event_type))for(const t of e.event_type.values())i.push(t);else i.push(e.event_type);const a=n.format(i);return t.localize(`${v}.event.description.full`,{eventTypes:a})}if("homeassistant"===e.platform&&e.event)return t.localize("start"===e.event?`${v}.homeassistant.description.started`:`${v}.homeassistant.description.shutdown`);if("numeric_state"===e.platform&&e.entity_id){let i="When";const a=t.states[e.entity_id],o=a?(0,c.C)(a):e.entity_id;if(e.attribute&&(i+=` ${(0,r.S)(t.localize,a,t.entities,e.attribute)} from`),i+=` ${o} is`,void 0!==e.above&&(i+=` above ${e.above}`),void 0!==e.below&&void 0!==e.above&&(i+=" and"),void 0!==e.below&&(i+=` below ${e.below}`),e.for){const t=m(e.for);t&&(i+=` for ${t}`)}return i}if("state"===e.platform){let i="When";const a=[],o=t.states;if(e.attribute){const a=Array.isArray(e.entity_id)?t.states[e.entity_id[0]]:t.states[e.entity_id];i+=` ${(0,r.S)(t.localize,a,t.entities,e.attribute)} of`}if(Array.isArray(e.entity_id))for(const t of e.entity_id.values())o[t]&&a.push((0,c.C)(o[t])||t);else e.entity_id&&a.push(o[e.entity_id]?(0,c.C)(o[e.entity_id]):e.entity_id);0===a.length&&a.push("something"),i+=` ${a} changes`;const s=t.states[Array.isArray(e.entity_id)?e.entity_id[0]:e.entity_id];if(void 0!==e.from)if(null===e.from)e.attribute||(i+=" from any state");else if(Array.isArray(e.from)){const a=[];for(const i of e.from.values())a.push(e.attribute?(0,r.a)(t.localize,s,t.locale,t.config,t.entities,e.attribute,i).toString():(0,l.D1)(t.localize,s,t.locale,t.config,t.entities,i));if(0!==a.length){i+=` from ${n.format(a)}`}}else i+=` from ${e.attribute?(0,r.a)(t.localize,s,t.locale,t.config,t.entities,e.attribute,e.from).toString():(0,l.D1)(t.localize,s,t.locale,t.config,t.entities,e.from.toString()).toString()}`;if(void 0!==e.to)if(null===e.to)e.attribute||(i+=" to any state");else if(Array.isArray(e.to)){const a=[];for(const i of e.to.values())a.push(e.attribute?(0,r.a)(t.localize,s,t.locale,t.config,t.entities,e.attribute,i).toString():(0,l.D1)(t.localize,s,t.locale,t.config,t.entities,i).toString());if(0!==a.length){i+=` to ${n.format(a)}`}}else i+=` to ${e.attribute?(0,r.a)(t.localize,s,t.locale,t.config,t.entities,e.attribute,e.to).toString():(0,l.D1)(t.localize,s,t.locale,t.config,t.entities,e.to.toString())}`;if(e.attribute||void 0!==e.from||void 0!==e.to||(i+=" state or any attributes"),e.for){const t=m(e.for);t&&(i+=` for ${t}`)}return i}if("sun"===e.platform&&e.event){let i="";return e.offset&&(i="number"==typeof e.offset?(0,d.Z)(e.offset):"string"==typeof e.offset?e.offset:JSON.stringify(e.offset)),t.localize("sunset"===e.event?`${v}.sun.description.sets`:`${v}.sun.description.rises`,{hasDuration:""!==i,duration:i})}if("tag"===e.platform)return t.localize(`${v}.tag.description.full`);if("time"===e.platform&&e.at){const i=(0,o.r)(e.at).map((e=>"string"!=typeof e?e:e.includes(".")?`entity ${t.states[e]?(0,c.C)(t.states[e]):e}`:g(e,t.locale,t.config)));return t.localize(`${v}.time.description.full`,{time:n.format(i)})}if("time_pattern"===e.platform&&(void 0!==e.seconds||void 0!==e.minutes||void 0!==e.hours)){let t="Trigger ";if(void 0!==e.seconds){const i="*"===e.seconds,a="string"==typeof e.seconds&&e.seconds.startsWith("/"),o=i?0:"number"==typeof e.seconds?e.seconds:a?parseInt(e.seconds.substring(1)):parseInt(e.seconds);if(isNaN(o)||o>59||o<0||a&&0===o)return"Invalid Time Pattern Seconds";t+=i?"every second of ":a?`every ${o} seconds of `:`on the ${o}${f(o)} second of `}if(void 0!==e.minutes){const i="*"===e.minutes,a="string"==typeof e.minutes&&e.minutes.startsWith("/"),o=i?0:"number"==typeof e.minutes?e.minutes:a?parseInt(e.minutes.substring(1)):parseInt(e.minutes);if(isNaN(o)||o>59||o<0||a&&0===o)return"Invalid Time Pattern Minutes";t+=i?"every minute of ":a?`every ${o} minutes of `:`${void 0!==e.seconds?"":"on"} the ${o}${f(o)} minute of `}else void 0!==e.seconds&&(void 0!==e.hours?t+=`the 0${f(0)} minute of `:t+="every minute of ");if(void 0!==e.hours){const i="*"===e.hours,a="string"==typeof e.hours&&e.hours.startsWith("/"),o=i?0:"number"==typeof e.hours?e.hours:a?parseInt(e.hours.substring(1)):parseInt(e.hours);if(isNaN(o)||o>23||o<0||a&&0===o)return"Invalid Time Pattern Hours";t+=i?"every hour":a?`every ${o} hours`:`${void 0!==e.seconds||void 0!==e.minutes?"":"on"} the ${o}${f(o)} hour`}else t+="every hour";return t}if("zone"===e.platform&&e.entity_id&&e.zone){const i=[],a=[],o=t.states;if(Array.isArray(e.entity_id))for(const t of e.entity_id.values())o[t]&&i.push((0,c.C)(o[t])||t);else i.push(o[e.entity_id]?(0,c.C)(o[e.entity_id]):e.entity_id);if(Array.isArray(e.zone))for(const t of e.zone.values())o[t]&&a.push((0,c.C)(o[t])||t);else a.push(o[e.zone]?(0,c.C)(o[e.zone]):e.zone);const s=n.format(i),d=n.format(a);return`When ${s} ${e.event}s ${d} ${a.length>1?"zones":"zone"}`}if("geo_location"===e.platform&&e.source&&e.zone){const i=[],a=[],o=t.states;if(Array.isArray(e.source))for(const t of e.source.values())i.push(t);else i.push(e.source);if(Array.isArray(e.zone))for(const t of e.zone.values())o[t]&&a.push((0,c.C)(o[t])||t);else a.push(o[e.zone]?(0,c.C)(o[e.zone]):e.zone);const s=n.format(i),d=n.format(a);return`When ${s} ${e.event}s ${d} ${a.length>1?"zones":"zone"}`}if("mqtt"===e.platform)return t.localize(`${v}.mqtt.description.full`);if("template"===e.platform){let i="";var s;if(e.for)i=null!==(s=m(e.for))&&void 0!==s?s:"";return t.localize(`${v}.template.description.full`,{hasDuration:""!==i,duration:i})}if("webhook"===e.platform)return t.localize(`${v}.webhook.description.full`);if("conversation"===e.platform)return e.command?t.localize(`${v}.conversation.description.full`,{sentence:n.format((0,o.r)(e.command).map((e=>`'${e}'`)))}):t.localize(`${v}.conversation.description.empty`);if("persistent_notification"===e.platform)return"When a persistent notification is updated";if("device"===e.platform){if(!e.device_id)return"Device trigger";const a=e,o=(0,h.KL)(t,i,a);if(o)return o;const n=t.states[a.entity_id];return`${n?(0,c.C)(n):a.entity_id} ${a.type}`}return`${e.platform?e.platform.replace(/_/g," "):"Unknown"} trigger`},k=(e,t,i,a=!1)=>{try{return b(e,t,i,a)}catch(e){console.error(e);let t="Error in describing condition";return e.message&&(t+=": "+e.message),t}},b=(e,t,i,a=!1)=>{if(e.alias&&!a)return e.alias;const n=new Intl.ListFormat("en",{style:"long",type:"conjunction"}),s=new Intl.ListFormat("en",{style:"long",type:"disjunction"});if(!e.condition){const t=["and","or","not"];for(const i of t)i in e&&(0,o.r)(e[i])&&(e={condition:i,conditions:e[i]})}if("or"===e.condition){const t=(0,o.r)(e.conditions);if(!t||0===t.length)return"Test if any condition matches";const i=t.length;return`Test if any of ${i} condition${1===i?"":"s"} matches`}if("and"===e.condition){const t=(0,o.r)(e.conditions);if(!t||0===t.length)return"Test if multiple conditions match";const i=t.length;return`Test if ${i} condition${1===i?"":"s"} match${1===i?"es":""}`}if("not"===e.condition){const t=(0,o.r)(e.conditions);return t&&0!==t.length?1===t.length?"Test if 1 condition does not match":`Test if none of ${t.length} conditions match`:"Test if no condition matches"}if("state"===e.condition){let i="Confirm";if(!e.entity_id)return`${i} state`;if(e.attribute){const a=Array.isArray(e.entity_id)?t.states[e.entity_id[0]]:t.states[e.entity_id];i+=` ${(0,r.S)(t.localize,a,t.entities,e.attribute)} of`}if(Array.isArray(e.entity_id)){const a=[];for(const i of e.entity_id.values())t.states[i]&&a.push((0,c.C)(t.states[i])||i);if(0!==a.length){i+=` ${"any"===e.match?s.format(a):n.format(a)} ${e.entity_id.length>1?"are":"is"}`}else i+=" an entity"}else e.entity_id&&(i+=` ${t.states[e.entity_id]?(0,c.C)(t.states[e.entity_id]):e.entity_id} is`);const a=[],o=t.states[Array.isArray(e.entity_id)?e.entity_id[0]:e.entity_id];if(Array.isArray(e.state))for(const i of e.state.values())a.push(e.attribute?(0,r.a)(t.localize,o,t.locale,t.config,t.entities,e.attribute,i).toString():(0,l.D1)(t.localize,o,t.locale,t.config,t.entities,i));else""!==e.state&&a.push(e.attribute?(0,r.a)(t.localize,o,t.locale,t.config,t.entities,e.attribute,e.state).toString():(0,l.D1)(t.localize,o,t.locale,t.config,t.entities,e.state.toString()));0===a.length&&a.push("a state");if(i+=` ${s.format(a)}`,e.for){const t=m(e.for);t&&(i+=` for ${t}`)}return i}if("numeric_state"===e.condition&&e.entity_id){let i="Confirm";const a=t.states[e.entity_id],o=a?(0,c.C)(a):e.entity_id;return"attribute"in e&&(i+=` ${e.attribute} from`),i+=` ${o} is`,"above"in e&&(i+=` above ${e.above}`),"below"in e&&"above"in e&&(i+=" and"),"below"in e&&(i+=` below ${e.below}`),i}if("time"===e.condition){const i=(0,o.r)(e.weekday),a=i&&i.length>0&&i.length<7;if(e.before||e.after||a){const o="string"!=typeof e.before?e.before:e.before.includes(".")?`entity ${t.states[e.before]?(0,c.C)(t.states[e.before]):e.before}`:g(e.before,t.locale,t.config),n="string"!=typeof e.after?e.after:e.after.includes(".")?`entity ${t.states[e.after]?(0,c.C)(t.states[e.after]):e.after}`:g(e.after,t.locale,t.config);let d="Confirm the ";if((n||o)&&(d+="time is "),n&&(d+="after "+n),o&&n&&(d+=" and "),o&&(d+="before "+o),(n||o)&&a&&(d+=" and the "),a){const e=i.map((e=>t.localize(`ui.panel.config.automation.editor.conditions.type.time.weekdays.${e}`)));d+=" day is "+s.format(e)}return d}}if("sun"===e.condition&&("before"in e||"after"in e)){let t="Confirm";if(!e.after&&!e.before)return t+=" sun",t;if(t+=" sun",e.after){let i="";e.after_offset&&(i="number"==typeof e.after_offset?` offset by ${(0,d.Z)(e.after_offset)}`:"string"==typeof e.after_offset?` offset by ${e.after_offset}`:` offset by ${JSON.stringify(e.after_offset)}`),t+=` after ${e.after}${i}`}return e.before&&(t+=` before ${e.before}`),t}if("zone"===e.condition&&e.entity_id&&e.zone){const i=[],a=[],o=t.states;if(Array.isArray(e.entity_id))for(const t of e.entity_id.values())o[t]&&i.push((0,c.C)(o[t])||t);else i.push(o[e.entity_id]?(0,c.C)(o[e.entity_id]):e.entity_id);if(Array.isArray(e.zone))for(const t of e.zone.values())o[t]&&a.push((0,c.C)(o[t])||t);else a.push(o[e.zone]?(0,c.C)(o[e.zone]):e.zone);const n=s.format(i),d=s.format(a);return`Confirm ${n} ${i.length>1?"are":"is"} in ${d} ${a.length>1?"zones":"zone"}`}if("device"===e.condition){if(!e.device_id)return"Device condition";const a=e,o=(0,h.b2)(t,i,a);if(o)return o;const n=t.states[a.entity_id];return`${n?(0,c.C)(n):a.entity_id} ${a.type}`}return"trigger"===e.condition?e.id?`When triggered by ${e.id}`:"Trigger condition":`${e.condition?e.condition.replace(/_/g," "):"Unknown"} condition`};a()}catch(e){a(e)}}))},81847:(e,t,i)=>{i.d(t,{h:()=>a});const a={device:"M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",and:"M4.4,16.5C4.4,15.6 4.7,14.7 5.2,13.9C5.7,13.1 6.7,12.2 8.2,11.2C7.3,10.1 6.8,9.3 6.5,8.7C6.1,8 6,7.4 6,6.7C6,5.2 6.4,4.1 7.3,3.2C8.2,2.3 9.4,2 10.9,2C12.2,2 13.3,2.4 14.2,3.2C15.1,4 15.5,5 15.5,6.1C15.5,6.9 15.3,7.6 14.9,8.3C14.5,9 13.8,9.7 12.8,10.4L11.4,11.5L15.7,16.7C16.3,15.5 16.6,14.3 16.6,12.8H18.8C18.8,15.1 18.3,17 17.2,18.5L20,21.8H17L15.7,20.3C15,20.9 14.3,21.3 13.4,21.6C12.5,21.9 11.6,22.1 10.7,22.1C8.8,22.1 7.3,21.6 6.1,20.6C5,19.5 4.4,18.2 4.4,16.5M10.7,20C12,20 13.2,19.5 14.3,18.5L9.6,12.8L9.2,13.1C7.7,14.2 7,15.3 7,16.5C7,17.6 7.3,18.4 8,19C8.7,19.6 9.5,20 10.7,20M8.5,6.7C8.5,7.6 9,8.6 10.1,9.9L11.7,8.8C12.3,8.4 12.7,8 12.9,7.6C13.1,7.2 13.2,6.7 13.2,6.2C13.2,5.6 13,5.1 12.5,4.7C12.1,4.3 11.5,4.1 10.8,4.1C10.1,4.1 9.5,4.3 9.1,4.8C8.7,5.3 8.5,5.9 8.5,6.7Z",or:"M2,4C5,10 5,14 2,20H8C13,20 19,16 22,12C19,8 13,4 8,4H2M5,6H8C11.5,6 16.3,9 19.3,12C16.3,15 11.5,18 8,18H5C6.4,13.9 6.4,10.1 5,6Z",not:"M14.08,4.61L15.92,5.4L14.8,8H19V10H13.95L12.23,14H19V16H11.38L9.92,19.4L8.08,18.61L9.2,16H5V14H10.06L11.77,10H5V8H12.63L14.08,4.61Z",state:"M6.27 17.05C6.72 17.58 7 18.25 7 19C7 20.66 5.66 22 4 22S1 20.66 1 19 2.34 16 4 16C4.18 16 4.36 16 4.53 16.05L7.6 10.69L5.86 9.7L9.95 8.58L11.07 12.67L9.33 11.68L6.27 17.05M20 16C18.7 16 17.6 16.84 17.18 18H11V16L8 19L11 22V20H17.18C17.6 21.16 18.7 22 20 22C21.66 22 23 20.66 23 19S21.66 16 20 16M12 8C12.18 8 12.36 8 12.53 7.95L15.6 13.31L13.86 14.3L17.95 15.42L19.07 11.33L17.33 12.32L14.27 6.95C14.72 6.42 15 5.75 15 5C15 3.34 13.66 2 12 2S9 3.34 9 5 10.34 8 12 8Z",numeric_state:"M4,17V9H2V7H6V17H4M22,15C22,16.11 21.1,17 20,17H16V15H20V13H18V11H20V9H16V7H20A2,2 0 0,1 22,9V10.5A1.5,1.5 0 0,1 20.5,12A1.5,1.5 0 0,1 22,13.5V15M14,15V17H8V13C8,11.89 8.9,11 10,11H12V9H8V7H12A2,2 0 0,1 14,9V11C14,12.11 13.1,13 12,13H10V15H14Z",sun:"M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z",template:"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",time:"M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z",trigger:"M10 7V9H9V15H10V17H6V15H7V9H6V7H10M16 7C17.11 7 18 7.9 18 9V15C18 16.11 17.11 17 16 17H12V7M16 9H14V15H16V9Z",zone:"M12,2C15.31,2 18,4.66 18,7.95C18,12.41 12,19 12,19C12,19 6,12.41 6,7.95C6,4.66 8.69,2 12,2M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M20,19C20,21.21 16.42,23 12,23C7.58,23 4,21.21 4,19C4,17.71 5.22,16.56 7.11,15.83L7.75,16.74C6.67,17.19 6,17.81 6,18.5C6,19.88 8.69,21 12,21C15.31,21 18,19.88 18,18.5C18,17.81 17.33,17.19 16.25,16.74L16.89,15.83C18.78,16.56 20,17.71 20,19Z"}},34838:(e,t,i)=>{i.d(t,{w:()=>a});const a=(e,t)=>e.callWS({type:"validate_config",...t})},96339:(e,t,i)=>{i.d(t,{we:()=>o});var a=i(45245);(0,a.k)("states"),(0,a.k)("entities"),(0,a.k)("devices"),(0,a.k)("areas"),(0,a.k)("localize"),(0,a.k)("locale"),(0,a.k)("config"),(0,a.k)("themes"),(0,a.k)("selectedTheme"),(0,a.k)("user"),(0,a.k)("userData"),(0,a.k)("panels");const o=(0,a.k)("extendedEntities")},26945:(e,t,i)=>{i.d(t,{AG:()=>n,Gg:()=>s,KL:()=>f,_2:()=>m,_K:()=>r,b2:()=>g,dA:()=>l,h6:()=>y,hA:()=>c,hH:()=>h,r3:()=>d});var a=i(91741),o=i(74186);const n=(e,t)=>e.callWS({type:"device_automation/action/list",device_id:t}),s=(e,t)=>e.callWS({type:"device_automation/condition/list",device_id:t}),d=(e,t)=>e.callWS({type:"device_automation/trigger/list",device_id:t}),r=(e,t)=>e.callWS({type:"device_automation/action/capabilities",action:t}),l=(e,t)=>e.callWS({type:"device_automation/condition/capabilities",condition:t}),c=(e,t)=>e.callWS({type:"device_automation/trigger/capabilities",trigger:t}),u=["device_id","domain","entity_id","type","subtype","event","condition","platform"],h=(e,t,i)=>{if(typeof t!=typeof i)return!1;for(const n in t){var a,o;if(u.includes(n))if("entity_id"!==n||(null===(a=t[n])||void 0===a?void 0:a.includes("."))===(null===(o=i[n])||void 0===o?void 0:o.includes("."))){if(!Object.is(t[n],i[n]))return!1}else if(!p(e,t[n],i[n]))return!1}for(const a in i){var n,s;if(u.includes(a))if("entity_id"!==a||(null===(n=t[a])||void 0===n?void 0:n.includes("."))===(null===(s=i[a])||void 0===s?void 0:s.includes("."))){if(!Object.is(t[a],i[a]))return!1}else if(!p(e,t[a],i[a]))return!1}return!0},p=(e,t,i)=>!(!t||!i)&&(t.includes(".")&&(t=(0,o.w1)(e)[t].id),i.includes(".")&&(i=(0,o.w1)(e)[i].id),t===i),v=(e,t,i)=>{if(!i)return"<unknown entity>";if(i.includes(".")){const t=e.states[i];return t?(0,a.C)(t):i}const n=(0,o.Mw)(t)[i];return n?(0,o.vA)(e,n)||i:"<unknown entity>"},m=(e,t,i)=>e.localize(`component.${i.domain}.device_automation.action_type.${i.type}`,"entity_name",v(e,t,i.entity_id),"subtype",i.subtype?e.localize(`component.${i.domain}.device_automation.action_subtype.${i.subtype}`)||i.subtype:"")||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),g=(e,t,i)=>e.localize(`component.${i.domain}.device_automation.condition_type.${i.type}`,"entity_name",v(e,t,i.entity_id),"subtype",i.subtype?e.localize(`component.${i.domain}.device_automation.condition_subtype.${i.subtype}`)||i.subtype:"")||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),f=(e,t,i)=>e.localize(`component.${i.domain}.device_automation.trigger_type.${i.type}`,"entity_name",v(e,t,i.entity_id),"subtype",i.subtype?e.localize(`component.${i.domain}.device_automation.trigger_subtype.${i.subtype}`)||i.subtype:"")||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),y=(e,t)=>{var i,a,o,n;return null===(i=e.metadata)||void 0===i||!i.secondary||null!==(a=t.metadata)&&void 0!==a&&a.secondary?null!==(o=e.metadata)&&void 0!==o&&o.secondary||null===(n=t.metadata)||void 0===n||!n.secondary?0:-1:1}},44547:(e,t,i)=>{i.d(t,{Pw:()=>c,TL:()=>d});var a=i(38768),o=i(57966);i(83849);(0,o.z)(["queued","parallel"]);const n=(0,a.Ry)({alias:(0,a.jt)((0,a.Z_)()),continue_on_error:(0,a.jt)((0,a.O7)()),enabled:(0,a.jt)((0,a.O7)())}),s=(0,a.Ry)({entity_id:(0,a.jt)((0,a.G0)([(0,a.Z_)(),(0,a.IX)((0,a.Z_)())])),device_id:(0,a.jt)((0,a.G0)([(0,a.Z_)(),(0,a.IX)((0,a.Z_)())])),area_id:(0,a.jt)((0,a.G0)([(0,a.Z_)(),(0,a.IX)((0,a.Z_)())]))}),d=(0,a.f0)(n,(0,a.Ry)({service:(0,a.jt)((0,a.Z_)()),service_template:(0,a.jt)((0,a.Z_)()),entity_id:(0,a.jt)((0,a.Z_)()),target:(0,a.jt)(s),data:(0,a.jt)((0,a.Ry)()),response_variable:(0,a.jt)((0,a.Z_)())})),r=(0,a.f0)(n,(0,a.Ry)({service:(0,a.i0)("media_player.play_media"),target:(0,a.jt)((0,a.Ry)({entity_id:(0,a.jt)((0,a.Z_)())})),entity_id:(0,a.jt)((0,a.Z_)()),data:(0,a.Ry)({media_content_id:(0,a.Z_)(),media_content_type:(0,a.Z_)()}),metadata:(0,a.Ry)()})),l=(0,a.f0)(n,(0,a.Ry)({service:(0,a.i0)("scene.turn_on"),target:(0,a.jt)((0,a.Ry)({entity_id:(0,a.jt)((0,a.Z_)())})),entity_id:(0,a.jt)((0,a.Z_)()),metadata:(0,a.Ry)()}));const c=e=>{if("delay"in e)return"delay";if("wait_template"in e)return"wait_template";if(["condition","and","or","not"].some((t=>t in e)))return"check_condition";if("event"in e)return"fire_event";if("device_id"in e)return"device_action";if("scene"in e)return"activate_scene";if("repeat"in e)return"repeat";if("choose"in e)return"choose";if("if"in e)return"if";if("wait_for_trigger"in e)return"wait_for_trigger";if("variables"in e)return"variables";if("stop"in e)return"stop";if("parallel"in e)return"parallel";if("service"in e){if("metadata"in e){if((0,a.is)(e,l))return"activate_scene";if((0,a.is)(e,r))return"play_media"}return"service"}return"unknown"}},31991:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{Q:()=>y});var o=i(8395),n=i(91168),s=i(76680),d=i(91741),r=i(61761),l=i(29937),c=i(26945),u=i(57292),h=i(74186),p=i(5986),v=i(44547),m=i(34992),g=e([l,m]);[l,m]=g.then?(await g)():g;const f="ui.panel.config.automation.editor.actions.type",y=(e,t,i,a,o=!1)=>{try{return _(e,t,i,a,o)}catch(e){console.error(e);let t="Error in describing action";return e.message&&(t+=": "+e.message),t}},_=(e,t,i,a,g=!1)=>{if(i.alias&&!g)return i.alias;if(a||(a=(0,v.Pw)(i)),"service"===a){const a=i,o=[];if(a.target)for(const[i,n]of Object.entries({area_id:"areas",device_id:"devices",entity_id:"entities"})){if(!(i in a.target))continue;const s=Array.isArray(a.target[i])?a.target[i]:[a.target[i]];for(const a of s){if((0,r.J)(a)){o.push(e.localize(`${f}.service.description.target_template`,{name:n}));break}if("entity_id"===i)if(a.includes(".")){const t=e.states[a];t?o.push((0,d.C)(t)):o.push(a)}else{const i=(0,h.Mw)(t)[a];i?o.push((0,h.vA)(e,i)||a):o.push(e.localize(`${f}.service.description.target_unknown_entity`))}else if("device_id"===i){const t=e.devices[a];t?o.push((0,u.jL)(t,e)):o.push(e.localize(`${f}.service.description.target_unknown_device`))}else if("area_id"===i){const t=e.areas[a];null!=t&&t.name?o.push(t.name):o.push(e.localize(`${f}.service.description.target_unknown_area`))}else o.push(a)}}if(a.service_template||a.service&&(0,r.J)(a.service))return e.localize(`${f}.service.description.service_based_on_template`,{targets:(0,m.z)(e.locale,o)});if(a.service){const[t,i]=a.service.split(".",2),n=e.services[t][i];return e.localize(`${f}.service.description.service_based_on_name`,{name:n?`${(0,p.Lh)(e.localize,t)}: ${n.name}`:a.service,targets:(0,m.z)(e.locale,o)})}return e.localize(`${f}.service.description.service`)}if("delay"===a){const t=i;let a;return a="number"==typeof t.delay?e.localize(`${f}.delay.description.duration_string`,{duration:(0,n.Z)(t.delay)}):"string"==typeof t.delay?(0,r.J)(t.delay)?e.localize(`${f}.delay.description.duration_template`):e.localize(`${f}.delay.description.duration_string`,{duration:t.delay||e.localize(`${f}.delay.description.duration_unknown`)}):t.delay?e.localize(`${f}.delay.description.duration_string`,{duration:(0,o.L)(t.delay)}):e.localize(`${f}.delay.description.duration_string`,{duration:e.localize(`${f}.delay.description.duration_unknown`)}),e.localize(`${f}.delay.description.full`,{duration:a})}if("activate_scene"===a){const t=i;let a;var _;if("scene"in t)a=t.scene;else a=(null===(_=t.target)||void 0===_?void 0:_.entity_id)||t.entity_id;if(!a)return e.localize(`${f}.activate_scene.description.activate_scene`);const o=a?e.states[a]:void 0;return e.localize(`${f}.activate_scene.description.activate_scene_with_name`,{name:o?(0,d.C)(o):a})}if("play_media"===a){var k;const t=i,a=(null===(k=t.target)||void 0===k?void 0:k.entity_id)||t.entity_id,o=a?e.states[a]:void 0;return e.localize(`${f}.play_media.description.full`,{hasMedia:t.metadata.title||t.data.media_content_id,media:t.metadata.title||t.data.media_content_id,hasMediaPlayer:!!o||void 0!==a,mediaPlayer:o?(0,d.C)(o):a})}if("wait_for_trigger"===a){const a=i,o=(0,s.r)(a.wait_for_trigger);if(!o||0===o.length)return e.localize(`${f}.wait_for_trigger.description.wait_for_a_trigger`);const n=o.map((i=>(0,l.R)(i,e,t)));return e.localize(`${f}.wait_for_trigger.description.wait_for_triggers_with_name`,{triggers:(0,m.z)(e.locale,n)})}if("variables"===a){const t=i;return e.localize(`${f}.variables.description.full`,{names:(0,m.z)(e.locale,Object.keys(t.variables))})}if("fire_event"===a){const t=i;return(0,r.J)(t.event)?e.localize(`${f}.event.description.full`,{name:e.localize(`${f}.event.description.template`)}):e.localize(`${f}.event.description.full`,{name:t.event})}if("wait_template"===a)return e.localize(`${f}.wait_template.description.full`);if("stop"===a){const t=i;return e.localize(`${f}.stop.description.full`,{hasReason:void 0!==t.stop,reason:t.stop})}if("if"===a){const a=i;let o=[];if(Array.isArray(a.if)){(0,s.r)(a.if).forEach((i=>{o.push((0,l.m)(i,e,t))}))}else o=[a.if];let n=[];if(a.else)if(Array.isArray(a.else)){(0,s.r)(a.else).forEach((i=>{n.push(y(e,t,i,void 0))}))}else n=[y(e,t,a.else,void 0)];let d=[];if(Array.isArray(a.then)){(0,s.r)(a.then).forEach((i=>{d.push(y(e,t,i,void 0))}))}else d=[y(e,t,a.then,void 0)];return e.localize(`${f}.if.description.full`,{hasElse:void 0!==a.else,action:(0,m.z)(e.locale,d),conditions:(0,m.z)(e.locale,o),elseAction:(0,m.z)(e.locale,n)})}if("choose"===a){const t=i;if(t.choose){const i=(0,s.r)(t.choose).length+(t.default?1:0);return e.localize(`${f}.choose.description.full`,{number:i})}return e.localize(`${f}.choose.description.no_action`)}if("repeat"===a){const a=i;let o="";if("count"in a.repeat){const t=a.repeat.count;o=e.localize(`${f}.repeat.description.count`,{count:t})}else if("while"in a.repeat){const i=(0,s.r)(a.repeat.while).map((i=>(0,l.m)(i,e,t)));o=e.localize(`${f}.repeat.description.while`,{conditions:(0,m.z)(e.locale,i)})}else if("until"in a.repeat){const i=(0,s.r)(a.repeat.until).map((i=>(0,l.m)(i,e,t)));o=e.localize(`${f}.repeat.description.until`,{conditions:(0,m.z)(e.locale,i)})}else if("for_each"in a.repeat){const t=(0,s.r)(a.repeat.for_each).map((e=>JSON.stringify(e)));o=e.localize(`${f}.repeat.description.for_each`,{items:(0,m.z)(e.locale,t)})}return e.localize(`${f}.repeat.description.full`,{chosenAction:o})}if("check_condition"===a)return e.localize(`${f}.check_condition.description.full`,{condition:(0,l.m)(i,e,t)});if("device_action"===a){const a=i;if(!a.device_id)return"Device action";const o=(0,c._2)(e,t,a);if(o)return o;const n=e.states[a.entity_id];return`${a.type||"Perform action with"} ${n?(0,d.C)(n):a.entity_id}`}if("parallel"===a){const t=i,a=(0,s.r)(t.parallel).length;return e.localize(`${f}.parallel.description.full`,{number:a})}return a};a()}catch(e){a(e)}}))},21016:(e,t,i)=>{i.d(t,{n:()=>a});const a=(e,t)=>e.callWS({type:"execute_script",sequence:t})},40451:(e,t,i)=>{i.d(t,{H:()=>a});const a={calendar:"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z",device:"M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",event:"M10,9A1,1 0 0,1 11,8A1,1 0 0,1 12,9V13.47L13.21,13.6L18.15,15.79C18.68,16.03 19,16.56 19,17.14V21.5C18.97,22.32 18.32,22.97 17.5,23H11C10.62,23 10.26,22.85 10,22.57L5.1,18.37L5.84,17.6C6.03,17.39 6.3,17.28 6.58,17.28H6.8L10,19V9M11,5A4,4 0 0,1 15,9C15,10.5 14.2,11.77 13,12.46V11.24C13.61,10.69 14,9.89 14,9A3,3 0 0,0 11,6A3,3 0 0,0 8,9C8,9.89 8.39,10.69 9,11.24V12.46C7.8,11.77 7,10.5 7,9A4,4 0 0,1 11,5M11,3A6,6 0 0,1 17,9C17,10.7 16.29,12.23 15.16,13.33L14.16,12.88C15.28,11.96 16,10.56 16,9A5,5 0 0,0 11,4A5,5 0 0,0 6,9C6,11.05 7.23,12.81 9,13.58V14.66C6.67,13.83 5,11.61 5,9A6,6 0 0,1 11,3Z",state:"M6.27 17.05C6.72 17.58 7 18.25 7 19C7 20.66 5.66 22 4 22S1 20.66 1 19 2.34 16 4 16C4.18 16 4.36 16 4.53 16.05L7.6 10.69L5.86 9.7L9.95 8.58L11.07 12.67L9.33 11.68L6.27 17.05M20 16C18.7 16 17.6 16.84 17.18 18H11V16L8 19L11 22V20H17.18C17.6 21.16 18.7 22 20 22C21.66 22 23 20.66 23 19S21.66 16 20 16M12 8C12.18 8 12.36 8 12.53 7.95L15.6 13.31L13.86 14.3L17.95 15.42L19.07 11.33L17.33 12.32L14.27 6.95C14.72 6.42 15 5.75 15 5C15 3.34 13.66 2 12 2S9 3.34 9 5 10.34 8 12 8Z",geo_location:"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z",homeassistant:"M21.8,13H20V21H13V17.67L15.79,14.88L16.5,15C17.66,15 18.6,14.06 18.6,12.9C18.6,11.74 17.66,10.8 16.5,10.8A2.1,2.1 0 0,0 14.4,12.9L14.5,13.61L13,15.13V9.65C13.66,9.29 14.1,8.6 14.1,7.8A2.1,2.1 0 0,0 12,5.7A2.1,2.1 0 0,0 9.9,7.8C9.9,8.6 10.34,9.29 11,9.65V15.13L9.5,13.61L9.6,12.9A2.1,2.1 0 0,0 7.5,10.8A2.1,2.1 0 0,0 5.4,12.9A2.1,2.1 0 0,0 7.5,15L8.21,14.88L11,17.67V21H4V13H2.25C1.83,13 1.42,13 1.42,12.79C1.43,12.57 1.85,12.15 2.28,11.72L11,3C11.33,2.67 11.67,2.33 12,2.33C12.33,2.33 12.67,2.67 13,3L17,7V6H19V9L21.78,11.78C22.18,12.18 22.59,12.59 22.6,12.8C22.6,13 22.2,13 21.8,13M7.5,12A0.9,0.9 0 0,1 8.4,12.9A0.9,0.9 0 0,1 7.5,13.8A0.9,0.9 0 0,1 6.6,12.9A0.9,0.9 0 0,1 7.5,12M16.5,12C17,12 17.4,12.4 17.4,12.9C17.4,13.4 17,13.8 16.5,13.8A0.9,0.9 0 0,1 15.6,12.9A0.9,0.9 0 0,1 16.5,12M12,6.9C12.5,6.9 12.9,7.3 12.9,7.8C12.9,8.3 12.5,8.7 12,8.7C11.5,8.7 11.1,8.3 11.1,7.8C11.1,7.3 11.5,6.9 12,6.9Z",mqtt:"M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z",numeric_state:"M4,17V9H2V7H6V17H4M22,15C22,16.11 21.1,17 20,17H16V15H20V13H18V11H20V9H16V7H20A2,2 0 0,1 22,9V10.5A1.5,1.5 0 0,1 20.5,12A1.5,1.5 0 0,1 22,13.5V15M14,15V17H8V13C8,11.89 8.9,11 10,11H12V9H8V7H12A2,2 0 0,1 14,9V11C14,12.11 13.1,13 12,13H10V15H14Z",sun:"M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z",conversation:"M8,7A2,2 0 0,1 10,9V14A2,2 0 0,1 8,16A2,2 0 0,1 6,14V9A2,2 0 0,1 8,7M14,14C14,16.97 11.84,19.44 9,19.92V22H7V19.92C4.16,19.44 2,16.97 2,14H4A4,4 0 0,0 8,18A4,4 0 0,0 12,14H14M21.41,9.41L17.17,13.66L18.18,10H14A2,2 0 0,1 12,8V4A2,2 0 0,1 14,2H20A2,2 0 0,1 22,4V8C22,8.55 21.78,9.05 21.41,9.41Z",tag:"M18,6H13A2,2 0 0,0 11,8V10.28C10.41,10.62 10,11.26 10,12A2,2 0 0,0 12,14C13.11,14 14,13.1 14,12C14,11.26 13.6,10.62 13,10.28V8H16V16H8V8H10V6H8L6,6V18H18M20,20H4V4H20M20,2H4A2,2 0 0,0 2,4V20A2,2 0 0,0 4,22H20C21.11,22 22,21.1 22,20V4C22,2.89 21.11,2 20,2Z",template:"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",time:"M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z",time_pattern:"M11,17A1,1 0 0,0 12,18A1,1 0 0,0 13,17A1,1 0 0,0 12,16A1,1 0 0,0 11,17M11,3V7H13V5.08C16.39,5.57 19,8.47 19,12A7,7 0 0,1 12,19A7,7 0 0,1 5,12C5,10.32 5.59,8.78 6.58,7.58L12,13L13.41,11.59L6.61,4.79V4.81C4.42,6.45 3,9.05 3,12A9,9 0 0,0 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M18,12A1,1 0 0,0 17,11A1,1 0 0,0 16,12A1,1 0 0,0 17,13A1,1 0 0,0 18,12M6,12A1,1 0 0,0 7,13A1,1 0 0,0 8,12A1,1 0 0,0 7,11A1,1 0 0,0 6,12Z",webhook:"M10.46,19C9,21.07 6.15,21.59 4.09,20.15C2.04,18.71 1.56,15.84 3,13.75C3.87,12.5 5.21,11.83 6.58,11.77L6.63,13.2C5.72,13.27 4.84,13.74 4.27,14.56C3.27,16 3.58,17.94 4.95,18.91C6.33,19.87 8.26,19.5 9.26,18.07C9.57,17.62 9.75,17.13 9.82,16.63V15.62L15.4,15.58L15.47,15.47C16,14.55 17.15,14.23 18.05,14.75C18.95,15.27 19.26,16.43 18.73,17.35C18.2,18.26 17.04,18.58 16.14,18.06C15.73,17.83 15.44,17.46 15.31,17.04L11.24,17.06C11.13,17.73 10.87,18.38 10.46,19M17.74,11.86C20.27,12.17 22.07,14.44 21.76,16.93C21.45,19.43 19.15,21.2 16.62,20.89C15.13,20.71 13.9,19.86 13.19,18.68L14.43,17.96C14.92,18.73 15.75,19.28 16.75,19.41C18.5,19.62 20.05,18.43 20.26,16.76C20.47,15.09 19.23,13.56 17.5,13.35C16.96,13.29 16.44,13.36 15.97,13.53L15.12,13.97L12.54,9.2H12.32C11.26,9.16 10.44,8.29 10.47,7.25C10.5,6.21 11.4,5.4 12.45,5.44C13.5,5.5 14.33,6.35 14.3,7.39C14.28,7.83 14.11,8.23 13.84,8.54L15.74,12.05C16.36,11.85 17.04,11.78 17.74,11.86M8.25,9.14C7.25,6.79 8.31,4.1 10.62,3.12C12.94,2.14 15.62,3.25 16.62,5.6C17.21,6.97 17.09,8.47 16.42,9.67L15.18,8.95C15.6,8.14 15.67,7.15 15.27,6.22C14.59,4.62 12.78,3.85 11.23,4.5C9.67,5.16 8.97,7 9.65,8.6C9.93,9.26 10.4,9.77 10.97,10.11L11.36,10.32L8.29,15.31C8.32,15.36 8.36,15.42 8.39,15.5C8.88,16.41 8.54,17.56 7.62,18.05C6.71,18.54 5.56,18.18 5.06,17.24C4.57,16.31 4.91,15.16 5.83,14.67C6.22,14.46 6.65,14.41 7.06,14.5L9.37,10.73C8.9,10.3 8.5,9.76 8.25,9.14Z",persistent_notification:"M13 11H11V5H13M13 15H11V13H13M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",zone:"M12,2C15.31,2 18,4.66 18,7.95C18,12.41 12,19 12,19C12,19 6,12.41 6,7.95C6,4.66 8.69,2 12,2M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M20,19C20,21.21 16.42,23 12,23C7.58,23 4,21.21 4,19C4,17.71 5.22,16.56 7.11,15.83L7.75,16.74C6.67,17.19 6,17.81 6,18.5C6,19.88 8.69,21 12,21C15.31,21 18,19.88 18,18.5C18,17.81 17.33,17.19 16.25,16.74L16.89,15.83C18.78,16.56 20,17.71 20,19Z"}},20515:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{a0:()=>q,oL:()=>R});var o=i(17463),n=(i(44577),i(3239)),s=i(68144),d=i(79932),r=i(83448),l=i(92610),c=i(85157),u=i(55642),h=i(47181),p=i(21780),v=i(34620),m=(i(9381),i(81545),i(22098),i(46583),i(5666),i(29891)),g=i(34838),f=i(44547),y=i(31991),_=i(21016),k=i(26765),b=i(11654),$=i(81796),C=(i(86326),i(31406),i(12783)),x=(i(77288),i(6591),i(40682)),A=i(69267),M=i(60652),w=(i(72469),i(38279)),V=(i(30928),i(32604),i(15519)),H=(i(62040),i(96339)),L=e([y,C,x,A,M,w,V]);[y,C,x,A,M,w,V]=L.then?(await L)():L;const z="M18.75 22.16L16 19.16L17.16 18L18.75 19.59L22.34 16L23.5 17.41L18.75 22.16M13 13V7H11V13H13M13 17V15H11V17H13M12 2C17.5 2 22 6.5 22 12L21.91 13.31C21.31 13.11 20.67 13 20 13C16.69 13 14 15.69 14 19C14 19.95 14.22 20.85 14.62 21.65C13.78 21.88 12.91 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2Z",B="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",Z="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",O="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",S="M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",T="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",P="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",I="M8,5.14V19.14L19,12.14L8,5.14Z",E="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",F="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",U="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z",N="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9",R=e=>{if(e)return"service"in e||"scene"in e?(0,f.Pw)(e):["and","or","not"].some((t=>t in e))?"condition":Object.keys(m.a).find((t=>t in e))},q=(e,t)=>{var i,a;t.stopPropagation();const o=null===(i=t.target)||void 0===i?void 0:i.name;if(!o)return;const n=(null===(a=t.detail)||void 0===a?void 0:a.value)||t.target.value;if((e.action[o]||"")===n)return;let s;n?s={...e.action,[o]:n}:(s={...e.action},delete s[o]),(0,h.B)(e,"value-changed",{value:s})},D=e=>e.preventDefault();(0,o.Z)([(0,d.Mo)("ha-automation-action-row")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"action",value:void 0},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"hideMenu",value:()=>!1},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"field",decorators:[(0,c.t)({key:"automationClipboard",state:!1,subscribe:!0,storage:"sessionStorage"})],key:"_clipboard",value:void 0},{kind:"field",decorators:[(0,d.SB)(),(0,l.F)({context:H.we,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_warnings",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_uiModeAvailable",value:()=>!0},{kind:"field",decorators:[(0,d.SB)()],key:"_yamlMode",value:()=>!1},{kind:"field",decorators:[(0,d.IO)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"method",key:"willUpdate",value:function(e){if(!e.has("action"))return;const t=R(this.action);this._uiModeAvailable=void 0!==t&&!m.l.has(t),this._uiModeAvailable||this._yamlMode||(this._yamlMode=!0)}},{kind:"method",key:"updated",value:function(e){if(e.has("action")&&this._yamlMode){const e=this._yamlEditor;e&&e.value!==this.action&&e.setValue(this.action)}}},{kind:"method",key:"render",value:function(){const e=R(this.action),t=this._yamlMode;return s.dy` <ha-card outlined> ${!1===this.action.enabled?s.dy`<div class="disabled-bar"> ${this.hass.localize("ui.panel.config.automation.editor.actions.disabled")} </div>`:""} <ha-expansion-panel leftChevron> <h3 slot="header"> <ha-svg-icon class="action-icon" .path="${m.a[e]}"></ha-svg-icon> ${(0,p.f)((0,y.Q)(this.hass,this._entityReg,this.action))} </h3> <slot name="icons" slot="icons"></slot> ${"condition"!==e&&!0===this.action.continue_on_error?s.dy`<div slot="icons"> <ha-svg-icon .path="${z}"></ha-svg-icon> <simple-tooltip animation-delay="0"> ${this.hass.localize("ui.panel.config.automation.editor.actions.continue_on_error")} </simple-tooltip> </div> `:s.Ld} ${this.hideMenu?"":s.dy` <ha-button-menu slot="icons" @action="${this._handleAction}" @click="${D}" fixed> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${P}"></ha-icon-button> <mwc-list-item graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.actions.run")} <ha-svg-icon slot="graphic" .path="${I}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.rename")} <ha-svg-icon slot="graphic" .path="${F}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.re_order")} <ha-svg-icon slot="graphic" .path="${U}"></ha-svg-icon> </mwc-list-item> <li divider role="separator"></li> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")} <ha-svg-icon slot="graphic" .path="${S}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} <ha-svg-icon slot="graphic" .path="${Z}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} <ha-svg-icon slot="graphic" .path="${O}"></ha-svg-icon> </mwc-list-item> <li divider role="separator"></li> <mwc-list-item .disabled="${!this._uiModeAvailable}" graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.edit_ui")} ${t?"":s.dy`<ha-svg-icon class="selected_menu_item" slot="graphic" .path="${B}"></ha-svg-icon>`} </mwc-list-item> <mwc-list-item .disabled="${!this._uiModeAvailable}" graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.edit_yaml")} ${t?s.dy`<ha-svg-icon class="selected_menu_item" slot="graphic" .path="${B}"></ha-svg-icon>`:""} </mwc-list-item> <li divider role="separator"></li> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${!1===this.action.enabled?this.hass.localize("ui.panel.config.automation.editor.actions.enable"):this.hass.localize("ui.panel.config.automation.editor.actions.disable")} <ha-svg-icon slot="graphic" .path="${!1===this.action.enabled?E:N}"></ha-svg-icon> </mwc-list-item> <mwc-list-item class="warning" graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} <ha-svg-icon class="warning" slot="graphic" .path="${T}"></ha-svg-icon> </mwc-list-item> </ha-button-menu> `} <div class="${(0,r.$)({"card-content":!0,disabled:!1===this.action.enabled})}"> ${this._warnings?s.dy`<ha-alert alert-type="warning" .title="${this.hass.localize("ui.errors.config.editor_not_supported")}"> ${this._warnings.length>0&&void 0!==this._warnings[0]?s.dy` <ul> ${this._warnings.map((e=>s.dy`<li>${e}</li>`))} </ul>`:""} ${this.hass.localize("ui.errors.config.edit_in_yaml_supported")} </ha-alert>`:""} ${t?s.dy` ${void 0===e?s.dy` ${this.hass.localize("ui.panel.config.automation.editor.actions.unsupported_action","action",e)} `:""} <ha-yaml-editor .hass="${this.hass}" .defaultValue="${this.action}" .readOnly="${this.disabled}" @value-changed="${this._onYamlChange}"></ha-yaml-editor> `:s.dy` <div @ui-mode-not-available="${this._handleUiModeNotAvailable}"> ${(0,u.h)(`ha-automation-action-${e}`,{hass:this.hass,action:this.action,narrow:this.narrow,reOrderMode:this.reOrderMode,disabled:this.disabled})} </div> `} </div> </ha-expansion-panel> </ha-card> `}},{kind:"method",key:"_handleUiModeNotAvailable",value:function(e){e.stopPropagation(),this._warnings=(0,v.p)(this.hass,e.detail).warnings,this._yamlMode||(this._yamlMode=!0)}},{kind:"method",key:"_handleAction",value:async function(e){switch(e.detail.index){case 0:this._runAction();break;case 1:await this._renameAction();break;case 2:(0,h.B)(this,"re-order");break;case 3:(0,h.B)(this,"duplicate");break;case 4:this._setClipboard();break;case 5:this._setClipboard(),(0,h.B)(this,"value-changed",{value:null});break;case 6:this._switchUiMode(),this.expand();break;case 7:this._switchYamlMode(),this.expand();break;case 8:this._onDisable();break;case 9:this._onDelete()}}},{kind:"method",key:"_setClipboard",value:function(){this._clipboard={...this._clipboard,action:(0,n.Z)(this.action)}}},{kind:"method",key:"_onDisable",value:function(){var e;const t=!(null===(e=this.action.enabled)||void 0===e||e),i={...this.action,enabled:t};var a;((0,h.B)(this,"value-changed",{value:i}),this._yamlMode)&&(null===(a=this._yamlEditor)||void 0===a||a.setValue(i))}},{kind:"method",key:"_runAction",value:async function(){const e=await(0,g.w)(this.hass,{action:this.action});if(e.action.valid){try{await(0,_.n)(this.hass,this.action)}catch(e){return void(0,k.Ys)(this,{title:this.hass.localize("ui.panel.config.automation.editor.actions.run_action_error"),text:e.message||e})}(0,$.C)(this,{message:this.hass.localize("ui.panel.config.automation.editor.actions.run_action_success")})}else(0,k.Ys)(this,{title:this.hass.localize("ui.panel.config.automation.editor.actions.invalid_action"),text:e.action.error})}},{kind:"method",key:"_onDelete",value:function(){(0,k.g7)(this,{title:this.hass.localize("ui.panel.config.automation.editor.actions.delete_confirm_title"),text:this.hass.localize("ui.panel.config.automation.editor.actions.delete_confirm_text"),dismissText:this.hass.localize("ui.common.cancel"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0,confirm:()=>{(0,h.B)(this,"value-changed",{value:null})}})}},{kind:"method",key:"_onYamlChange",value:function(e){e.stopPropagation(),e.detail.isValid&&(0,h.B)(this,"value-changed",{value:e.detail.value})}},{kind:"method",key:"_switchUiMode",value:function(){this._warnings=void 0,this._yamlMode=!1}},{kind:"method",key:"_switchYamlMode",value:function(){this._warnings=void 0,this._yamlMode=!0}},{kind:"method",key:"_renameAction",value:async function(){const e=await(0,k.D9)(this,{title:this.hass.localize("ui.panel.config.automation.editor.actions.change_alias"),inputLabel:this.hass.localize("ui.panel.config.automation.editor.actions.alias"),inputType:"string",placeholder:(0,p.f)((0,y.Q)(this.hass,this._entityReg,this.action,void 0,!0)),defaultValue:this.action.alias,confirmText:this.hass.localize("ui.common.submit")});if(null!==e){const i={...this.action};var t;if(""===e?delete i.alias:i.alias=e,(0,h.B)(this,"value-changed",{value:i}),this._yamlMode)null===(t=this._yamlEditor)||void 0===t||t.setValue(i)}}},{kind:"method",key:"expand",value:function(){this.updateComplete.then((()=>{this.shadowRoot.querySelector("ha-expansion-panel").expanded=!0}))}},{kind:"get",static:!0,key:"styles",value:function(){return[b.Qx,s.iv`ha-button-menu,ha-icon-button{--mdc-theme-text-primary-on-background:var(--primary-text-color)}.disabled{opacity:.5;pointer-events:none}ha-expansion-panel{--expansion-panel-summary-padding:0 0 0 8px;--expansion-panel-content-padding:0}h3{margin:0;font-size:inherit;font-weight:inherit}.action-icon{display:none}@media (min-width:870px){.action-icon{display:inline-block;color:var(--secondary-text-color);opacity:.9;margin-right:8px}}.card-content{padding:16px}.disabled-bar{background:var(--divider-color,#e0e0e0);text-align:center;border-top-right-radius:var(--ha-card-border-radius);border-top-left-radius:var(--ha-card-border-radius)}mwc-list-item[disabled]{--mdc-theme-text-primary-on-background:var(--disabled-text-color)}.warning ul{margin:4px 0}.selected_menu_item{color:var(--primary-color)}li[role=separator]{border-bottom-color:var(--divider-color)}`]}}]}}),s.oi);a()}catch(e){a(e)}}))},61788:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(34541),n=i(47838),s=(i(14271),i(3239)),d=i(68144),r=i(79932),l=i(18848),c=i(14516),u=i(47181),h=i(85415),p=(i(81545),i(74834),i(52039),i(29891)),v=i(70651),m=i(98116),g=i(20515),f=(i(86326),i(31406),i(12783)),y=(i(77288),i(6591),i(40682)),_=i(69267),k=i(60652),b=(i(72469),i(38279)),$=(i(30928),i(32604),i(15519)),C=(i(62040),i(85157)),x=e([g,f,y,_,k,b,$]);[g,f,y,_,k,b,$]=x.then?(await x)():x;const A="M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z",M="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",w="M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z",V="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",H="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z",L="__paste__";(0,a.Z)([(0,r.Mo)("ha-automation-action")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"nested",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)()],key:"actions",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"field",decorators:[(0,C.t)({key:"automationClipboard",state:!0,subscribe:!0,storage:"sessionStorage"})],key:"_clipboard",value:void 0},{kind:"field",key:"_focusLastActionOnChange",value:()=>!1},{kind:"field",key:"_actionKeys",value:()=>new WeakMap},{kind:"field",key:"_sortable",value:void 0},{kind:"method",key:"render",value:function(){var e;return d.dy` ${this.reOrderMode&&!this.nested?d.dy` <ha-alert alert-type="info" .title="${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.title")}"> ${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.description_actions")} <mwc-button slot="action" @click="${this._exitReOrderMode}"> ${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.exit")} </mwc-button> </ha-alert> `:null} <div class="actions"> ${(0,l.r)(this.actions,(e=>this._getKey(e)),((e,t)=>d.dy` <ha-automation-action-row .index="${t}" .action="${e}" .narrow="${this.narrow}" .disabled="${this.disabled}" .hideMenu="${this.reOrderMode}" .reOrderMode="${this.reOrderMode}" @duplicate="${this._duplicateAction}" @value-changed="${this._actionChanged}" @re-order="${this._enterReOrderMode}" .hass="${this.hass}"> ${this.reOrderMode?d.dy` <ha-icon-button .index="${t}" slot="icons" .label="${this.hass.localize("ui.panel.config.automation.editor.move_up")}" .path="${M}" @click="${this._moveUp}" .disabled="${0===t}"></ha-icon-button> <ha-icon-button .index="${t}" slot="icons" .label="${this.hass.localize("ui.panel.config.automation.editor.move_down")}" .path="${A}" @click="${this._moveDown}" .disabled="${t===this.actions.length-1}"></ha-icon-button> <div class="handle" slot="icons"> <ha-svg-icon .path="${w}"></ha-svg-icon> </div> `:""} </ha-automation-action-row> `))} </div> <ha-button-menu @action="${this._addAction}" .disabled="${this.disabled}" fixed> <ha-button slot="trigger" outlined .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.actions.add")}"> <ha-svg-icon .path="${V}" slot="icon"></ha-svg-icon> </ha-button> ${null!==(e=this._clipboard)&&void 0!==e&&e.action?d.dy` <mwc-list-item .value="${L}" graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.actions.paste")} (${this.hass.localize(`ui.panel.config.automation.editor.actions.type.${(0,g.oL)(this._clipboard.action)}.label`)}) <ha-svg-icon slot="graphic" .path="${H}"></ha-svg-icon></mwc-list-item>`:d.Ld} ${this._processedTypes(this.hass.localize).map((([e,t,i])=>d.dy` <mwc-list-item .value="${e}" graphic="icon"> ${t}<ha-svg-icon slot="graphic" .path="${i}"></ha-svg-icon></mwc-list-item> `))} </ha-button-menu> `}},{kind:"method",key:"updated",value:function(e){if((0,o.Z)((0,n.Z)(i.prototype),"updated",this).call(this,e),e.has("reOrderMode")&&(this.reOrderMode?this._createSortable():this._destroySortable()),e.has("actions")&&this._focusLastActionOnChange){this._focusLastActionOnChange=!1;const e=this.shadowRoot.querySelector("ha-automation-action-row:last-of-type");e.updateComplete.then((()=>{e.expand(),e.scrollIntoView(),e.focus()}))}}},{kind:"method",key:"_enterReOrderMode",value:async function(e){this.nested||(e.stopPropagation(),this.reOrderMode=!0)}},{kind:"method",key:"_exitReOrderMode",value:async function(){this.reOrderMode=!1}},{kind:"method",key:"_createSortable",value:async function(){const e=await(0,m.F)();this._sortable=new e(this.shadowRoot.querySelector(".actions"),{animation:150,fallbackClass:"sortable-fallback",handle:".handle",onChoose:e=>{e.item.placeholder=document.createComment("sort-placeholder"),e.item.after(e.item.placeholder)},onEnd:e=>{e.item.placeholder&&(e.item.placeholder.replaceWith(e.item),delete e.item.placeholder),this._dragged(e)}})}},{kind:"method",key:"_destroySortable",value:function(){var e;null===(e=this._sortable)||void 0===e||e.destroy(),this._sortable=void 0}},{kind:"method",key:"_getKey",value:function(e){return this._actionKeys.has(e)||this._actionKeys.set(e,Math.random().toString()),this._actionKeys.get(e)}},{kind:"method",key:"_addAction",value:function(e){const t=e.currentTarget.items[e.detail.index].value;let i;if(t===L)i=this.actions.concat((0,s.Z)(this._clipboard.action));else{const e=customElements.get(`ha-automation-action-${t}`);i=this.actions.concat(e?{...e.defaultConfig}:{[t]:{}})}this._focusLastActionOnChange=!0,(0,u.B)(this,"value-changed",{value:i})}},{kind:"method",key:"_moveUp",value:function(e){const t=e.target.index,i=t-1;this._move(t,i)}},{kind:"method",key:"_moveDown",value:function(e){const t=e.target.index,i=t+1;this._move(t,i)}},{kind:"method",key:"_dragged",value:function(e){e.oldIndex!==e.newIndex&&this._move(e.oldIndex,e.newIndex)}},{kind:"method",key:"_move",value:function(e,t){const i=this.actions.concat(),a=i.splice(e,1)[0];i.splice(t,0,a),(0,u.B)(this,"value-changed",{value:i})}},{kind:"method",key:"_actionChanged",value:function(e){e.stopPropagation();const t=[...this.actions],i=e.detail.value,a=e.target.index;if(null===i)t.splice(a,1);else{const e=this._getKey(t[a]);this._actionKeys.set(i,e),t[a]=i}(0,u.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_duplicateAction",value:function(e){e.stopPropagation();const t=e.target.index;(0,u.B)(this,"value-changed",{value:this.actions.concat((0,s.Z)(this.actions[t]))})}},{kind:"field",key:"_processedTypes",value(){return(0,c.Z)((e=>Object.entries(p.a).map((([t,i])=>[t,e(`ui.panel.config.automation.editor.actions.type.${t}.label`),i])).sort(((e,t)=>(0,h.$)(e[1],t[1],this.hass.locale.language)))))}},{kind:"get",static:!0,key:"styles",value:function(){return[v.Y,d.iv`ha-automation-action-row{display:block;margin-bottom:16px;scroll-margin-top:48px}ha-svg-icon{height:20px}ha-alert{display:block;margin-bottom:16px;border-radius:var(--ha-card-border-radius,12px);overflow:hidden}.handle{cursor:move;padding:12px}.handle ha-svg-icon{pointer-events:none;height:24px}`]}}]}}),d.oi);t()}catch(e){t(e)}}))},86326:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(47181);i(74535);const d=["scene"];(0,a.Z)([(0,n.Mo)("ha-automation-action-activate_scene")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)()],key:"action",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{service:"scene.turn_on",target:{entity_id:""},metadata:{}}}},{kind:"method",key:"render",value:function(){let e;var t;"scene"in this.action?e=this.action.scene:e=null===(t=this.action.target)||void 0===t?void 0:t.entity_id;return o.dy` <ha-entity-picker .hass="${this.hass}" .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.activate_scene.scene")}" .value="${e}" .disabled="${this.disabled}" @value-changed="${this._entityPicked}" .includeDomains="${d}" allow-custom-entity></ha-entity-picker> `}},{kind:"method",key:"_entityPicked",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{service:"scene.turn_on",target:{entity_id:e.detail.value},metadata:{}}})}}]}}),o.oi)},31406:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(76680),d=i(47181),r=(i(74834),i(5666),i(11654));(0,a.Z)([(0,n.Mo)("ha-automation-action-choose")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)()],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_showDefault",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{choose:[{conditions:[],sequence:[]}]}}},{kind:"method",key:"render",value:function(){const e=this.action;return o.dy` ${(e.choose?(0,s.r)(e.choose):[]).map(((e,t)=>o.dy`<ha-card> <ha-icon-button .idx="${t}" .disabled="${this.disabled}" @click="${this._removeOption}" .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.remove_option")}" .path="${"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"}"></ha-icon-button> <div class="card-content"> <h2> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.option","number",t+1)}: </h2> <h3> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.conditions")}: </h3> <ha-automation-condition nested .conditions="${(0,s.r)(e.conditions)}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" .hass="${this.hass}" .idx="${t}" @value-changed="${this._conditionChanged}"></ha-automation-condition> <h3> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.sequence")}: </h3> <ha-automation-action nested .actions="${(0,s.r)(e.sequence)||[]}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" .hass="${this.hass}" .idx="${t}" @value-changed="${this._actionChanged}"></ha-automation-action> </div> </ha-card>`))} <ha-button outlined .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.add_option")}" .disabled="${this.disabled}" @click="${this._addOption}"> <ha-svg-icon .path="${"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}" slot="icon"></ha-svg-icon> </ha-button> ${this._showDefault||e.default?o.dy` <h2> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.default")}: </h2> <ha-automation-action nested .actions="${(0,s.r)(e.default)||[]}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" @value-changed="${this._defaultChanged}" .hass="${this.hass}"></ha-automation-action> `:o.dy`<div class="link-button-row"> <button class="link" @click="${this._addDefault}" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.add_default")} </button> </div>`} `}},{kind:"method",key:"_addDefault",value:function(){this._showDefault=!0}},{kind:"method",key:"_conditionChanged",value:function(e){e.stopPropagation();const t=e.detail.value,i=e.target.idx,a=this.action.choose?[...(0,s.r)(this.action.choose)]:[];a[i].conditions=t,(0,d.B)(this,"value-changed",{value:{...this.action,choose:a}})}},{kind:"method",key:"_actionChanged",value:function(e){e.stopPropagation();const t=e.detail.value,i=e.target.idx,a=this.action.choose?[...(0,s.r)(this.action.choose)]:[];a[i].sequence=t,(0,d.B)(this,"value-changed",{value:{...this.action,choose:a}})}},{kind:"method",key:"_addOption",value:function(){const e=this.action.choose?[...(0,s.r)(this.action.choose)]:[];e.push({conditions:[],sequence:[]}),(0,d.B)(this,"value-changed",{value:{...this.action,choose:e}})}},{kind:"method",key:"_removeOption",value:function(e){const t=e.currentTarget.idx,i=this.action.choose?[...(0,s.r)(this.action.choose)]:[];i.splice(t,1),(0,d.B)(this,"value-changed",{value:{...this.action,choose:i}})}},{kind:"method",key:"_defaultChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,d.B)(this,"value-changed",{value:{...this.action,default:t}})}},{kind:"get",static:!0,key:"styles",value:function(){return[r.Qx,o.iv`ha-card{margin:16px 0}.add-card mwc-button{display:block;text-align:center}ha-icon-button{position:absolute;right:0;inset-inline-start:initial;inset-inline-end:0;direction:var(--direction);padding:4px}ha-svg-icon{height:20px}.link-button-row{padding:14px}`]}}]}}),o.oi)},12783:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(47181),r=i(85415),l=(i(86630),i(81847)),c=i(86532),u=e([c]);c=(u.then?(await u)():u)[0];(0,a.Z)([(0,n.Mo)("ha-automation-action-condition")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)()],key:"action",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{condition:"state"}}},{kind:"method",key:"render",value:function(){return o.dy` <ha-select fixedMenuPosition .label="${this.hass.localize("ui.panel.config.automation.editor.conditions.type_select")}" .disabled="${this.disabled}" .value="${this.action.condition}" naturalMenuWidth @selected="${this._typeChanged}"> ${this._processedTypes(this.hass.localize).map((([e,t,i])=>o.dy` <mwc-list-item .value="${e}" graphic="icon"> ${t}<ha-svg-icon slot="graphic" .path="${i}"></ha-svg-icon></mwc-list-item> `))} </ha-select> <ha-automation-condition-editor .condition="${this.action}" .disabled="${this.disabled}" .hass="${this.hass}" @value-changed="${this._conditionChanged}"></ha-automation-condition-editor> `}},{kind:"field",key:"_processedTypes",value(){return(0,s.Z)((e=>Object.entries(l.h).map((([t,i])=>[t,e(`ui.panel.config.automation.editor.conditions.type.${t}.label`),i])).sort(((e,t)=>(0,r.$)(e[1],t[1],this.hass.locale.language)))))}},{kind:"method",key:"_conditionChanged",value:function(e){e.stopPropagation(),(0,d.B)(this,"value-changed",{value:e.detail.value})}},{kind:"method",key:"_typeChanged",value:function(e){const t=e.target.value;if(!t)return;const i=customElements.get(`ha-automation-condition-${t}`);t!==this.action.condition&&(0,d.B)(this,"value-changed",{value:{condition:t,...i.defaultConfig}})}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`ha-select{margin-bottom:24px}`}}]}}),o.oi);t()}catch(e){t(e)}}))},77288:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(47181),d=i(61761),r=(i(47289),i(71350));(0,a.Z)([(0,n.Mo)("ha-automation-action-delay")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"action",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_timeData",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{delay:""}}},{kind:"method",key:"willUpdate",value:function(e){e.has("action")&&(this.action&&(0,d._)(this.action)?(0,s.B)(this,"ui-mode-not-available",Error(this.hass.localize("ui.errors.config.no_template_editor_support"))):this._timeData=(0,r.c)(this.action.delay))}},{kind:"method",key:"render",value:function(){return o.dy`<ha-duration-input .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.delay.delay")}" .disabled="${this.disabled}" .data="${this._timeData}" enableMillisecond @value-changed="${this._valueChanged}"></ha-duration-input>`}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;t&&(0,s.B)(this,"value-changed",{value:{...this.action,delay:t}})}}]}}),o.oi)},6591:(e,t,i)=>{var a=i(17463),o=i(92610),n=i(68144),s=i(79932),d=i(14516),r=i(47181),l=i(26945),c=i(2926);(0,a.Z)([(0,s.Mo)("ha-device-action-picker")],(function(e,t){return{F:class extends t{constructor(){super(l._2,l.AG,(e=>({device_id:e||"",domain:"",entity_id:""}))),e(this)}},d:[{kind:"get",key:"NO_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.no_actions")}},{kind:"get",key:"UNKNOWN_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.unknown_action")}}]}}),c.g);i(60033),i(68331);var u=i(96339);(0,a.Z)([(0,s.Mo)("ha-automation-action-device_id")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,s.Cb)({type:Object})],key:"action",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_deviceId",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_capabilities",value:void 0},{kind:"field",decorators:[(0,s.SB)(),(0,o.F)({context:u.we,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"field",key:"_origAction",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{device_id:"",domain:"",entity_id:""}}},{kind:"field",key:"_extraFieldsData",value:()=>(0,d.Z)(((e,t)=>{const i={};return t.extra_fields.forEach((t=>{void 0!==e[t.name]&&(i[t.name]=e[t.name])})),i}))},{kind:"method",key:"render",value:function(){var e,t;const i=this._deviceId||this.action.device_id;return n.dy` <ha-device-picker .value="${i}" .disabled="${this.disabled}" @value-changed="${this._devicePicked}" .hass="${this.hass}" label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.device_id.label")}"></ha-device-picker> <ha-device-action-picker .value="${this.action}" .deviceId="${i}" .disabled="${this.disabled}" @value-changed="${this._deviceActionPicked}" .hass="${this.hass}" label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.device_id.action")}"></ha-device-action-picker> ${null!==(e=this._capabilities)&&void 0!==e&&null!==(t=e.extra_fields)&&void 0!==t&&t.length?n.dy` <ha-form .hass="${this.hass}" .data="${this._extraFieldsData(this.action,this._capabilities)}" .schema="${this._capabilities.extra_fields}" .disabled="${this.disabled}" .computeLabel="${this._extraFieldsComputeLabelCallback(this.hass.localize)}" @value-changed="${this._extraFieldsChanged}"></ha-form> `:""} `}},{kind:"method",key:"firstUpdated",value:function(){this._capabilities||this._getCapabilities(),this.action&&(this._origAction=this.action)}},{kind:"method",key:"updated",value:function(e){const t=e.get("action");t&&!(0,l.hH)(this._entityReg,t,this.action)&&(this._deviceId=void 0,this._getCapabilities())}},{kind:"method",key:"_getCapabilities",value:async function(){this._capabilities=this.action.domain?await(0,l._K)(this.hass,this.action):void 0}},{kind:"method",key:"_devicePicked",value:function(e){e.stopPropagation(),this._deviceId=e.target.value,void 0===this._deviceId&&(0,r.B)(this,"value-changed",{value:i.defaultConfig})}},{kind:"method",key:"_deviceActionPicked",value:function(e){e.stopPropagation();let t=e.detail.value;this._origAction&&(0,l.hH)(this._entityReg,this._origAction,t)&&(t=this._origAction),(0,r.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_extraFieldsChanged",value:function(e){e.stopPropagation(),(0,r.B)(this,"value-changed",{value:{...this.action,...e.detail.value}})}},{kind:"method",key:"_extraFieldsComputeLabelCallback",value:function(e){return t=>e(`ui.panel.config.automation.editor.actions.type.device_id.extra_fields.${t.name}`)||t.name}},{kind:"field",static:!0,key:"styles",value:()=>n.iv`ha-device-picker{display:block;margin-bottom:24px}ha-device-action-picker{display:block}ha-form{display:block;margin-top:24px}`}]}}),n.oi)},40682:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(47181),d=(i(74535),i(49461),i(3555),i(18900),i(20515)),r=e([d]);d=(r.then?(await r)():r)[0];(0,a.Z)([(0,n.Mo)("ha-automation-action-event")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)()],key:"action",value:void 0},{kind:"field",decorators:[(0,n.IO)("ha-yaml-editor",!0)],key:"_yamlEditor",value:void 0},{kind:"field",key:"_actionData",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{event:"",event_data:{}}}},{kind:"method",key:"updated",value:function(e){e.has("action")&&(this._actionData&&this._actionData!==this.action.event_data&&this._yamlEditor&&this._yamlEditor.setValue(this.action.event_data),this._actionData=this.action.event_data)}},{kind:"method",key:"render",value:function(){const{event:e,event_data:t}=this.action;return o.dy` <ha-textfield .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.event.event")}" .value="${e}" .disabled="${this.disabled}" @change="${this._eventChanged}"></ha-textfield> <ha-yaml-editor .hass="${this.hass}" .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.event.event_data")}" .name="${"event_data"}" .readOnly="${this.disabled}" .defaultValue="${t}" @value-changed="${this._dataChanged}"></ha-yaml-editor> `}},{kind:"method",key:"_dataChanged",value:function(e){e.stopPropagation(),e.detail.isValid&&(this._actionData=e.detail.value,(0,d.a0)(this,e))}},{kind:"method",key:"_eventChanged",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.action,event:e.target.value}})}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`ha-textfield{display:block}`}}]}}),o.oi);t()}catch(e){t(e)}}))},69267:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(47181),d=(i(3555),i(11654)),r=i(61788),l=e([r]);r=(l.then?(await l)():l)[0];(0,a.Z)([(0,n.Mo)("ha-automation-action-if")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_showElse",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{if:[],then:[]}}},{kind:"method",key:"render",value:function(){const e=this.action;return o.dy` <h3> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.if.if")}*: </h3> <ha-automation-condition nested .conditions="${e.if}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" @value-changed="${this._ifChanged}" .hass="${this.hass}"></ha-automation-condition> <h3> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.if.then")}*: </h3> <ha-automation-action nested .actions="${e.then}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" @value-changed="${this._thenChanged}" .hass="${this.hass}"></ha-automation-action> ${this._showElse||e.else?o.dy` <h3> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.if.else")}: </h3> <ha-automation-action nested .actions="${e.else||[]}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" @value-changed="${this._elseChanged}" .hass="${this.hass}"></ha-automation-action> `:o.dy` <div class="link-button-row"> <button class="link" @click="${this._addElse}" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.if.add_else")} </button> </div>`} `}},{kind:"method",key:"_addElse",value:function(){this._showElse=!0}},{kind:"method",key:"_ifChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,s.B)(this,"value-changed",{value:{...this.action,if:t}})}},{kind:"method",key:"_thenChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,s.B)(this,"value-changed",{value:{...this.action,then:t}})}},{kind:"method",key:"_elseChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,s.B)(this,"value-changed",{value:{...this.action,else:t}})}},{kind:"get",static:!0,key:"styles",value:function(){return[d.Qx,o.iv`.link-button-row{padding:14px}`]}}]}}),o.oi);t()}catch(e){t(e)}}))},60652:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(47181),d=(i(3555),i(11654)),r=i(61788),l=e([r]);r=(l.then?(await l)():l)[0];(0,a.Z)([(0,n.Mo)("ha-automation-action-parallel")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{parallel:[]}}},{kind:"method",key:"render",value:function(){const e=this.action;return o.dy` <ha-automation-action nested .actions="${e.parallel}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" @value-changed="${this._actionsChanged}" .hass="${this.hass}"></ha-automation-action> `}},{kind:"method",key:"_actionsChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,s.B)(this,"value-changed",{value:{...this.action,parallel:t}})}},{kind:"get",static:!0,key:"styles",value:function(){return d.Qx}}]}}),o.oi);t()}catch(e){t(e)}}))},72469:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(47181);i(39076);(0,a.Z)([(0,n.Mo)("ha-automation-action-play_media")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{service:"media_player.play_media",target:{entity_id:""},data:{media_content_id:"",media_content_type:""},metadata:{}}}},{kind:"field",key:"_getSelectorValue",value:()=>(0,s.Z)((e=>{var t,i,a;return{entity_id:(null===(t=e.target)||void 0===t?void 0:t.entity_id)||e.entity_id,media_content_id:null===(i=e.data)||void 0===i?void 0:i.media_content_id,media_content_type:null===(a=e.data)||void 0===a?void 0:a.media_content_type,metadata:e.metadata}}))},{kind:"method",key:"render",value:function(){return o.dy` <ha-selector-media .hass="${this.hass}" .disabled="${this.disabled}" .value="${this._getSelectorValue(this.action)}" @value-changed="${this._valueChanged}"></ha-selector-media> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation(),(0,d.B)(this,"value-changed",{value:{service:"media_player.play_media",target:{entity_id:e.detail.value.entity_id},data:{media_content_id:e.detail.value.media_content_id,media_content_type:e.detail.value.media_content_type},metadata:e.detail.value.metadata||{}}})}}]}}),o.oi)},38279:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(47181),d=(i(3555),i(11654)),r=i(61788),l=e([r]);r=(l.then?(await l)():l)[0];const c=["count","while","until"],u=e=>c.find((t=>t in e));(0,a.Z)([(0,n.Mo)("ha-automation-action-repeat")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{repeat:{count:2,sequence:[]}}}},{kind:"method",key:"render",value:function(){const e=this.action.repeat,t=u(e);return o.dy` <ha-select .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.type_select")}" .value="${t}" .disabled="${this.disabled}" @selected="${this._typeChanged}"> ${c.map((e=>o.dy` <mwc-list-item .value="${e}"> ${this.hass.localize(`ui.panel.config.automation.editor.actions.type.repeat.type.${e}.label`)} </mwc-list-item> `))} </ha-select> <div> ${"count"===t?o.dy` <ha-textfield .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.type.count.label")}" name="count" .value="${e.count||"0"}" .disabled="${this.disabled}" @change="${this._countChanged}"></ha-textfield> `:"while"===t?o.dy` <h3> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.type.while.conditions")}: </h3> <ha-automation-condition nested .conditions="${e.while||[]}" .hass="${this.hass}" .disabled="${this.disabled}" @value-changed="${this._conditionChanged}"></ha-automation-condition>`:"until"===t?o.dy` <h3> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.type.until.conditions")}: </h3> <ha-automation-condition nested .conditions="${e.until||[]}" .hass="${this.hass}" .disabled="${this.disabled}" @value-changed="${this._conditionChanged}"></ha-automation-condition>`:""} </div> <h3> ${this.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.sequence")}: </h3> <ha-automation-action nested .actions="${e.sequence}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" @value-changed="${this._actionChanged}" .hass="${this.hass}"></ha-automation-action> `}},{kind:"method",key:"_typeChanged",value:function(e){const t=e.target.value;if(!t||t===u(this.action.repeat))return;const i="count"===t?2:[];(0,s.B)(this,"value-changed",{value:{...this.action,repeat:{[t]:i,sequence:this.action.repeat.sequence}}})}},{kind:"method",key:"_conditionChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,s.B)(this,"value-changed",{value:{...this.action,repeat:{...this.action.repeat,[u(this.action.repeat)]:t}}})}},{kind:"method",key:"_actionChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,s.B)(this,"value-changed",{value:{...this.action,repeat:{...this.action.repeat,sequence:t}}})}},{kind:"method",key:"_countChanged",value:function(e){const t=e.target.value;this.action.repeat.count!==t&&(0,s.B)(this,"value-changed",{value:{...this.action,repeat:{...this.action.repeat,count:t}}})}},{kind:"get",static:!0,key:"styles",value:function(){return[d.Qx,o.iv`ha-textfield{margin-top:16px}`]}}]}}),o.oi);t()}catch(e){t(e)}}))},30928:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(38768),r=i(47181),l=i(58831),c=i(27269),u=i(61761),h=(i(48763),i(44547));(0,a.Z)([(0,n.Mo)("ha-automation-action-service")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_action",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_responseChecked",value:()=>!1},{kind:"field",key:"_fields",value:()=>(0,s.Z)(((e,t)=>{if(!t)return{fields:{}};const i=(0,l.M)(t),a=(0,c.p)(t);return i in e&&a in e[i]?{fields:e[i][a].fields}:{fields:{}}}))},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{service:"",data:{}}}},{kind:"method",key:"willUpdate",value:function(e){var t;if(!e.has("action"))return;try{(0,d.hu)(this.action,h.TL)}catch(e){return void(0,r.B)(this,"ui-mode-not-available",e)}const i=this._fields(this.hass.services,null===(t=this.action)||void 0===t?void 0:t.service).fields;this.action&&(Object.entries(this.action).some((([e,t])=>"data"!==e&&(0,u._)(t)))||this.action.data&&Object.entries(this.action.data).some((([e,t])=>{const a=i[e];return(null==a||!a.selector||!("template"in a.selector)&&!("object"in a.selector))&&(0,u._)(t)})))?(0,r.B)(this,"ui-mode-not-available",Error(this.hass.localize("ui.errors.config.no_template_editor_support"))):this.action.entity_id?(this._action={...this.action,data:{...this.action.data,entity_id:this.action.entity_id}},delete this._action.entity_id):this._action=this.action}},{kind:"method",key:"render",value:function(){var e,t,i;if(!this._action)return o.Ld;const[a,n]=this._action.service?this._action.service.split(".",2):[void 0,void 0];return o.dy` <ha-service-control .narrow="${this.narrow}" .hass="${this.hass}" .value="${this._action}" .disabled="${this.disabled}" .showAdvanced="${null===(e=this.hass.userData)||void 0===e?void 0:e.showAdvanced}" @value-changed="${this._actionChanged}"></ha-service-control> ${a&&n&&null!==(t=this.hass.services[a])&&void 0!==t&&null!==(i=t[n])&&void 0!==i&&i.response?o.dy`<ha-settings-row .narrow="${this.narrow}"> ${this.hass.services[a][n].response.optional?o.dy`<ha-checkbox .checked="${this._action.response_variable||this._responseChecked}" .disabled="${this.disabled}" @change="${this._responseCheckboxChanged}" slot="prefix"></ha-checkbox>`:o.dy`<div slot="prefix" class="checkbox-spacer"></div>`} <span slot="heading">${this.hass.localize("ui.panel.config.automation.editor.actions.type.service.response_variable")}</span> <span slot="description"> ${this.hass.services[a][n].response.optional?this.hass.localize("ui.panel.config.automation.editor.actions.type.service.has_optional_response"):this.hass.localize("ui.panel.config.automation.editor.actions.type.service.has_response")} </span> <ha-textfield .value="${this._action.response_variable||""}" .required="${!this.hass.services[a][n].response.optional}" .disabled="${this.disabled||!this._action.response_variable&&!this._responseChecked}" @change="${this._responseVariableChanged}"></ha-textfield> </ha-settings-row>`:o.Ld} `}},{kind:"method",key:"_actionChanged",value:function(e){e.detail.value===this._action&&e.stopPropagation();const t={...this.action,...e.detail.value};if("response_variable"in this.action){var i;const[e,a]=this._action.service?this._action.service.split(".",2):[void 0,void 0];e&&a&&null!==(i=this.hass.services[e])&&void 0!==i&&i[a]&&!("response"in this.hass.services[e][a])&&(delete t.response_variable,this._responseChecked=!1)}(0,r.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_responseVariableChanged",value:function(e){const t={...this.action,response_variable:e.target.value};e.target.value||delete t.response_variable,(0,r.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_responseCheckboxChanged",value:function(e){if(this._responseChecked=e.target.checked,!this._responseChecked){const e={...this.action};delete e.response_variable,(0,r.B)(this,"value-changed",{value:e})}}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`ha-service-control{display:block;margin:0 -16px}ha-settings-row{margin:0 -16px;padding:var(--service-control-padding,0 16px)}ha-settings-row{--paper-time-input-justify-content:flex-end;--settings-row-content-width:100%;--settings-row-prefix-display:contents;border-top:var(--service-control-items-border-top,1px solid var(--divider-color))}ha-checkbox{margin-left:-16px}.checkbox-spacer{width:32px}`}}]}}),o.oi)},32604:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(47181);i(3555);(0,a.Z)([(0,n.Mo)("ha-automation-action-stop")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{stop:""}}},{kind:"method",key:"render",value:function(){const{error:e,stop:t,response_variable:i}=this.action;return o.dy` <ha-textfield .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.stop.stop")}" .value="${t}" .disabled="${this.disabled}" @change="${this._stopChanged}"></ha-textfield> <ha-textfield .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.stop.response_variable")}" .value="${i||""}" .disabled="${this.disabled}" @change="${this._responseChanged}"></ha-textfield> <ha-formfield .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.stop.error")}"> <ha-switch .disabled="${this.disabled}" .checked="${null!=e&&e}" @change="${this._errorChanged}"></ha-switch> </ha-formfield> `}},{kind:"method",key:"_stopChanged",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.action,stop:e.target.value}})}},{kind:"method",key:"_responseChanged",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.action,response_variable:e.target.value}})}},{kind:"method",key:"_errorChanged",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.action,error:e.target.checked}})}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`ha-textfield{display:block;margin-bottom:24px}`}}]}}),o.oi)},15519:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(76680),d=i(71350),r=i(47181),l=(i(47289),i(83927),i(3555),i(15491)),c=i(20515),u=e([l,c]);[l,c]=u.then?(await u)():u;(0,a.Z)([(0,n.Mo)("ha-automation-action-wait_for_trigger")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{wait_for_trigger:[]}}},{kind:"method",key:"render",value:function(){var e;const t=(0,d.c)(this.action.timeout);return o.dy` <ha-duration-input .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.wait_for_trigger.timeout")}" .data="${t}" .disabled="${this.disabled}" enableMillisecond @value-changed="${this._timeoutChanged}"></ha-duration-input> <ha-formfield .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.actions.type.wait_for_trigger.continue_timeout")}"> <ha-switch .checked="${null===(e=this.action.continue_on_timeout)||void 0===e||e}" .disabled="${this.disabled}" @change="${this._continueChanged}"></ha-switch> </ha-formfield> <ha-automation-trigger nested .triggers="${(0,s.r)(this.action.wait_for_trigger)}" .hass="${this.hass}" .disabled="${this.disabled}" .name="${"wait_for_trigger"}" .reOrderMode="${this.reOrderMode}" @value-changed="${this._valueChanged}"></ha-automation-trigger> `}},{kind:"method",key:"_timeoutChanged",value:function(e){e.stopPropagation();const t=e.detail.value;t&&(0,r.B)(this,"value-changed",{value:{...this.action,timeout:t}})}},{kind:"method",key:"_continueChanged",value:function(e){(0,r.B)(this,"value-changed",{value:{...this.action,continue_on_timeout:e.target.checked}})}},{kind:"method",key:"_valueChanged",value:function(e){(0,c.a0)(this,e)}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`ha-duration-input{display:block;margin-bottom:24px}ha-automation-trigger{display:block;margin-top:24px}`}}]}}),o.oi);t()}catch(e){t(e)}}))},62040:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932);i(68331);const s=[{name:"wait_template",selector:{template:{}}},{name:"timeout",required:!1,selector:{text:{}}},{name:"continue_on_timeout",selector:{boolean:{}}}];(0,a.Z)([(0,n.Mo)("ha-automation-action-wait_template")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"action",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{wait_template:"",continue_on_timeout:!0}}},{kind:"method",key:"render",value:function(){return o.dy` <ha-form .hass="${this.hass}" .data="${this.action}" .schema="${s}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}"></ha-form> `}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.actions.type.wait_template.${"continue_on_timeout"===e.name?"continue_timeout":e.name}`)}}]}}),o.oi)},86532:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(55642),r=i(47181),l=(i(18900),i(93748)),c=i(11654),u=i(49919),h=(i(26627),i(39521)),p=(i(98564),i(52762)),v=(i(19331),i(28761),i(42859)),m=i(39825),g=(i(19241),i(77765),e([u,h,p,v,m]));[u,h,p,v,m]=g.then?(await g)():g;(0,a.Z)([(0,n.Mo)("ha-automation-condition-editor")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"yamlMode",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"field",key:"_processedCondition",value:()=>(0,s.Z)((e=>(0,l.Gd)(e)))},{kind:"method",key:"render",value:function(){const e=this._processedCondition(this.condition),t=void 0!==customElements.get(`ha-automation-condition-${e.condition}`),i=this.yamlMode||!t;return o.dy` ${i?o.dy` ${t?"":o.dy` ${this.hass.localize("ui.panel.config.automation.editor.conditions.unsupported_condition","condition",e.condition)} `} <ha-yaml-editor .hass="${this.hass}" .defaultValue="${this.condition}" @value-changed="${this._onYamlChange}" .readOnly="${this.disabled}"></ha-yaml-editor> `:o.dy` <div> ${(0,d.h)(`ha-automation-condition-${e.condition}`,{hass:this.hass,condition:e,reOrderMode:this.reOrderMode,disabled:this.disabled})} </div> `} `}},{kind:"method",key:"_onYamlChange",value:function(e){e.stopPropagation(),e.detail.isValid&&(0,r.B)(this,"value-changed",{value:e.detail.value,yaml:!0})}},{kind:"field",static:!0,key:"styles",value:()=>c.Qx}]}}),o.oi);t()}catch(e){t(e)}}))},66748:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{a:()=>S});var o=i(17463),n=i(92610),s=(i(44577),i(3239)),d=i(68144),r=i(79932),l=i(83448),c=i(85157),u=i(47181),h=i(21780),p=i(34620),v=(i(81545),i(22098),i(46583),i(5666),i(93748)),m=i(29937),g=i(81847),f=i(34838),y=i(96339),_=i(26765),k=i(11654),b=i(86532),$=e([m,b]);[m,b]=$.then?(await $)():$;const C="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",x="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",A="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",M="M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",w="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",V="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",H="M6,22A3,3 0 0,1 3,19C3,18.4 3.18,17.84 3.5,17.37L9,7.81V6A1,1 0 0,1 8,5V4A2,2 0 0,1 10,2H14A2,2 0 0,1 16,4V5A1,1 0 0,1 15,6V7.81L20.5,17.37C20.82,17.84 21,18.4 21,19A3,3 0 0,1 18,22H6M5,19A1,1 0 0,0 6,20H18A1,1 0 0,0 19,19C19,18.79 18.93,18.59 18.82,18.43L16.53,14.47L14,17L8.93,11.93L5.18,18.43C5.07,18.59 5,18.79 5,19M13,10A1,1 0 0,0 12,11A1,1 0 0,0 13,12A1,1 0 0,0 14,11A1,1 0 0,0 13,10Z",L="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",z="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",B="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z",Z="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9",O=e=>e.preventDefault(),S=(e,t)=>{var i,a,o;t.stopPropagation();const n=null===(i=t.currentTarget)||void 0===i?void 0:i.name;if(!n)return;const s=(null===(a=t.detail)||void 0===a?void 0:a.value)||(null===(o=t.currentTarget)||void 0===o?void 0:o.value);if((e.condition[n]||"")===s)return;let d;s?d={...e.condition,[n]:s}:(d={...e.condition},delete d[n]),(0,u.B)(e,"value-changed",{value:d})};(0,o.Z)([(0,r.Mo)("ha-automation-condition-row")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"condition",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"hideMenu",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,c.t)({key:"automationClipboard",state:!1,subscribe:!0,storage:"sessionStorage"})],key:"_clipboard",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_yamlMode",value:()=>!1},{kind:"field",decorators:[(0,r.SB)()],key:"_warnings",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_testing",value:()=>!1},{kind:"field",decorators:[(0,r.SB)()],key:"_testingResult",value:void 0},{kind:"field",decorators:[(0,r.SB)(),(0,n.F)({context:y.we,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"method",key:"render",value:function(){return this.condition?d.dy` <ha-card outlined> ${!1===this.condition.enabled?d.dy`<div class="disabled-bar"> ${this.hass.localize("ui.panel.config.automation.editor.actions.disabled")} </div>`:""} <ha-expansion-panel leftChevron> <h3 slot="header"> <ha-svg-icon class="condition-icon" .path="${g.h[this.condition.condition]}"></ha-svg-icon> ${(0,h.f)((0,m.m)(this.condition,this.hass,this._entityReg))} </h3> <slot name="icons" slot="icons"></slot> ${this.hideMenu?"":d.dy` <ha-button-menu slot="icons" @action="${this._handleAction}" @click="${O}" fixed> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${V}"> </ha-icon-button> <mwc-list-item graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.conditions.test")} <ha-svg-icon slot="graphic" .path="${H}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.conditions.rename")} <ha-svg-icon slot="graphic" .path="${z}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.conditions.re_order")} <ha-svg-icon slot="graphic" .path="${B}"></ha-svg-icon> </mwc-list-item> <li divider role="separator"></li> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")} <ha-svg-icon slot="graphic" .path="${M}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} <ha-svg-icon slot="graphic" .path="${x}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} <ha-svg-icon slot="graphic" .path="${A}"></ha-svg-icon> </mwc-list-item> <li divider role="separator"></li> <mwc-list-item graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.edit_ui")} ${this._yamlMode?"":d.dy`<ha-svg-icon class="selected_menu_item" slot="graphic" .path="${C}"></ha-svg-icon>`} </mwc-list-item> <mwc-list-item graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.edit_yaml")} ${this._yamlMode?d.dy`<ha-svg-icon class="selected_menu_item" slot="graphic" .path="${C}"></ha-svg-icon>`:""} </mwc-list-item> <li divider role="separator"></li> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${!1===this.condition.enabled?this.hass.localize("ui.panel.config.automation.editor.actions.enable"):this.hass.localize("ui.panel.config.automation.editor.actions.disable")} <ha-svg-icon slot="graphic" .path="${!1===this.condition.enabled?L:Z}"></ha-svg-icon> </mwc-list-item> <mwc-list-item class="warning" graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} <ha-svg-icon class="warning" slot="graphic" .path="${w}"></ha-svg-icon> </mwc-list-item> </ha-button-menu> `} <div class="${(0,l.$)({"card-content":!0,disabled:!1===this.condition.enabled})}"> ${this._warnings?d.dy`<ha-alert alert-type="warning" .title="${this.hass.localize("ui.errors.config.editor_not_supported")}"> ${this._warnings.length>0&&void 0!==this._warnings[0]?d.dy` <ul> ${this._warnings.map((e=>d.dy`<li>${e}</li>`))} </ul>`:""} ${this.hass.localize("ui.errors.config.edit_in_yaml_supported")} </ha-alert>`:""} <ha-automation-condition-editor @ui-mode-not-available="${this._handleUiModeNotAvailable}" @value-changed="${this._handleChangeEvent}" .yamlMode="${this._yamlMode}" .disabled="${this.disabled}" .hass="${this.hass}" .condition="${this.condition}" .reOrderMode="${this.reOrderMode}"></ha-automation-condition-editor> </div> </ha-expansion-panel> <div class="testing ${(0,l.$)({active:this._testing,pass:!0===this._testingResult,error:!1===this._testingResult})}"> ${this._testingResult?this.hass.localize("ui.panel.config.automation.editor.conditions.testing_pass"):this.hass.localize("ui.panel.config.automation.editor.conditions.testing_error")} </div> </ha-card> `:d.Ld}},{kind:"method",key:"_handleUiModeNotAvailable",value:function(e){e.stopPropagation(),this._warnings=(0,p.p)(this.hass,e.detail).warnings,this._yamlMode||(this._yamlMode=!0)}},{kind:"method",key:"_handleChangeEvent",value:function(e){e.detail.yaml&&(this._warnings=void 0)}},{kind:"method",key:"_handleAction",value:async function(e){switch(e.detail.index){case 0:await this._testCondition();break;case 1:await this._renameCondition();break;case 2:(0,u.B)(this,"re-order");break;case 3:(0,u.B)(this,"duplicate");break;case 4:this._setClipboard();break;case 5:this._setClipboard(),(0,u.B)(this,"value-changed",{value:null});break;case 6:this._switchUiMode(),this.expand();break;case 7:this._switchYamlMode(),this.expand();break;case 8:this._onDisable();break;case 9:this._onDelete()}}},{kind:"method",key:"_setClipboard",value:function(){this._clipboard={...this._clipboard,condition:(0,s.Z)(this.condition)}}},{kind:"method",key:"_onDisable",value:function(){var e;const t=!(null===(e=this.condition.enabled)||void 0===e||e),i={...this.condition,enabled:t};(0,u.B)(this,"value-changed",{value:i})}},{kind:"method",key:"_onDelete",value:function(){(0,_.g7)(this,{title:this.hass.localize("ui.panel.config.automation.editor.conditions.delete_confirm_title"),text:this.hass.localize("ui.panel.config.automation.editor.conditions.delete_confirm_text"),dismissText:this.hass.localize("ui.common.cancel"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0,confirm:()=>{(0,u.B)(this,"value-changed",{value:null})}})}},{kind:"method",key:"_switchUiMode",value:function(){this._warnings=void 0,this._yamlMode=!1}},{kind:"method",key:"_switchYamlMode",value:function(){this._warnings=void 0,this._yamlMode=!0}},{kind:"method",key:"_testCondition",value:async function(){if(this._testing)return;this._testingResult=void 0,this._testing=!0;const e=this.condition;try{const t=await(0,f.w)(this.hass,{condition:e});if(this.condition!==e)return void(this._testing=!1);if(!t.condition.valid)return(0,_.Ys)(this,{title:this.hass.localize("ui.panel.config.automation.editor.conditions.invalid_condition"),text:t.condition.error}),void(this._testing=!1);let i;try{i=await(0,v.J8)(this.hass,e)}catch(t){return this.condition!==e||(0,_.Ys)(this,{title:this.hass.localize("ui.panel.config.automation.editor.conditions.test_failed"),text:t.message}),void(this._testing=!1)}this._testingResult=i.result}finally{setTimeout((()=>{this._testing=!1}),2500)}}},{kind:"method",key:"_renameCondition",value:async function(){const e=await(0,_.D9)(this,{title:this.hass.localize("ui.panel.config.automation.editor.conditions.change_alias"),inputLabel:this.hass.localize("ui.panel.config.automation.editor.conditions.alias"),inputType:"string",placeholder:(0,h.f)((0,m.m)(this.condition,this.hass,this._entityReg,!0)),defaultValue:this.condition.alias,confirmText:this.hass.localize("ui.common.submit")});if(null!==e){const t={...this.condition};""===e?delete t.alias:t.alias=e,(0,u.B)(this,"value-changed",{value:t})}}},{kind:"method",key:"expand",value:function(){this.updateComplete.then((()=>{this.shadowRoot.querySelector("ha-expansion-panel").expanded=!0}))}},{kind:"get",static:!0,key:"styles",value:function(){return[k.Qx,d.iv`ha-button-menu{--mdc-theme-text-primary-on-background:var(--primary-text-color)}.disabled{opacity:.5;pointer-events:none}ha-expansion-panel{--expansion-panel-summary-padding:0 0 0 8px;--expansion-panel-content-padding:0}h3{margin:0;font-size:inherit;font-weight:inherit}.condition-icon{display:none}@media (min-width:870px){.condition-icon{display:inline-block;color:var(--secondary-text-color);opacity:.9;margin-right:8px}}.card-content{padding:16px}.disabled-bar{background:var(--divider-color,#e0e0e0);text-align:center;border-top-right-radius:var(--ha-card-border-radius);border-top-left-radius:var(--ha-card-border-radius)}mwc-list-item[disabled]{--mdc-theme-text-primary-on-background:var(--disabled-text-color)}.testing{position:absolute;top:0px;right:0px;left:0px;text-transform:uppercase;font-weight:700;font-size:14px;background-color:var(--divider-color,#e0e0e0);color:var(--text-primary-color);max-height:0px;overflow:hidden;transition:max-height .3s;text-align:center;border-top-right-radius:var(--ha-card-border-radius,12px);border-top-left-radius:var(--ha-card-border-radius,12px)}.testing.active{max-height:100px}.testing.error{background-color:var(--accent-color)}.testing.pass{background-color:var(--success-color)}.selected_menu_item{color:var(--primary-color)}li[role=separator]{border-bottom-color:var(--divider-color)}`]}}]}}),d.oi);a()}catch(e){a(e)}}))},50364:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=(i(14271),i(3239)),n=i(68144),s=i(79932),d=i(18848),r=i(14516),l=i(47181),c=(i(74834),i(81545),i(52039),i(66748)),u=i(85415),h=i(81847),p=i(70651),v=i(98116),m=i(49919),g=(i(26627),i(98564),i(19331),i(28761),i(42859)),f=i(39825),y=(i(19241),i(77765),i(85157)),_=e([c,m,g,f]);[c,m,g,f]=_.then?(await _)():_;const k="M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z",b="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",$="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z",C="M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z",x="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",A="__paste__";(0,a.Z)([(0,s.Mo)("ha-automation-condition")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"conditions",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"nested",value:()=>!1},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"field",decorators:[(0,y.t)({key:"automationClipboard",state:!0,subscribe:!0,storage:"sessionStorage"})],key:"_clipboard",value:void 0},{kind:"field",key:"_focusLastConditionOnChange",value:()=>!1},{kind:"field",key:"_conditionKeys",value:()=>new WeakMap},{kind:"field",key:"_sortable",value:void 0},{kind:"method",key:"updated",value:function(e){if(e.has("reOrderMode")&&(this.reOrderMode?this._createSortable():this._destroySortable()),!e.has("conditions"))return;let t;if(Array.isArray(this.conditions)||(t=[this.conditions]),(t||this.conditions).forEach(((e,i)=>{"string"==typeof e&&(t=t||[...this.conditions],t[i]={condition:"template",value_template:e})})),t)(0,l.B)(this,"value-changed",{value:t});else if(this._focusLastConditionOnChange){this._focusLastConditionOnChange=!1;const e=this.shadowRoot.querySelector("ha-automation-condition-row:last-of-type");e.updateComplete.then((()=>{e.expand(),e.scrollIntoView(),e.focus()}))}}},{kind:"method",key:"render",value:function(){var e;return Array.isArray(this.conditions)?n.dy` ${this.reOrderMode&&!this.nested?n.dy` <ha-alert alert-type="info" .title="${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.title")}"> ${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.description_conditions")} <mwc-button slot="action" @click="${this._exitReOrderMode}"> ${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.exit")} </mwc-button> </ha-alert> `:null} <div class="conditions"> ${(0,d.r)(this.conditions,(e=>this._getKey(e)),((e,t)=>n.dy` <ha-automation-condition-row .index="${t}" .totalConditions="${this.conditions.length}" .condition="${e}" .hideMenu="${this.reOrderMode}" .reOrderMode="${this.reOrderMode}" .disabled="${this.disabled}" @duplicate="${this._duplicateCondition}" @move-condition="${this._move}" @value-changed="${this._conditionChanged}" @re-order="${this._enterReOrderMode}" .hass="${this.hass}"> ${this.reOrderMode?n.dy` <ha-icon-button .index="${t}" slot="icons" .label="${this.hass.localize("ui.panel.config.automation.editor.move_up")}" .path="${b}" @click="${this._moveUp}" .disabled="${0===t}"></ha-icon-button> <ha-icon-button .index="${t}" slot="icons" .label="${this.hass.localize("ui.panel.config.automation.editor.move_down")}" .path="${k}" @click="${this._moveDown}" .disabled="${t===this.conditions.length-1}"></ha-icon-button> <div class="handle" slot="icons"> <ha-svg-icon .path="${C}"></ha-svg-icon> </div> `:""} </ha-automation-condition-row> `))} </div> <ha-button-menu @action="${this._addCondition}" .disabled="${this.disabled}" fixed> <ha-button slot="trigger" outlined .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.conditions.add")}"> <ha-svg-icon .path="${x}" slot="icon"></ha-svg-icon> </ha-button> ${null!==(e=this._clipboard)&&void 0!==e&&e.condition?n.dy` <mwc-list-item .value="${A}" graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.conditions.paste")} (${this.hass.localize(`ui.panel.config.automation.editor.conditions.type.${this._clipboard.condition.condition}.label`)}) <ha-svg-icon slot="graphic" .path="${$}"></ha-svg-icon></mwc-list-item>`:n.Ld} ${this._processedTypes(this.hass.localize).map((([e,t,i])=>n.dy` <mwc-list-item .value="${e}" graphic="icon"> ${t}<ha-svg-icon slot="graphic" .path="${i}"></ha-svg-icon></mwc-list-item> `))} </ha-button-menu> `:n.Ld}},{kind:"method",key:"_enterReOrderMode",value:async function(e){this.nested||(e.stopPropagation(),this.reOrderMode=!0)}},{kind:"method",key:"_exitReOrderMode",value:async function(){this.reOrderMode=!1}},{kind:"method",key:"_createSortable",value:async function(){const e=await(0,v.F)();this._sortable=new e(this.shadowRoot.querySelector(".conditions"),{animation:150,fallbackClass:"sortable-fallback",handle:".handle",onChoose:e=>{e.item.placeholder=document.createComment("sort-placeholder"),e.item.after(e.item.placeholder)},onEnd:e=>{e.item.placeholder&&(e.item.placeholder.replaceWith(e.item),delete e.item.placeholder),this._dragged(e)}})}},{kind:"method",key:"_destroySortable",value:function(){var e;null===(e=this._sortable)||void 0===e||e.destroy(),this._sortable=void 0}},{kind:"method",key:"_getKey",value:function(e){return this._conditionKeys.has(e)||this._conditionKeys.set(e,Math.random().toString()),this._conditionKeys.get(e)}},{kind:"method",key:"_addCondition",value:function(e){const t=e.currentTarget.items[e.detail.index].value;let i;if(t===A)i=this.conditions.concat((0,o.Z)(this._clipboard.condition));else{const e=t,a=customElements.get(`ha-automation-condition-${e}`);i=this.conditions.concat({condition:e,...a.defaultConfig})}this._focusLastConditionOnChange=!0,(0,l.B)(this,"value-changed",{value:i})}},{kind:"method",key:"_moveUp",value:function(e){const t=e.target.index,i=t-1;this._move(t,i)}},{kind:"method",key:"_moveDown",value:function(e){const t=e.target.index,i=t+1;this._move(t,i)}},{kind:"method",key:"_dragged",value:function(e){e.oldIndex!==e.newIndex&&this._move(e.oldIndex,e.newIndex)}},{kind:"method",key:"_move",value:function(e,t){const i=this.conditions.concat(),a=i.splice(e,1)[0];i.splice(t,0,a),(0,l.B)(this,"value-changed",{value:i})}},{kind:"method",key:"_conditionChanged",value:function(e){e.stopPropagation();const t=[...this.conditions],i=e.detail.value,a=e.target.index;if(null===i)t.splice(a,1);else{const e=this._getKey(t[a]);this._conditionKeys.set(i,e),t[a]=i}(0,l.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_duplicateCondition",value:function(e){e.stopPropagation();const t=e.target.index;(0,l.B)(this,"value-changed",{value:this.conditions.concat((0,o.Z)(this.conditions[t]))})}},{kind:"field",key:"_processedTypes",value(){return(0,r.Z)((e=>Object.entries(h.h).map((([t,i])=>[t,e(`ui.panel.config.automation.editor.conditions.type.${t}.label`),i])).sort(((e,t)=>(0,u.$)(e[1],t[1],this.hass.locale.language)))))}},{kind:"get",static:!0,key:"styles",value:function(){return[p.Y,n.iv`ha-automation-condition-row{display:block;margin-bottom:16px;scroll-margin-top:48px}ha-svg-icon{height:20px}ha-alert{display:block;margin-bottom:16px;border-radius:var(--ha-card-border-radius,12px);overflow:hidden}.handle{cursor:move;padding:12px}.handle ha-svg-icon{pointer-events:none;height:24px}`]}}]}}),n.oi);t()}catch(e){t(e)}}))},49919:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(79932),n=i(15e3),s=e([n]);n=(s.then?(await s)():s)[0];(0,a.Z)([(0,o.Mo)("ha-automation-condition-and")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[]}}),n.w);t()}catch(e){t(e)}}))},26627:(e,t,i)=>{var a=i(17463),o=i(92610),n=i(68144),s=i(79932),d=i(14516),r=i(47181),l=i(26945),c=i(2926);(0,a.Z)([(0,s.Mo)("ha-device-condition-picker")],(function(e,t){return{F:class extends t{constructor(){super(l.b2,l.Gg,(e=>({device_id:e||"",condition:"device",domain:"",entity_id:""}))),e(this)}},d:[{kind:"get",key:"NO_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.conditions.no_conditions")}},{kind:"get",key:"UNKNOWN_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.conditions.unknown_condition")}}]}}),c.g);i(60033),i(68331);var u=i(96339);(0,a.Z)([(0,s.Mo)("ha-automation-condition-device")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Object})],key:"condition",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,s.SB)()],key:"_deviceId",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_capabilities",value:void 0},{kind:"field",decorators:[(0,s.SB)(),(0,o.F)({context:u.we,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"field",key:"_origCondition",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{device_id:"",domain:"",entity_id:""}}},{kind:"field",key:"_extraFieldsData",value:()=>(0,d.Z)(((e,t)=>{const i={};return t.extra_fields.forEach((t=>{void 0!==e[t.name]&&(i[t.name]=e[t.name])})),i}))},{kind:"method",key:"render",value:function(){var e;const t=this._deviceId||this.condition.device_id;return n.dy` <ha-device-picker .value="${t}" @value-changed="${this._devicePicked}" .hass="${this.hass}" .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.conditions.type.device.label")}"></ha-device-picker> <ha-device-condition-picker .value="${this.condition}" .deviceId="${t}" @value-changed="${this._deviceConditionPicked}" .hass="${this.hass}" .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.conditions.type.device.condition")}"></ha-device-condition-picker> ${null!==(e=this._capabilities)&&void 0!==e&&e.extra_fields?n.dy` <ha-form .hass="${this.hass}" .data="${this._extraFieldsData(this.condition,this._capabilities)}" .schema="${this._capabilities.extra_fields}" .disabled="${this.disabled}" .computeLabel="${this._extraFieldsComputeLabelCallback(this.hass.localize)}" @value-changed="${this._extraFieldsChanged}"></ha-form> `:""} `}},{kind:"method",key:"firstUpdated",value:function(){this._capabilities||this._getCapabilities(),this.condition&&(this._origCondition=this.condition)}},{kind:"method",key:"updated",value:function(e){const t=e.get("condition");t&&!(0,l.hH)(this._entityReg,t,this.condition)&&this._getCapabilities()}},{kind:"method",key:"_getCapabilities",value:async function(){const e=this.condition;this._capabilities=e.domain?await(0,l.dA)(this.hass,e):void 0}},{kind:"method",key:"_devicePicked",value:function(e){e.stopPropagation(),this._deviceId=e.target.value,void 0===this._deviceId&&(0,r.B)(this,"value-changed",{value:{...i.defaultConfig,condition:"device"}})}},{kind:"method",key:"_deviceConditionPicked",value:function(e){e.stopPropagation();let t=e.detail.value;this._origCondition&&(0,l.hH)(this._entityReg,this._origCondition,t)&&(t=this._origCondition),(0,r.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_extraFieldsChanged",value:function(e){e.stopPropagation(),(0,r.B)(this,"value-changed",{value:{...this.condition,...e.detail.value}})}},{kind:"method",key:"_extraFieldsComputeLabelCallback",value:function(e){return t=>e(`ui.panel.config.automation.editor.conditions.type.device.extra_fields.${t.name}`)||t.name}},{kind:"field",static:!0,key:"styles",value:()=>n.iv`ha-device-picker{display:block;margin-bottom:24px}ha-form{margin-top:24px}`}]}}),n.oi)},15e3:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{w:()=>c});var o=i(17463),n=i(68144),s=i(79932),d=i(47181),r=i(50364),l=e([r]);r=(l.then?(await l)():l)[0];let c=(0,o.Z)([(0,s.Mo)("ha-automation-condition-logical")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{conditions:[]}}},{kind:"method",key:"render",value:function(){return n.dy` <ha-automation-condition nested .conditions="${this.condition.conditions||[]}" @value-changed="${this._valueChanged}" .hass="${this.hass}" .disabled="${this.disabled}" .reOrderMode="${this.reOrderMode}"></ha-automation-condition> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation(),(0,d.B)(this,"value-changed",{value:{...this.condition,conditions:e.detail.value}})}}]}}),n.oi);a()}catch(e){a(e)}}))},39521:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(79932),n=i(15e3),s=e([n]);n=(s.then?(await s)():s)[0];(0,a.Z)([(0,o.Mo)("ha-automation-condition-not")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[]}}),n.w);t()}catch(e){t(e)}}))},98564:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(47181);i(68331);(0,a.Z)([(0,n.Mo)("ha-automation-condition-numeric_state")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_inputAboveIsEntity",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_inputBelowIsEntity",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{entity_id:""}}},{kind:"field",key:"_schema",value:()=>(0,s.Z)(((e,t,i)=>[{name:"entity_id",required:!0,selector:{entity:{}}},{name:"attribute",selector:{attribute:{hide_attributes:["access_token","auto_update","available_modes","away_mode","changed_by","code_format","color_modes","current_activity","device_class","editable","effect_list","effect","entity_picture","fan_mode","fan_modes","fan_speed_list","forecast","friendly_name","frontend_stream_type","has_date","has_time","hs_color","hvac_mode","hvac_modes","icon","media_album_name","media_artist","media_content_type","media_position_updated_at","media_title","next_dawn","next_dusk","next_midnight","next_noon","next_rising","next_setting","operation_list","operation_mode","options","preset_mode","preset_modes","release_notes","release_summary","release_url","restored","rgb_color","rgbw_color","shuffle","sound_mode_list","sound_mode","source_list","source_type","source","state_class","supported_features","swing_mode","swing_mode","swing_modes","title","token","unit_of_measurement","xy_color"]}},context:{filter_entity:"entity_id"}},{name:"mode_above",type:"select",required:!0,options:[["value",e("ui.panel.config.automation.editor.conditions.type.numeric_state.type_value")],["input",e("ui.panel.config.automation.editor.conditions.type.numeric_state.type_input")]]},...t?[{name:"above",selector:{entity:{domain:["input_number","number","sensor"]}}}]:[{name:"above",selector:{number:{mode:"box",min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,step:.1}}}],{name:"mode_below",type:"select",required:!0,options:[["value",e("ui.panel.config.automation.editor.conditions.type.numeric_state.type_value")],["input",e("ui.panel.config.automation.editor.conditions.type.numeric_state.type_input")]]},...i?[{name:"below",selector:{entity:{domain:["input_number","number","sensor"]}}}]:[{name:"below",selector:{number:{mode:"box",min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,step:.1}}}],{name:"value_template",selector:{template:{}}}]))},{kind:"method",key:"render",value:function(){var e,t;const i=null!==(e=this._inputAboveIsEntity)&&void 0!==e?e:"string"==typeof this.condition.above&&(this.condition.above.startsWith("input_number.")||this.condition.above.startsWith("number.")||this.condition.above.startsWith("sensor.")),a=null!==(t=this._inputBelowIsEntity)&&void 0!==t?t:"string"==typeof this.condition.below&&(this.condition.below.startsWith("input_number.")||this.condition.below.startsWith("number.")||this.condition.below.startsWith("sensor.")),n=this._schema(this.hass.localize,i,a),s={mode_above:i?"input":"value",mode_below:a?"input":"value",...this.condition};return o.dy` <ha-form .hass="${this.hass}" .data="${s}" .schema="${n}" .disabled="${this.disabled}" @value-changed="${this._valueChanged}" .computeLabel="${this._computeLabelCallback}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;this._inputAboveIsEntity="input"===t.mode_above,this._inputBelowIsEntity="input"===t.mode_below,delete t.mode_above,delete t.mode_below,(0,d.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>{switch(e.name){case"entity_id":return this.hass.localize("ui.components.entity.entity-picker.entity");case"attribute":return this.hass.localize("ui.components.entity.entity-attribute-picker.attribute");default:return this.hass.localize(`ui.panel.config.automation.editor.triggers.type.numeric_state.${e.name}`)}}}}]}}),o.oi)},52762:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(79932),n=i(15e3),s=e([n]);n=(s.then?(await s)():s)[0];(0,a.Z)([(0,o.Mo)("ha-automation-condition-or")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[]}}),n.w);t()}catch(e){t(e)}}))},19331:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(38768),d=i(71350),r=i(47181),l=(i(68331),i(88268));const c=(0,s.Ry)({alias:(0,s.jt)((0,s.Z_)()),condition:(0,s.i0)("state"),entity_id:(0,s.jt)((0,s.Z_)()),attribute:(0,s.jt)((0,s.Z_)()),state:(0,s.jt)((0,s.Z_)()),for:(0,s.jt)((0,s.G0)([(0,s.Rx)(),(0,s.Z_)(),l.H])),enabled:(0,s.jt)((0,s.O7)())}),u=[{name:"entity_id",required:!0,selector:{entity:{}}},{name:"attribute",selector:{attribute:{hide_attributes:["access_token","available_modes","color_modes","editable","effect_list","entity_picture","fan_modes","fan_speed_list","forecast","friendly_name","hvac_modes","icon","operation_list","options","preset_modes","sound_mode_list","source_list","state_class","swing_modes","token"]}},context:{filter_entity:"entity_id"}},{name:"state",required:!0,selector:{state:{}},context:{filter_entity:"entity_id",filter_attribute:"attribute"}},{name:"for",selector:{duration:{}}}];(0,a.Z)([(0,n.Mo)("ha-automation-condition-state")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{entity_id:"",state:""}}},{kind:"method",key:"shouldUpdate",value:function(e){if(e.has("condition"))try{(0,s.hu)(this.condition,c)}catch(e){return(0,r.B)(this,"ui-mode-not-available",e),!1}return!0}},{kind:"method",key:"render",value:function(){const e=(0,d.c)(this.condition.for),t={...this.condition,for:e};return o.dy` <ha-form .hass="${this.hass}" .data="${t}" .schema="${u}" .disabled="${this.disabled}" @value-changed="${this._valueChanged}" .computeLabel="${this._computeLabelCallback}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;Object.keys(t).forEach((e=>void 0===t[e]||""===t[e]?delete t[e]:{})),t.state||(t.state=""),(0,r.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>{switch(e.name){case"entity_id":return this.hass.localize("ui.components.entity.entity-picker.entity");case"attribute":return this.hass.localize("ui.components.entity.entity-attribute-picker.attribute");case"for":return this.hass.localize("ui.panel.config.automation.editor.triggers.type.state.for");default:return this.hass.localize(`ui.panel.config.automation.editor.conditions.type.state.${e.name}`)}}}}]}}),o.oi)},28761:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(47181);i(68331);(0,a.Z)([(0,n.Mo)("ha-automation-condition-sun")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{}}},{kind:"field",key:"_schema",value:()=>(0,s.Z)((e=>[{name:"before",type:"select",required:!0,options:[["sunrise",e("ui.panel.config.automation.editor.conditions.type.sun.sunrise")],["sunset",e("ui.panel.config.automation.editor.conditions.type.sun.sunset")]]},{name:"before_offset",selector:{text:{}}},{name:"after",type:"select",required:!0,options:[["sunrise",e("ui.panel.config.automation.editor.conditions.type.sun.sunrise")],["sunset",e("ui.panel.config.automation.editor.conditions.type.sun.sunset")]]},{name:"after_offset",selector:{text:{}}}]))},{kind:"method",key:"render",value:function(){const e=this._schema(this.hass.localize);return o.dy` <ha-form .schema="${e}" .data="${this.condition}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,d.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.conditions.type.sun.${e.name}`)}}]}}),o.oi)},42859:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=(i(53297),i(66748)),d=e([s]);s=(d.then?(await d)():d)[0];(0,a.Z)([(0,n.Mo)("ha-automation-condition-template")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{value_template:""}}},{kind:"method",key:"render",value:function(){const{value_template:e}=this.condition;return o.dy` <p> ${this.hass.localize("ui.panel.config.automation.editor.conditions.type.template.value_template")} * </p> <ha-code-editor .name="${"value_template"}" mode="jinja2" .hass="${this.hass}" .value="${e}" .readOnly="${this.disabled}" autocomplete-entities @value-changed="${this._valueChanged}" dir="ltr"></ha-code-editor> `}},{kind:"method",key:"_valueChanged",value:function(e){(0,s.a)(this,e)}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`p{margin-top:0}`}}]}}),o.oi);t()}catch(e){t(e)}}))},39825:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(26410),r=i(47181),l=(i(68331),e([d]));d=(l.then?(await l)():l)[0];const c=["sun","mon","tue","wed","thu","fri","sat"];(0,a.Z)([(0,n.Mo)("ha-automation-condition-time")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_inputModeBefore",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_inputModeAfter",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{}}},{kind:"field",key:"_schema",value:()=>(0,s.Z)(((e,t,i,a)=>{const o=(0,d.Bt)(t),n=c.slice(o,c.length).concat(c.slice(0,o));return[{name:"mode_after",type:"select",required:!0,options:[["value",e("ui.panel.config.automation.editor.conditions.type.time.type_value")],["input",e("ui.panel.config.automation.editor.conditions.type.time.type_input")]]},{name:"after",selector:i?{entity:{filter:[{domain:"input_datetime"},{domain:"sensor",device_class:"timestamp"}]}}:{time:{}}},{name:"mode_before",type:"select",required:!0,options:[["value",e("ui.panel.config.automation.editor.conditions.type.time.type_value")],["input",e("ui.panel.config.automation.editor.conditions.type.time.type_input")]]},{name:"before",selector:a?{entity:{filter:[{domain:"input_datetime"},{domain:"sensor",device_class:"timestamp"}]}}:{time:{}}},{type:"multi_select",name:"weekday",options:n.map((t=>[t,e(`ui.panel.config.automation.editor.conditions.type.time.weekdays.${t}`)]))}]}))},{kind:"method",key:"render",value:function(){var e,t,i,a,n,s;const d=null!==(e=this._inputModeBefore)&&void 0!==e?e:(null===(t=this.condition.before)||void 0===t?void 0:t.startsWith("input_datetime."))||(null===(i=this.condition.before)||void 0===i?void 0:i.startsWith("sensor.")),r=null!==(a=this._inputModeAfter)&&void 0!==a?a:(null===(n=this.condition.after)||void 0===n?void 0:n.startsWith("input_datetime."))||(null===(s=this.condition.after)||void 0===s?void 0:s.startsWith("sensor.")),l=this._schema(this.hass.localize,this.hass.locale,r,d),c={mode_before:d?"input":"value",mode_after:r?"input":"value",...this.condition};return o.dy` <ha-form .hass="${this.hass}" .data="${c}" .schema="${l}" .disabled="${this.disabled}" @value-changed="${this._valueChanged}" .computeLabel="${this._computeLabelCallback}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;this._inputModeAfter="input"===t.mode_after,this._inputModeBefore="input"===t.mode_before,delete t.mode_after,delete t.mode_before,Object.keys(t).forEach((e=>void 0===t[e]||""===t[e]||Array.isArray(t[e])&&0===t[e].length?delete t[e]:{})),(0,r.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.conditions.type.time.${e.name}`)}}]}}),o.oi);t()}catch(e){t(e)}}))},19241:(e,t,i)=>{var a=i(17463),o=i(34541),n=i(47838),s=(i(44577),i(14516)),d=i(68144),r=i(79932),l=i(47181),c=i(76680);i(86630);(0,a.Z)([(0,r.Mo)("ha-automation-condition-trigger")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,r.SB)()],key:"_triggers",value:()=>[]},{kind:"field",key:"_unsub",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{id:""}}},{kind:"field",key:"_schema",value:()=>(0,s.Z)((e=>[{name:"id",selector:{select:{multiple:!0,options:e.map((e=>e.id))}},required:!0}]))},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)((0,n.Z)(i.prototype),"connectedCallback",this).call(this);const e={callback:e=>this._automationUpdated(e)};(0,l.B)(this,"subscribe-automation-config",e),this._unsub=e.unsub}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)((0,n.Z)(i.prototype),"disconnectedCallback",this).call(this),this._unsub&&this._unsub()}},{kind:"method",key:"render",value:function(){if(!this._triggers.length)return this.hass.localize("ui.panel.config.automation.editor.conditions.type.trigger.no_triggers");const e=this._schema(this._triggers);return d.dy` <ha-form .schema="${e}" .data="${this.condition}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.conditions.type.trigger.${e.name}`)}},{kind:"method",key:"_automationUpdated",value:function(e){const t=new Set;this._triggers=null!=e&&e.trigger?(0,c.r)(e.trigger).filter((e=>e.id&&!t.has(e.id)&&t.add(e.id))):[]}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;"string"==typeof t.id?this._triggers.some((e=>e.id===t.id))||(t.id=""):Array.isArray(t.id)&&(t.id=t.id.filter((e=>this._triggers.some((t=>t.id===e)))),t.id.length||(t.id="")),(0,l.B)(this,"value-changed",{value:t})}}]}}),d.oi)},77765:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(47181),d=i(22311),r=i(74829);i(74535);function l(e){return(0,r.t)(e)&&"zone"!==(0,d.N)(e)}const c=["zone"];(0,a.Z)([(0,n.Mo)("ha-automation-condition-zone")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"condition",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{entity_id:"",zone:""}}},{kind:"method",key:"render",value:function(){const{entity_id:e,zone:t}=this.condition;return o.dy` <ha-entity-picker .label="${this.hass.localize("ui.panel.config.automation.editor.conditions.type.zone.entity")}" .value="${e}" @value-changed="${this._entityPicked}" .hass="${this.hass}" .disabled="${this.disabled}" allow-custom-entity .entityFilter="${l}"></ha-entity-picker> <ha-entity-picker .label="${this.hass.localize("ui.panel.config.automation.editor.conditions.type.zone.zone")}" .value="${t}" @value-changed="${this._zonePicked}" .hass="${this.hass}" .disabled="${this.disabled}" allow-custom-entity .includeDomains="${c}"></ha-entity-picker> <label id="eventlabel"> ${this.hass.localize("ui.panel.config.automation.editor.conditions.type.zone.event")} </label> `}},{kind:"method",key:"_entityPicked",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.condition,entity_id:e.detail.value}})}},{kind:"method",key:"_zonePicked",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.condition,zone:e.detail.value}})}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`ha-entity-picker:first-child{display:block;margin-bottom:24px}`}]}}),o.oi)},88268:(e,t,i)=>{i.d(t,{G:()=>o,H:()=>n});var a=i(38768);const o=(0,a.Ry)({platform:(0,a.Z_)(),id:(0,a.jt)((0,a.Z_)()),enabled:(0,a.jt)((0,a.O7)())}),n=(0,a.Ry)({days:(0,a.jt)((0,a.Rx)()),hours:(0,a.jt)((0,a.Rx)()),minutes:(0,a.jt)((0,a.Rx)()),seconds:(0,a.jt)((0,a.Rx)())})},76243:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{a:()=>I});var o=i(17463),n=i(34541),s=i(47838),d=i(92610),r=(i(44577),i(68144)),l=i(79932),c=i(83448),u=i(85157),h=i(55642),p=i(47181),v=i(21780),m=i(34620),g=i(38346),f=(i(9381),i(81545),i(22098),i(46583),i(5666),i(3555),i(93748)),y=i(29937),_=i(34838),k=i(96339),b=i(40451),$=i(26765),C=i(11654),x=(i(61354),i(57119),i(22837)),A=(i(66372),i(79636),i(31794),i(52049),i(93843),i(45188),i(16516),i(18173),i(3823),i(36499),i(8890),i(5963),i(39414)),M=(i(2329),e([y,x,A]));[y,x,A]=M.then?(await M)():M;const w="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",V="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",H="M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",L="M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",z="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",B="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",Z="M10 7V9H9V15H10V17H6V15H7V9H6V7H10M16 7C17.11 7 18 7.9 18 9V15C18 16.11 17.11 17 16 17H12V7M16 9H14V15H16V9Z",O="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z",S="M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",T="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z",P="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9",I=(e,t)=>{var i,a;t.stopPropagation();const o=null===(i=t.currentTarget)||void 0===i?void 0:i.name;if(!o)return;const n=null===(a=t.target)||void 0===a?void 0:a.value;if((e.trigger[o]||"")===n)return;let s;void 0===n||""===n?(s={...e.trigger},delete s[o]):s={...e.trigger,[o]:n},(0,p.B)(e,"value-changed",{value:s})},E=e=>e.preventDefault();(0,o.Z)([(0,l.Mo)("ha-automation-trigger-row")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"hideMenu",value:()=>!1},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,l.SB)()],key:"_warnings",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_yamlMode",value:()=>!1},{kind:"field",decorators:[(0,l.SB)()],key:"_requestShowId",value:()=>!1},{kind:"field",decorators:[(0,l.SB)()],key:"_triggered",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_triggerColor",value:()=>!1},{kind:"field",decorators:[(0,l.IO)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"field",decorators:[(0,u.t)({key:"automationClipboard",state:!1,subscribe:!0,storage:"sessionStorage"})],key:"_clipboard",value:void 0},{kind:"field",decorators:[(0,l.SB)(),(0,d.F)({context:k.we,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"field",key:"_triggerUnsub",value:void 0},{kind:"method",key:"render",value:function(){const e=void 0!==customElements.get(`ha-automation-trigger-${this.trigger.platform}`),t=this._yamlMode||!e,i="id"in this.trigger||this._requestShowId;return r.dy` <ha-card outlined> ${!1===this.trigger.enabled?r.dy` <div class="disabled-bar"> ${this.hass.localize("ui.panel.config.automation.editor.actions.disabled")} </div> `:""} <ha-expansion-panel leftChevron> <h3 slot="header"> <ha-svg-icon class="trigger-icon" .path="${b.H[this.trigger.platform]}"></ha-svg-icon> ${(0,v.f)((0,y.R)(this.trigger,this.hass,this._entityReg))} </h3> <slot name="icons" slot="icons"></slot> ${this.hideMenu?"":r.dy` <ha-button-menu slot="icons" @action="${this._handleAction}" @click="${E}" fixed> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${B}"></ha-icon-button> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.rename")} <ha-svg-icon slot="graphic" .path="${S}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.re_order")} <ha-svg-icon slot="graphic" .path="${T}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.edit_id")} <ha-svg-icon slot="graphic" .path="${Z}"></ha-svg-icon> </mwc-list-item> <li divider role="separator"></li> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.duplicate")} <ha-svg-icon slot="graphic" .path="${L}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.copy")} <ha-svg-icon slot="graphic" .path="${V}"></ha-svg-icon> </mwc-list-item> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.cut")} <ha-svg-icon slot="graphic" .path="${H}"></ha-svg-icon> </mwc-list-item> <li divider role="separator"></li> <mwc-list-item .disabled="${!e}" graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.edit_ui")} ${t?"":r.dy`<ha-svg-icon class="selected_menu_item" slot="graphic" .path="${w}"></ha-svg-icon>`} </mwc-list-item> <mwc-list-item .disabled="${!e}" graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.edit_yaml")} ${t?r.dy`<ha-svg-icon class="selected_menu_item" slot="graphic" .path="${w}"></ha-svg-icon>`:""} </mwc-list-item> <li divider role="separator"></li> <mwc-list-item graphic="icon" .disabled="${this.disabled}"> ${!1===this.trigger.enabled?this.hass.localize("ui.panel.config.automation.editor.actions.enable"):this.hass.localize("ui.panel.config.automation.editor.actions.disable")} <ha-svg-icon slot="graphic" .path="${!1===this.trigger.enabled?O:P}"></ha-svg-icon> </mwc-list-item> <mwc-list-item class="warning" graphic="icon" .disabled="${this.disabled}"> ${this.hass.localize("ui.panel.config.automation.editor.actions.delete")} <ha-svg-icon class="warning" slot="graphic" .path="${z}"></ha-svg-icon> </mwc-list-item> </ha-button-menu> `} <div class="${(0,c.$)({"card-content":!0,disabled:!1===this.trigger.enabled})}"> ${this._warnings?r.dy`<ha-alert alert-type="warning" .title="${this.hass.localize("ui.errors.config.editor_not_supported")}"> ${this._warnings.length&&void 0!==this._warnings[0]?r.dy` <ul> ${this._warnings.map((e=>r.dy`<li>${e}</li>`))} </ul>`:""} ${this.hass.localize("ui.errors.config.edit_in_yaml_supported")} </ha-alert>`:""} ${t?r.dy` ${e?"":r.dy` ${this.hass.localize("ui.panel.config.automation.editor.triggers.unsupported_platform","platform",this.trigger.platform)} `} <ha-yaml-editor .hass="${this.hass}" .defaultValue="${this.trigger}" .readOnly="${this.disabled}" @value-changed="${this._onYamlChange}"></ha-yaml-editor> `:r.dy` ${i?r.dy` <ha-textfield .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.id")}" .value="${this.trigger.id||""}" .disabled="${this.disabled}" @change="${this._idChanged}"> </ha-textfield> `:""} <div @ui-mode-not-available="${this._handleUiModeNotAvailable}"> ${(0,h.h)(`ha-automation-trigger-${this.trigger.platform}`,{hass:this.hass,trigger:this.trigger,disabled:this.disabled})} </div> `} </div> </ha-expansion-panel> <div class="triggered ${(0,c.$)({active:void 0!==this._triggered,accent:this._triggerColor})}" @click="${this._showTriggeredInfo}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.triggered")} </div> </ha-card> `}},{kind:"method",key:"updated",value:function(e){(0,n.Z)((0,s.Z)(i.prototype),"updated",this).call(this,e),e.has("trigger")&&this._subscribeTrigger()}},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)((0,s.Z)(i.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this.trigger&&this._subscribeTrigger()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,n.Z)((0,s.Z)(i.prototype),"disconnectedCallback",this).call(this),this._triggerUnsub&&(this._triggerUnsub.then((e=>e())),this._triggerUnsub=void 0),this._doSubscribeTrigger.cancel()}},{kind:"method",key:"_subscribeTrigger",value:function(){this._triggerUnsub&&(this._triggerUnsub.then((e=>e())),this._triggerUnsub=void 0),this._doSubscribeTrigger()}},{kind:"field",key:"_doSubscribeTrigger",value(){return(0,g.D)((async()=>{let e;const t=this.trigger;this._triggerUnsub&&(this._triggerUnsub.then((e=>e())),this._triggerUnsub=void 0);if(!(await(0,_.w)(this.hass,{trigger:t})).trigger.valid||this.trigger!==t)return;const i=(0,f.Xm)(this.hass,(t=>{void 0!==e?(clearTimeout(e),this._triggerColor=!this._triggerColor):this._triggerColor=!1,this._triggered=t,e=window.setTimeout((()=>{this._triggered=void 0,e=void 0}),5e3)}),t);i.catch((()=>{this._triggerUnsub===i&&(this._triggerUnsub=void 0)})),this._triggerUnsub=i}),5e3)}},{kind:"method",key:"_handleUiModeNotAvailable",value:function(e){this._warnings=(0,m.p)(this.hass,e.detail).warnings,this._yamlMode||(this._yamlMode=!0)}},{kind:"method",key:"_handleAction",value:async function(e){switch(e.detail.index){case 0:await this._renameTrigger();break;case 1:(0,p.B)(this,"re-order");break;case 2:this._requestShowId=!0,this.expand();break;case 3:(0,p.B)(this,"duplicate");break;case 4:this._setClipboard();break;case 5:this._setClipboard(),(0,p.B)(this,"value-changed",{value:null});break;case 6:this._switchUiMode(),this.expand();break;case 7:this._switchYamlMode(),this.expand();break;case 8:this._onDisable();break;case 9:this._onDelete()}}},{kind:"method",key:"_setClipboard",value:function(){this._clipboard={...this._clipboard,trigger:this.trigger}}},{kind:"method",key:"_onDelete",value:function(){(0,$.g7)(this,{title:this.hass.localize("ui.panel.config.automation.editor.triggers.delete_confirm_title"),text:this.hass.localize("ui.panel.config.automation.editor.triggers.delete_confirm_text"),dismissText:this.hass.localize("ui.common.cancel"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0,confirm:()=>{(0,p.B)(this,"value-changed",{value:null})}})}},{kind:"method",key:"_onDisable",value:function(){var e;const t=!(null===(e=this.trigger.enabled)||void 0===e||e),i={...this.trigger,enabled:t};var a;((0,p.B)(this,"value-changed",{value:i}),this._yamlMode)&&(null===(a=this._yamlEditor)||void 0===a||a.setValue(i))}},{kind:"method",key:"_idChanged",value:function(e){var t;const i=e.target.value;if(i===(null!==(t=this.trigger.id)&&void 0!==t?t:""))return;this._requestShowId=!0;const a={...this.trigger};i?a.id=i:delete a.id,(0,p.B)(this,"value-changed",{value:a})}},{kind:"method",key:"_onYamlChange",value:function(e){e.stopPropagation(),e.detail.isValid&&(this._warnings=void 0,(0,p.B)(this,"value-changed",{value:e.detail.value}))}},{kind:"method",key:"_switchUiMode",value:function(){this._warnings=void 0,this._yamlMode=!1}},{kind:"method",key:"_switchYamlMode",value:function(){this._warnings=void 0,this._yamlMode=!0}},{kind:"method",key:"_showTriggeredInfo",value:function(){(0,$.Ys)(this,{text:r.dy` <ha-yaml-editor readOnly="readOnly" .hass="${this.hass}" .defaultValue="${this._triggered}"></ha-yaml-editor> `})}},{kind:"method",key:"_renameTrigger",value:async function(){const e=await(0,$.D9)(this,{title:this.hass.localize("ui.panel.config.automation.editor.triggers.change_alias"),inputLabel:this.hass.localize("ui.panel.config.automation.editor.triggers.alias"),inputType:"string",placeholder:(0,v.f)((0,y.R)(this.trigger,this.hass,this._entityReg,!0)),defaultValue:this.trigger.alias,confirmText:this.hass.localize("ui.common.submit")});if(null!==e){const i={...this.trigger};var t;if(""===e?delete i.alias:i.alias=e,(0,p.B)(this,"value-changed",{value:i}),this._yamlMode)null===(t=this._yamlEditor)||void 0===t||t.setValue(i)}}},{kind:"method",key:"expand",value:function(){this.updateComplete.then((()=>{this.shadowRoot.querySelector("ha-expansion-panel").expanded=!0}))}},{kind:"get",static:!0,key:"styles",value:function(){return[C.Qx,r.iv`ha-button-menu{--mdc-theme-text-primary-on-background:var(--primary-text-color)}.disabled{opacity:.5;pointer-events:none}ha-expansion-panel{--expansion-panel-summary-padding:0 0 0 8px;--expansion-panel-content-padding:0}h3{margin:0;font-size:inherit;font-weight:inherit}.trigger-icon{display:none}@media (min-width:870px){.trigger-icon{display:inline-block;color:var(--secondary-text-color);opacity:.9;margin-right:8px}}.card-content{padding:16px}.disabled-bar{background:var(--divider-color,#e0e0e0);text-align:center;border-top-right-radius:var(--ha-card-border-radius);border-top-left-radius:var(--ha-card-border-radius)}.triggered{cursor:pointer;position:absolute;top:0px;right:0px;left:0px;text-transform:uppercase;font-weight:700;font-size:14px;background-color:var(--primary-color);color:var(--text-primary-color);max-height:0px;overflow:hidden;transition:max-height .3s;text-align:center;border-top-right-radius:var(--ha-card-border-radius,12px);border-top-left-radius:var(--ha-card-border-radius,12px)}.triggered.active{max-height:100px}.triggered:hover{opacity:.8}.triggered.accent{background-color:var(--accent-color);color:var(--text-accent-color,var(--text-primary-color))}mwc-list-item[disabled]{--mdc-theme-text-primary-on-background:var(--disabled-text-color)}ha-textfield{display:block;margin-bottom:24px}.selected_menu_item{color:var(--primary-color)}li[role=separator]{border-bottom-color:var(--divider-color)}`]}}]}}),r.oi);a()}catch(e){a(e)}}))},15491:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(34541),n=i(47838),s=(i(14271),i(3239)),d=i(68144),r=i(79932),l=i(18848),c=i(14516),u=i(47181),h=i(85415),p=(i(81545),i(74834),i(52039),i(40451)),v=i(70651),m=i(98116),g=i(76243),f=(i(61354),i(57119),i(22837)),y=(i(66372),i(79636),i(31794),i(52049),i(93843),i(45188),i(16516),i(18173),i(3823),i(36499),i(8890),i(5963),i(39414)),_=(i(2329),i(85157)),k=e([g,f,y]);[g,f,y]=k.then?(await k)():k;const b="M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z",$="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",C="M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z",x="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",A="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z",M="__paste__";(0,a.Z)([(0,r.Mo)("ha-automation-trigger")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"triggers",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"nested",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"reOrderMode",value:()=>!1},{kind:"field",decorators:[(0,_.t)({key:"automationClipboard",state:!0,subscribe:!0,storage:"sessionStorage"})],key:"_clipboard",value:void 0},{kind:"field",key:"_focusLastTriggerOnChange",value:()=>!1},{kind:"field",key:"_triggerKeys",value:()=>new WeakMap},{kind:"field",key:"_sortable",value:void 0},{kind:"method",key:"render",value:function(){var e;return d.dy` ${this.reOrderMode&&!this.nested?d.dy` <ha-alert alert-type="info" .title="${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.title")}"> ${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.description_triggers")} <mwc-button slot="action" @click="${this._exitReOrderMode}"> ${this.hass.localize("ui.panel.config.automation.editor.re_order_mode.exit")} </mwc-button> </ha-alert> `:null} <div class="triggers"> ${(0,l.r)(this.triggers,(e=>this._getKey(e)),((e,t)=>d.dy` <ha-automation-trigger-row .index="${t}" .trigger="${e}" .hideMenu="${this.reOrderMode}" @duplicate="${this._duplicateTrigger}" @value-changed="${this._triggerChanged}" .hass="${this.hass}" .disabled="${this.disabled}" @re-order="${this._enterReOrderMode}"> ${this.reOrderMode?d.dy` <ha-icon-button .index="${t}" slot="icons" .label="${this.hass.localize("ui.panel.config.automation.editor.move_up")}" .path="${$}" @click="${this._moveUp}" .disabled="${0===t}"></ha-icon-button> <ha-icon-button .index="${t}" slot="icons" .label="${this.hass.localize("ui.panel.config.automation.editor.move_down")}" .path="${b}" @click="${this._moveDown}" .disabled="${t===this.triggers.length-1}"></ha-icon-button> <div class="handle" slot="icons"> <ha-svg-icon .path="${C}"></ha-svg-icon> </div> `:""} </ha-automation-trigger-row> `))} <ha-button-menu @action="${this._addTrigger}" .disabled="${this.disabled}" fixed> <ha-button slot="trigger" outlined .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.add")}" .disabled="${this.disabled}"> <ha-svg-icon .path="${x}" slot="icon"></ha-svg-icon> </ha-button> ${null!==(e=this._clipboard)&&void 0!==e&&e.trigger?d.dy` <mwc-list-item .value="${M}" graphic="icon"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.paste")} (${this.hass.localize(`ui.panel.config.automation.editor.triggers.type.${this._clipboard.trigger.platform}.label`)}) <ha-svg-icon slot="graphic" .path="${A}"></ha-svg-icon></mwc-list-item>`:d.Ld} ${this._processedTypes(this.hass.localize).map((([e,t,i])=>d.dy` <mwc-list-item .value="${e}" graphic="icon"> ${t}<ha-svg-icon slot="graphic" .path="${i}"></ha-svg-icon></mwc-list-item> `))} </ha-button-menu> </div> `}},{kind:"method",key:"updated",value:function(e){if((0,o.Z)((0,n.Z)(i.prototype),"updated",this).call(this,e),e.has("reOrderMode")&&(this.reOrderMode?this._createSortable():this._destroySortable()),e.has("triggers")&&this._focusLastTriggerOnChange){this._focusLastTriggerOnChange=!1;const e=this.shadowRoot.querySelector("ha-automation-trigger-row:last-of-type");e.updateComplete.then((()=>{e.expand(),e.scrollIntoView(),e.focus()}))}}},{kind:"method",key:"_enterReOrderMode",value:async function(e){this.nested||(e.stopPropagation(),this.reOrderMode=!0)}},{kind:"method",key:"_exitReOrderMode",value:async function(){this.reOrderMode=!1}},{kind:"method",key:"_createSortable",value:async function(){const e=await(0,m.F)();this._sortable=new e(this.shadowRoot.querySelector(".triggers"),{animation:150,fallbackClass:"sortable-fallback",handle:".handle",onChoose:e=>{e.item.placeholder=document.createComment("sort-placeholder"),e.item.after(e.item.placeholder)},onEnd:e=>{e.item.placeholder&&(e.item.placeholder.replaceWith(e.item),delete e.item.placeholder),this._dragged(e)}})}},{kind:"method",key:"_destroySortable",value:function(){var e;null===(e=this._sortable)||void 0===e||e.destroy(),this._sortable=void 0}},{kind:"method",key:"_getKey",value:function(e){return this._triggerKeys.has(e)||this._triggerKeys.set(e,Math.random().toString()),this._triggerKeys.get(e)}},{kind:"method",key:"_addTrigger",value:function(e){const t=e.currentTarget.items[e.detail.index].value;let i;if(t===M)i=this.triggers.concat((0,s.Z)(this._clipboard.trigger));else{const e=t,a=customElements.get(`ha-automation-trigger-${e}`);i=this.triggers.concat({platform:e,...a.defaultConfig})}this._focusLastTriggerOnChange=!0,(0,u.B)(this,"value-changed",{value:i})}},{kind:"method",key:"_moveUp",value:function(e){const t=e.target.index,i=t-1;this._move(t,i)}},{kind:"method",key:"_moveDown",value:function(e){const t=e.target.index,i=t+1;this._move(t,i)}},{kind:"method",key:"_dragged",value:function(e){e.oldIndex!==e.newIndex&&this._move(e.oldIndex,e.newIndex)}},{kind:"method",key:"_move",value:function(e,t){const i=this.triggers.concat(),a=i.splice(e,1)[0];i.splice(t,0,a),(0,u.B)(this,"value-changed",{value:i})}},{kind:"method",key:"_triggerChanged",value:function(e){e.stopPropagation();const t=[...this.triggers],i=e.detail.value,a=e.target.index;if(null===i)t.splice(a,1);else{const e=this._getKey(t[a]);this._triggerKeys.set(i,e),t[a]=i}(0,u.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_duplicateTrigger",value:function(e){e.stopPropagation();const t=e.target.index;(0,u.B)(this,"value-changed",{value:this.triggers.concat((0,s.Z)(this.triggers[t]))})}},{kind:"field",key:"_processedTypes",value(){return(0,c.Z)((e=>Object.entries(p.H).map((([t,i])=>[t,e(`ui.panel.config.automation.editor.triggers.type.${t}.label`),i])).sort(((e,t)=>(0,h.$)(e[1],t[1],this.hass.locale.language)))))}},{kind:"get",static:!0,key:"styles",value:function(){return[v.Y,d.iv`ha-automation-trigger-row{display:block;margin-bottom:16px;scroll-margin-top:48px}ha-svg-icon{height:20px}ha-alert{display:block;margin-bottom:16px;border-radius:var(--ha-card-border-radius,16px);overflow:hidden}.handle{cursor:move;padding:12px}.handle ha-svg-icon{pointer-events:none;height:24px}`]}}]}}),d.oi);t()}catch(e){t(e)}}))},61354:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(47181),r=(i(68331),i(71350));(0,a.Z)([(0,n.Mo)("ha-automation-trigger-calendar")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",key:"_schema",value:()=>(0,s.Z)((e=>[{name:"entity_id",required:!0,selector:{entity:{domain:"calendar"}}},{name:"event",type:"select",required:!0,options:[["start",e("ui.panel.config.automation.editor.triggers.type.calendar.start")],["end",e("ui.panel.config.automation.editor.triggers.type.calendar.end")]]},{name:"offset",selector:{duration:{}}},{name:"offset_type",type:"select",required:!0,options:[["before",e("ui.panel.config.automation.editor.triggers.type.calendar.before")],["after",e("ui.panel.config.automation.editor.triggers.type.calendar.after")]]}]))},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{event:"start",offset:0}}},{kind:"method",key:"render",value:function(){const e=this._schema(this.hass.localize),t=this.trigger.offset,i=(0,r.c)(t);let a="after";("object"==typeof t&&i.hours<0||"string"==typeof t&&t.startsWith("-"))&&(i.hours=Math.abs(i.hours),a="before");const n={...this.trigger,offset:i,offset_type:a};return o.dy` <ha-form .schema="${e}" .data="${n}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){var t,i,a;e.stopPropagation();const o=e.detail.value.offset,n="before"===e.detail.value.offset_type?"-":"",s={...e.detail.value,offset:`${n}${null!==(t=o.hours)&&void 0!==t?t:0}:${null!==(i=o.minutes)&&void 0!==i?i:0}:${null!==(a=o.seconds)&&void 0!==a?a:0}`};delete s.offset_type,(0,d.B)(this,"value-changed",{value:s})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.calendar.${e.name}`)}}]}}),o.oi)},45188:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(76680),d=i(47181),r=(i(3555),i(26765));const l="^[^.。,，?¿？؟!！;；:：]+$";(0,a.Z)([(0,n.Mo)("ha-automation-trigger-conversation")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.IO)("#option_input",!0)],key:"_optionInput",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{command:""}}},{kind:"method",key:"render",value:function(){const{command:e}=this.trigger,t=e?(0,s.r)(e):[];return o.dy`${t.length?t.map(((e,t)=>o.dy` <ha-textfield class="option" iconTrailing .index="${t}" .value="${e}" .validationMessage="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.conversation.no_punctuation")}" autoValidate validateOnInitialRender pattern="${l}" @change="${this._updateOption}"> <ha-icon-button @click="${this._removeOption}" slot="trailingIcon" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}"></ha-icon-button> </ha-textfield> `)):o.Ld} <ha-textfield class="flex-auto" id="option_input" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.conversation.add_sentence")}" .validationMessage="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.conversation.no_punctuation")}" autoValidate pattern="${l}" @keydown="${this._handleKeyAdd}" @change="${this._addOption}"></ha-textfield>`}},{kind:"method",key:"_handleKeyAdd",value:function(e){e.stopPropagation(),"Enter"===e.key&&this._addOption()}},{kind:"method",key:"_addOption",value:function(){const e=this._optionInput;null!=e&&e.value&&((0,d.B)(this,"value-changed",{value:{...this.trigger,command:this.trigger.command.length?[...Array.isArray(this.trigger.command)?this.trigger.command:[this.trigger.command],e.value]:e.value}}),e.value="")}},{kind:"method",key:"_updateOption",value:async function(e){const t=e.target.index,i=[...Array.isArray(this.trigger.command)?this.trigger.command:[this.trigger.command]];i.splice(t,1,e.target.value),(0,d.B)(this,"value-changed",{value:{...this.trigger,command:i}})}},{kind:"method",key:"_removeOption",value:async function(e){const t=e.target.parentElement.index;if(!await(0,r.g7)(this,{title:this.hass.localize("ui.panel.config.automation.editor.triggers.type.conversation.delete"),text:this.hass.localize("ui.panel.config.automation.editor.triggers.type.conversation.confirm_delete"),destructive:!0}))return;let i;Array.isArray(this.trigger.command)?(i=[...this.trigger.command],i.splice(t,1)):i="",(0,d.B)(this,"value-changed",{value:{...this.trigger,command:i}})}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`.layout{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:flex-start}.option{margin-top:4px}mwc-button{margin-left:8px}ha-textfield{display:block;margin-bottom:8px;--textfield-icon-trailing-padding:0}ha-textfield>ha-icon-button{position:relative;right:-8px;--mdc-icon-button-size:36px;--mdc-icon-size:20px;color:var(--secondary-text-color);inset-inline-start:initial;inset-inline-end:-8px;direction:var(--direction)}#option_input{margin-top:8px}.header{margin-top:8px;margin-bottom:8px}`}}]}}),o.oi)},57119:(e,t,i)=>{var a=i(17463),o=i(92610),n=i(68144),s=i(79932),d=i(14516),r=i(47181),l=(i(60033),i(26945)),c=i(2926);(0,a.Z)([(0,s.Mo)("ha-device-trigger-picker")],(function(e,t){return{F:class extends t{constructor(){super(l.KL,l.r3,(e=>({device_id:e||"",platform:"device",domain:"",entity_id:""}))),e(this)}},d:[{kind:"get",key:"NO_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.triggers.no_triggers")}},{kind:"get",key:"UNKNOWN_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.triggers.unknown_trigger")}}]}}),c.g);i(68331);var u=i(96339);(0,a.Z)([(0,s.Mo)("ha-automation-trigger-device")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Object})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,s.SB)()],key:"_deviceId",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_capabilities",value:void 0},{kind:"field",decorators:[(0,s.SB)(),(0,o.F)({context:u.we,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"field",key:"_origTrigger",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{device_id:"",domain:"",entity_id:""}}},{kind:"field",key:"_extraFieldsData",value:()=>(0,d.Z)(((e,t)=>{const i={};return t.extra_fields.forEach((t=>{void 0!==e[t.name]&&(i[t.name]=e[t.name])})),i}))},{kind:"method",key:"render",value:function(){var e;const t=this._deviceId||this.trigger.device_id;return n.dy` <ha-device-picker .value="${t}" @value-changed="${this._devicePicked}" .hass="${this.hass}" .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.device.label")}"></ha-device-picker> <ha-device-trigger-picker .value="${this.trigger}" .deviceId="${t}" @value-changed="${this._deviceTriggerPicked}" .hass="${this.hass}" .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.device.trigger")}"></ha-device-trigger-picker> ${null!==(e=this._capabilities)&&void 0!==e&&e.extra_fields?n.dy` <ha-form .hass="${this.hass}" .data="${this._extraFieldsData(this.trigger,this._capabilities)}" .schema="${this._capabilities.extra_fields}" .disabled="${this.disabled}" .computeLabel="${this._extraFieldsComputeLabelCallback(this.hass.localize)}" @value-changed="${this._extraFieldsChanged}"></ha-form> `:""} `}},{kind:"method",key:"firstUpdated",value:function(){this._capabilities||this._getCapabilities(),this.trigger&&(this._origTrigger=this.trigger)}},{kind:"method",key:"updated",value:function(e){if(!e.has("trigger"))return;const t=e.get("trigger");t&&!(0,l.hH)(this._entityReg,t,this.trigger)&&this._getCapabilities()}},{kind:"method",key:"_getCapabilities",value:async function(){const e=this.trigger;this._capabilities=e.domain?await(0,l.hA)(this.hass,e):void 0}},{kind:"method",key:"_devicePicked",value:function(e){e.stopPropagation(),this._deviceId=e.target.value,void 0===this._deviceId&&(0,r.B)(this,"value-changed",{value:{...i.defaultConfig,platform:"device"}})}},{kind:"method",key:"_deviceTriggerPicked",value:function(e){e.stopPropagation();let t=e.detail.value;this._origTrigger&&(0,l.hH)(this._entityReg,this._origTrigger,t)&&(t=this._origTrigger),this.trigger.id&&(t.id=this.trigger.id),(0,r.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_extraFieldsChanged",value:function(e){e.stopPropagation(),(0,r.B)(this,"value-changed",{value:{...this.trigger,...e.detail.value}})}},{kind:"method",key:"_extraFieldsComputeLabelCallback",value:function(e){return t=>e(`ui.panel.config.automation.editor.triggers.type.device.extra_fields.${t.name}`)||t.name}},{kind:"field",static:!0,key:"styles",value:()=>n.iv`ha-device-picker{display:block;margin-bottom:24px}ha-form{margin-top:24px}`}]}}),n.oi)},22837:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(68144),n=i(79932),s=i(47181),d=(i(3555),i(18900),i(33049),i(76243)),r=e([d]);d=(r.then?(await r)():r)[0];(0,a.Z)([(0,n.Mo)("ha-automation-trigger-event")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{event_type:""}}},{kind:"method",key:"render",value:function(){const{event_type:e,event_data:t,context:i}=this.trigger;return o.dy` <ha-textfield .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.event.event_type")}" name="event_type" .value="${e}" .disabled="${this.disabled}" @change="${this._valueChanged}"></ha-textfield> <ha-yaml-editor .hass="${this.hass}" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.event.event_data")}" .name="${"event_data"}" .readOnly="${this.disabled}" .defaultValue="${t}" @value-changed="${this._dataChanged}"></ha-yaml-editor> <br> ${this.hass.localize("ui.panel.config.automation.editor.triggers.type.event.context_users")} <ha-users-picker .pickedUserLabel="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.event.context_user_picked")}" .pickUserLabel="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.event.context_user_pick")}" .hass="${this.hass}" .disabled="${this.disabled}" .value="${this._wrapUsersInArray(null==i?void 0:i.user_id)}" @value-changed="${this._usersChanged}"></ha-users-picker> `}},{kind:"method",key:"_wrapUsersInArray",value:function(e){return e?"string"==typeof e?[e]:e:[]}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation(),(0,d.a)(this,e)}},{kind:"method",key:"_dataChanged",value:function(e){e.stopPropagation(),e.detail.isValid&&(0,d.a)(this,e)}},{kind:"method",key:"_usersChanged",value:function(e){e.stopPropagation();const t={...this.trigger};!e.detail.value.length&&t.context?delete t.context.user_id:(t.context||(t.context={}),t.context.user_id=e.detail.value),(0,s.B)(this,"value-changed",{value:t})}},{kind:"get",static:!0,key:"styles",value:function(){return o.iv`ha-textfield{display:block}`}}]}}),o.oi);t()}catch(e){t(e)}}))},66372:(e,t,i)=>{var a=i(17463),o=(i(68331),i(68144)),n=i(79932),s=i(14516),d=i(47181);(0,a.Z)([(0,n.Mo)("ha-automation-trigger-geo_location")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",key:"_schema",value:()=>(0,s.Z)((e=>[{name:"source",selector:{text:{}}},{name:"zone",selector:{entity:{domain:"zone"}}},{name:"event",type:"select",required:!0,options:[["enter",e("ui.panel.config.automation.editor.triggers.type.geo_location.enter")],["leave",e("ui.panel.config.automation.editor.triggers.type.geo_location.leave")]]}]))},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{source:"",zone:"",event:"enter"}}},{kind:"method",key:"render",value:function(){return o.dy` <ha-form .schema="${this._schema(this.hass.localize)}" .data="${this.trigger}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,d.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.geo_location.${e.name}`)}}]}}),o.oi)},79636:(e,t,i)=>{var a=i(17463),o=(i(68331),i(68144)),n=i(79932),s=i(14516),d=i(47181);(0,a.Z)([(0,n.Mo)("ha-automation-trigger-homeassistant")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",key:"_schema",value:()=>(0,s.Z)((e=>[{name:"event",type:"select",required:!0,options:[["start",e("ui.panel.config.automation.editor.triggers.type.homeassistant.start")],["shutdown",e("ui.panel.config.automation.editor.triggers.type.homeassistant.shutdown")]]}]))},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{event:"start"}}},{kind:"method",key:"render",value:function(){return o.dy` <ha-form .schema="${this._schema(this.hass.localize)}" .data="${this.trigger}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,d.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.homeassistant.${e.name}`)}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`label{display:flex;align-items:center}`}]}}),o.oi)},31794:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(47181);i(68331);const d=[{name:"topic",required:!0,selector:{text:{}}},{name:"payload",selector:{text:{}}}];(0,a.Z)([(0,n.Mo)("ha-automation-trigger-mqtt")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{topic:""}}},{kind:"method",key:"render",value:function(){return o.dy` <ha-form .schema="${d}" .data="${this.trigger}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,s.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.mqtt.${e.name}`)}}]}}),o.oi)},52049:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(71350),r=i(47181),l=i(61761);i(68331);(0,a.Z)([(0,n.Mo)("ha-automation-trigger-numeric_state")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_inputAboveIsEntity",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_inputBelowIsEntity",value:void 0},{kind:"field",key:"_schema",value:()=>(0,s.Z)(((e,t,i)=>[{name:"entity_id",required:!0,selector:{entity:{}}},{name:"attribute",selector:{attribute:{hide_attributes:["access_token","auto_update","available_modes","away_mode","changed_by","code_arm_required","code_format","color_mode","color_modes","current_activity","device_class","editable","effect_list","effect","entity_id","entity_picture","fan_mode","fan_modes","fan_speed_list","forecast","friendly_name","frontend_stream_type","has_date","has_time","hs_color","hvac_mode","hvac_modes","icon","id","latest_version","max_color_temp_kelvin","max_mireds","max_temp","media_album_name","media_artist","media_content_type","media_position_updated_at","media_title","min_color_temp_kelvin","min_mireds","min_temp","mode","next_dawn","next_dusk","next_midnight","next_noon","next_rising","next_setting","operation_list","operation_mode","options","percentage_step","precipitation_unit","preset_mode","preset_modes","pressure_unit","release_notes","release_summary","release_url","restored","rgb_color","rgbw_color","shuffle","skipped_version","sound_mode_list","sound_mode","source_list","source_type","source","state_class","step","supported_color_modes","supported_features","swing_mode","swing_modes","target_temp_step","temperature_unit","title","token","unit_of_measurement","user_id","uuid","visibility_unit","wind_speed_unit","xy_color"]}},context:{filter_entity:"entity_id"}},{name:"mode_above",type:"select",required:!0,options:[["value",e("ui.panel.config.automation.editor.triggers.type.numeric_state.type_value")],["input",e("ui.panel.config.automation.editor.triggers.type.numeric_state.type_input")]]},...t?[{name:"above",selector:{entity:{domain:["input_number","number","sensor"]}}}]:[{name:"above",selector:{number:{mode:"box",min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,step:.1}}}],{name:"mode_below",type:"select",required:!0,options:[["value",e("ui.panel.config.automation.editor.triggers.type.numeric_state.type_value")],["input",e("ui.panel.config.automation.editor.triggers.type.numeric_state.type_input")]]},...i?[{name:"below",selector:{entity:{domain:["input_number","number","sensor"]}}}]:[{name:"below",selector:{number:{mode:"box",min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,step:.1}}}],{name:"value_template",selector:{template:{}}},{name:"for",selector:{duration:{}}}]))},{kind:"method",key:"willUpdate",value:function(e){e.has("trigger")&&this.trigger&&(0,l._)(this.trigger.for)&&(0,r.B)(this,"ui-mode-not-available",Error(this.hass.localize("ui.errors.config.no_template_editor_support")))}},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{entity_id:""}}},{kind:"method",key:"render",value:function(){var e,t;const i=(0,d.c)(this.trigger.for),a=null!==(e=this._inputAboveIsEntity)&&void 0!==e?e:"string"==typeof this.trigger.above&&(this.trigger.above.startsWith("input_number.")||this.trigger.above.startsWith("number.")||this.trigger.above.startsWith("sensor.")),n=null!==(t=this._inputBelowIsEntity)&&void 0!==t?t:"string"==typeof this.trigger.below&&(this.trigger.below.startsWith("input_number.")||this.trigger.below.startsWith("number.")||this.trigger.below.startsWith("sensor.")),s=this._schema(this.hass.localize,a,n),r={mode_above:a?"input":"value",mode_below:n?"input":"value",...this.trigger,for:i};return o.dy` <ha-form .hass="${this.hass}" .data="${r}" .schema="${s}" .disabled="${this.disabled}" @value-changed="${this._valueChanged}" .computeLabel="${this._computeLabelCallback}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;this._inputAboveIsEntity="input"===t.mode_above,this._inputBelowIsEntity="input"===t.mode_below,delete t.mode_above,delete t.mode_below,(0,r.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>{switch(e.name){case"entity_id":return this.hass.localize("ui.components.entity.entity-picker.entity");case"attribute":return this.hass.localize("ui.components.entity.entity-attribute-picker.attribute");case"for":return this.hass.localize("ui.panel.config.automation.editor.triggers.type.state.for");default:return this.hass.localize(`ui.panel.config.automation.editor.triggers.type.numeric_state.${e.name}`)}}}}]}}),o.oi)},93843:(e,t,i)=>{var a=i(17463),o=i(14516),n=i(68144),s=i(79932),d=i(47181);i(81545),i(84431),i(5666),i(3555);const r=["added","removed"];(0,a.Z)([(0,s.Mo)("ha-automation-trigger-persistent_notification")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"trigger",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",key:"_schema",value:()=>(0,o.Z)((e=>[{name:"notification_id",required:!1,selector:{text:{}}},{name:"update_type",type:"multi_select",required:!1,options:[["added",e("ui.panel.config.automation.editor.triggers.type.persistent_notification.update_types.added")],["removed",e("ui.panel.config.automation.editor.triggers.type.persistent_notification.update_types.removed")],["current",e("ui.panel.config.automation.editor.triggers.type.persistent_notification.update_types.current")],["updated",e("ui.panel.config.automation.editor.triggers.type.persistent_notification.update_types.updated")]]}]))},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{update_type:[...r],notification_id:""}}},{kind:"method",key:"render",value:function(){const e=this._schema(this.hass.localize);return n.dy` <ha-form .schema="${e}" .data="${this.trigger}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,d.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.persistent_notification.${e.name}`)}},{kind:"field",static:!0,key:"styles",value:()=>n.iv`ha-textfield{display:block}`}]}}),n.oi)},16516:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(38768),d=i(14516),r=i(76680),l=i(47181),c=i(61761),u=i(88268),h=(i(68331),i(71350));const p=(0,s.f0)(u.G,(0,s.Ry)({alias:(0,s.jt)((0,s.Z_)()),platform:(0,s.i0)("state"),entity_id:(0,s.jt)((0,s.G0)([(0,s.Z_)(),(0,s.IX)((0,s.Z_)())])),attribute:(0,s.jt)((0,s.Z_)()),from:(0,s.jt)((0,s.AG)((0,s.Z_)())),to:(0,s.jt)((0,s.AG)((0,s.Z_)())),for:(0,s.jt)((0,s.G0)([(0,s.Rx)(),(0,s.Z_)(),u.H]))})),v="__ANY_STATE_IGNORE_ATTRIBUTES__";(0,a.Z)([(0,n.Mo)("ha-automation-trigger-state")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{entity_id:[]}}},{kind:"field",key:"_schema",value:()=>(0,d.Z)(((e,t,i)=>[{name:"entity_id",required:!0,selector:{entity:{multiple:!0}}},{name:"attribute",selector:{attribute:{entity_id:t?t[0]:void 0,hide_attributes:["access_token","available_modes","code_arm_required","code_format","color_modes","device_class","editable","effect_list","entity_id","entity_picture","fan_modes","fan_speed_list","friendly_name","frontend_stream_type","has_date","has_time","hvac_modes","icon","id","max_color_temp_kelvin","max_mireds","max_temp","max","min_color_temp_kelvin","min_mireds","min_temp","min","mode","operation_list","options","percentage_step","precipitation_unit","preset_modes","pressure_unit","sound_mode_list","source_list","state_class","step","supported_color_modes","supported_features","swing_modes","target_temp_step","temperature_unit","token","unit_of_measurement","visibility_unit","wind_speed_unit"]}}},{name:"from",selector:{state:{extra_options:i?[]:[{label:e("ui.panel.config.automation.editor.triggers.type.state.any_state_ignore_attributes"),value:v}],entity_id:t?t[0]:void 0,attribute:i}}},{name:"to",selector:{state:{extra_options:i?[]:[{label:e("ui.panel.config.automation.editor.triggers.type.state.any_state_ignore_attributes"),value:v}],entity_id:t?t[0]:void 0,attribute:i}}},{name:"for",selector:{duration:{}}}]))},{kind:"method",key:"shouldUpdate",value:function(e){if(!e.has("trigger"))return!0;if(this.trigger.for&&"object"==typeof this.trigger.for&&0===this.trigger.for.milliseconds&&delete this.trigger.for.milliseconds,this.trigger&&(0,c._)(this.trigger))return(0,l.B)(this,"ui-mode-not-available",Error(this.hass.localize("ui.errors.config.no_template_editor_support"))),!1;try{(0,s.hu)(this.trigger,p)}catch(e){return(0,l.B)(this,"ui-mode-not-available",e),!1}return!0}},{kind:"method",key:"render",value:function(){const e=(0,h.c)(this.trigger.for),t={...this.trigger,entity_id:(0,r.r)(this.trigger.entity_id),for:e};t.attribute||null!==t.to||(t.to=v),t.attribute||null!==t.from||(t.from=v);const i=this._schema(this.hass.localize,this.trigger.entity_id,this.trigger.attribute);return o.dy` <ha-form .hass="${this.hass}" .data="${t}" .schema="${i}" @value-changed="${this._valueChanged}" .computeLabel="${this._computeLabelCallback}" .disabled="${this.disabled}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;t.to===v&&(t.to=t.attribute?void 0:null),t.from===v&&(t.from=t.attribute?void 0:null),Object.keys(t).forEach((e=>void 0===t[e]||""===t[e]?delete t[e]:{})),(0,l.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize("entity_id"===e.name?"ui.components.entity.entity-picker.entity":`ui.panel.config.automation.editor.triggers.type.state.${e.name}`)}}]}}),o.oi)},18173:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(47181);i(68331);(0,a.Z)([(0,n.Mo)("ha-automation-trigger-sun")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",key:"_schema",value:()=>(0,s.Z)((e=>[{name:"event",type:"select",required:!0,options:[["sunrise",e("ui.panel.config.automation.editor.triggers.type.sun.sunrise")],["sunset",e("ui.panel.config.automation.editor.triggers.type.sun.sunset")]]},{name:"offset",selector:{text:{}}}]))},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{event:"sunrise",offset:0}}},{kind:"method",key:"render",value:function(){const e=this._schema(this.hass.localize);return o.dy` <ha-form .schema="${e}" .data="${this.trigger}" .hass="${this.hass}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,d.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.sun.${e.name}`)}}]}}),o.oi)},3823:(e,t,i)=>{var a=i(17463),o=i(34541),n=i(47838),s=(i(44577),i(68144)),d=i(79932),r=i(47181),l=i(85415);i(86630);(0,a.Z)([(0,d.Mo)("ha-automation-trigger-tag")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"trigger",value:void 0},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,d.SB)()],key:"_tags",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{tag_id:""}}},{kind:"method",key:"firstUpdated",value:function(e){(0,o.Z)((0,n.Z)(i.prototype),"firstUpdated",this).call(this,e),this._fetchTags()}},{kind:"method",key:"render",value:function(){return this._tags?s.dy` <ha-select .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.tag.label")}" .disabled="${this.disabled||0===this._tags.length}" .value="${this.trigger.tag_id}" @selected="${this._tagChanged}"> ${this._tags.map((e=>s.dy` <mwc-list-item .value="${e.id}"> ${e.name||e.id} </mwc-list-item> `))} </ha-select> `:s.Ld}},{kind:"method",key:"_fetchTags",value:async function(){this._tags=(await(async e=>e.callWS({type:"tag/list"}))(this.hass)).sort(((e,t)=>(0,l.f)(e.name||e.id,t.name||t.id,this.hass.locale.language)))}},{kind:"method",key:"_tagChanged",value:function(e){e.target.value&&this._tags&&this.trigger.tag_id!==e.target.value&&(0,r.B)(this,"value-changed",{value:{...this.trigger,tag_id:e.target.value}})}},{kind:"get",static:!0,key:"styles",value:function(){return s.iv`ha-select{display:block}`}}]}}),s.oi)},36499:(e,t,i)=>{var a=i(17463),o=(i(53297),i(68144)),n=i(79932),s=(i(68331),i(71350)),d=i(47181),r=i(61761);const l=[{name:"value_template",required:!0,selector:{template:{}}},{name:"for",selector:{duration:{}}}];(0,a.Z)([(0,n.Mo)("ha-automation-trigger-template")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{value_template:""}}},{kind:"method",key:"willUpdate",value:function(e){e.has("trigger")&&this.trigger&&(0,r._)(this.trigger.for)&&(0,d.B)(this,"ui-mode-not-available",Error(this.hass.localize("ui.errors.config.no_template_editor_support")))}},{kind:"method",key:"render",value:function(){const e=(0,s.c)(this.trigger.for),t={...this.trigger,for:e};return o.dy` <ha-form .hass="${this.hass}" .data="${t}" .schema="${l}" @value-changed="${this._valueChanged}" .computeLabel="${this._computeLabelCallback}" .disabled="${this.disabled}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;t.for&&Object.values(t.for).every((e=>0===e))&&delete t.for,(0,d.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.template.${e.name}`)}}]}}),o.oi)},8890:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(14516),d=i(47181);i(68331);(0,a.Z)([(0,n.Mo)("ha-automation-trigger-time")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_inputMode",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{at:""}}},{kind:"field",key:"_schema",value:()=>(0,s.Z)(((e,t)=>{const i=t?{entity:{filter:[{domain:"input_datetime"},{domain:"sensor",device_class:"timestamp"}]}}:{time:{}};return[{name:"mode",type:"select",required:!0,options:[["value",e("ui.panel.config.automation.editor.triggers.type.time.type_value")],["input",e("ui.panel.config.automation.editor.triggers.type.time.type_input")]]},{name:"at",selector:i}]}))},{kind:"method",key:"willUpdate",value:function(e){e.has("trigger")&&this.trigger&&Array.isArray(this.trigger.at)&&(0,d.B)(this,"ui-mode-not-available",Error(this.hass.localize("ui.errors.config.editor_not_supported")))}},{kind:"method",key:"render",value:function(){var e;const t=this.trigger.at;if(Array.isArray(t))return o.Ld;const i=null!==(e=this._inputMode)&&void 0!==e?e:(null==t?void 0:t.startsWith("input_datetime."))||(null==t?void 0:t.startsWith("sensor.")),a=this._schema(this.hass.localize,i),n={mode:i?"input":"value",...this.trigger};return o.dy` <ha-form .hass="${this.hass}" .data="${n}" .schema="${a}" .disabled="${this.disabled}" @value-changed="${this._valueChanged}" .computeLabel="${this._computeLabelCallback}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;this._inputMode="input"===t.mode,delete t.mode,Object.keys(t).forEach((e=>void 0===t[e]||""===t[e]?delete t[e]:{})),(0,d.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.time.${e.name}`)}}]}}),o.oi)},5963:(e,t,i)=>{var a=i(17463),o=i(68144),n=i(79932),s=i(47181);i(68331);const d=[{name:"hours",selector:{text:{}}},{name:"minutes",selector:{text:{}}},{name:"seconds",selector:{text:{}}}];(0,a.Z)([(0,n.Mo)("ha-automation-trigger-time_pattern")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{}}},{kind:"method",key:"render",value:function(){return o.dy` <ha-form .hass="${this.hass}" .schema="${d}" .data="${this.trigger}" .disabled="${this.disabled}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;(0,s.B)(this,"value-changed",{value:t})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>this.hass.localize(`ui.panel.config.automation.editor.triggers.type.time_pattern.${e.name}`)}}]}}),o.oi)},39414:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(17463),o=i(34541),n=i(47838),s=i(68144),d=i(79932),r=i(47181),l=i(83447),c=i(50577),u=(i(81545),i(84431),i(5666),i(3555),i(81796)),h=i(76243),p=e([h]);h=(p.then?(await p)():p)[0];const v="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",m="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",g=["GET","HEAD","POST","PUT"],f=["POST","PUT"],y="";(0,a.Z)([(0,d.Mo)("ha-automation-trigger-webhook")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.Cb)()],key:"trigger",value:void 0},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,d.SB)()],key:"_config",value:void 0},{kind:"field",key:"_unsub",value:void 0},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{allowed_methods:[...f],local_only:!0,webhook_id:y}}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)((0,n.Z)(i.prototype),"connectedCallback",this).call(this);const e={callback:e=>{this._config=e}};(0,r.B)(this,"subscribe-automation-config",e),this._unsub=e.unsub}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)((0,n.Z)(i.prototype),"disconnectedCallback",this).call(this),this._unsub&&this._unsub()}},{kind:"method",key:"_generateWebhookId",value:function(){var e;const t=crypto.getRandomValues(new Uint8Array(18)),i=btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_");return`${(0,l.l)((null===(e=this._config)||void 0===e?void 0:e.alias)||"","-")}-${i}`}},{kind:"method",key:"willUpdate",value:function(e){(0,o.Z)((0,n.Z)(i.prototype),"willUpdate",this).call(this,e),e.has("trigger")&&(void 0===this.trigger.allowed_methods&&(this.trigger.allowed_methods=[...f]),void 0===this.trigger.local_only&&(this.trigger.local_only=!0),this.trigger.webhook_id===y&&(this.trigger.webhook_id=this._generateWebhookId()))}},{kind:"method",key:"render",value:function(){const{allowed_methods:e,local_only:t,webhook_id:i}=this.trigger;return s.dy` <div class="flex"> <ha-textfield name="webhook_id" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.webhook.webhook_id")}" .helper="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.webhook.webhook_id_helper")}" .disabled="${this.disabled}" iconTrailing .value="${i||""}" @input="${this._valueChanged}"> <ha-icon-button @click="${this._copyUrl}" slot="trailingIcon" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.webhook.copy_url")}" .path="${m}"></ha-icon-button> </ha-textfield> <ha-button-menu multi> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.webhook.webhook_settings")}" .path="${v}"></ha-icon-button> ${g.map((t=>s.dy` <ha-check-list-item left .value="${t}" @request-selected="${this._allowedMethodsChanged}" .selected="${e.includes(t)}"> ${t} </ha-check-list-item> `))} <li divider role="separator"></li> <ha-check-list-item left @request-selected="${this._localOnlyChanged}" .selected="${t}"> ${this.hass.localize("ui.panel.config.automation.editor.triggers.type.webhook.local_only")} </ha-check-list-item> </ha-button-menu> </div> `}},{kind:"method",key:"_valueChanged",value:function(e){(0,h.a)(this,e)}},{kind:"method",key:"_localOnlyChanged",value:function(e){if(e.stopPropagation(),this.trigger.local_only===e.detail.selected)return;const t={...this.trigger,local_only:e.detail.selected};(0,r.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_allowedMethodsChanged",value:function(e){var t,i;e.stopPropagation();const a=e.target.value,o=e.detail.selected;if(o===(null===(t=this.trigger.allowed_methods)||void 0===t?void 0:t.includes(a)))return;const n=[...null!==(i=this.trigger.allowed_methods)&&void 0!==i?i:[]];o?n.push(a):n.splice(n.indexOf(a),1);const s={...this.trigger,allowed_methods:n};(0,r.B)(this,"value-changed",{value:s})}},{kind:"method",key:"_copyUrl",value:async function(e){const t=e.target.parentElement,i=this.hass.hassUrl(`/api/webhook/${t.value}`);await(0,c.v)(i),(0,u.C)(this,{message:this.hass.localize("ui.common.copied_clipboard")})}},{kind:"field",static:!0,key:"styles",value:()=>s.iv`.flex{display:flex}ha-textfield{flex:1}ha-textfield>ha-icon-button{--mdc-icon-button-size:24px;--mdc-icon-size:18px}ha-button-menu{padding-top:4px}`}]}}),s.oi);t()}catch(e){t(e)}}))},2329:(e,t,i)=>{var a=i(17463),o=(i(74535),i(83927),i(68144)),n=i(79932),s=i(47181),d=i(22311),r=i(74829);function l(e){return(0,r.t)(e)&&"zone"!==(0,d.N)(e)}const c=["zone"];(0,a.Z)([(0,n.Mo)("ha-automation-trigger-zone")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"trigger",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"get",static:!0,key:"defaultConfig",value:function(){return{entity_id:"",zone:"",event:"enter"}}},{kind:"method",key:"render",value:function(){const{entity_id:e,zone:t,event:i}=this.trigger;return o.dy` <ha-entity-picker .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.zone.entity")}" .value="${e}" .disabled="${this.disabled}" @value-changed="${this._entityPicked}" .hass="${this.hass}" allow-custom-entity .entityFilter="${l}"></ha-entity-picker> <ha-entity-picker .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.zone.zone")}" .value="${t}" .disabled="${this.disabled}" @value-changed="${this._zonePicked}" .hass="${this.hass}" allow-custom-entity .includeDomains="${c}"></ha-entity-picker> <label> ${this.hass.localize("ui.panel.config.automation.editor.triggers.type.zone.event")} <ha-formfield .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.zone.enter")}"> <ha-radio name="event" value="enter" .disabled="${this.disabled}" .checked="${"enter"===i}" @change="${this._radioGroupPicked}"></ha-radio> </ha-formfield> <ha-formfield .disabled="${this.disabled}" .label="${this.hass.localize("ui.panel.config.automation.editor.triggers.type.zone.leave")}"> <ha-radio name="event" value="leave" .disabled="${this.disabled}" .checked="${"leave"===i}" @change="${this._radioGroupPicked}"></ha-radio> </ha-formfield> </label> `}},{kind:"method",key:"_entityPicked",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.trigger,entity_id:e.detail.value}})}},{kind:"method",key:"_zonePicked",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.trigger,zone:e.detail.value}})}},{kind:"method",key:"_radioGroupPicked",value:function(e){e.stopPropagation(),(0,s.B)(this,"value-changed",{value:{...this.trigger,event:e.target.value}})}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`label{display:flex;align-items:center}ha-entity-picker{display:block;margin-bottom:24px}`}]}}),o.oi)},70651:(e,t,i)=>{i.d(t,{Y:()=>a});const a=i(68144).iv`#sortable a:nth-of-type(2n) paper-icon-item{animation-name:keyframes1;animation-iteration-count:infinite;transform-origin:50% 10%;animation-delay:-.75s;animation-duration:.25s}#sortable a:nth-of-type(2n-1) paper-icon-item{animation-name:keyframes2;animation-iteration-count:infinite;animation-direction:alternate;transform-origin:30% 5%;animation-delay:-.5s;animation-duration:.33s}#sortable a{height:48px;display:flex}#sortable{outline:0;display:block!important}.hidden-panel{display:flex!important}.sortable-fallback{display:none}.sortable-ghost{opacity:.4}.sortable-fallback{opacity:0}@keyframes keyframes1{0%{transform:rotate(-1deg);animation-timing-function:ease-in}50%{transform:rotate(1.5deg);animation-timing-function:ease-out}}@keyframes keyframes2{0%{transform:rotate(1deg);animation-timing-function:ease-in}50%{transform:rotate(-1.5deg);animation-timing-function:ease-out}}.hide-panel,.show-panel{display:none;position:absolute;top:0;right:4px;--mdc-icon-button-size:40px}:host([rtl]) .show-panel{right:initial;left:4px}.hide-panel{top:4px;right:8px}:host([rtl]) .hide-panel{right:initial;left:8px}:host([expanded]) .hide-panel{display:block}:host([expanded]) .show-panel{display:inline-flex}paper-icon-item.hidden-panel,paper-icon-item.hidden-panel ha-icon[slot=item-icon],paper-icon-item.hidden-panel span{color:var(--secondary-text-color);cursor:pointer}`},98116:(e,t,i)=>{let a;i.d(t,{F:()=>o});const o=async()=>(a||(a=(await Promise.all([i.e(6087),i.e(2811)]).then(i.bind(i,32811))).default),a)},81796:(e,t,i)=>{i.d(t,{C:()=>o});var a=i(47181);const o=(e,t)=>(0,a.B)(e,"hass-notification",t)}};
//# sourceMappingURL=3975-IUOEkUeJhlA.js.map