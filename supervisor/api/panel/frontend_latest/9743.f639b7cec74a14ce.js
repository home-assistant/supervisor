export const __webpack_id__="9743";export const __webpack_ids__=["9743"];export const __webpack_modules__={27931:function(e,t,i){i.d(t,{a:()=>n});var a=i(14523),s=i(88341);function n(e,t){const i=(0,s.m)(e.entity_id),n=void 0!==t?t:e?.state;if(["button","event","input_button","scene"].includes(i))return n!==a.Hh;if((0,a.g0)(n))return!1;if(n===a.KF&&"alert"!==i)return!1;switch(i){case"alarm_control_panel":return"disarmed"!==n;case"alert":return"idle"!==n;case"cover":case"valve":return"closed"!==n;case"device_tracker":case"person":return"not_home"!==n;case"lawn_mower":return["mowing","error"].includes(n);case"lock":return"locked"!==n;case"media_player":return"standby"!==n;case"vacuum":return!["idle","docked","paused"].includes(n);case"plant":return"problem"===n;case"group":return["on","home","open","locked","problem"].includes(n);case"timer":return"active"===n;case"camera":return"streaming"===n}return!0}},3468:function(e,t,i){i.r(t),i.d(t,{HaMediaSelector:()=>b});i(65315),i(37089);var a=i(69868),s=i(84922),n=i(11991),o=i(75907),d=i(44017),c=i(70816),r=i(72094),l=i(71922),h=i(71522),_=(i(94124),i(60921),i(98249)),m=i(11111);const u=[{name:"media_content_id",required:!1,selector:{text:{}}},{name:"media_content_type",required:!1,selector:{text:{}}}],p=["media_player"],v={};class b extends s.WF{get _hasAccept(){return!!this.selector?.media?.accept?.length}willUpdate(e){if(e.has("context")&&(this._hasAccept||(this._contextEntities=(0,m.e)(this.context?.filter_entity))),e.has("value")){const t=this.value?.metadata?.thumbnail,i=e.get("value")?.metadata?.thumbnail;if(t===i)return;t&&t.startsWith("/")?(this._thumbnailUrl=void 0,(0,r.e0)(this.hass,t).then(e=>{this._thumbnailUrl=e.path})):t&&t.startsWith("https://brands.home-assistant.io")?this._thumbnailUrl=(0,h.MR)({domain:(0,h.a_)(t),type:"icon",useFallback:!0,darkOptimized:this.hass.themes?.darkMode}):this._thumbnailUrl=t}}render(){const e=this._getActiveEntityId(),t=e?this.hass.states[e]:void 0,i=!e||t&&(0,c.$)(t,l.vj.BROWSE_MEDIA);return s.qy` ${this._hasAccept||this._contextEntities&&this._contextEntities.length<=1?s.s6:s.qy` <ha-entity-picker .hass="${this.hass}" .value="${e}" .label="${this.label||this.hass.localize("ui.components.selectors.media.pick_media_player")}" .disabled="${this.disabled}" .helper="${this.helper}" .required="${this.required}" .hideClearIcon="${!!this._contextEntities}" .includeDomains="${p}" .includeEntities="${this._contextEntities}" .allowCustomEntity="${!this._contextEntities}" @value-changed="${this._entityChanged}"></ha-entity-picker> `} ${i?s.qy` <ha-card outlined tabindex="0" role="button" aria-label="${this.value?.media_content_id?this.value.metadata?.title||this.value.media_content_id:this.hass.localize("ui.components.selectors.media.pick_media")}" @click="${this._pickMedia}" @keydown="${this._handleKeyDown}" class="${this.disabled||!e&&!this._hasAccept?"disabled":""}"> <div class="content-container"> <div class="thumbnail"> ${this.value?.metadata?.thumbnail?s.qy` <div class="${(0,o.H)({"centered-image":!!this.value.metadata.media_class&&["app","directory"].includes(this.value.metadata.media_class)})} image" style="${this._thumbnailUrl?`background-image: url(${this._thumbnailUrl});`:""}"></div> `:s.qy` <div class="icon-holder image"> <ha-svg-icon class="folder" .path="${this.value?.media_content_id?this.value?.metadata?.media_class?l.EC["directory"===this.value.metadata.media_class&&this.value.metadata.children_media_class||this.value.metadata.media_class].icon:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.89 20.1 3 19 3M10 16V8L15 12":"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}"></ha-svg-icon> </div> `} </div> <div class="title"> ${this.value?.media_content_id?this.value.metadata?.title||this.value.media_content_id:this.hass.localize("ui.components.selectors.media.pick_media")} </div> </div> </ha-card> `:s.qy` <ha-alert> ${this.hass.localize("ui.components.selectors.media.browse_not_supported")} </ha-alert> <ha-form .hass="${this.hass}" .data="${this.value||v}" .schema="${u}" .computeLabel="${this._computeLabelCallback}" .computeHelper="${this._computeHelperCallback}"></ha-form> `} `}_entityChanged(e){e.stopPropagation(),!this._hasAccept&&this.context?.filter_entity?(0,d.r)(this,"value-changed",{value:{media_content_id:"",media_content_type:"",metadata:{browse_entity_id:e.detail.value}}}):(0,d.r)(this,"value-changed",{value:{entity_id:e.detail.value,media_content_id:"",media_content_type:""}})}_pickMedia(){(0,_.O)(this,{action:"pick",entityId:this._getActiveEntityId(),navigateIds:this.value?.metadata?.navigateIds,accept:this.selector.media?.accept,defaultId:this.value?.media_content_id,defaultType:this.value?.media_content_type,mediaPickedCallback:e=>{(0,d.r)(this,"value-changed",{value:{...this.value,media_content_id:e.item.media_content_id,media_content_type:e.item.media_content_type,metadata:{title:e.item.title,thumbnail:e.item.thumbnail,media_class:e.item.media_class,children_media_class:e.item.children_media_class,navigateIds:e.navigateIds?.map(e=>({media_content_type:e.media_content_type,media_content_id:e.media_content_id})),...!this._hasAccept&&this.context?.filter_entity?{browse_entity_id:this._getActiveEntityId()}:{}}}})}})}_getActiveEntityId(){const e=this.value?.metadata?.browse_entity_id;return this.value?.entity_id||e&&this._contextEntities?.includes(e)&&e||this._contextEntities?.[0]}_handleKeyDown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this._pickMedia())}constructor(...e){super(...e),this.disabled=!1,this.required=!0,this._computeLabelCallback=e=>this.hass.localize(`ui.components.selectors.media.${e.name}`),this._computeHelperCallback=e=>this.hass.localize(`ui.components.selectors.media.${e.name}_detail`)}}b.styles=s.AH`ha-entity-picker{display:block;margin-bottom:16px}ha-alert{display:block;margin-bottom:16px}ha-card{position:relative;width:100%;box-sizing:border-box;cursor:pointer;transition:background-color 180ms ease-in-out;min-height:56px}ha-card:focus:not(.disabled),ha-card:hover:not(.disabled){background-color:var(--state-icon-hover-color,rgba(0,0,0,.04))}ha-card:focus{outline:0}ha-card.disabled{pointer-events:none;color:var(--disabled-text-color)}.content-container{display:flex;align-items:center;padding:8px;gap:12px}ha-card .thumbnail{width:40px;height:40px;flex-shrink:0;position:relative;box-sizing:border-box;border-radius:8px;overflow:hidden}ha-card .image{border-radius:8px}.folder{--mdc-icon-size:24px}.title{font-size:var(--ha-font-size-m);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.4;flex:1;min-width:0}.image{position:absolute;top:0;right:0;left:0;bottom:0;background-size:cover;background-repeat:no-repeat;background-position:center}.centered-image{margin:4px;background-size:contain}.icon-holder{display:flex;justify-content:center;align-items:center;width:100%;height:100%}`,(0,a.__decorate)([(0,n.MZ)({attribute:!1})],b.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],b.prototype,"selector",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],b.prototype,"value",void 0),(0,a.__decorate)([(0,n.MZ)()],b.prototype,"label",void 0),(0,a.__decorate)([(0,n.MZ)()],b.prototype,"helper",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],b.prototype,"disabled",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],b.prototype,"required",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],b.prototype,"context",void 0),(0,a.__decorate)([(0,n.wk)()],b.prototype,"_thumbnailUrl",void 0),b=(0,a.__decorate)([(0,n.EM)("ha-selector-media")],b)},98249:function(e,t,i){i.d(t,{O:()=>s});var a=i(44017);const s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-media-player-browse",dialogImport:()=>Promise.all([i.e("7598"),i.e("3033"),i.e("5955"),i.e("1977"),i.e("3245"),i.e("199"),i.e("4218"),i.e("9137"),i.e("8589"),i.e("2112"),i.e("1057"),i.e("5132")]).then(i.bind(i,64404)),dialogParams:t})}}};
//# sourceMappingURL=9743.f639b7cec74a14ce.js.map