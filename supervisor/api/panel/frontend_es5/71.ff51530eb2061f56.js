"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["71"],{79:function(e,t,n){n.d(t,{xn:function(){return o},T:function(){return s}});var i=n(31432),a=(n(2008),n(62062),n(18111),n(22489),n(61701),n(26099),n(16034),n(42762),n(22786));n(23792),n(31415),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698),n(47764),n(62953);var r=n(28978),o=function(e){var t;return null===(t=e.name_by_user||e.name)||void 0===t?void 0:t.trim()},s=function(e,t,n){return o(e)||n&&u(t,n)||t.localize("ui.panel.config.devices.unnamed_device",{type:t.localize("ui.panel.config.devices.type.".concat(e.entry_type||"device"))})},u=function(e,t){var n,a=(0,i.A)(t||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value,s="string"==typeof o?o:o.entity_id,u=e.states[s];if(u)return(0,r.u)(u)}}catch(l){a.e(l)}finally{a.f()}};(0,a.A)(function(e){return function(e){var t,n=new Set,a=new Set,r=(0,i.A)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;a.has(o)?n.add(o):a.add(o)}}catch(s){r.e(s)}finally{r.f()}return n}(Object.values(e).map(function(e){return o(e)}).filter(function(e){return void 0!==e}))})},4358:function(e,t,n){n.d(t,{aH:function(){return s}});var i=n(79),a=n(28978),r=(n(28706),n(25276),n(34782),n(11392),[" ",": "," - "]),o=function(e){return e.toLowerCase()!==e},s=function(e,t,n){var i=t[e.entity_id];return i?u(i,n):(0,a.u)(e)},u=function(e,t,n){var s=e.name||("original_name"in e&&null!=e.original_name?String(e.original_name):void 0),u=e.device_id?t[e.device_id]:void 0;if(!u)return s||(n?(0,a.u)(n):void 0);var l=(0,i.xn)(u);return l!==s?l&&s&&function(e,t){for(var n=e.toLowerCase(),i=t.toLowerCase(),a=0,s=r;a<s.length;a++){var u=s[a],l="".concat(i).concat(u);if(n.startsWith(l)){var c=e.substring(l.length);if(c.length)return o(c.substr(0,c.indexOf(" ")))?c:c[0].toUpperCase()+c.slice(1)}}}(s,l)||s:void 0}},74705:function(e,t,n){n.d(t,{Cf:function(){return u}});n(2008),n(62062),n(18111),n(81148),n(22489),n(61701),n(13579),n(26099);var i=n(65522),a=n(79),r=n(4358),o=n(55931),s=n(28455),u=function(e,t,n,u,l,c){var d=(0,s.l)(e,n,u,l,c),p=d.device,h=d.area,v=d.floor;return t.map(function(t){switch(t.type){case"entity":return(0,r.aH)(e,n,u);case"device":return p?(0,a.xn)(p):void 0;case"area":return h?(0,i.A)(h):void 0;case"floor":return v?(0,o.X)(v):void 0;case"text":return t.text;default:return""}})}},78649:function(e,t,n){n.d(t,{n:function(){return a}});n(27495),n(90906);var i=/^(\w+)\.(\w+)$/,a=function(e){return i.test(e)}},82474:function(e,t,n){n.a(e,async function(e,t){try{var i,a,r,o,s,u,l,c,d,p,h=n(61397),v=n(50264),y=n(78261),f=n(72153),m=n(44734),g=n(43080),b=n(69683),_=n(6454),C=n(25460),w=(n(28706),n(2008),n(48980),n(62062),n(54554),n(13609),n(18111),n(61701),n(26099),n(11392),n(62826)),A=n(96196),M=n(77845),k=n(22786),I=n(1087),Z=n(74705),x=n(78649),j=n(15638),O=n(53756),q=n(95350),B=n(24367),E=n(19711),V=(n(75064),n(38508)),L=(n(67094),n(74281)),z=e([V,L]);[V,L]=z.then?(await z)():z;var H="___create-new-entity___",F=function(e){function t(){var e;(0,m.A)(this,t);for(var n=arguments.length,p=new Array(n),h=0;h<n;h++)p[h]=arguments[h];return(e=(0,b.A)(this,t,[].concat(p))).autofocus=!1,e.disabled=!1,e.required=!1,e.showEntityId=!1,e.hideClearIcon=!1,e.addButton=!1,e._valueRenderer=function(t){var n=t||"",r=e.hass.states[n];if(!r)return(0,A.qy)(i||(i=(0,f.A)([' <ha-svg-icon slot="start" .path="','" style="margin:0 4px"></ha-svg-icon> <span slot="headline">',"</span> "])),"M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z",n);var o=(0,Z.Cf)(r,[{type:"entity"},{type:"device"},{type:"area"}],e.hass.entities,e.hass.devices,e.hass.areas,e.hass.floors),s=(0,y.A)(o,3),u=s[0],l=s[1],c=s[2],d=(0,j.qC)(e.hass),p=u||l||n,h=[c,u?l:void 0].filter(Boolean).join(d?" ◂ ":" ▸ ");return(0,A.qy)(a||(a=(0,f.A)([' <state-badge .hass="','" .stateObj="','" slot="start"></state-badge> <span slot="headline">','</span> <span slot="supporting-text">',"</span> "])),e.hass,r,p,h)},e._rowRenderer=function(t,n){var i=e._showEntityId;return(0,A.qy)(r||(r=(0,f.A)([' <ha-combo-box-item type="button" compact="compact" .borderTop="','"> ',' <span slot="headline">',"</span> "," "," "," </ha-combo-box-item> "])),0!==n,t.icon_path?(0,A.qy)(o||(o=(0,f.A)([' <ha-svg-icon slot="start" style="margin:0 4px" .path="','"></ha-svg-icon> '])),t.icon_path):(0,A.qy)(s||(s=(0,f.A)([' <state-badge slot="start" .stateObj="','" .hass="','"></state-badge> '])),t.stateObj,e.hass),t.primary,t.secondary?(0,A.qy)(u||(u=(0,f.A)(['<span slot="supporting-text">',"</span>"])),t.secondary):A.s6,t.stateObj&&i?(0,A.qy)(l||(l=(0,f.A)([' <span slot="supporting-text" class="code"> '," </span> "])),t.stateObj.entity_id):A.s6,t.domain_name&&!i?(0,A.qy)(c||(c=(0,f.A)([' <div slot="trailing-supporting-text" class="domain"> '," </div> "])),t.domain_name):A.s6)},e._getAdditionalItems=function(){return e._getCreateItems(e.hass.localize,e.createDomains)},e._getCreateItems=(0,k.A)(function(t,n){return null!=n&&n.length?(e.hass.loadFragmentTranslation("config"),n.map(function(e){var n=t("ui.components.entity.entity-picker.create_helper",{domain:(0,B.z)(e)?t("ui.panel.config.helpers.types.".concat(e))||e:(0,q.p$)(t,e)});return{id:H+e,primary:n,secondary:t("ui.components.entity.entity-picker.new_entity"),icon_path:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}})):[]}),e._getEntitiesMemoized=(0,k.A)(O.w),e._getItems=function(){return e._getEntitiesMemoized(e.hass,e.includeDomains,e.excludeDomains,e.entityFilter,e.includeDeviceClasses,e.includeUnitOfMeasurement,e.includeEntities,e.excludeEntities,e.value)},e._searchFn=function(e,t){var n=t.findIndex(function(t){var n;return(null===(n=t.stateObj)||void 0===n?void 0:n.entity_id)===e});if(-1===n)return t;var i=t.splice(n,1),a=(0,y.A)(i,1)[0];return t.unshift(a),t},e._notFoundLabel=function(t){return e.hass.localize("ui.components.entity.entity-picker.no_match",{term:(0,A.qy)(d||(d=(0,f.A)(["<b>‘","’</b>"])),t)})},e}return(0,_.A)(t,e),(0,g.A)(t,[{key:"firstUpdated",value:function(e){(0,C.A)(t,"firstUpdated",this,3)([e]),this.hass.loadBackendTranslation("title")}},{key:"_showEntityId",get:function(){var e;return this.showEntityId||(null===(e=this.hass.userData)||void 0===e?void 0:e.showEntityIdPicker)}},{key:"render",value:function(){var e,t=null!==(e=this.placeholder)&&void 0!==e?e:this.hass.localize("ui.components.entity.entity-picker.placeholder");return(0,A.qy)(p||(p=(0,f.A)([' <ha-generic-picker .hass="','" .disabled="','" .autofocus="','" .allowCustomValue="','" .required="','" .label="','" .placeholder="','" .helper="','" .value="','" .searchLabel="','" .notFoundLabel="','" .rowRenderer="','" .getItems="','" .getAdditionalItems="','" .hideClearIcon="','" .searchFn="','" .valueRenderer="','" .searchKeys="','" use-top-label .addButtonLabel="','" .unknownItemText="','" @value-changed="','"> </ha-generic-picker> '])),this.hass,this.disabled,this.autofocus,this.allowCustomEntity,this.required,this.label,t,this.helper,this.addButton?void 0:this.value,this.searchLabel,this._notFoundLabel,this._rowRenderer,this._getItems,this._getAdditionalItems,this.hideClearIcon,this._searchFn,this._valueRenderer,O.t,this.addButton?this.hass.localize("ui.components.entity.entity-picker.add"):void 0,this.hass.localize("ui.components.entity.entity-picker.unknown"),this._valueChanged)}},{key:"open",value:(n=(0,v.A)((0,h.A)().m(function e(){var t;return(0,h.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.updateComplete;case 1:return e.n=2,null===(t=this._picker)||void 0===t?void 0:t.open();case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"_valueChanged",value:function(e){var t=this;e.stopPropagation();var n=e.detail.value;if(n)if(n.startsWith(H)){var i=n.substring(23);(0,E.$)(this,{domain:i,dialogClosedCallback:function(e){e.entityId&&t._setValue(e.entityId)}})}else(0,x.n)(n)&&this._setValue(n);else this._setValue(void 0)}},{key:"_setValue",value:function(e){this.value=e,(0,I.r)(this,"value-changed",{value:e}),(0,I.r)(this,"change")}}]);var n}(A.WF);(0,w.Cg)([(0,M.MZ)({attribute:!1})],F.prototype,"hass",void 0),(0,w.Cg)([(0,M.MZ)({type:Boolean})],F.prototype,"autofocus",void 0),(0,w.Cg)([(0,M.MZ)({type:Boolean})],F.prototype,"disabled",void 0),(0,w.Cg)([(0,M.MZ)({type:Boolean})],F.prototype,"required",void 0),(0,w.Cg)([(0,M.MZ)({type:Boolean,attribute:"allow-custom-entity"})],F.prototype,"allowCustomEntity",void 0),(0,w.Cg)([(0,M.MZ)({type:Boolean,attribute:"show-entity-id"})],F.prototype,"showEntityId",void 0),(0,w.Cg)([(0,M.MZ)()],F.prototype,"label",void 0),(0,w.Cg)([(0,M.MZ)()],F.prototype,"value",void 0),(0,w.Cg)([(0,M.MZ)()],F.prototype,"helper",void 0),(0,w.Cg)([(0,M.MZ)()],F.prototype,"placeholder",void 0),(0,w.Cg)([(0,M.MZ)({type:String,attribute:"search-label"})],F.prototype,"searchLabel",void 0),(0,w.Cg)([(0,M.MZ)({attribute:!1,type:Array})],F.prototype,"createDomains",void 0),(0,w.Cg)([(0,M.MZ)({type:Array,attribute:"include-domains"})],F.prototype,"includeDomains",void 0),(0,w.Cg)([(0,M.MZ)({type:Array,attribute:"exclude-domains"})],F.prototype,"excludeDomains",void 0),(0,w.Cg)([(0,M.MZ)({type:Array,attribute:"include-device-classes"})],F.prototype,"includeDeviceClasses",void 0),(0,w.Cg)([(0,M.MZ)({type:Array,attribute:"include-unit-of-measurement"})],F.prototype,"includeUnitOfMeasurement",void 0),(0,w.Cg)([(0,M.MZ)({type:Array,attribute:"include-entities"})],F.prototype,"includeEntities",void 0),(0,w.Cg)([(0,M.MZ)({type:Array,attribute:"exclude-entities"})],F.prototype,"excludeEntities",void 0),(0,w.Cg)([(0,M.MZ)({attribute:!1})],F.prototype,"entityFilter",void 0),(0,w.Cg)([(0,M.MZ)({attribute:"hide-clear-icon",type:Boolean})],F.prototype,"hideClearIcon",void 0),(0,w.Cg)([(0,M.MZ)({attribute:"add-button",type:Boolean})],F.prototype,"addButton",void 0),(0,w.Cg)([(0,M.P)("ha-generic-picker")],F.prototype,"_picker",void 0),F=(0,w.Cg)([(0,M.EM)("ha-entity-picker")],F),t()}catch(N){t(N)}})},53756:function(e,t,n){n.d(t,{t:function(){return l},w:function(){return c}});var i=n(78261),a=(n(28706),n(2008),n(74423),n(62062),n(18111),n(22489),n(61701),n(79432),n(26099),n(21699),n(71727)),r=n(74705),o=n(28978),s=n(15638),u=n(95350),l=[{name:"search_labels.entityName",weight:10},{name:"search_labels.friendlyName",weight:8},{name:"search_labels.deviceName",weight:7},{name:"search_labels.areaName",weight:6},{name:"search_labels.domainName",weight:6},{name:"search_labels.entityId",weight:3}],c=function(e,t,n,l,c,d,p,h,v){var y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",f=[],m=Object.keys(e.states);return p&&(m=m.filter(function(e){return p.includes(e)})),h&&(m=m.filter(function(e){return!h.includes(e)})),t&&(m=m.filter(function(e){return t.includes((0,a.m)(e))})),n&&(m=m.filter(function(e){return!n.includes((0,a.m)(e))})),f=m.map(function(t){var n=e.states[t],l=(0,o.u)(n),c=(0,r.Cf)(n,[{type:"entity"},{type:"device"},{type:"area"}],e.entities,e.devices,e.areas,e.floors),d=(0,i.A)(c,3),p=d[0],h=d[1],v=d[2],f=(0,u.p$)(e.localize,(0,a.m)(t)),m=(0,s.qC)(e),g=p||h||t,b=[v,p?h:void 0].filter(Boolean).join(m?" ◂ ":" ▸ ");return{id:"".concat(y).concat(t),primary:g,secondary:b,domain_name:f,sorting_label:[g,b].filter(Boolean).join("_"),search_labels:{entityName:p||null,deviceName:h||null,areaName:v||null,domainName:f||null,friendlyName:l||null,entityId:t},stateObj:n}}),c&&(f=f.filter(function(e){var t;return e.id===v||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.device_class)&&c.includes(e.stateObj.attributes.device_class)})),d&&(f=f.filter(function(e){var t;return e.id===v||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.unit_of_measurement)&&d.includes(e.stateObj.attributes.unit_of_measurement)})),l&&(f=f.filter(function(e){return e.id===v||e.stateObj&&l(e.stateObj)})),f}},95350:function(e,t,n){n.d(t,{QC:function(){return r},fK:function(){return a},p$:function(){return i}});var i=function(e,t,n){return e("component.".concat(t,".title"))||(null==n?void 0:n.name)||t},a=function(e,t){var n={type:"manifest/list"};return t&&(n.integrations=t),e.callWS(n)},r=function(e,t){return e.callWS({type:"manifest/get",integration:t})}},19711:function(e,t,n){n.d(t,{$:function(){return r}});n(23792),n(26099),n(3362),n(47764),n(62953);var i=n(1087),a=function(){return Promise.all([n.e("3785"),n.e("9914"),n.e("3687")]).then(n.bind(n,79029))},r=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:a,dialogParams:t})}}}]);
//# sourceMappingURL=71.ff51530eb2061f56.js.map