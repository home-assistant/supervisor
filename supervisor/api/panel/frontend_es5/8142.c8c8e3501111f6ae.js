"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["8142"],{78870:function(e,t,i){i.d(t,{M:function(){return a},l:function(){return n}});i(23792),i(26099),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(47764),i(62953);var n=new Set(["primary","accent","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white","primary-text","secondary-text","disabled"]);function a(e){return n.has(e)?"var(--".concat(e,"-color)"):e}},65522:function(e,t,i){i.d(t,{A:function(){return n}});i(42762);var n=function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.trim()}},79:function(e,t,i){i.d(t,{xn:function(){return o},T:function(){return s}});var n=i(31432),a=(i(2008),i(62062),i(18111),i(22489),i(61701),i(26099),i(16034),i(42762),i(22786));i(23792),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(47764),i(62953);var r=i(28978),o=function(e){var t;return null===(t=e.name_by_user||e.name)||void 0===t?void 0:t.trim()},s=function(e,t,i){return o(e)||i&&l(t,i)||t.localize("ui.panel.config.devices.unnamed_device",{type:t.localize("ui.panel.config.devices.type.".concat(e.entry_type||"device"))})},l=function(e,t){var i,a=(0,n.A)(t||[]);try{for(a.s();!(i=a.n()).done;){var o=i.value,s="string"==typeof o?o:o.entity_id,l=e.states[s];if(l)return(0,r.u)(l)}}catch(c){a.e(c)}finally{a.f()}};(0,a.A)(function(e){return function(e){var t,i=new Set,a=new Set,r=(0,n.A)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;a.has(o)?i.add(o):a.add(o)}}catch(s){r.e(s)}finally{r.f()}return i}(Object.values(e).map(function(e){return o(e)}).filter(function(e){return void 0!==e}))})},4358:function(e,t,i){i.d(t,{aH:function(){return s}});var n=i(79),a=i(28978),r=(i(28706),i(25276),i(34782),i(11392),[" ",": "," - "]),o=function(e){return e.toLowerCase()!==e},s=function(e,t,i){var n=t[e.entity_id];return n?l(n,i):(0,a.u)(e)},l=function(e,t,i){var s=e.name||("original_name"in e&&null!=e.original_name?String(e.original_name):void 0),l=e.device_id?t[e.device_id]:void 0;if(!l)return s||(i?(0,a.u)(i):void 0);var c=(0,n.xn)(l);return c!==s?c&&s&&function(e,t){for(var i=e.toLowerCase(),n=t.toLowerCase(),a=0,s=r;a<s.length;a++){var l=s[a],c="".concat(n).concat(l);if(i.startsWith(c)){var d=e.substring(c.length);if(d.length)return o(d.substr(0,d.indexOf(" ")))?d:d[0].toUpperCase()+d.slice(1)}}}(s,c)||s:void 0}},74705:function(e,t,i){i.d(t,{Cf:function(){return l}});i(2008),i(62062),i(18111),i(81148),i(22489),i(61701),i(13579),i(26099);var n=i(65522),a=i(79),r=i(4358),o=i(55931),s=i(28455),l=function(e,t,i,l,c,d){var u=(0,s.l)(e,i,l,c,d),h=u.device,p=u.area,v=u.floor;return t.map(function(t){switch(t.type){case"entity":return(0,r.aH)(e,i,l);case"device":return h?(0,a.xn)(h):void 0;case"area":return p?(0,n.A)(p):void 0;case"floor":return v?(0,o.X)(v):void 0;case"text":return t.text;default:return""}})}},55931:function(e,t,i){i.d(t,{X:function(){return n}});i(42762);var n=function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.trim()}},76774:function(e,t,i){i.d(t,{w:function(){return n}});var n=function(e,t){var i=e.area_id,n=i?t.areas[i]:void 0,a=null==n?void 0:n.floor_id;return{device:e,area:n||null,floor:(a?t.floors[a]:void 0)||null}}},28455:function(e,t,i){i.d(t,{l:function(){return n}});var n=function(e,t,i,n,r){var o=t[e.entity_id];return o?a(o,t,i,n,r):{entity:null,device:null,area:null,floor:null}},a=function(e,t,i,n,a){var r=t[e.entity_id],o=null==e?void 0:e.device_id,s=o?i[o]:void 0,l=(null==e?void 0:e.area_id)||(null==s?void 0:s.area_id),c=l?n[l]:void 0,d=null==c?void 0:c.floor_id;return{entity:r,device:s||null,area:c||null,floor:(d?a[d]:void 0)||null}}},78649:function(e,t,i){i.d(t,{n:function(){return a}});i(27495),i(90906);var n=/^(\w+)\.(\w+)$/,a=function(e){return n.test(e)}},80880:function(e,t,i){i.d(t,{Y:function(){return n}});i(26099),i(84864),i(57465),i(27495),i(38781),i(25440);var n=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",n="àáâäæãåāăąабçćčđďдèéêëēėęěеёэфğǵгḧхîïíīįìıİийкłлḿмñńǹňнôöòóœøōõőоṕпŕřрßśšşșсťțтûüùúūǘůűųувẃẍÿýыžźżз·",a="aaaaaaaaaaabcccdddeeeeeeeeeeefggghhiiiiiiiiijkllmmnnnnnoooooooooopprrrsssssstttuuuuuuuuuuvwxyyyzzzz".concat(i),r=new RegExp(n.split("").join("|"),"g"),o={"ж":"zh","х":"kh","ц":"ts","ч":"ch","ш":"sh","щ":"shch","ю":"iu","я":"ia"};return""===e?t="":""===(t=e.toString().toLowerCase().replace(r,function(e){return a.charAt(n.indexOf(e))}).replace(/[а-я]/g,function(e){return o[e]||""}).replace(/(\d),(?=\d)/g,"$1").replace(/[^a-z0-9]+/g,i).replace(new RegExp("(".concat(i,")\\1+"),"g"),"$1").replace(new RegExp("^".concat(i,"+")),"").replace(new RegExp("".concat(i,"+$")),""))&&(t="unknown"),t}},11382:function(e,t,i){var n,a,r,o,s=i(61397),l=i(50264),c=i(72153),d=i(44734),u=i(43080),h=i(69683),p=i(6454),v=i(25460),f=(i(28706),i(62826)),y=i(96196),m=i(77845),g=i(94333),_=i(1087),b=i(12587),k=(i(67094),function(e){function t(){var e;(0,d.A)(this,t);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=(0,h.A)(this,t,[].concat(n))).expanded=!1,e.outlined=!1,e.leftChevron=!1,e.noCollapse=!1,e._showContent=e.expanded,e}return(0,p.A)(t,e),(0,u.A)(t,[{key:"render",value:function(){var e=this.noCollapse?y.s6:(0,y.qy)(n||(n=(0,c.A)([' <ha-svg-icon .path="','" class="summary-icon ','"></ha-svg-icon> '])),"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",(0,g.H)({expanded:this.expanded}));return(0,y.qy)(a||(a=(0,c.A)([' <div class="top ','"> <div id="summary" class="','" @click="','" @keydown="','" @focus="','" @blur="','" role="button" tabindex="','" aria-expanded="','" aria-controls="sect1" part="summary"> ',' <slot name="leading-icon"></slot> <slot name="header"> <div class="header"> ',' <slot class="secondary" name="secondary">',"</slot> </div> </slot> ",' <slot name="icons"></slot> </div> </div> <div class="container ','" @transitionend="','" role="region" aria-labelledby="summary" aria-hidden="','" tabindex="-1"> '," </div> "])),(0,g.H)({expanded:this.expanded}),(0,g.H)({noCollapse:this.noCollapse}),this._toggleContainer,this._toggleContainer,this._focusChanged,this._focusChanged,this.noCollapse?-1:0,this.expanded,this.leftChevron?e:y.s6,this.header,this.secondary,this.leftChevron?y.s6:e,(0,g.H)({expanded:this.expanded}),this._handleTransitionEnd,!this.expanded,this._showContent?(0,y.qy)(r||(r=(0,c.A)(["<slot></slot>"]))):"")}},{key:"willUpdate",value:function(e){var i=this;(0,v.A)(t,"willUpdate",this,3)([e]),e.has("expanded")&&(this._showContent=this.expanded,setTimeout(function(){i._container.style.overflow=i.expanded?"initial":"hidden"},300))}},{key:"_handleTransitionEnd",value:function(){this._container.style.removeProperty("height"),this._container.style.overflow=this.expanded?"initial":"hidden",this._showContent=this.expanded}},{key:"_toggleContainer",value:(i=(0,l.A)((0,s.A)().m(function e(t){var i,n,a=this;return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:if(!t.defaultPrevented){e.n=1;break}return e.a(2);case 1:if("keydown"!==t.type||"Enter"===t.key||" "===t.key){e.n=2;break}return e.a(2);case 2:if(t.preventDefault(),!this.noCollapse){e.n=3;break}return e.a(2);case 3:if(i=!this.expanded,(0,_.r)(this,"expanded-will-change",{expanded:i}),this._container.style.overflow="hidden",!i){e.n=4;break}return this._showContent=!0,e.n=4,(0,b.E)();case 4:n=this._container.scrollHeight,this._container.style.height="".concat(n,"px"),i||setTimeout(function(){a._container.style.height="0px"},0),this.expanded=i,(0,_.r)(this,"expanded-changed",{expanded:this.expanded});case 5:return e.a(2)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"_focusChanged",value:function(e){this.noCollapse||this.shadowRoot.querySelector(".top").classList.toggle("focused","focus"===e.type)}}]);var i}(y.WF));k.styles=(0,y.AH)(o||(o=(0,c.A)([":host{display:block}.top{display:flex;align-items:center;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.top.expanded{border-bottom-left-radius:0px;border-bottom-right-radius:0px}.top.focused{background:var(--input-fill-color)}:host([outlined]){box-shadow:none;border-width:1px;border-style:solid;border-color:var(--outline-color);border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.summary-icon{transition:transform 150ms cubic-bezier(.4, 0, .2, 1);direction:var(--direction);margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;border-radius:var(--ha-border-radius-circle)}#summary:focus-visible ha-svg-icon.summary-icon{background-color:var(--ha-color-fill-neutral-normal-active)}::slotted([slot=leading-icon]),:host([left-chevron]) .summary-icon{margin-left:0;margin-right:8px;margin-inline-start:0;margin-inline-end:8px}#summary{flex:1;display:flex;padding:var(--expansion-panel-summary-padding,0 8px);min-height:48px;align-items:center;cursor:pointer;overflow:hidden;font-weight:var(--ha-font-weight-medium);outline:0}#summary.noCollapse{cursor:default}.summary-icon.expanded{transform:rotate(180deg)}.header,::slotted([slot=header]){flex:1;overflow-wrap:anywhere;color:var(--primary-text-color)}.container{padding:var(--expansion-panel-content-padding,0 8px);overflow:hidden;transition:height .3s cubic-bezier(.4, 0, .2, 1);height:0px}.container.expanded{height:auto}.secondary{display:block;color:var(--secondary-text-color);font-size:var(--ha-font-size-s)}"]))),(0,f.Cg)([(0,m.MZ)({type:Boolean,reflect:!0})],k.prototype,"expanded",void 0),(0,f.Cg)([(0,m.MZ)({type:Boolean,reflect:!0})],k.prototype,"outlined",void 0),(0,f.Cg)([(0,m.MZ)({attribute:"left-chevron",type:Boolean,reflect:!0})],k.prototype,"leftChevron",void 0),(0,f.Cg)([(0,m.MZ)({attribute:"no-collapse",type:Boolean,reflect:!0})],k.prototype,"noCollapse",void 0),(0,f.Cg)([(0,m.MZ)()],k.prototype,"header",void 0),(0,f.Cg)([(0,m.MZ)()],k.prototype,"secondary",void 0),(0,f.Cg)([(0,m.wk)()],k.prototype,"_showContent",void 0),(0,f.Cg)([(0,m.P)(".container")],k.prototype,"_container",void 0),k=(0,f.Cg)([(0,m.EM)("ha-expansion-panel")],k)},18198:function(e,t,i){i.d(t,{Si:function(){return p}});var n,a,r=i(72153),o=i(44734),s=i(43080),l=i(69683),c=i(6454),d=i(62826),u=i(96196),h=i(77845),p=(i(67094),function(e){switch(e.level){case 0:return"M11,10H13V16H11V10M22,12H19V20H5V12H2L12,3L22,12M15,10A2,2 0 0,0 13,8H11A2,2 0 0,0 9,10V16A2,2 0 0,0 11,18H13A2,2 0 0,0 15,16V10Z";case 1:return"M12,3L2,12H5V20H19V12H22L12,3M10,8H14V18H12V10H10V8Z";case 2:return"M12,3L2,12H5V20H19V12H22L12,3M9,8H13A2,2 0 0,1 15,10V12A2,2 0 0,1 13,14H11V16H15V18H9V14A2,2 0 0,1 11,12H13V10H9V8Z";case 3:return"M12,3L22,12H19V20H5V12H2L12,3M15,11.5V10C15,8.89 14.1,8 13,8H9V10H13V12H11V14H13V16H9V18H13A2,2 0 0,0 15,16V14.5A1.5,1.5 0 0,0 13.5,13A1.5,1.5 0 0,0 15,11.5Z";case-1:return"M12,3L2,12H5V20H19V12H22L12,3M11,15H7V13H11V15M15,18H13V10H11V8H15V18Z"}return"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}),v=function(e){function t(){return(0,o.A)(this,t),(0,l.A)(this,t,arguments)}return(0,c.A)(t,e),(0,s.A)(t,[{key:"render",value:function(){if(!this.floor)return u.s6;if(this.floor.icon)return(0,u.qy)(n||(n=(0,r.A)(['<ha-icon .icon="','"></ha-icon>'])),this.floor.icon);var e=p(this.floor);return(0,u.qy)(a||(a=(0,r.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),e)}}])}(u.WF);(0,d.Cg)([(0,h.MZ)({attribute:!1})],v.prototype,"floor",void 0),(0,d.Cg)([(0,h.MZ)()],v.prototype,"icon",void 0),v=(0,d.Cg)([(0,h.EM)("ha-floor-icon")],v)},84909:function(e,t,i){i.a(e,async function(e,n){try{i.r(t),i.d(t,{HaTargetSelector:function(){return C}});var a,r,o,s=i(72153),l=i(44734),c=i(43080),d=i(69683),u=i(6454),h=i(25460),p=(i(28706),i(18111),i(13579),i(26099),i(16034),i(62826)),v=i(96196),f=i(77845),y=i(22786),m=i(44537),g=i(44927),_=i(55053),b=i(95311),k=i(79286),A=e([k]);k=(A.then?(await A)():A)[0];var C=function(e){function t(){var e;(0,l.A)(this,t);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=(0,d.A)(this,t,[].concat(n))).disabled=!1,e._deviceIntegrationLookup=(0,y.A)(g.fk),e._filterEntities=function(t){var i;return null===(i=e.selector.target)||void 0===i||!i.entity||(0,m.e)(e.selector.target.entity).some(function(i){return(0,b.Ru)(i,t,e._entitySources)})},e._filterDevices=function(t){var i;if(null===(i=e.selector.target)||void 0===i||!i.device)return!0;var n=e._entitySources?e._deviceIntegrationLookup(e._entitySources,Object.values(e.hass.entities)):void 0;return(0,m.e)(e.selector.target.device).some(function(e){return(0,b.vX)(e,t,n)})},e}return(0,u.A)(t,e),(0,c.A)(t,[{key:"_hasIntegration",value:function(e){var t,i;return(null===(t=e.target)||void 0===t?void 0:t.entity)&&(0,m.e)(e.target.entity).some(function(e){return e.integration})||(null===(i=e.target)||void 0===i?void 0:i.device)&&(0,m.e)(e.target.device).some(function(e){return e.integration})}},{key:"updated",value:function(e){var i=this;(0,h.A)(t,"updated",this,3)([e]),e.has("selector")&&this._hasIntegration(this.selector)&&!this._entitySources&&(0,_.c)(this.hass).then(function(e){i._entitySources=e}),e.has("selector")&&(this._createDomains=(0,b.Lo)(this.selector))}},{key:"render",value:function(){return this._hasIntegration(this.selector)&&!this._entitySources?v.s6:(0,v.qy)(a||(a=(0,s.A)([" ",' <ha-target-picker .hass="','" .value="','" .helper="','" .deviceFilter="','" .entityFilter="','" .disabled="','" .createDomains="','"></ha-target-picker>'])),this.label?(0,v.qy)(r||(r=(0,s.A)(["<label>","</label>"])),this.label):v.s6,this.hass,this.value,this.helper,this._filterDevices,this._filterEntities,this.disabled,this._createDomains)}}])}(v.WF);C.styles=(0,v.AH)(o||(o=(0,s.A)(["ha-target-picker{display:block}"]))),(0,p.Cg)([(0,f.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,p.Cg)([(0,f.MZ)({attribute:!1})],C.prototype,"selector",void 0),(0,p.Cg)([(0,f.MZ)({type:Object})],C.prototype,"value",void 0),(0,p.Cg)([(0,f.MZ)()],C.prototype,"label",void 0),(0,p.Cg)([(0,f.MZ)()],C.prototype,"helper",void 0),(0,p.Cg)([(0,f.MZ)({type:Boolean})],C.prototype,"disabled",void 0),(0,p.Cg)([(0,f.wk)()],C.prototype,"_entitySources",void 0),(0,p.Cg)([(0,f.wk)()],C.prototype,"_createDomains",void 0),C=(0,p.Cg)([(0,f.EM)("ha-selector-target")],C),n()}catch(x){n(x)}})},93367:function(e,t,i){i.a(e,async function(e,t){try{var n,a,r,o,s=i(72153),l=i(44734),c=i(43080),d=i(69683),u=i(6454),h=i(62826),p=i(96196),v=i(77845),f=i(45847),y=i(69093),m=i(85694),g=(i(67094),e([m]));m=(g.then?(await g)():g)[0];var _=function(e){function t(){return(0,l.A)(this,t),(0,d.A)(this,t,arguments)}return(0,u.A)(t,e),(0,c.A)(t,[{key:"render",value:function(){var e,t,i=this,o=this.icon||this.stateObj&&(null===(e=this.hass)||void 0===e||null===(e=e.entities[this.stateObj.entity_id])||void 0===e?void 0:e.icon)||(null===(t=this.stateObj)||void 0===t?void 0:t.attributes.icon);if(o)return(0,p.qy)(n||(n=(0,s.A)(['<ha-icon .icon="','"></ha-icon>'])),o);if(!this.stateObj)return p.s6;if(!this.hass)return this._renderFallback();var l=(0,m.fq)(this.hass,this.stateObj,this.stateValue).then(function(e){return e?(0,p.qy)(a||(a=(0,s.A)(['<ha-icon .icon="','"></ha-icon>'])),e):i._renderFallback()});return(0,p.qy)(r||(r=(0,s.A)(["",""])),(0,f.T)(l))}},{key:"_renderFallback",value:function(){var e=(0,y.t)(this.stateObj);return(0,p.qy)(o||(o=(0,s.A)([' <ha-svg-icon .path="','"></ha-svg-icon> '])),m.l[e]||m.lW)}}])}(p.WF);(0,h.Cg)([(0,v.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,h.Cg)([(0,v.MZ)({attribute:!1})],_.prototype,"stateObj",void 0),(0,h.Cg)([(0,v.MZ)({attribute:!1})],_.prototype,"stateValue",void 0),(0,h.Cg)([(0,v.MZ)()],_.prototype,"icon",void 0),_=(0,h.Cg)([(0,v.EM)("ha-state-icon")],_),t()}catch(b){t(b)}})},79286:function(e,t,i){i.a(e,async function(e,t){try{var n,a,r,o,s,l,c,d,u,h,p,v,f,y,m,g,_,b,k,A,C,x,w,M,H,L,V,I,D=i(61397),F=i(50264),q=i(26520),z=i(78261),Z=i(72153),E=i(94741),j=i(44734),O=i(43080),S=i(75864),P=i(69683),N=i(6454),R=i(25460),T=(i(28706),i(2008),i(74423),i(23792),i(62062),i(44114),i(26910),i(18111),i(22489),i(7588),i(61701),i(69085),i(53921),i(79432),i(26099),i(16034),i(27495),i(21699),i(90744),i(11392),i(23500),i(62826)),B=i(61366),W=i(16527),$=i(94454),K=i(78648),Y=i(96196),G=i(77845),U=i(29485),X=i(22786),J=i(44537),Q=i(1087),ee=i(78649),te=i(52220),ie=i(15638),ne=i(76952),ae=i(77423),re=i(38911),oe=i(31422),se=i(53756),le=i(95350),ce=i(5904),de=i(88555),ue=i(54706),he=i(24367),pe=i(19711),ve=i(59653),fe=i(44144),ye=i(38508),me=(i(67094),i(73150),i(22099)),ge=i(69404),_e=e([B,ye,me,ge]);[B,ye,me,ge]=_e.then?(await _e)():_e;var be="________",ke="___create-new-entity___",Ae=function(e){function t(){var e;(0,j.A)(this,t);for(var i=arguments.length,f=new Array(i),y=0;y<i;y++)f[y]=arguments[y];return(e=(0,P.A)(this,t,[].concat(f))).compact=!1,e.disabled=!1,e.addOnTop=!1,e._configEntryLookup={},e._getDevicesMemoized=(0,X.A)(oe.o),e._getLabelsMemoized=(0,X.A)(ce.I),e._getEntitiesMemoized=(0,X.A)(se.w),e._getAreasAndFloorsMemoized=(0,X.A)(ne.bi),e._fuseIndexes={area:(0,X.A)(function(t){return e._createFuseIndex(t,ne.Z2)}),entity:(0,X.A)(function(t){return e._createFuseIndex(t,se.t)}),device:(0,X.A)(function(t){return e._createFuseIndex(t,oe._)}),label:(0,X.A)(function(t){return e._createFuseIndex(t,ce.u)})},e._createFuseIndex=function(e,t){return K.A.createIndex(t,e)},e._createNewDomainElement=function(t){(0,pe.$)((0,S.A)(e),{domain:t,dialogClosedCallback:function(t){t.entityId&&requestAnimationFrame(function(){e._addTarget(t.entityId,"entity")})}})},e._sectionTitleFunction=function(t){var i=t.firstIndex,n=t.lastIndex,a=t.firstItem,r=t.secondItem,o=t.itemsCount;if(!(void 0===a||void 0===r||"string"==typeof a||"string"==typeof r&&"padding"!==r||0===i&&n===o-1)){var s=(0,de.OJ)(a),l="area"===s||"floor"===s?"areas":"entity"===s?"entities":s&&"empty"!==s?"".concat(s,"s"):void 0;return l?e.hass.localize("ui.components.target-picker.type.".concat(l)):void 0}},e._getItems=function(t,i){return e._selectedSection=i,e._getItemsMemoized(e.hass.localize,e.entityFilter,e.deviceFilter,e.includeDomains,e.includeDeviceClasses,e.value,t,e._configEntryLookup,e._selectedSection)},e._getItemsMemoized=(0,X.A)(function(t,i,n,a,r,o,s,l,c){var d=[];if(!c||"entity"===c){var u=e._getEntitiesMemoized(e.hass,a,void 0,i,r,void 0,void 0,null!=o&&o.entity_id?(0,J.e)(o.entity_id):void 0,void 0,"entity".concat(be)).sort(e._sortBySortingLabel);s&&(u=e._filterGroup("entity",u,s,se.t)),!c&&u.length&&d.push(t("ui.components.target-picker.type.entities")),d.push.apply(d,(0,E.A)(u))}if(!c||"device"===c){var h=e._getDevicesMemoized(e.hass,l,a,void 0,r,n,i,null!=o&&o.device_id?(0,J.e)(o.device_id):void 0,void 0,"device".concat(be)).sort(e._sortBySortingLabel);s&&(h=e._filterGroup("device",h,s,oe._)),!c&&h.length&&d.push(t("ui.components.target-picker.type.devices")),d.push.apply(d,(0,E.A)(h))}if(!c||"area"===c){var p=e._getAreasAndFloorsMemoized(e.hass.states,e.hass.floors,e.hass.areas,e.hass.devices,e.hass.entities,(0,X.A)(function(e){return[e.type,e.id].join(be)}),a,void 0,r,n,i,null!=o&&o.area_id?(0,J.e)(o.area_id):void 0,null!=o&&o.floor_id?(0,J.e)(o.floor_id):void 0);s&&(p=e._filterGroup("area",p,s,ne.Z2,!1)),!c&&p.length&&d.push(t("ui.components.target-picker.type.areas")),d.push.apply(d,(0,E.A)(p.map(function(e,t){var i=p[t+1];return!i||"area"===e.type&&"floor"===i.type?Object.assign(Object.assign({},e),{},{last:!0}):e})))}if(!c||"label"===c){var v=e._getLabelsMemoized(e.hass.states,e.hass.areas,e.hass.devices,e.hass.entities,e._labelRegistry,a,void 0,r,n,i,null!=o&&o.label_id?(0,J.e)(o.label_id):void 0,"label".concat(be)).sort(e._sortBySortingLabel);s&&(v=e._filterGroup("label",v,s,ce.u)),!c&&v.length&&d.push(t("ui.components.target-picker.type.labels")),d.push.apply(d,(0,E.A)(v))}return d}),e._getAdditionalItems=function(){return e._getCreateItems(e.createDomains)},e._getCreateItems=(0,X.A)(function(t){return null!=t&&t.length?t.map(function(t){var i=e.hass.localize("ui.components.entity.entity-picker.create_helper",{domain:(0,he.z)(t)?e.hass.localize("ui.panel.config.helpers.types.".concat(t)):(0,le.p$)(e.hass.localize,t)});return{id:ke+t,primary:i,secondary:e.hass.localize("ui.components.entity.entity-picker.new_entity"),icon_path:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}}):[]}),e._renderRow=function(t,i){var v;if(!t)return Y.s6;var f,y=(0,de.OJ)(t),m=!1,g=!1,_=!1;"area"!==y&&"floor"!==y||(g=(0,ie.qC)(e.hass),m="area"===y&&!(null===(f=t.area)||void 0===f||!f.floor_id));return"entity"===y&&(_=!!e._showEntityId),(0,Y.qy)(n||(n=(0,Z.A)([' <ha-combo-box-item id="','" tabindex="-1" .type="','" class="','" style="','"> '," ",' <span slot="headline">',"</span> "," "," "," </ha-combo-box-item> "])),"list-item-".concat(i),"empty"===y?"text":"button","empty"===y?"empty":"","area"===t.type&&m?"--md-list-item-leading-space: var(--ha-space-12);":"","area"===t.type&&m?(0,Y.qy)(a||(a=(0,Z.A)([' <ha-tree-indicator style="','" .end="','" slot="start"></ha-tree-indicator> '])),(0,U.W)({width:"var(--ha-space-12)",position:"absolute",top:"0",left:g?void 0:"var(--ha-space-1)",right:g?"var(--ha-space-1)":void 0,transform:g?"scaleX(-1)":""}),t.last):Y.s6,t.icon?(0,Y.qy)(r||(r=(0,Z.A)(['<ha-icon slot="start" .icon="','"></ha-icon>'])),t.icon):t.icon_path?(0,Y.qy)(o||(o=(0,Z.A)(['<ha-svg-icon slot="start" .path="','"></ha-svg-icon>'])),t.icon_path):"entity"===y&&t.stateObj?(0,Y.qy)(s||(s=(0,Z.A)([' <state-badge slot="start" .stateObj="','" .hass="','"></state-badge> '])),t.stateObj,e.hass):"device"===y&&t.domain?(0,Y.qy)(l||(l=(0,Z.A)([' <img slot="start" alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="','"> '])),(0,fe.MR)({domain:t.domain,type:"icon",darkOptimized:e.hass.themes.darkMode})):"floor"===y?(0,Y.qy)(c||(c=(0,Z.A)(['<ha-floor-icon slot="start" .floor="','"></ha-floor-icon>'])),t.floor):"area"===y?(0,Y.qy)(d||(d=(0,Z.A)(['<ha-svg-icon slot="start" .path="','"></ha-svg-icon>'])),t.icon_path||"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z"):Y.s6,t.primary,t.secondary?(0,Y.qy)(u||(u=(0,Z.A)(['<span slot="supporting-text">',"</span>"])),t.secondary):Y.s6,t.stateObj&&_?(0,Y.qy)(h||(h=(0,Z.A)([' <span slot="supporting-text" class="code"> '," </span> "])),null===(v=t.stateObj)||void 0===v?void 0:v.entity_id):Y.s6,!t.domain_name||"entity"===y&&_?Y.s6:(0,Y.qy)(p||(p=(0,Z.A)([' <div slot="trailing-supporting-text" class="domain"> '," </div> "])),t.domain_name))},e._noTargetFoundLabel=function(t){return e.hass.localize("ui.components.target-picker.no_target_found",{term:(0,Y.qy)(v||(v=(0,Z.A)(["<b>‘","’</b>"])),t)})},e._sortBySortingLabel=function(t,i){var n,a;return(0,te.SH)(t.sorting_label,i.sorting_label,null!==(n=null===(a=e.hass)||void 0===a?void 0:a.locale.language)&&void 0!==n?n:navigator.language)},e}return(0,N.A)(t,e),(0,O.A)(t,[{key:"_showEntityId",get:function(){var e;return null===(e=this.hass.userData)||void 0===e?void 0:e.showEntityIdPicker}},{key:"willUpdate",value:function(e){(0,R.A)(t,"willUpdate",this,3)([e]),this.hasUpdated||this._loadConfigEntries()}},{key:"render",value:function(){return this.addOnTop?(0,Y.qy)(f||(f=(0,Z.A)([" "," "," "])),this._renderPicker(),this._renderItems()):(0,Y.qy)(y||(y=(0,Z.A)([" "," "," "])),this._renderItems(),this._renderPicker())}},{key:"_renderValueChips",value:function(){var e,t,i,n,a,r=this,o=null!==(e=this.value)&&void 0!==e&&e.entity_id?(0,J.e)(this.value.entity_id):[],s=null!==(t=this.value)&&void 0!==t&&t.device_id?(0,J.e)(this.value.device_id):[],l=null!==(i=this.value)&&void 0!==i&&i.area_id?(0,J.e)(this.value.area_id):[],c=null!==(n=this.value)&&void 0!==n&&n.floor_id?(0,J.e)(this.value.floor_id):[],d=null!==(a=this.value)&&void 0!==a&&a.label_id?(0,J.e)(this.value.label_id):[];return o.length||s.length||l.length||c.length||d.length?(0,Y.qy)(m||(m=(0,Z.A)([' <div class="mdc-chip-set items"> '," "," "," "," "," </div> "])),c.length?c.map(function(e){return(0,Y.qy)(g||(g=(0,Z.A)([' <ha-target-picker-value-chip .hass="','" type="floor" .itemId="','" @remove-target-item="','" @expand-target-item="','"></ha-target-picker-value-chip> '])),r.hass,e,r._handleRemove,r._handleExpand)}):Y.s6,l.length?l.map(function(e){return(0,Y.qy)(_||(_=(0,Z.A)([' <ha-target-picker-value-chip .hass="','" type="area" .itemId="','" @remove-target-item="','" @expand-target-item="','"></ha-target-picker-value-chip> '])),r.hass,e,r._handleRemove,r._handleExpand)}):Y.s6,s.length?s.map(function(e){return(0,Y.qy)(b||(b=(0,Z.A)([' <ha-target-picker-value-chip .hass="','" type="device" .itemId="','" @remove-target-item="','" @expand-target-item="','"></ha-target-picker-value-chip> '])),r.hass,e,r._handleRemove,r._handleExpand)}):Y.s6,o.length?o.map(function(e){return(0,Y.qy)(k||(k=(0,Z.A)([' <ha-target-picker-value-chip .hass="','" type="entity" .itemId="','" @remove-target-item="','" @expand-target-item="','"></ha-target-picker-value-chip> '])),r.hass,e,r._handleRemove,r._handleExpand)}):Y.s6,d.length?d.map(function(e){return(0,Y.qy)(A||(A=(0,Z.A)([' <ha-target-picker-value-chip .hass="','" type="label" .itemId="','" @remove-target-item="','" @expand-target-item="','"></ha-target-picker-value-chip> '])),r.hass,e,r._handleRemove,r._handleExpand)}):Y.s6):Y.s6}},{key:"_renderValueGroups",value:function(){var e,t,i,n,a,r,o=null!==(e=this.value)&&void 0!==e&&e.entity_id?(0,J.e)(this.value.entity_id):[],s=null!==(t=this.value)&&void 0!==t&&t.device_id?(0,J.e)(this.value.device_id):[],l=null!==(i=this.value)&&void 0!==i&&i.area_id?(0,J.e)(this.value.area_id):[],c=null!==(n=this.value)&&void 0!==n&&n.floor_id?(0,J.e)(this.value.floor_id):[],d=null!==(a=this.value)&&void 0!==a&&a.label_id?(0,J.e)(null===(r=this.value)||void 0===r?void 0:r.label_id):[];return o.length||s.length||l.length||c.length||d.length?(0,Y.qy)(C||(C=(0,Z.A)([' <div class="item-groups"> '," "," "," "," </div> "])),o.length?(0,Y.qy)(x||(x=(0,Z.A)([' <ha-target-picker-item-group @remove-target-item="','" type="entity" .hass="','" .items="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .includeDeviceClasses="','"> </ha-target-picker-item-group> '])),this._handleRemove,this.hass,{entity:o},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):Y.s6,s.length?(0,Y.qy)(w||(w=(0,Z.A)([' <ha-target-picker-item-group @remove-target-item="','" type="device" .hass="','" .items="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .includeDeviceClasses="','"> </ha-target-picker-item-group> '])),this._handleRemove,this.hass,{device:s},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):Y.s6,c.length||l.length?(0,Y.qy)(M||(M=(0,Z.A)([' <ha-target-picker-item-group @remove-target-item="','" type="area" .hass="','" .items="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .includeDeviceClasses="','"> </ha-target-picker-item-group> '])),this._handleRemove,this.hass,{floor:c,area:l},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):Y.s6,d.length?(0,Y.qy)(H||(H=(0,Z.A)([' <ha-target-picker-item-group @remove-target-item="','" type="label" .hass="','" .items="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .includeDeviceClasses="','"> </ha-target-picker-item-group> '])),this._handleRemove,this.hass,{label:d},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):Y.s6):Y.s6}},{key:"_renderItems",value:function(){return(0,Y.qy)(L||(L=(0,Z.A)([" "," "])),this.compact?this._renderValueChips():this._renderValueGroups())}},{key:"_renderPicker",value:function(){var e=[{id:"entity",label:this.hass.localize("ui.components.target-picker.type.entities")},{id:"device",label:this.hass.localize("ui.components.target-picker.type.devices")},{id:"area",label:this.hass.localize("ui.components.target-picker.type.areas")},"separator",{id:"label",label:this.hass.localize("ui.components.target-picker.type.labels")}];return(0,Y.qy)(V||(V=(0,Z.A)([' <div class="add-target-wrapper"> <ha-generic-picker .hass="','" .disabled="','" .autofocus="','" .helper="','" .sections="','" .notFoundLabel="','" .emptyLabel="','" .sectionTitleFunction="','" .selectedSection="','" .rowRenderer="','" .getItems="','" @value-changed="','" .addButtonLabel="','" .getAdditionalItems="','"> </ha-generic-picker> </div> '])),this.hass,this.disabled,this.autofocus,this.helper,e,this._noTargetFoundLabel,this.hass.localize("ui.components.target-picker.no_targets"),this._sectionTitleFunction,this._selectedSection,this._renderRow,this._getItems,this._targetPicked,this.hass.localize("ui.components.target-picker.add_target"),this._getAdditionalItems)}},{key:"_targetPicked",value:function(e){e.stopPropagation();var t=e.detail.value;if(t.startsWith(ke))this._createNewDomainElement(t.substring(23));else{var i=e.detail.value.split(be),n=(0,z.A)(i,2),a=n[0],r=n[1];this._addTarget(r,a)}}},{key:"_addTarget",value:function(e,t){var i,n,a="".concat(t,"_id");("entity_id"!==a||(0,ee.n)(e))&&(this.value&&this.value[a]&&(0,J.e)(this.value[a]).includes(e)||((0,Q.r)(this,"value-changed",{value:this.value?Object.assign(Object.assign({},this.value),{},(0,q.A)({},a,this.value[a]?[].concat((0,E.A)((0,J.e)(this.value[a])),[e]):e)):(0,q.A)({},a,e)}),null===(i=this.shadowRoot)||void 0===i||null===(i=i.querySelector("ha-target-picker-item-group[type='".concat(null===(n=this._newTarget)||void 0===n?void 0:n.type,"']")))||void 0===i||i.removeAttribute("collapsed")))}},{key:"_handleRemove",value:function(e){var t=e.detail,i=t.type,n=t.id;(0,Q.r)(this,"value-changed",{value:this._removeItem(this.value,i,n)})}},{key:"_handleExpand",value:function(e){var t=this,i=e.detail.type,n=e.detail.id,a=[],r=[],o=[];if("floor"===i)Object.values(this.hass.areas).forEach(function(e){var i;e.floor_id!==n||null!==(i=t.value.area_id)&&void 0!==i&&i.includes(e.area_id)||!(0,de.Kx)(e,t.hass.devices,t.hass.entities,t.deviceFilter,t.includeDomains,t.includeDeviceClasses,t.hass.states,t.entityFilter)||a.push(e.area_id)});else if("area"===i)Object.values(this.hass.devices).forEach(function(e){var i;e.area_id!==n||null!==(i=t.value.device_id)&&void 0!==i&&i.includes(e.id)||!(0,de.Ly)(e,t.hass.entities,t.deviceFilter,t.includeDomains,t.includeDeviceClasses,t.hass.states,t.entityFilter)||r.push(e.id)}),Object.values(this.hass.entities).forEach(function(e){var i;e.area_id!==n||null!==(i=t.value.entity_id)&&void 0!==i&&i.includes(e.entity_id)||!(0,de.YK)(e,!1,t.includeDomains,t.includeDeviceClasses,t.hass.states,t.entityFilter)||o.push(e.entity_id)});else if("device"===i)Object.values(this.hass.entities).forEach(function(e){var i;e.device_id!==n||null!==(i=t.value.entity_id)&&void 0!==i&&i.includes(e.entity_id)||!(0,de.YK)(e,!1,t.includeDomains,t.includeDeviceClasses,t.hass.states,t.entityFilter)||o.push(e.entity_id)});else{if("label"!==i)return;Object.values(this.hass.areas).forEach(function(e){var i;!e.labels.includes(n)||null!==(i=t.value.area_id)&&void 0!==i&&i.includes(e.area_id)||!(0,de.Kx)(e,t.hass.devices,t.hass.entities,t.deviceFilter,t.includeDomains,t.includeDeviceClasses,t.hass.states,t.entityFilter)||a.push(e.area_id)}),Object.values(this.hass.devices).forEach(function(e){var i;!e.labels.includes(n)||null!==(i=t.value.device_id)&&void 0!==i&&i.includes(e.id)||!(0,de.Ly)(e,t.hass.entities,t.deviceFilter,t.includeDomains,t.includeDeviceClasses,t.hass.states,t.entityFilter)||r.push(e.id)}),Object.values(this.hass.entities).forEach(function(e){var i;!e.labels.includes(n)||null!==(i=t.value.entity_id)&&void 0!==i&&i.includes(e.entity_id)||!(0,de.YK)(e,!0,t.includeDomains,t.includeDeviceClasses,t.hass.states,t.entityFilter)||o.push(e.entity_id)})}var s=this.value;o.length&&(s=this._addItems(s,"entity_id",o)),r.length&&(s=this._addItems(s,"device_id",r)),a.length&&(s=this._addItems(s,"area_id",a)),s=this._removeItem(s,i,n),(0,Q.r)(this,"value-changed",{value:s})}},{key:"_addItems",value:function(e,t,i){return Object.assign(Object.assign({},e),{},(0,q.A)({},t,e[t]?(0,J.e)(e[t]).concat(i):i))}},{key:"_removeItem",value:function(e,t,i){var n="".concat(t,"_id"),a=(0,J.e)(e[n]).filter(function(e){return String(e)!==i});if(a.length)return Object.assign(Object.assign({},e),{},(0,q.A)({},n,a));var r=Object.assign({},e);return delete r[n],Object.keys(r).length?r:void 0}},{key:"_filterGroup",value:function(e,t,i,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this._fuseIndexes[e](t);return a?(0,ve.x)(t,i,n,function(e){return e.id},r):(0,ve.C)(t,i,n,r,{ignoreLocation:!0})}},{key:"_loadConfigEntries",value:(i=(0,F.A)((0,D.A)().m(function e(){var t;return(0,D.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,ae.VN)(this.hass);case 1:t=e.v,this._configEntryLookup=Object.fromEntries(t.map(function(e){return[e.entry_id,e]}));case 2:return e.a(2)}},e,this)})),function(){return i.apply(this,arguments)})}],[{key:"styles",get:function(){return(0,Y.AH)(I||(I=(0,Z.A)([".add-target-wrapper{display:flex;justify-content:flex-start;margin-top:var(--ha-space-3)}ha-generic-picker{width:100%}"," .items{z-index:2}.mdc-chip-set{padding:var(--ha-space-1) 0;gap:var(--ha-space-2)}.item-groups{overflow:hidden;border:2px solid var(--divider-color);border-radius:var(--ha-border-radius-lg)}"])),(0,Y.iz)($))}}]);var i}((0,ue.E)(Y.WF));(0,T.Cg)([(0,G.MZ)({attribute:!1})],Ae.prototype,"hass",void 0),(0,T.Cg)([(0,G.MZ)({attribute:!1})],Ae.prototype,"value",void 0),(0,T.Cg)([(0,G.MZ)()],Ae.prototype,"helper",void 0),(0,T.Cg)([(0,G.MZ)({type:Boolean,reflect:!0})],Ae.prototype,"compact",void 0),(0,T.Cg)([(0,G.MZ)({attribute:!1,type:Array})],Ae.prototype,"createDomains",void 0),(0,T.Cg)([(0,G.MZ)({type:Array,attribute:"include-domains"})],Ae.prototype,"includeDomains",void 0),(0,T.Cg)([(0,G.MZ)({type:Array,attribute:"include-device-classes"})],Ae.prototype,"includeDeviceClasses",void 0),(0,T.Cg)([(0,G.MZ)({attribute:!1})],Ae.prototype,"deviceFilter",void 0),(0,T.Cg)([(0,G.MZ)({attribute:!1})],Ae.prototype,"entityFilter",void 0),(0,T.Cg)([(0,G.MZ)({type:Boolean,reflect:!0})],Ae.prototype,"disabled",void 0),(0,T.Cg)([(0,G.MZ)({attribute:"add-on-top",type:Boolean})],Ae.prototype,"addOnTop",void 0),(0,T.Cg)([(0,G.wk)()],Ae.prototype,"_selectedSection",void 0),(0,T.Cg)([(0,G.wk)()],Ae.prototype,"_configEntryLookup",void 0),(0,T.Cg)([(0,G.wk)(),(0,W.Fg)({context:re.HD,subscribe:!0})],Ae.prototype,"_labelRegistry",void 0),Ae=(0,T.Cg)([(0,G.EM)("ha-target-picker")],Ae),t()}catch(Ce){t(Ce)}})},34127:function(e,t,i){i.a(e,async function(e,t){try{var n,a=i(72153),r=i(44734),o=i(43080),s=i(69683),l=i(6454),c=(i(28706),i(2892),i(62826)),d=i(52630),u=i(96196),h=i(77845),p=e([d]),v=function(e){function t(){var e;(0,r.A)(this,t);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=(0,s.A)(this,t,[].concat(n))).showDelay=150,e.hideDelay=150,e}return(0,l.A)(t,e),(0,o.A)(t,null,[{key:"styles",get:function(){return[d.A.styles,(0,u.AH)(n||(n=(0,a.A)([":host{--wa-tooltip-background-color:var(--secondary-background-color);--wa-tooltip-content-color:var(--primary-text-color);--wa-tooltip-font-family:var(\n            --ha-tooltip-font-family,\n            var(--ha-font-family-body)\n          );--wa-tooltip-font-size:var(\n            --ha-tooltip-font-size,\n            var(--ha-font-size-s)\n          );--wa-tooltip-font-weight:var(\n            --ha-tooltip-font-weight,\n            var(--ha-font-weight-normal)\n          );--wa-tooltip-line-height:var(\n            --ha-tooltip-line-height,\n            var(--ha-line-height-condensed)\n          );--wa-tooltip-padding:8px;--wa-tooltip-border-radius:var(\n            --ha-tooltip-border-radius,\n            var(--ha-border-radius-sm)\n          );--wa-tooltip-arrow-size:var(--ha-tooltip-arrow-size, 8px);--wa-z-index-tooltip:var(--ha-tooltip-z-index, 1000)}"])))]}}])}((d=(p.then?(await p)():p)[0]).A);(0,c.Cg)([(0,h.MZ)({attribute:"show-delay",type:Number})],v.prototype,"showDelay",void 0),(0,c.Cg)([(0,h.MZ)({attribute:"hide-delay",type:Number})],v.prototype,"hideDelay",void 0),v=(0,c.Cg)([(0,h.EM)("ha-tooltip")],v),t()}catch(f){t(f)}})},89081:function(e,t,i){i.d(t,{D:function(){return r}});i(23792),i(26099),i(3362),i(47764),i(62953);var n=i(1087),a=function(){return i.e("7704").then(i.bind(i,25563))},r=function(e,t){return(0,n.r)(e,"show-dialog",{dialogTag:"ha-dialog-target-details",dialogImport:a,dialogParams:t})}},22099:function(e,t,i){i.a(e,async function(e,t){try{var n,a,r,o=i(78261),s=i(72153),l=i(44734),c=i(43080),d=i(69683),u=i(6454),h=(i(28706),i(62062),i(18111),i(7588),i(61701),i(5506),i(26099),i(16034),i(23500),i(62826)),p=i(96196),v=i(77845),f=(i(11382),i(17308),i(92288)),y=e([f]);f=(y.then?(await y)():y)[0];var m=function(e){function t(){var e;(0,l.A)(this,t);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=(0,d.A)(this,t,[].concat(n))).collapsed=!1,e}return(0,u.A)(t,e),(0,c.A)(t,[{key:"render",value:function(){var e=this,t=0;return Object.values(this.items).forEach(function(e){e&&(t+=e.length)}),(0,p.qy)(n||(n=(0,s.A)(['<ha-expansion-panel .expanded="','" left-chevron @expanded-changed="','"> <div slot="header" class="heading"> '," </div> "," </ha-expansion-panel>"])),!this.collapsed,this._expandedChanged,this.hass.localize("ui.components.target-picker.selected.".concat(this.type),{count:t}),Object.entries(this.items).map(function(t){var i=(0,o.A)(t,2),n=i[0],r=i[1];return r?r.map(function(t){return(0,p.qy)(a||(a=(0,s.A)(['<ha-target-picker-item-row .hass="','" .type="','" .itemId="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .includeDeviceClasses="','"></ha-target-picker-item-row>'])),e.hass,n,t,e.deviceFilter,e.entityFilter,e.includeDomains,e.includeDeviceClasses)}):p.s6}))}},{key:"_expandedChanged",value:function(e){this.collapsed=!e.detail.expanded}}])}(p.WF);m.styles=(0,p.AH)(r||(r=(0,s.A)([":host{display:block;--expansion-panel-content-padding:0}ha-expansion-panel::part(summary){background-color:var(--ha-color-fill-neutral-quiet-resting);padding:var(--ha-space-1) var(--ha-space-2);font-weight:var(--ha-font-weight-bold);color:var(--secondary-text-color);display:flex;justify-content:space-between;min-height:unset}ha-md-list{padding:0}"]))),(0,h.Cg)([(0,v.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,h.Cg)([(0,v.MZ)()],m.prototype,"type",void 0),(0,h.Cg)([(0,v.MZ)({attribute:!1})],m.prototype,"items",void 0),(0,h.Cg)([(0,v.MZ)({type:Boolean,reflect:!0})],m.prototype,"collapsed",void 0),(0,h.Cg)([(0,v.MZ)({attribute:!1})],m.prototype,"deviceFilter",void 0),(0,h.Cg)([(0,v.MZ)({attribute:!1})],m.prototype,"entityFilter",void 0),(0,h.Cg)([(0,v.MZ)({type:Array,attribute:"include-domains"})],m.prototype,"includeDomains",void 0),(0,h.Cg)([(0,v.MZ)({type:Array,attribute:"include-device-classes"})],m.prototype,"includeDeviceClasses",void 0),m=(0,h.Cg)([(0,v.EM)("ha-target-picker-item-group")],m),t()}catch(g){t(g)}})},92288:function(e,t,i){i.a(e,async function(e,t){try{var n,a,r,o,s,l,c,d,u,h,p,v,f,y,m,g,_,b=i(61397),k=i(26520),A=i(50264),C=i(94741),x=i(72153),w=i(44734),M=i(43080),H=i(69683),L=i(6454),V=(i(28706),i(2008),i(50113),i(74423),i(62062),i(44114),i(18111),i(22489),i(20116),i(61701),i(13579),i(26099),i(21699),i(62826)),I=i(16527),D=i(96196),F=i(77845),q=i(22786),z=i(1087),Z=i(65522),E=i(79),j=i(71727),O=i(4358),S=i(28455),P=i(15638),N=i(77423),R=i(38911),T=i(95350),B=i(88555),W=i(14503),$=i(44144),K=i(18198),Y=(i(50888),i(17308),i(2846),i(93367)),G=(i(67094),i(89081)),U=e([Y]);Y=(U.then?(await U)():U)[0];var X=function(e){function t(){var e;(0,w.A)(this,t);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=(0,H.A)(this,t,[].concat(n))).expand=!1,e.subEntry=!1,e.hideContext=!1,e._itemData=(0,q.A)(function(t,i){if("floor"===t){var n,a=null===(n=e.hass.floors)||void 0===n?void 0:n[i];return{name:(null==a?void 0:a.name)||i,iconPath:null==a?void 0:a.icon,fallbackIconPath:a?(0,K.Si)(a):"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",notFound:!a}}if("area"===t){var r,o,s=null===(r=e.hass.areas)||void 0===r?void 0:r[i];return{name:(null==s?void 0:s.name)||i,context:(null==s?void 0:s.floor_id)&&(null===(o=e.hass.floors)||void 0===o||null===(o=o[s.floor_id])||void 0===o?void 0:o.name),iconPath:null==s?void 0:s.icon,fallbackIconPath:"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",notFound:!s}}if("device"===t){var l,c,d=null===(l=e.hass.devices)||void 0===l?void 0:l[i];return null!=d&&d.primary_config_entry&&e._getDeviceDomain(d.primary_config_entry),{name:d?(0,E.T)(d,e.hass):i,context:(null==d?void 0:d.area_id)&&(null===(c=e.hass.areas)||void 0===c||null===(c=c[d.area_id])||void 0===c?void 0:c.name),fallbackIconPath:"M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",notFound:!d}}if("entity"===t){e._setDomainName((0,j.m)(i));var u=e.hass.states[i],h=u?(0,O.aH)(u,e.hass.entities,e.hass.devices):i,p=u?(0,S.l)(u,e.hass.entities,e.hass.devices,e.hass.areas,e.hass.floors):{area:void 0,device:void 0},v=p.area,f=p.device,y=f?(0,E.xn)(f):void 0,m=[v?(0,Z.A)(v):void 0,h?y:void 0].filter(Boolean).join((0,P.qC)(e.hass)?" ◂ ":" ▸ ");return{name:h||y||i,context:m,stateObject:u,notFound:!u&&"all"!==i&&"none"!==i}}var g=e._labelRegistry.find(function(e){return e.label_id===i});return{name:(null==g?void 0:g.name)||i,iconPath:null==g?void 0:g.icon,fallbackIconPath:"M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",notFound:!g}}),e}return(0,L.A)(t,e),(0,M.A)(t,[{key:"willUpdate",value:function(e){!this.subEntry&&e.has("itemId")&&this._updateItemData()}},{key:"render",value:function(){var e=this._itemData(this.type,this.itemId),t=e.name,i=e.context,f=e.iconPath,y=e.fallbackIconPath,m=e.stateObject,g=e.notFound,_="entity"!==this.type&&!g,b=this.parentEntries||this._entries;return!this.subEntry||"entity"===this.type||b&&0!==b.referenced_entities.length?(0,D.qy)(n||(n=(0,x.A)([' <ha-md-list-item type="text" class="','"> <div class="icon" slot="start"> '," ",' </div> <div slot="headline">',"</div> "," "," "," "," </ha-md-list-item> "," "])),g?"error":"",this.subEntry?(0,D.qy)(a||(a=(0,x.A)([' <div class="horizontal-line-wrapper"> <div class="horizontal-line"></div> </div> ']))):D.s6,f?(0,D.qy)(r||(r=(0,x.A)(['<ha-icon .icon="','"></ha-icon>'])),f):this._iconImg?(0,D.qy)(o||(o=(0,x.A)(['<img alt="','" crossorigin="anonymous" referrerpolicy="no-referrer" src="','">'])),this._domainName||"",this._iconImg):y?(0,D.qy)(s||(s=(0,x.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),y):"entity"===this.type?(0,D.qy)(l||(l=(0,x.A)([' <ha-state-icon .hass="','" .stateObj="','"> </ha-state-icon> '])),this.hass,m||{entity_id:this.itemId,attributes:{}}):D.s6,t,g||i&&!this.hideContext?(0,D.qy)(c||(c=(0,x.A)(['<span slot="supporting-text">',"</span>"])),g?this.hass.localize("ui.components.target-picker.".concat(this.type,"_not_found")):i):D.s6,this._domainName&&this.subEntry?(0,D.qy)(d||(d=(0,x.A)(['<span slot="supporting-text" class="domain">',"</span>"])),this._domainName):D.s6,!this.subEntry&&b&&_?(0,D.qy)(u||(u=(0,x.A)([' <div slot="end" class="summary"> '," </div> "])),_&&!this.expand&&null!=b&&b.referenced_entities.length?(0,D.qy)(h||(h=(0,x.A)(['<button class="main link" @click="','"> '," </button>"])),this._openDetails,this.hass.localize("ui.components.target-picker.entities_count",{count:null==b?void 0:b.referenced_entities.length})):_?(0,D.qy)(p||(p=(0,x.A)(['<span class="main"> '," </span>"])),this.hass.localize("ui.components.target-picker.entities_count",{count:null==b?void 0:b.referenced_entities.length})):D.s6):D.s6,this.expand||this.subEntry?D.s6:(0,D.qy)(v||(v=(0,x.A)([' <ha-icon-button .path="','" slot="end" @click="','"></ha-icon-button> '])),"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",this._removeItem),this.expand&&b&&b.referenced_entities?this._renderEntries():D.s6):D.s6}},{key:"_renderEntries",value:function(){var e=this,t=this.parentEntries||this._entries,i="floor"===this.type?"area":"area"===this.type?"device":"entity";"label"===this.type&&(null!=t&&t.referenced_areas.length?i="area":null!=t&&t.referenced_devices.length&&(i="device"));var n=("area"===i?null==t?void 0:t.referenced_areas:"device"===i&&"label"!==this.type?null==t?void 0:t.referenced_devices:"label"!==this.type?null==t?void 0:t.referenced_entities:[])||[],a=[],r="entity"===i?void 0:n.map(function(n){var r={referenced_areas:[],referenced_devices:[],referenced_entities:[]};return"area"===i?(r.referenced_devices=(null==t?void 0:t.referenced_devices.filter(function(i){var a;return(null===(a=e.hass.devices)||void 0===a||null===(a=a[i])||void 0===a?void 0:a.area_id)===n&&(null==t?void 0:t.referenced_entities.some(function(t){var n;return(null===(n=e.hass.entities)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.device_id)===i}))}))||[],a.push.apply(a,(0,C.A)(r.referenced_devices)),r.referenced_entities=(null==t?void 0:t.referenced_entities.filter(function(t){var i=e.hass.entities[t];return i.area_id===n||!i.device_id||r.referenced_devices.includes(i.device_id)}))||[],r):(r.referenced_entities=(null==t?void 0:t.referenced_entities.filter(function(t){var i;return(null===(i=e.hass.entities)||void 0===i||null===(i=i[t])||void 0===i?void 0:i.device_id)===n}))||[],r)}),o="label"===this.type&&t?t.referenced_entities.filter(function(i){var n=e.hass.entities[i];return n.labels.includes(e.itemId)&&!t.referenced_devices.includes(n.device_id||"")}):"device"===i&&t?t.referenced_entities.filter(function(t){return e.hass.entities[t].area_id===e.itemId}):[],s="label"===this.type&&t?t.referenced_devices.filter(function(t){return!a.includes(t)&&e.hass.devices[t].labels.includes(e.itemId)}):[],l=0===s.length?void 0:s.map(function(i){return{referenced_areas:[],referenced_devices:[],referenced_entities:(null==t?void 0:t.referenced_entities.filter(function(t){var n;return(null===(n=e.hass.entities)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.device_id)===i}))||[]}});return(0,D.qy)(f||(f=(0,x.A)([' <div class="entries-tree"> <div class="line-wrapper"> <div class="line"></div> </div> <ha-md-list class="entries"> '," "," "," </ha-md-list> </div> "])),n.map(function(t,n){return(0,D.qy)(y||(y=(0,x.A)([' <ha-target-picker-item-row sub-entry .hass="','" .type="','" .itemId="','" .parentEntries="','" .hideContext="','" expand></ha-target-picker-item-row> '])),e.hass,i,t,null==r?void 0:r[n],e.hideContext||"label"!==e.type)}),s.map(function(t,i){return(0,D.qy)(m||(m=(0,x.A)([' <ha-target-picker-item-row sub-entry .hass="','" type="device" .itemId="','" .parentEntries="','" .hideContext="','" expand></ha-target-picker-item-row> '])),e.hass,t,null==l?void 0:l[i],e.hideContext||"label"!==e.type)}),o.map(function(t){return(0,D.qy)(g||(g=(0,x.A)([' <ha-target-picker-item-row sub-entry .hass="','" type="entity" .itemId="','" .hideContext="','"></ha-target-picker-item-row> '])),e.hass,t,e.hideContext||"label"!==e.type)}))}},{key:"_updateItemData",value:(_=(0,A.A)((0,b.A)().m(function e(){var t,i,n,a,r=this;return(0,b.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("entity"!==this.type){e.n=1;break}return this._entries=void 0,e.a(2);case 1:return e.p=1,e.n=2,(0,B.F7)(this.hass,(0,k.A)({},"".concat(this.type,"_id"),[this.itemId]));case 2:t=e.v,i=[],"floor"!==this.type&&"label"!==this.type||(t.referenced_areas=t.referenced_areas.filter(function(e){var t=r.hass.areas[e];return!("floor"!==r.type&&!t.labels.includes(r.itemId)||!(0,B.Kx)(t,r.hass.devices,r.hass.entities,r.deviceFilter,r.includeDomains,r.includeDeviceClasses,r.hass.states,r.entityFilter))||(i.push(e),!1)})),n=[],"floor"!==this.type&&"area"!==this.type&&"label"!==this.type||(t.referenced_devices=t.referenced_devices.filter(function(e){var t=r.hass.devices[e];return!(i.includes(t.area_id||"")||!(0,B.Ly)(t,r.hass.entities,r.deviceFilter,r.includeDomains,r.includeDeviceClasses,r.hass.states,r.entityFilter))||(n.push(e),!1)})),t.referenced_entities=t.referenced_entities.filter(function(e){var i=r.hass.entities[e];return!n.includes(i.device_id||"")&&!!("area"===r.type&&i.area_id===r.itemId||"floor"===r.type&&i.area_id&&t.referenced_areas.includes(i.area_id)||"label"===r.type&&i.labels.includes(r.itemId)||t.referenced_devices.includes(i.device_id||""))&&(0,B.YK)(i,"label"===r.type,r.includeDomains,r.includeDeviceClasses,r.hass.states,r.entityFilter)}),this._entries=t,e.n=4;break;case 3:e.p=3,a=e.v,console.error("Failed to extract target",a);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return _.apply(this,arguments)})},{key:"_setDomainName",value:function(e){this._domainName=(0,T.p$)(this.hass.localize,e)}},{key:"_removeItem",value:function(e){e.stopPropagation(),(0,z.r)(this,"remove-target-item",{type:this.type,id:this.itemId})}},{key:"_getDeviceDomain",value:(i=(0,A.A)((0,b.A)().m(function e(t){var i,n,a;return(0,b.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,N.Vx)(this.hass,t);case 1:n=e.v,a=n.config_entry.domain,this._iconImg=(0,$.MR)({domain:a,type:"icon",darkOptimized:null===(i=this.hass.themes)||void 0===i?void 0:i.darkMode}),this._setDomainName(a),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return i.apply(this,arguments)})},{key:"_openDetails",value:function(){(0,G.D)(this,{title:this._itemData(this.type,this.itemId).name,type:this.type,itemId:this.itemId,deviceFilter:this.deviceFilter,entityFilter:this.entityFilter,includeDomains:this.includeDomains,includeDeviceClasses:this.includeDeviceClasses})}}]);var i,_}(D.WF);X.styles=[W.og,(0,D.AH)(_||(_=(0,x.A)([":host{--md-list-item-top-space:0;--md-list-item-bottom-space:0;--md-list-item-leading-space:var(--ha-space-2);--md-list-item-trailing-space:var(--ha-space-2);--md-list-item-two-line-container-height:56px}:host([expand]:not([sub-entry])) ha-md-list-item{border:2px solid var(--ha-color-border-neutral-loud);background-color:var(--ha-color-fill-neutral-quiet-resting);border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.error{background:var(--ha-color-fill-warning-quiet-resting)}.error [slot=supporting-text]{color:var(--ha-color-on-warning-normal)}state-badge{color:var(--ha-color-on-neutral-quiet)}.icon{width:24px;display:flex}img{width:24px;height:24px;z-index:1}ha-icon-button{--mdc-icon-button-size:32px}.summary{display:flex;flex-direction:column;align-items:flex-end;line-height:var(--ha-line-height-condensed)}:host([sub-entry]) .summary{margin-right:var(--ha-space-12)}.summary .main{font-weight:var(--ha-font-weight-medium)}.summary .secondary{font-size:var(--ha-font-size-s);color:var(--secondary-text-color)}.entries-tree{display:flex;position:relative}.entries-tree .line-wrapper{padding:var(--ha-space-5)}.entries-tree .line-wrapper .line{border-left:2px dashed var(--divider-color);height:calc(100% - 28px);position:absolute;top:0}:host([sub-entry]) .entries-tree .line-wrapper .line{height:calc(100% - 12px);top:-18px}.entries{padding:0;--md-item-overflow:visible}.horizontal-line-wrapper{position:relative}.horizontal-line-wrapper .horizontal-line{position:absolute;top:11px;margin-inline-start:-28px;width:29px;border-top:2px dashed var(--divider-color)}button.link{text-decoration:none;color:var(--primary-color)}button.link:focus,button.link:hover{text-decoration:underline}.domain{width:fit-content;border-radius:var(--ha-border-radius-md);background-color:var(--ha-color-fill-neutral-quiet-resting);padding:var(--ha-space-1);font-family:var(--ha-font-family-code)}"])))],(0,V.Cg)([(0,F.MZ)({attribute:!1})],X.prototype,"hass",void 0),(0,V.Cg)([(0,F.MZ)({reflect:!0})],X.prototype,"type",void 0),(0,V.Cg)([(0,F.MZ)({attribute:"item-id"})],X.prototype,"itemId",void 0),(0,V.Cg)([(0,F.MZ)({type:Boolean})],X.prototype,"expand",void 0),(0,V.Cg)([(0,F.MZ)({type:Boolean,attribute:"sub-entry",reflect:!0})],X.prototype,"subEntry",void 0),(0,V.Cg)([(0,F.MZ)({type:Boolean,attribute:"hide-context"})],X.prototype,"hideContext",void 0),(0,V.Cg)([(0,F.MZ)({attribute:!1})],X.prototype,"parentEntries",void 0),(0,V.Cg)([(0,F.MZ)({attribute:!1})],X.prototype,"deviceFilter",void 0),(0,V.Cg)([(0,F.MZ)({attribute:!1})],X.prototype,"entityFilter",void 0),(0,V.Cg)([(0,F.MZ)({type:Array,attribute:"include-domains"})],X.prototype,"includeDomains",void 0),(0,V.Cg)([(0,F.MZ)({type:Array,attribute:"include-device-classes"})],X.prototype,"includeDeviceClasses",void 0),(0,V.Cg)([(0,F.wk)()],X.prototype,"_iconImg",void 0),(0,V.Cg)([(0,F.wk)()],X.prototype,"_domainName",void 0),(0,V.Cg)([(0,F.wk)()],X.prototype,"_entries",void 0),(0,V.Cg)([(0,F.wk)(),(0,I.Fg)({context:R.HD,subscribe:!0})],X.prototype,"_labelRegistry",void 0),(0,V.Cg)([(0,F.P)("ha-md-list-item")],X.prototype,"item",void 0),(0,V.Cg)([(0,F.P)("ha-md-list")],X.prototype,"list",void 0),(0,V.Cg)([(0,F.P)("ha-target-picker-item-row")],X.prototype,"itemRow",void 0),X=(0,V.Cg)([(0,F.EM)("ha-target-picker-item-row")],X),t()}catch(J){t(J)}})},69404:function(e,t,i){i.a(e,async function(e,t){try{var n,a,r,o,s,l,c,d=i(61397),u=i(50264),h=i(26520),p=i(72153),v=i(44734),f=i(43080),y=i(75864),m=i(69683),g=i(6454),_=(i(28706),i(50113),i(18111),i(20116),i(26099),i(11392),i(62826)),b=i(16527),k=i(94454),A=i(96196),C=i(77845),x=i(94333),w=i(22786),M=i(78870),H=i(49485),L=i(1087),V=i(79),I=i(71727),D=i(28978),F=i(80880),q=i(77423),z=i(38911),Z=i(95350),E=i(44144),j=i(18198),O=(i(50888),i(17308),i(2846),i(93367)),S=i(34127),P=e([O,S]);[O,S]=P.then?(await P)():P;var N=function(e){function t(){var e;(0,v.A)(this,t);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=(0,m.A)(this,t,[].concat(n)))._itemData=(0,w.A)(function(t,i){var n,a;if("floor"===t){var r,o=null===(r=e.hass.floors)||void 0===r?void 0:r[i];return{name:(null==o?void 0:o.name)||i,iconPath:null==o?void 0:o.icon,fallbackIconPath:o?(0,j.Si)(o):"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}}if("area"===t){var s,l=null===(s=e.hass.areas)||void 0===s?void 0:s[i];return{name:(null==l?void 0:l.name)||i,iconPath:null==l?void 0:l.icon,fallbackIconPath:"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z"}}if("device"===t){var c,d=null===(c=e.hass.devices)||void 0===c?void 0:c[i];return d.primary_config_entry&&e._getDeviceDomain(d.primary_config_entry),{name:d?(0,V.T)(d,e.hass):i,fallbackIconPath:"M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z"}}if("entity"===t){e._setDomainName((0,I.m)(i));var u=e.hass.states[i];return{name:(0,D.u)(u)||i,stateObject:u}}var h=e._labelRegistry.find(function(e){return e.label_id===i}),p=null!=h&&h.color?(0,M.M)(h.color):void 0;null!==(n=p)&&void 0!==n&&n.startsWith("var(")&&(p=getComputedStyle((0,y.A)(e)).getPropertyValue(p.substring(4,p.length-1)));return null!==(a=p)&&void 0!==a&&a.startsWith("#")&&(p=(0,H.xp)(p).join(",")),{name:(null==h?void 0:h.name)||i,iconPath:null==h?void 0:h.icon,fallbackIconPath:"M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",color:p}}),e}return(0,g.A)(t,e),(0,f.A)(t,[{key:"render",value:function(){var e=this._itemData(this.type,this.itemId),t=e.name,i=e.iconPath,c=e.fallbackIconPath,d=e.stateObject,u=e.color;return(0,A.qy)(n||(n=(0,p.A)([' <div class="mdc-chip ','" style="','"> ',' <span role="gridcell"> <span role="button" tabindex="0" class="mdc-chip__primary-action"> <span id="title-','" class="mdc-chip__text">',"</span> </span> </span> ",' <span role="gridcell"> <ha-tooltip .for="remove-','"> ',' </ha-tooltip> <ha-icon-button class="mdc-chip__icon mdc-chip__icon--trailing" .label="','" .path="','" hide-title .id="remove-','" .type="','" @click="','"></ha-icon-button> </span> </div> '])),(0,x.H)((0,h.A)({},this.type,!0)),u?"--color: rgb(".concat(u,"); --background-color: rgba(").concat(u,", .5)"):"",i?(0,A.qy)(a||(a=(0,p.A)(['<ha-icon class="mdc-chip__icon mdc-chip__icon--leading" .icon="','"></ha-icon>'])),i):this._iconImg?(0,A.qy)(r||(r=(0,p.A)(['<img class="mdc-chip__icon mdc-chip__icon--leading" alt="','" crossorigin="anonymous" referrerpolicy="no-referrer" src="','">'])),this._domainName||"",this._iconImg):c?(0,A.qy)(o||(o=(0,p.A)(['<ha-svg-icon class="mdc-chip__icon mdc-chip__icon--leading" .path="','"></ha-svg-icon>'])),c):d?(0,A.qy)(s||(s=(0,p.A)(['<ha-state-icon class="mdc-chip__icon mdc-chip__icon--leading" .hass="','" .stateObj="','"></ha-state-icon>'])),this.hass,d):A.s6,this.itemId,t,"entity"===this.type?A.s6:(0,A.qy)(l||(l=(0,p.A)(['<span role="gridcell"> <ha-tooltip .for="expand-','">',' </ha-tooltip> <ha-icon-button class="expand-btn mdc-chip__icon mdc-chip__icon--trailing" .label="','" .path="','" hide-title .id="expand-','" .type="','" @click="','"></ha-icon-button> </span>'])),(0,F.Y)(this.itemId),this.hass.localize("ui.components.target-picker.expand_".concat(this.type,"_id")),this.hass.localize("ui.components.target-picker.expand"),"M18.17,12L15,8.83L16.41,7.41L21,12L16.41,16.58L15,15.17L18.17,12M5.83,12L9,15.17L7.59,16.59L3,12L7.59,7.42L9,8.83L5.83,12Z",(0,F.Y)(this.itemId),this.type,this._handleExpand),(0,F.Y)(this.itemId),this.hass.localize("ui.components.target-picker.remove_".concat(this.type,"_id")),this.hass.localize("ui.components.target-picker.remove"),"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",(0,F.Y)(this.itemId),this.type,this._removeItem)}},{key:"_setDomainName",value:function(e){this._domainName=(0,Z.p$)(this.hass.localize,e)}},{key:"_getDeviceDomain",value:(i=(0,u.A)((0,d.A)().m(function e(t){var i,n,a;return(0,d.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,q.Vx)(this.hass,t);case 1:n=e.v,a=n.config_entry.domain,this._iconImg=(0,E.MR)({domain:a,type:"icon",darkOptimized:null===(i=this.hass.themes)||void 0===i?void 0:i.darkMode}),this._setDomainName(a),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return i.apply(this,arguments)})},{key:"_removeItem",value:function(e){e.stopPropagation(),(0,L.r)(this,"remove-target-item",{type:this.type,id:this.itemId})}},{key:"_handleExpand",value:function(e){e.stopPropagation(),(0,L.r)(this,"expand-target-item",{type:this.type,id:this.itemId})}}]);var i}(A.WF);N.styles=(0,A.AH)(c||(c=(0,p.A)([""," .mdc-chip{color:var(--primary-text-color)}.mdc-chip.add{color:rgba(0,0,0,.87)}.add-container{position:relative;display:inline-flex}.mdc-chip:not(.add){cursor:default}.mdc-chip ha-icon-button{--mdc-icon-button-size:24px;display:flex;align-items:center;outline:0}.mdc-chip ha-icon-button ha-svg-icon{border-radius:50%;background:var(--secondary-text-color)}.mdc-chip__icon.mdc-chip__icon--trailing{width:var(--ha-space-4);height:var(--ha-space-4);--mdc-icon-size:14px;color:var(--secondary-text-color);margin-inline-start:var(--ha-space-1)!important;margin-inline-end:calc(-1 * var(--ha-space-1))!important;direction:var(--direction)}.mdc-chip__icon--leading{display:flex;align-items:center;justify-content:center;--mdc-icon-size:20px;border-radius:var(--ha-border-radius-circle);padding:6px;margin-left:-13px!important;margin-inline-start:-13px!important;margin-inline-end:var(--ha-space-1)!important;direction:var(--direction)}.expand-btn{margin-right:0;margin-inline-end:0;margin-inline-start:initial}.mdc-chip.area:not(.add),.mdc-chip.floor:not(.add){border:1px solid #fed6a4;background:var(--card-background-color)}.mdc-chip.area.add,.mdc-chip.area:not(.add) .mdc-chip__icon--leading,.mdc-chip.floor.add,.mdc-chip.floor:not(.add) .mdc-chip__icon--leading{background:#fed6a4}.mdc-chip.device:not(.add){border:1px solid #a8e1fb;background:var(--card-background-color)}.mdc-chip.device.add,.mdc-chip.device:not(.add) .mdc-chip__icon--leading{background:#a8e1fb}.mdc-chip.entity:not(.add){border:1px solid #d2e7b9;background:var(--card-background-color)}.mdc-chip.entity.add,.mdc-chip.entity:not(.add) .mdc-chip__icon--leading{background:#d2e7b9}.mdc-chip.label:not(.add){border:1px solid var(--color,#e0e0e0);background:var(--card-background-color)}.mdc-chip.label.add,.mdc-chip.label:not(.add) .mdc-chip__icon--leading{background:var(--background-color,#e0e0e0)}.mdc-chip:hover{z-index:5}:host([disabled]) .mdc-chip{opacity:var(--light-disabled-opacity);pointer-events:none}.tooltip-icon-img{width:24px;height:24px}"])),(0,A.iz)(k)),(0,_.Cg)([(0,C.MZ)({attribute:!1})],N.prototype,"hass",void 0),(0,_.Cg)([(0,C.MZ)()],N.prototype,"type",void 0),(0,_.Cg)([(0,C.MZ)({attribute:"item-id"})],N.prototype,"itemId",void 0),(0,_.Cg)([(0,C.wk)()],N.prototype,"_domainName",void 0),(0,_.Cg)([(0,C.wk)()],N.prototype,"_iconImg",void 0),(0,_.Cg)([(0,C.wk)(),(0,b.Fg)({context:z.HD,subscribe:!0})],N.prototype,"_labelRegistry",void 0),N=(0,_.Cg)([(0,C.EM)("ha-target-picker-value-chip")],N),t()}catch(R){t(R)}})},77423:function(e,t,i){i.d(t,{VN:function(){return a},Vx:function(){return r},t0:function(){return n}});i(44734),i(43080),i(94741),i(28706),i(2008),i(50113),i(62062),i(44114),i(18111),i(22489),i(20116),i(7588),i(61701),i(69085),i(26099),i(23500);var n=function(e,t){return e.callWS({type:"config_entries/subentries/list",entry_id:t})},a=function(e,t){var i={};return t&&(t.type&&(i.type_filter=t.type),t.domain&&(i.domain=t.domain)),e.callWS(Object.assign({type:"config_entries/get"},i))},r=function(e,t){return e.callWS({type:"config_entries/get_single",entry_id:t})}},31422:function(e,t,i){i.d(t,{_:function(){return c},o:function(){return d}});i(28706),i(2008),i(74423),i(62062),i(18111),i(81148),i(22489),i(61701),i(13579),i(26099),i(16034),i(21699);var n=i(65522),a=i(79),r=i(71727),o=i(76774),s=i(95350),l=i(44927),c=[{name:"search_labels.deviceName",weight:10},{name:"search_labels.areaName",weight:8},{name:"search_labels.domainName",weight:4},{name:"search_labels.domain",weight:4}],d=function(e,t,i,c,d,u,h,p,v){var f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",y=Object.values(e.devices),m=Object.values(e.entities),g={};(i||c||d||h)&&(g=(0,l.g2)(m));var _=y.filter(function(e){return e.id===v||!e.disabled_by});return i&&(_=_.filter(function(e){var t=g[e.id];return!(!t||!t.length)&&g[e.id].some(function(e){return i.includes((0,r.m)(e.entity_id))})})),c&&(_=_.filter(function(e){var t=g[e.id];return!t||!t.length||m.every(function(e){return!c.includes((0,r.m)(e.entity_id))})})),p&&(_=_.filter(function(e){return!p.includes(e.id)})),d&&(_=_.filter(function(t){var i=g[t.id];return!(!i||!i.length)&&g[t.id].some(function(t){var i=e.states[t.entity_id];return!!i&&(i.attributes.device_class&&d.includes(i.attributes.device_class))})})),h&&(_=_.filter(function(t){var i=g[t.id];return!(!i||!i.length)&&i.some(function(t){var i=e.states[t.entity_id];return!!i&&h(i)})})),u&&(_=_.filter(function(e){return e.id===v||u(e)})),_.map(function(i){var r=(0,a.T)(i,e,g[i.id]),l=(0,o.w)(i,e).area,c=l?(0,n.A)(l):void 0,d=i.primary_config_entry?null==t?void 0:t[i.primary_config_entry]:void 0,u=null==d?void 0:d.domain,h=u?(0,s.p$)(e.localize,u):void 0,p=r||e.localize("ui.components.device-picker.unnamed_device");return{id:"".concat(f).concat(i.id),label:"",primary:p,secondary:c,domain:null==d?void 0:d.domain,domain_name:h,search_labels:{deviceName:r,areaName:c||null,domain:u||null,domainName:h||null},sorting_label:[p,c,h].filter(Boolean).join("_")}})}},53756:function(e,t,i){i.d(t,{t:function(){return c},w:function(){return d}});var n=i(78261),a=(i(28706),i(2008),i(74423),i(62062),i(18111),i(22489),i(61701),i(79432),i(26099),i(21699),i(71727)),r=i(74705),o=i(28978),s=i(15638),l=i(95350),c=[{name:"search_labels.entityName",weight:10},{name:"search_labels.friendlyName",weight:8},{name:"search_labels.deviceName",weight:7},{name:"search_labels.areaName",weight:6},{name:"search_labels.domainName",weight:6},{name:"search_labels.entityId",weight:3}],d=function(e,t,i,c,d,u,h,p,v){var f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",y=[],m=Object.keys(e.states);return h&&(m=m.filter(function(e){return h.includes(e)})),p&&(m=m.filter(function(e){return!p.includes(e)})),t&&(m=m.filter(function(e){return t.includes((0,a.m)(e))})),i&&(m=m.filter(function(e){return!i.includes((0,a.m)(e))})),y=m.map(function(t){var i=e.states[t],c=(0,o.u)(i),d=(0,r.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],e.entities,e.devices,e.areas,e.floors),u=(0,n.A)(d,3),h=u[0],p=u[1],v=u[2],y=(0,l.p$)(e.localize,(0,a.m)(t)),m=(0,s.qC)(e),g=h||p||t,_=[v,h?p:void 0].filter(Boolean).join(m?" ◂ ":" ▸ ");return{id:"".concat(f).concat(t),primary:g,secondary:_,domain_name:y,sorting_label:[g,_].filter(Boolean).join("_"),search_labels:{entityName:h||null,deviceName:p||null,areaName:v||null,domainName:y||null,friendlyName:c||null,entityId:t},stateObj:i}}),d&&(y=y.filter(function(e){var t;return e.id===v||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.device_class)&&d.includes(e.stateObj.attributes.device_class)})),u&&(y=y.filter(function(e){var t;return e.id===v||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.unit_of_measurement)&&u.includes(e.stateObj.attributes.unit_of_measurement)})),c&&(y=y.filter(function(e){return e.id===v||e.stateObj&&c(e.stateObj)})),y}},55053:function(e,t,i){i.d(t,{c:function(){return s}});i(79432);var n=i(61397),a=i(50264),r=(i(28706),i(26099),i(3362),function(){var e=(0,a.A)((0,n.A)().m(function e(t,i,a,o,s){var l,c,d,u,h,p,v,f=arguments;return(0,n.A)().w(function(e){for(;;)switch(e.n){case 0:for(l=f.length,c=new Array(l>5?l-5:0),d=5;d<l;d++)c[d-5]=f[d];if(h=(u=s)[t],p=function(e){return o&&o(s,e.result)!==e.cacheKey?(u[t]=void 0,r.apply(void 0,[t,i,a,o,s].concat(c))):e.result},!h){e.n=1;break}return e.a(2,h instanceof Promise?h.then(p):p(h));case 1:return v=a.apply(void 0,[s].concat(c)),u[t]=v,v.then(function(e){u[t]={result:e,cacheKey:null==o?void 0:o(s,e)},setTimeout(function(){u[t]=void 0},i)},function(){u[t]=void 0}),e.a(2,v)}},e)}));return function(t,i,n,a,r){return e.apply(this,arguments)}}()),o=function(e){return e.callWS({type:"entity/source"})},s=function(e){return r("_entitySources",3e4,o,function(e){return Object.keys(e.states).length},e)}},95350:function(e,t,i){i.d(t,{QC:function(){return r},fK:function(){return a},p$:function(){return n}});var n=function(e,t,i){return e("component.".concat(t,".title"))||(null==i?void 0:i.name)||t},a=function(e,t){var i={type:"manifest/list"};return t&&(i.integrations=t),e.callWS(i)},r=function(e,t){return e.callWS({type:"manifest/get",integration:t})}},54706:function(e,t,i){i.d(t,{E:function(){return u}});var n=i(31432),a=i(44734),r=i(43080),o=i(69683),s=i(25460),l=i(6454),c=(i(74423),i(23792),i(18111),i(13579),i(26099),i(3362),i(21699),i(62953),i(62826)),d=i(77845),u=function(e){var t=function(e){function t(){return(0,a.A)(this,t),(0,o.A)(this,t,arguments)}return(0,l.A)(t,e),(0,r.A)(t,[{key:"connectedCallback",value:function(){(0,s.A)(t,"connectedCallback",this,3)([]),this._checkSubscribed()}},{key:"disconnectedCallback",value:function(){if((0,s.A)(t,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var e=this.__unsubs.pop();e instanceof Promise?e.then(function(e){return e()}):e()}this.__unsubs=void 0}}},{key:"updated",value:function(e){if((0,s.A)(t,"updated",this,3)([e]),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var i,a=(0,n.A)(e.keys());try{for(a.s();!(i=a.n()).done;){var r=i.value;if(this.hassSubscribeRequiredHostProps.includes(r))return void this._checkSubscribed()}}catch(o){a.e(o)}finally{a.f()}}}},{key:"hassSubscribe",value:function(){return[]}},{key:"_checkSubscribed",value:function(){var e,t=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some(function(e){return void 0===t[e]})||(this.__unsubs=this.hassSubscribe())}}])}(e);return(0,c.Cg)([(0,d.MZ)({attribute:!1})],t.prototype,"hass",void 0),t}},19711:function(e,t,i){i.d(t,{$:function(){return r}});i(23792),i(26099),i(3362),i(47764),i(62953);var n=i(1087),a=function(){return Promise.all([i.e("3785"),i.e("9914"),i.e("3687")]).then(i.bind(i,79029))},r=function(e,t){(0,n.r)(e,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:a,dialogParams:t})}},44144:function(e,t,i){i.d(t,{MR:function(){return n},a_:function(){return a},bg:function(){return r}});i(28706),i(11392);var n=function(e){return"https://brands.home-assistant.io/".concat(e.brand?"brands/":"").concat(e.useFallback?"_/":"").concat(e.domain,"/").concat(e.darkOptimized?"dark_":"").concat(e.type,".png")},a=function(e){return e.split("/")[4]},r=function(e){return e.startsWith("https://brands.home-assistant.io/")}}}]);
//# sourceMappingURL=8142.c8c8e3501111f6ae.js.map