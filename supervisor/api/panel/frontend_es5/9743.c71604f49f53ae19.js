"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["9743"],{27931:function(e,t,i){i.d(t,{a:function(){return o}});i(79827);var a=i(14523),n=i(88341);function o(e,t){const i=(0,n.m)(e.entity_id),o=void 0!==t?t:null==e?void 0:e.state;if(["button","event","input_button","scene"].includes(i))return o!==a.Hh;if((0,a.g0)(o))return!1;if(o===a.KF&&"alert"!==i)return!1;switch(i){case"alarm_control_panel":return"disarmed"!==o;case"alert":return"idle"!==o;case"cover":case"valve":return"closed"!==o;case"device_tracker":case"person":return"not_home"!==o;case"lawn_mower":return["mowing","error"].includes(o);case"lock":return"locked"!==o;case"media_player":return"standby"!==o;case"vacuum":return!["idle","docked","paused"].includes(o);case"plant":return"problem"===o;case"group":return["on","home","open","locked","problem"].includes(o);case"timer":return"active"===o;case"camera":return"streaming"===o}return!0}},3468:function(e,t,i){i.r(t),i.d(t,{HaMediaSelector:function(){return E}});i(79827),i(35748),i(65315),i(37089),i(12977),i(18223),i(56660),i(95013);var a=i(69868),n=i(84922),o=i(11991),s=i(75907),l=i(44017),d=i(70816),r=i(72094),c=i(71922),h=i(71522),u=(i(94124),i(60921),i(98249)),v=i(11111);let m,_,p,b,y,g,f,k=e=>e;const x=[{name:"media_content_id",required:!1,selector:{text:{}}},{name:"media_content_type",required:!1,selector:{text:{}}}],$=["media_player"],w={};class E extends n.WF{get _hasAccept(){var e;return!(null===(e=this.selector)||void 0===e||null===(e=e.media)||void 0===e||null===(e=e.accept)||void 0===e||!e.length)}willUpdate(e){var t;e.has("context")&&(this._hasAccept||(this._contextEntities=(0,v.e)(null===(t=this.context)||void 0===t?void 0:t.filter_entity)));if(e.has("value")){var i,a;const t=null===(i=this.value)||void 0===i||null===(i=i.metadata)||void 0===i?void 0:i.thumbnail;if(t===(null===(a=e.get("value"))||void 0===a||null===(a=a.metadata)||void 0===a?void 0:a.thumbnail))return;if(t&&t.startsWith("/"))this._thumbnailUrl=void 0,(0,r.e0)(this.hass,t).then(e=>{this._thumbnailUrl=e.path});else if(t&&t.startsWith("https://brands.home-assistant.io")){var n;this._thumbnailUrl=(0,h.MR)({domain:(0,h.a_)(t),type:"icon",useFallback:!0,darkOptimized:null===(n=this.hass.themes)||void 0===n?void 0:n.darkMode})}else this._thumbnailUrl=t}}render(){var e,t,i,a,o,l,r;const h=this._getActiveEntityId(),u=h?this.hass.states[h]:void 0,v=!h||u&&(0,d.$)(u,c.vj.BROWSE_MEDIA);return(0,n.qy)(m||(m=k` ${0} ${0} `),this._hasAccept||this._contextEntities&&this._contextEntities.length<=1?n.s6:(0,n.qy)(_||(_=k` <ha-entity-picker .hass="${0}" .value="${0}" .label="${0}" .disabled="${0}" .helper="${0}" .required="${0}" .hideClearIcon="${0}" .includeDomains="${0}" .includeEntities="${0}" .allowCustomEntity="${0}" @value-changed="${0}"></ha-entity-picker> `),this.hass,h,this.label||this.hass.localize("ui.components.selectors.media.pick_media_player"),this.disabled,this.helper,this.required,!!this._contextEntities,$,this._contextEntities,!this._contextEntities,this._entityChanged),v?(0,n.qy)(b||(b=k` <ha-card outlined tabindex="0" role="button" aria-label="${0}" @click="${0}" @keydown="${0}" class="${0}"> <div class="content-container"> <div class="thumbnail"> ${0} </div> <div class="title"> ${0} </div> </div> </ha-card> `),null!==(e=this.value)&&void 0!==e&&e.media_content_id?(null===(t=this.value.metadata)||void 0===t?void 0:t.title)||this.value.media_content_id:this.hass.localize("ui.components.selectors.media.pick_media"),this._pickMedia,this._handleKeyDown,this.disabled||!h&&!this._hasAccept?"disabled":"",null!==(i=this.value)&&void 0!==i&&null!==(i=i.metadata)&&void 0!==i&&i.thumbnail?(0,n.qy)(y||(y=k` <div class="${0} image" style="${0}"></div> `),(0,s.H)({"centered-image":!!this.value.metadata.media_class&&["app","directory"].includes(this.value.metadata.media_class)}),this._thumbnailUrl?`background-image: url(${this._thumbnailUrl});`:""):(0,n.qy)(g||(g=k` <div class="icon-holder image"> <ha-svg-icon class="folder" .path="${0}"></ha-svg-icon> </div> `),null!==(a=this.value)&&void 0!==a&&a.media_content_id?null!==(o=this.value)&&void 0!==o&&null!==(o=o.metadata)&&void 0!==o&&o.media_class?c.EC["directory"===this.value.metadata.media_class&&this.value.metadata.children_media_class||this.value.metadata.media_class].icon:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.89 20.1 3 19 3M10 16V8L15 12":"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),null!==(l=this.value)&&void 0!==l&&l.media_content_id?(null===(r=this.value.metadata)||void 0===r?void 0:r.title)||this.value.media_content_id:this.hass.localize("ui.components.selectors.media.pick_media")):(0,n.qy)(p||(p=k` <ha-alert> ${0} </ha-alert> <ha-form .hass="${0}" .data="${0}" .schema="${0}" .computeLabel="${0}" .computeHelper="${0}"></ha-form> `),this.hass.localize("ui.components.selectors.media.browse_not_supported"),this.hass,this.value||w,x,this._computeLabelCallback,this._computeHelperCallback))}_entityChanged(e){var t;e.stopPropagation(),!this._hasAccept&&null!==(t=this.context)&&void 0!==t&&t.filter_entity?(0,l.r)(this,"value-changed",{value:{media_content_id:"",media_content_type:"",metadata:{browse_entity_id:e.detail.value}}}):(0,l.r)(this,"value-changed",{value:{entity_id:e.detail.value,media_content_id:"",media_content_type:""}})}_pickMedia(){var e,t,i,a;(0,u.O)(this,{action:"pick",entityId:this._getActiveEntityId(),navigateIds:null===(e=this.value)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.navigateIds,accept:null===(t=this.selector.media)||void 0===t?void 0:t.accept,defaultId:null===(i=this.value)||void 0===i?void 0:i.media_content_id,defaultType:null===(a=this.value)||void 0===a?void 0:a.media_content_type,mediaPickedCallback:e=>{var t,i;(0,l.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.value),{},{media_content_id:e.item.media_content_id,media_content_type:e.item.media_content_type,metadata:Object.assign({title:e.item.title,thumbnail:e.item.thumbnail,media_class:e.item.media_class,children_media_class:e.item.children_media_class,navigateIds:null===(t=e.navigateIds)||void 0===t?void 0:t.map(e=>({media_content_type:e.media_content_type,media_content_id:e.media_content_id}))},!this._hasAccept&&null!==(i=this.context)&&void 0!==i&&i.filter_entity?{browse_entity_id:this._getActiveEntityId()}:{})})})}})}_getActiveEntityId(){var e,t,i,a;const n=null===(e=this.value)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.browse_entity_id;return(null===(t=this.value)||void 0===t?void 0:t.entity_id)||n&&(null===(i=this._contextEntities)||void 0===i?void 0:i.includes(n))&&n||(null===(a=this._contextEntities)||void 0===a?void 0:a[0])}_handleKeyDown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this._pickMedia())}constructor(...e){super(...e),this.disabled=!1,this.required=!0,this._computeLabelCallback=e=>this.hass.localize(`ui.components.selectors.media.${e.name}`),this._computeHelperCallback=e=>this.hass.localize(`ui.components.selectors.media.${e.name}_detail`)}}E.styles=(0,n.AH)(f||(f=k`ha-entity-picker{display:block;margin-bottom:16px}ha-alert{display:block;margin-bottom:16px}ha-card{position:relative;width:100%;box-sizing:border-box;cursor:pointer;transition:background-color 180ms ease-in-out;min-height:56px}ha-card:focus:not(.disabled),ha-card:hover:not(.disabled){background-color:var(--state-icon-hover-color,rgba(0,0,0,.04))}ha-card:focus{outline:0}ha-card.disabled{pointer-events:none;color:var(--disabled-text-color)}.content-container{display:flex;align-items:center;padding:8px;gap:12px}ha-card .thumbnail{width:40px;height:40px;flex-shrink:0;position:relative;box-sizing:border-box;border-radius:8px;overflow:hidden}ha-card .image{border-radius:8px}.folder{--mdc-icon-size:24px}.title{font-size:var(--ha-font-size-m);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.4;flex:1;min-width:0}.image{position:absolute;top:0;right:0;left:0;bottom:0;background-size:cover;background-repeat:no-repeat;background-position:center}.centered-image{margin:4px;background-size:contain}.icon-holder{display:flex;justify-content:center;align-items:center;width:100%;height:100%}`)),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],E.prototype,"hass",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],E.prototype,"selector",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],E.prototype,"value",void 0),(0,a.__decorate)([(0,o.MZ)()],E.prototype,"label",void 0),(0,a.__decorate)([(0,o.MZ)()],E.prototype,"helper",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0})],E.prototype,"disabled",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0})],E.prototype,"required",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],E.prototype,"context",void 0),(0,a.__decorate)([(0,o.wk)()],E.prototype,"_thumbnailUrl",void 0),E=(0,a.__decorate)([(0,o.EM)("ha-selector-media")],E)},98249:function(e,t,i){i.d(t,{O:function(){return n}});i(35748),i(5934),i(95013);var a=i(44017);const n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-media-player-browse",dialogImport:()=>Promise.all([i.e("7598"),i.e("4618"),i.e("663"),i.e("1977"),i.e("3245"),i.e("199"),i.e("3977"),i.e("9137"),i.e("2975"),i.e("2112"),i.e("1057"),i.e("5132")]).then(i.bind(i,64404)),dialogParams:t})}}}]);
//# sourceMappingURL=9743.c71604f49f53ae19.js.map