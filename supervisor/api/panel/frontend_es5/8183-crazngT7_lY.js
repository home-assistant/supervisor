"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[8183],{68183:function(e,i,t){t.r(i),t.d(i,{HaDeviceSelector:function(){return q}});var r,n,a,d,s,c,l=t(88962),u=t(33368),o=t(71650),v=t(82390),h=t(69205),f=t(70906),k=t(91808),y=t(88771),p=t(47838),b=t(68144),m=t(14243),_=t(14516),D=t(76680),Z=t(57292),C=t(75012),g=t(33855),F=(t(60033),t(46097)),w=t(99312),x=t(81043),S=t(47181),q=((0,k.Z)([(0,m.Mo)("ha-devices-picker")],(function(e,i){var t,d,s=function(i){(0,h.Z)(r,i);var t=(0,f.Z)(r);function r(){var i;(0,o.Z)(this,r);for(var n=arguments.length,a=new Array(n),d=0;d<n;d++)a[d]=arguments[d];return i=t.call.apply(t,[this].concat(a)),e((0,v.Z)(i)),i}return(0,u.Z)(r)}(i);return{F:s,d:[{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:Boolean})],key:"disabled",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:Boolean})],key:"required",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,m.Cb)({attribute:"picked-device-label"}),(0,m.Cb)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",key:"pickedDeviceLabel",value:void 0},{kind:"field",decorators:[(0,m.Cb)({attribute:"pick-device-label"})],key:"pickDeviceLabel",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"entityFilter",value:void 0},{kind:"method",key:"render",value:function(){var e=this;if(!this.hass)return b.Ld;var i=this._currentDevices;return(0,b.dy)(r||(r=(0,l.Z)([" ",' <div> <ha-device-picker allow-custom-entity .hass="','" .helper="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .excludeDomains="','" .excludeDevices="','" .includeDeviceClasses="','" .label="','" .disabled="','" .required="','" @value-changed="','"></ha-device-picker> </div> '])),i.map((function(i){return(0,b.dy)(n||(n=(0,l.Z)([' <div> <ha-device-picker allow-custom-entity .curValue="','" .hass="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .excludeDomains="','" .includeDeviceClasses="','" .value="','" .label="','" .disabled="','" @value-changed="','"></ha-device-picker> </div> '])),i,e.hass,e.deviceFilter,e.entityFilter,e.includeDomains,e.excludeDomains,e.includeDeviceClasses,i,e.pickedDeviceLabel,e.disabled,e._deviceChanged)})),this.hass,this.helper,this.deviceFilter,this.entityFilter,this.includeDomains,this.excludeDomains,i,this.includeDeviceClasses,this.pickDeviceLabel,this.disabled,this.required&&!i.length,this._addDevice)}},{kind:"get",key:"_currentDevices",value:function(){return this.value||[]}},{kind:"method",key:"_updateDevices",value:(d=(0,x.Z)((0,w.Z)().mark((function e(i){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,S.B)(this,"value-changed",{value:i}),this.value=i;case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{kind:"method",key:"_deviceChanged",value:function(e){e.stopPropagation();var i=e.currentTarget.curValue,t=e.detail.value;t!==i&&""===t&&(""===t?this._updateDevices(this._currentDevices.filter((function(e){return e!==i}))):this._updateDevices(this._currentDevices.map((function(e){return e===i?t:e}))))}},{kind:"method",key:"_addDevice",value:(t=(0,x.Z)((0,w.Z)().mark((function e(i){var t,r;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.stopPropagation(),t=i.detail.value,i.currentTarget.value="",t){e.next=5;break}return e.abrupt("return");case 5:if(!(r=this._currentDevices).includes(t)){e.next=8;break}return e.abrupt("return");case 8:this._updateDevices([].concat((0,F.Z)(r),[t]));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{kind:"field",static:!0,key:"styles",value:function(){return(0,b.iv)(a||(a=(0,l.Z)(["div{margin-top:8px}"])))}}]}}),b.oi),(0,k.Z)([(0,m.Mo)("ha-selector-device")],(function(e,i){var t=function(i){(0,h.Z)(r,i);var t=(0,f.Z)(r);function r(){var i;(0,o.Z)(this,r);for(var n=arguments.length,a=new Array(n),d=0;d<n;d++)a[d]=arguments[d];return i=t.call.apply(t,[this].concat(a)),e((0,v.Z)(i)),i}return(0,u.Z)(r)}(i);return{F:t,d:[{kind:"field",decorators:[(0,m.Cb)()],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"selector",value:void 0},{kind:"field",decorators:[(0,m.SB)()],key:"_entitySources",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,m.Cb)({type:Boolean})],key:"required",value:function(){return!0}},{kind:"field",key:"_deviceIntegrationLookup",value:function(){return(0,_.Z)(Z.HP)}},{kind:"method",key:"_hasIntegration",value:function(e){var i,t;return(null===(i=e.device)||void 0===i?void 0:i.filter)&&(0,D.r)(e.device.filter).some((function(e){return e.integration}))||(null===(t=e.device)||void 0===t?void 0:t.entity)&&(0,D.r)(e.device.entity).some((function(e){return e.integration}))}},{kind:"method",key:"updated",value:function(e){var i=this;(0,y.Z)((0,p.Z)(t.prototype),"updated",this).call(this,e),e.has("selector")&&this._hasIntegration(this.selector)&&!this._entitySources&&(0,C.m)(this.hass).then((function(e){i._entitySources=e}))}},{kind:"method",key:"render",value:function(){var e;return this._hasIntegration(this.selector)&&!this._entitySources?b.Ld:null!==(e=this.selector.device)&&void 0!==e&&e.multiple?(0,b.dy)(s||(s=(0,l.Z)([" ",' <ha-devices-picker .hass="','" .value="','" .helper="','" .deviceFilter="','" .entityFilter="','" .disabled="','" .required="','"></ha-devices-picker> '])),this.label?(0,b.dy)(c||(c=(0,l.Z)(["<label>","</label>"])),this.label):"",this.hass,this.value,this.helper,this._filterDevices,this._filterEntities,this.disabled,this.required):(0,b.dy)(d||(d=(0,l.Z)([' <ha-device-picker .hass="','" .value="','" .label="','" .helper="','" .deviceFilter="','" .entityFilter="','" .disabled="','" .required="','" allow-custom-entity></ha-device-picker> '])),this.hass,this.value,this.label,this.helper,this._filterDevices,this._filterEntities,this.disabled,this.required)}},{kind:"field",key:"_filterDevices",value:function(){var e=this;return function(i){var t;if(null===(t=e.selector.device)||void 0===t||!t.filter)return!0;var r=e._entitySources?e._deviceIntegrationLookup(e._entitySources,Object.values(e.hass.entities)):void 0;return(0,D.r)(e.selector.device.filter).some((function(e){return(0,g.lE)(e,i,r)}))}}},{kind:"field",key:"_filterEntities",value:function(){var e=this;return function(i){var t;return null===(t=e.selector.device)||void 0===t||!t.entity||(0,D.r)(e.selector.device.entity).some((function(t){return(0,g.lV)(t,i,e._entitySources)}))}}}]}}),b.oi))},75012:function(e,i,t){t.d(i,{m:function(){return s}});var r=t(99312),n=t(81043),a=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(i,t,n,d,s){var c,l,u,o,v,h,f,k=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=k.length,l=new Array(c>5?c-5:0),u=5;u<c;u++)l[u-5]=k[u];if(v=(o=s)[i],h=function(e){return d&&d(s,e.result)!==e.cacheKey?(o[i]=void 0,a.apply(void 0,[i,t,n,d,s].concat(l))):e.result},!v){e.next=6;break}return e.abrupt("return",v instanceof Promise?v.then(h):h(v));case 6:return f=n.apply(void 0,[s].concat(l)),o[i]=f,f.then((function(e){o[i]={result:e,cacheKey:null==d?void 0:d(s,e)},setTimeout((function(){o[i]=void 0}),t)}),(function(){o[i]=void 0})),e.abrupt("return",f);case 10:case"end":return e.stop()}}),e)})));return function(i,t,r,n,a){return e.apply(this,arguments)}}(),d=function(e,i){return e.callWS({type:"entity/source",entity_id:i})},s=function(e,i){return i?d(e,i):a("_entitySources",3e4,d,(function(e){return Object.keys(e.states).length}),e)}}}]);
//# sourceMappingURL=8183-crazngT7_lY.js.map