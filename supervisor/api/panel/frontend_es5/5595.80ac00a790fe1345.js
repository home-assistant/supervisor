"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["5595"],{35270:function(a,r,t){t.a(a,async function(a,s){try{t.r(r);var i,e,o,n,c,u=t(61397),l=t(50264),h=t(72153),p=t(44734),_=t(43080),d=t(69683),k=t(6454),g=(t(28706),t(62826)),v=t(96196),b=t(77845),f=t(1087),m=(t(38962),t(18350)),y=t(65829),w=t(72554),A=t(61716),P=t(47351),C=t(65063),B=t(14503),z=t(98219),D=a([m,y,z]);[m,y,z]=D.then?(await D)():D;var q=function(a){function r(){var a;(0,p.A)(this,r);for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(a=(0,d.A)(this,r,[].concat(s)))._creatingBackup=!1,a}return(0,k.A)(r,a),(0,_.A)(r,[{key:"showDialog",value:function(a){this._dialogParams=a,this._creatingBackup=!1}},{key:"closeDialog",value:function(){this._dialogParams=void 0,this._creatingBackup=!1,this._error=void 0,(0,f.r)(this,"dialog-closed",{dialog:this.localName})}},{key:"render",value:function(){return this._dialogParams?(0,v.qy)(i||(i=(0,h.A)([' <ha-dialog open scrimClickAction @closed="','" .heading="','"> '," ",' <ha-button appearance="plain" slot="secondaryAction" @click="','"> ',' </ha-button> <ha-button .disabled="','" slot="primaryAction" @click="','"> '," </ha-button> </ha-dialog> "])),this.closeDialog,(0,w.l)(this.hass,this._dialogParams.supervisor.localize("backup.create_backup")),this._creatingBackup?(0,v.qy)(e||(e=(0,h.A)(["<ha-spinner></ha-spinner>"]))):(0,v.qy)(o||(o=(0,h.A)(['<supervisor-backup-content .hass="','" .supervisor="','" dialogInitialFocus> </supervisor-backup-content>'])),this.hass,this._dialogParams.supervisor),this._error?(0,v.qy)(n||(n=(0,h.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):"",this.closeDialog,this._dialogParams.supervisor.localize("common.close"),this._creatingBackup,this._createBackup,this._dialogParams.supervisor.localize("backup.create")):v.s6}},{key:"_createBackup",value:(t=(0,l.A)((0,u.A)().m(function a(){var r,t;return(0,u.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if("running"===this._dialogParams.supervisor.info.state){a.n=1;break}return(0,C.K$)(this,{title:this._dialogParams.supervisor.localize("backup.could_not_create"),text:this._dialogParams.supervisor.localize("backup.create_blocked_not_running",{state:this._dialogParams.supervisor.info.state})}),a.a(2);case 1:if(r=this._backupContent.backupDetails(),this._creatingBackup=!0,this._error="",!r.password||r.password.length){a.n=2;break}return this._error=this._dialogParams.supervisor.localize("backup.enter_password"),this._creatingBackup=!1,a.a(2);case 2:if(!r.password||r.password===r.confirm_password){a.n=3;break}return this._error=this._dialogParams.supervisor.localize("backup.passwords_not_matching"),this._creatingBackup=!1,a.a(2);case 3:if(delete r.confirm_password,a.p=4,"full"!==this._backupContent.backupType){a.n=6;break}return a.n=5,(0,A.Tw)(this.hass,r);case 5:a.n=7;break;case 6:return a.n=7,(0,A.Di)(this.hass,r);case 7:this._dialogParams.onCreate(),this.closeDialog(),a.n=9;break;case 8:a.p=8,t=a.v,this._error=(0,P.VR)(t);case 9:this._creatingBackup=!1;case 10:return a.a(2)}},a,this,[[4,8]])})),function(){return t.apply(this,arguments)})}],[{key:"styles",get:function(){return[B.RF,B.nA,(0,v.AH)(c||(c=(0,h.A)([":host{direction:var(--direction)}"])))]}}]);var t}(v.WF);(0,g.Cg)([(0,b.MZ)({attribute:!1})],q.prototype,"hass",void 0),(0,g.Cg)([(0,b.wk)()],q.prototype,"_dialogParams",void 0),(0,g.Cg)([(0,b.wk)()],q.prototype,"_error",void 0),(0,g.Cg)([(0,b.wk)()],q.prototype,"_creatingBackup",void 0),(0,g.Cg)([(0,b.P)("supervisor-backup-content")],q.prototype,"_backupContent",void 0),q=(0,g.Cg)([(0,b.EM)("dialog-hassio-create-backup")],q),s()}catch(F){s(F)}})}}]);
//# sourceMappingURL=5595.80ac00a790fe1345.js.map