"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[42],{75254:function(t,e,n){n.d(e,{ys:function(){return mt}});var r=n(74075),i=n(91643);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}var c="undefined"!=typeof navigator&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),f="-10000px",d=function(){function t(e,n,r){u(this,t),this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter((function(t){return t})),this.tooltipViews=this.tooltips.map(r)}return h(t,[{key:"update",value:function(t){var e=t.state.facet(this.facet),n=e.filter((function(t){return t}));if(e===this.input){var r,i=o(this.tooltipViews);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.update&&a.update(t)}}catch(g){i.e(g)}finally{i.f()}return!1}for(var s=[],u=0;u<n.length;u++){var l=n[u],h=-1;if(l){for(var c=0;c<this.tooltips.length;c++){var f=this.tooltips[c];f&&f.create==l.create&&(h=c)}if(h<0)s[u]=this.createTooltipView(l);else{var d=s[u]=this.tooltipViews[h];d.update&&d.update(t)}}}var v,p=o(this.tooltipViews);try{for(p.s();!(v=p.n()).done;){var m=v.value;s.indexOf(m)<0&&m.dom.remove()}}catch(g){p.e(g)}finally{p.f()}return this.input=e,this.tooltips=n,this.tooltipViews=s,!0}}]),t}();function v(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}var p=r.r$.define({combine:function(t){var e,n,r;return{position:c?"absolute":(null===(e=t.find((function(t){return t.position})))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((function(t){return t.parent})))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=t.find((function(t){return t.tooltipSpace})))||void 0===r?void 0:r.tooltipSpace)||v}}}),m=i.lg.fromClass(function(){function t(e){var n,r=this;u(this,t),this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;var i=e.state.facet(p);this.position=i.position,this.parent=i.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new d(e,k,(function(t){return r.createTooltip(t)})),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((function(t){Date.now()>r.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&r.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(n=e.dom.ownerDocument.defaultView)||void 0===n||n.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}return h(t,[{key:"createContainer",value:function(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}},{key:"observeIntersection",value:function(){if(this.intersectionObserver){this.intersectionObserver.disconnect();var t,e=o(this.manager.tooltipViews);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.intersectionObserver.observe(n.dom)}}catch(r){e.e(r)}finally{e.f()}}}},{key:"measureSoon",value:function(){var t=this;this.measureTimeout<0&&(this.measureTimeout=setTimeout((function(){t.measureTimeout=-1,t.maybeMeasure()}),50))}},{key:"update",value:function(t){t.transactions.length&&(this.lastTransaction=Date.now());var e=this.manager.update(t);e&&this.observeIntersection();var n=e||t.geometryChanged,r=t.state.facet(p);if(r.position!=this.position){this.position=r.position;var i,a=o(this.manager.tooltipViews);try{for(a.s();!(i=a.n()).done;){i.value.dom.style.position=this.position}}catch(h){a.e(h)}finally{a.f()}n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();var s,u=o(this.manager.tooltipViews);try{for(u.s();!(s=u.n()).done;){var l=s.value;this.container.appendChild(l.dom)}}catch(h){u.e(h)}finally{u.f()}n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}},{key:"createTooltip",value:function(t){var e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector("cm-tooltip > cm-tooltip-arrow")){var n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=f,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}},{key:"destroy",value:function(){var t,e;null===(t=this.view.dom.ownerDocument.defaultView)||void 0===t||t.removeEventListener("resize",this.measureSoon);var n,r=o(this.manager.tooltipViews);try{for(r.s();!(n=r.n()).done;){n.value.dom.remove()}}catch(i){r.e(i)}finally{r.f()}null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}},{key:"readMeasure",value:function(){var t=this,e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map((function(e){return t.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((function(t){return t.dom.getBoundingClientRect()})),space:this.view.state.facet(p).tooltipSpace(this.view)}}},{key:"writeMeasure",value:function(t){for(var e=t.editor,n=t.space,r=[],a=0;a<this.manager.tooltips.length;a++){var s=this.manager.tooltips[a],u=this.manager.tooltipViews[a],l=u.dom,h=t.pos[a],c=t.size[a];if(!h||h.bottom<=Math.max(e.top,n.top)||h.top>=Math.min(e.bottom,n.bottom)||h.right<=Math.max(e.left,n.left)||h.left>=Math.min(e.right,n.right))l.style.top=f;else{var d=s.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,v=d?7:0,p=c.right-c.left,m=c.bottom-c.top,g=u.offset||y,k=this.view.textDirection==i.Nm.LTR,b=c.width>n.right-n.left?k?n.left:n.right-c.width:k?Math.min(h.left-(d?14:0)+g.x,n.right-p):Math.max(n.left,h.left-p+(d?14:0)-g.x),w=!!s.above;!s.strictSide&&(w?h.top-(c.bottom-c.top)-g.y<n.top:h.bottom+(c.bottom-c.top)+g.y>n.bottom)&&w==n.bottom-h.bottom>h.top-n.top&&(w=!w);var x=w?h.top-m-v-g.y:h.bottom+v+g.y,S=b+p;if(!0!==u.overlap){var A,C=o(r);try{for(C.s();!(A=C.n()).done;){var M=A.value;M.left<S&&M.right>b&&M.top<x+m&&M.bottom>x&&(x=w?M.top-m-2-v:M.bottom+v+2)}}catch(O){C.e(O)}finally{C.f()}}"absolute"==this.position?(l.style.top=x-t.parent.top+"px",l.style.left=b-t.parent.left+"px"):(l.style.top=x+"px",l.style.left=b+"px"),d&&(d.style.left="".concat(h.left+(k?g.x:-g.x)-(b+14-7),"px")),!0!==u.overlap&&r.push({left:b,top:x,right:S,bottom:x+m}),l.classList.toggle("cm-tooltip-above",w),l.classList.toggle("cm-tooltip-below",!w),u.positioned&&u.positioned()}}}},{key:"maybeMeasure",value:function(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView))){var t,e=o(this.manager.tooltipViews);try{for(e.s();!(t=e.n()).done;){t.value.dom.style.top=f}}catch(n){e.e(n)}finally{e.f()}}}}]),t}(),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),g=i.tk.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(14,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),y={x:0,y:0},k=r.r$.define({enables:[m,g]});function b(t,e){var n=t.plugin(m);if(!n)return null;var r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}var w=n(25070),x=n(51686);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}function C(t,e){return C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},C(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=T(t);if(e){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function D(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||P(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||P(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=P(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function P(t,e){if(t){if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}var j=function(){function t(e,n,r){L(this,t),this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}return N(t,[{key:"tokenBefore",value:function(t){for(var e=(0,w.qz)(this.state).resolveInner(this.pos,-1);e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}},{key:"matchBefore",value:function(t){var e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),r=e.text.slice(n-e.from,this.pos-e.from),i=r.search(W(t,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}},{key:"aborted",get:function(){return null==this.abortListeners}},{key:"addEventListener",value:function(t,e){"abort"==t&&this.abortListeners&&this.abortListeners.push(e)}}]),t}();function V(t){var e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(e.replace(/[^\w\s]/g,"\\$&"),"]")}function H(t){var e=t.map((function(t){return"string"==typeof t?{label:t}:t})),n=E(e.every((function(t){return/^\w+$/.test(t.label)}))?[/\w*$/,/\w+$/]:function(t){var e,n=Object.create(null),r=Object.create(null),i=R(t);try{for(i.s();!(e=i.n()).done;){var o=e.value.label;n[o[0]]=!0;for(var a=1;a<o.length;a++)r[o[a]]=!0}}catch(u){i.e(u)}finally{i.f()}var s=V(n)+V(r)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(e),2),r=n[0],i=n[1];return function(t){var n=t.matchBefore(i);return n||t.explicit?{from:n?n.from:t.pos,options:e,span:r}:null}}var z=function t(e,n,r){L(this,t),this.completion=e,this.source=n,this.match=r};function _(t){return t.selection.main.head}function W(t,e){var n,r=t.source,i=e&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp("".concat(i?"^":"","(?:").concat(r,")").concat(o?"$":""),null!==(n=t.flags)&&void 0!==n?n:t.ignoreCase?"i":""):t}var q=r.q6.define();function F(t,e){var n=e.completion.apply||e.completion.label,r=e.source;"string"==typeof n?t.dispatch({changes:{from:r.from,to:r.to,insert:n},selection:{anchor:r.from+n.length},userEvent:"input.complete",annotations:q.of(e.completion)}):n(t,e.completion,r.from,r.to)}var $=new WeakMap;function U(t){if(!Array.isArray(t))return t;var e=$.get(t);return e||$.set(t,e=H(t)),e}var K=function(){function t(e){L(this,t),this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(var n=0;n<e.length;){var r=(0,x.gm)(e,n),i=(0,x.nZ)(r);this.chars.push(r);var o=e.slice(n,n+i),a=o.toUpperCase();this.folded.push((0,x.gm)(a==o?o.toLowerCase():a,0)),n+=i}this.astral=e.length!=this.chars.length}return N(t,[{key:"match",value:function(t){if(0==this.pattern.length)return[0];if(t.length<this.pattern.length)return null;var e=this.chars,n=this.folded,r=this.any,i=this.precise,o=this.byWord;if(1==e.length){var a=(0,x.gm)(t,0);return a==e[0]?[0,0,(0,x.nZ)(a)]:a==n[0]?[-200,0,(0,x.nZ)(a)]:null}var s=t.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];var u=e.length,l=0;if(s<0){for(var h=0,c=Math.min(t.length,200);h<c&&l<u;){var f=(0,x.gm)(t,h);f!=e[l]&&f!=n[l]||(r[l++]=h),h+=(0,x.nZ)(f)}if(l<u)return null}for(var d=0,v=0,p=!1,m=0,g=-1,y=-1,k=/[a-z]/.test(t),b=!0,w=0,S=Math.min(t.length,200),A=0;w<S&&v<u;){var C=(0,x.gm)(t,w);s<0&&(d<u&&C==e[d]&&(i[d++]=w),m<u&&(C==e[m]||C==n[m]?(0==m&&(g=w),y=w+1,m++):m=0));var M=void 0,O=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(M=(0,x.bg)(C))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!w||1==O&&k||0==A&&0!=O)&&(e[v]==C||n[v]==C&&(p=!0)?o[v++]=w:o.length&&(b=!1)),A=O,w+=(0,x.nZ)(C)}return v==u&&0==o[0]&&b?this.result((p?-200:0)-100,o,t):m==u&&0==g?[-200-t.length,0,y]:s>-1?[-700-t.length,s,s+this.pattern.length]:m==u?[-900-t.length,g,y]:v==u?this.result((p?-200:0)-100-700+(b?0:-1100),o,t):2==e.length?null:this.result((r[0]?-700:0)-200-1100,r,t)}},{key:"result",value:function(t,e,n){var r,i=[t-n.length],o=1,a=R(e);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=s+(this.astral?(0,x.nZ)((0,x.gm)(n,s)):1);o>1&&i[o-1]==s?i[o-1]=u:(i[o++]=s,i[o++]=u)}}catch(l){a.e(l)}finally{a.f()}return i}}]),t}(),G=r.r$.define({combine:function(t){return(0,r.BO)(t,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0,optionClass:function(){return""},aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:function(t,e){return t&&e},icons:function(t,e){return t&&e},optionClass:function(t,e){return function(n){return function(t,e){return t?e?t+" "+e:t:e}(t(n),e(n))}},addToOptions:function(t,e){return t.concat(e)}})}});function J(t,e,n){if(t<=n)return{from:0,to:t};if(e<=t>>1){var r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}var i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}var X=function(){function t(e,n){var r=this;L(this,t),this.view=e,this.stateField=n,this.info=null,this.placeInfo={read:function(){return r.measureInfo()},write:function(t){return r.positionInfo(t)},key:this};var i=e.state.field(n),o=i.open,a=o.options,s=o.selected,u=e.state.facet(G);this.optionContent=function(t){var e=t.addToOptions.slice();return t.icons&&e.push({render:function(t){var e,n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&(e=n.classList).add.apply(e,D(t.type.split(/\s+/g).map((function(t){return"cm-completionIcon-"+t})))),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render:function(t,e,n){var r=document.createElement("span");r.className="cm-completionLabel";for(var i=t.label,o=0,a=1;a<n.length;){var s=n[a++],u=n[a++];s>o&&r.appendChild(document.createTextNode(i.slice(o,s)));var l=r.appendChild(document.createElement("span"));l.appendChild(document.createTextNode(i.slice(s,u))),l.className="cm-completionMatchedText",o=u}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render:function(t){if(!t.detail)return null;var e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort((function(t,e){return t.position-e.position})).map((function(t){return t.render}))}(u),this.optionClass=u.optionClass,this.range=J(a.length,s,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(function(t){for(var n,i=t.target;i&&i!=r.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<a.length)return F(e,a[+n[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(a,i.id,this.range)),this.list.addEventListener("scroll",(function(){r.info&&r.view.requestMeasure(r.placeInfo)}))}return N(t,[{key:"mount",value:function(){this.updateSel()}},{key:"update",value:function(t){t.state.field(this.stateField)!=t.startState.field(this.stateField)&&this.updateSel()}},{key:"positioned",value:function(){this.info&&this.view.requestMeasure(this.placeInfo)}},{key:"updateSel",value:function(){var t=this,e=this.view.state.field(this.stateField),n=e.open;if((n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=J(n.options.length,n.selected,this.view.state.facet(G).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",(function(){t.info&&t.view.requestMeasure(t.placeInfo)}))),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);var r=n.options[n.selected];r.completion.info&&(this.info=this.dom.appendChild(function(t,e){var n=document.createElement("div");n.className="cm-tooltip cm-completionInfo";var r=t.completion.info;if("string"==typeof r)n.textContent=r;else{var o=r(t.completion);o.then?o.then((function(t){return n.appendChild(t)}),(function(t){return(0,i.OO)(e.state,t,"completion info")})):n.appendChild(o)}return n}(r,this.view)),this.view.requestMeasure(this.placeInfo))}}},{key:"updateSelectedOption",value:function(t){for(var e=null,n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return e&&function(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}(this.list,e),e}},{key:"measureInfo",value:function(){var t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;var e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=t.getBoundingClientRect();if(r.top>Math.min(innerHeight,e.bottom)-10||r.bottom<Math.max(0,e.top)+10)return null;var o=Math.max(0,Math.min(r.top,innerHeight-n.height))-e.top,a=this.view.textDirection==i.Nm.RTL,s=e.left,u=innerWidth-e.right;return a&&s<Math.min(n.width,u)?a=!1:!a&&u<Math.min(n.width,s)&&(a=!0),{top:o,left:a}}},{key:"positionInfo",value:function(t){this.info&&(this.info.style.top=(t?t.top:-1e6)+"px",t&&(this.info.classList.toggle("cm-completionInfo-left",t.left),this.info.classList.toggle("cm-completionInfo-right",!t.left)))}},{key:"createListBox",value:function(t,e,n){var r=document.createElement("ul");r.id=e,r.setAttribute("role","listbox");for(var i=n.from;i<n.to;i++){var o=t[i],a=o.completion,s=o.match,u=r.appendChild(document.createElement("li"));u.id=e+"-"+i,u.setAttribute("role","option");var l=this.optionClass(a);l&&(u.className=l);var h,c=R(this.optionContent);try{for(c.s();!(h=c.n()).done;){var f=(0,h.value)(a,this.view.state,s);f&&u.appendChild(f)}}catch(d){c.e(d)}finally{c.f()}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}]),t}();function Q(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}var Y=function(){function t(e,n,r,i,o){L(this,t),this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o}return N(t,[{key:"setSelected",value:function(e,n){return e==this.selected||e>=this.options.length?this:new t(this.options,et(n,e),this.tooltip,this.timestamp,e)}},{key:"map",value:function(e){return new t(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}],[{key:"build",value:function(e,n,r,i,o){var a=function(t,e){var n,r=[],i=0,o=R(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.hasResult())if(!1===a.result.filter){var s,u=R(a.result.options);try{for(u.s();!(s=u.n()).done;){var l=s.value;r.push(new z(l,a,[1e9-i++]))}}catch(b){u.e(b)}finally{u.f()}}else{var h,c=new K(e.sliceDoc(a.from,a.to)),f=void 0,d=R(a.result.options);try{for(d.s();!(h=d.n()).done;){var v=h.value;(f=c.match(v.label))&&(null!=v.boost&&(f[0]+=v.boost),r.push(new z(v,a,f)))}}catch(b){d.e(b)}finally{d.f()}}}}catch(b){o.e(b)}finally{o.f()}r.sort(rt);var p,m=[],g=null,y=R(r.sort(rt));try{for(y.s();!(p=y.n()).done;){var k=p.value;if(300==m.length)break;g&&g.label==k.completion.label&&g.detail==k.completion.detail&&g.type==k.completion.type&&g.apply==k.completion.apply?Q(k.completion)>Q(g)&&(m[m.length-1]=k):m.push(k),g=k.completion}}catch(b){y.e(b)}finally{y.f()}return m}(e,n);if(!a.length)return null;var s,u=0;if(i&&i.selected)for(var l=i.options[i.selected].completion,h=0;h<a.length&&!u;h++)a[h].completion==l&&(u=h);return new t(a,et(r,u),{pos:e.reduce((function(t,e){return e.hasResult()?Math.min(t,e.from):t}),1e8),create:(s=ct,function(t){return new X(t,s)}),above:o.aboveCursor},i?i.timestamp:Date.now(),u)}}]),t}(),Z=function(){function t(e,n,r){L(this,t),this.active=e,this.id=n,this.open=r}return N(t,[{key:"update",value:function(e){var n=this,r=e.state,i=r.facet(G),o=(i.override||r.languageDataAt("autocomplete",_(r)).map(U)).map((function(t){return(n.active.find((function(e){return e.source==t}))||new ot(t,n.active.some((function(t){return 0!=t.state}))?1:0)).update(e,i)}));o.length==this.active.length&&o.every((function(t,e){return t==n.active[e]}))&&(o=this.active);var a=e.selection||o.some((function(t){return t.hasResult()&&e.changes.touchesRange(t.from,t.to)}))||!function(t,e){if(t==e)return!0;for(var n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;var i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}(o,this.active)?Y.build(o,r,this.id,this.open,i):this.open&&e.docChanged?this.open.map(e.changes):this.open;!a&&o.every((function(t){return 1!=t.state}))&&o.some((function(t){return t.hasResult()}))&&(o=o.map((function(t){return t.hasResult()?new ot(t.source,0):t})));var s,u=R(e.effects);try{for(u.s();!(s=u.n()).done;){var l=s.value;l.is(ht)&&(a=a&&a.setSelected(l.value,this.id))}}catch(h){u.e(h)}finally{u.f()}return o==this.active&&a==this.open?this:new t(o,this.id,a)}},{key:"tooltip",get:function(){return this.open?this.open.tooltip:null}},{key:"attrs",get:function(){return this.open?this.open.attrs:tt}}],[{key:"start",value:function(){return new t(nt,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}}]),t}();var tt={"aria-autocomplete":"list","aria-expanded":"false"};function et(t,e){return{"aria-autocomplete":"list","aria-expanded":"true","aria-activedescendant":t+"-"+e,"aria-controls":t}}var nt=[];function rt(t,e){var n=e.match[0]-t.match[0];return n||t.completion.label.localeCompare(e.completion.label)}function it(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}var ot=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;L(this,t),this.source=e,this.state=n,this.explicitPos=r}return N(t,[{key:"hasResult",value:function(){return!1}},{key:"update",value:function(e,n){var r=it(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&0!=i.state&&(i=new t(i.source,0));var o,a=R(e.effects);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.is(st))i=new t(i.source,1,s.value?_(e.state):-1);else if(s.is(ut))i=new t(i.source,0);else if(s.is(lt)){var u,l=R(s.value);try{for(l.s();!(u=l.n()).done;){var h=u.value;h.source==i.source&&(i=h)}}catch(c){l.e(c)}finally{l.f()}}}}catch(c){a.e(c)}finally{a.f()}return i}},{key:"handleUserEvent",value:function(e,n,r){return"delete"!=n&&r.activateOnTyping?new t(this.source,1):this.map(e.changes)}},{key:"handleChange",value:function(e){return e.changes.touchesRange(_(e.startState))?new t(this.source,0):this.map(e.changes)}},{key:"map",value:function(e){return e.empty||this.explicitPos<0?this:new t(this.source,this.state,e.mapPos(this.explicitPos))}}]),t}(),at=function(t){A(n,t);var e=M(n);function n(t,r,i,o,a,s){var u;return L(this,n),(u=e.call(this,t,2,r)).result=i,u.from=o,u.to=a,u.span=s,u}return N(n,[{key:"hasResult",value:function(){return!0}},{key:"handleUserEvent",value:function(t,e,r){var i=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),a=_(t.state);if((this.explicitPos>-1?a<i:a<=i)||a>o)return new ot(this.source,"input"==e&&r.activateOnTyping?1:0);var s=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return this.span&&(i==o||this.span.test(t.state.sliceDoc(i,o)))?new n(this.source,s,this.result,i,o,this.span):new ot(this.source,1,s)}},{key:"handleChange",value:function(t){return t.changes.touchesRange(this.from,this.to)?new ot(this.source,0):this.map(t.changes)}},{key:"map",value:function(t){return t.empty?this:new n(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1),this.span)}}]),n}(ot),st=r.Py.define(),ut=r.Py.define(),lt=r.Py.define({map:function(t,e){return t.map((function(t){return t.map(e)}))}}),ht=r.Py.define(),ct=r.QQ.define({create:function(){return Z.start()},update:function(t,e){return t.update(e)},provide:function(t){return[k.from(t,(function(t){return t.tooltip})),i.tk.contentAttributes.from(t,(function(t){return t.attrs}))]}});function ft(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return function(n){var r=n.state.field(ct,!1);if(!r||!r.open||Date.now()-r.open.timestamp<75)return!1;var i,o=1;"page"==e&&(i=b(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));var a=r.open.selected+o*(t?1:-1),s=r.open.options.length;return a<0?a="page"==e?0:s-1:a>=s&&(a="page"==e?s-1:0),n.dispatch({effects:ht.of(a)}),!0}}var dt=function t(e,n){L(this,t),this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0},vt=i.lg.fromClass(function(){function t(e){L(this,t),this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;var n,r=R(e.state.field(ct).active);try{for(r.s();!(n=r.n()).done;){var i=n.value;1==i.state&&this.startQuery(i)}}catch(o){r.e(o)}finally{r.f()}}return N(t,[{key:"update",value:function(t){var e=this,n=t.state.field(ct);if(t.selectionSet||t.docChanged||t.startState.field(ct)!=n){for(var r=t.transactions.some((function(t){return(t.selection||t.docChanged)&&!it(t)})),o=0;o<this.running.length;o++){var a=this.running[o];if(r||a.updates.length+t.transactions.length>50&&a.time-Date.now()>1e3){var s,u=R(a.context.abortListeners);try{for(u.s();!(s=u.n()).done;){var l=s.value;try{l()}catch(v){(0,i.OO)(this.view.state,v)}}}catch(p){u.e(p)}finally{u.f()}a.context.abortListeners=null,this.running.splice(o--,1)}else{var h;(h=a.updates).push.apply(h,D(t.transactions))}}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=n.active.some((function(t){return 1==t.state&&!e.running.some((function(e){return e.active.source==t.source}))}))?setTimeout((function(){return e.startUpdate()}),50):-1,0!=this.composing){var c,f=R(t.transactions);try{for(f.s();!(c=f.n()).done;){var d=c.value;"input"==it(d)?this.composing=2:2==this.composing&&d.selection&&(this.composing=3)}}catch(p){f.e(p)}finally{f.f()}}}}},{key:"startUpdate",value:function(){var t=this;this.debounceUpdate=-1;var e,n=R(this.view.state.field(ct).active);try{var r=function(){var n=e.value;1!=n.state||t.running.some((function(t){return t.active.source==n.source}))||t.startQuery(n)};for(n.s();!(e=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}}},{key:"startQuery",value:function(t){var e=this,n=this.view.state,r=_(n),o=new j(n,r,t.explicitPos==r),a=new dt(t,o);this.running.push(a),Promise.resolve(t.source(o)).then((function(t){a.context.aborted||(a.done=t||null,e.scheduleAccept())}),(function(t){e.view.dispatch({effects:ut.of(null)}),(0,i.OO)(e.view.state,t)}))}},{key:"scheduleAccept",value:function(){var t=this;this.running.every((function(t){return void 0!==t.done}))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((function(){return t.accept()}),50))}},{key:"accept",value:function(){var t,e=this;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;for(var n=[],r=this.view.state.facet(G),i=function(i){var a=e.running[i];if(void 0===a.done)return o=i,"continue";if(e.running.splice(i--,1),a.done){var s,u=new at(a.active.source,a.active.explicitPos,a.done,a.done.from,null!==(t=a.done.to)&&void 0!==t?t:_(a.updates.length?a.updates[0].startState:e.view.state),a.done.span&&!1!==a.done.filter?W(a.done.span,!0):null),l=R(a.updates);try{for(l.s();!(s=l.n()).done;){var h=s.value;u=u.update(h,r)}}catch(m){l.e(m)}finally{l.f()}if(u.hasResult())return n.push(u),o=i,"continue"}var c=e.view.state.field(ct).active.find((function(t){return t.source==a.active.source}));if(c&&1==c.state)if(null==a.done){var f,d=new ot(a.active.source,0),v=R(a.updates);try{for(v.s();!(f=v.n()).done;){var p=f.value;d=d.update(p,r)}}catch(m){v.e(m)}finally{v.f()}1!=d.state&&n.push(d)}else e.startQuery(c);o=i},o=0;o<this.running.length;o++)i(o);n.length&&this.view.dispatch({effects:lt.of(n)})}}]),t}(),{eventHandlers:{compositionstart:function(){this.composing=1},compositionend:function(){var t=this;3==this.composing&&setTimeout((function(){return t.view.dispatch({effects:st.of(!1)})}),20),this.composing=0}}}),pt=i.tk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});function mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[ct,G.of(t),vt,yt,pt]}var gt=[{key:"Ctrl-Space",run:function(t){return!!t.state.field(ct,!1)&&(t.dispatch({effects:st.of(!0)}),!0)}},{key:"Escape",run:function(t){var e=t.state.field(ct,!1);return!(!e||!e.active.some((function(t){return 0!=t.state})))&&(t.dispatch({effects:ut.of(null)}),!0)}},{key:"ArrowDown",run:ft(!0)},{key:"ArrowUp",run:ft(!1)},{key:"PageDown",run:ft(!0,"page")},{key:"PageUp",run:ft(!1,"page")},{key:"Enter",run:function(t){var e=t.state.field(ct,!1);return!(t.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<75)&&(F(t,e.open.options[e.open.selected]),!0)}}],yt=r.Wl.highest(i.$f.computeN([G],(function(t){return t.facet(G).defaultKeymap?[gt]:[]})))},80508:function(t,e,n){n.d(e,{wQ:function(){return pt},xi:function(){return vt},at:function(){return dt}});var r=n(74075),i=n(51686),o=n(91643),a=n(25070),s=n(97248);var u=1e4,l="()[]{}";function h(t,e,n){var r=t.prop(e<0?s.md.openedBy:s.md.closedBy);if(r)return r;if(1==t.name.length){var i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function c(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.maxScanDistance||u,s=i.brackets||l,c=(0,a.qz)(t),v=c.resolve(e,n);return(r=h(v.type,n,s))?f(t,e,n,v,r,s):d(t,e,n,c,v.type,o,s)}function f(t,e,n,r,i,o){var a=r.parent,s={from:r.from,to:r.to},u=0,l=null==a?void 0:a.cursor;if(l&&(n<0?l.childBefore(r.from):l.childAfter(r.to)))do{if(n<0?l.to<=r.from:l.from>=r.to){if(0==u&&i.indexOf(l.type.name)>-1)return{start:s,end:{from:l.from,to:l.to},matched:!0};if(h(l.type,n,o))u++;else if(h(l.type,-n,o)&&0==--u)return{start:s,end:{from:l.from,to:l.to},matched:!1}}}while(n<0?l.prevSibling():l.nextSibling());return{start:s,matched:!1}}function d(t,e,n,r,i,o,a){var s=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),u=a.indexOf(s);if(u<0||u%2==0!=n>0)return null;for(var l={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),c=0,f=0;!h.next().done&&f<=o;){var d=h.value;n<0&&(f+=d.length);for(var v=e+f*n,p=n>0?0:d.length-1,m=n>0?d.length:-1;p!=m;p+=n){var g=a.indexOf(d[p]);if(!(g<0||r.resolve(v+p,1).type!=i))if(g%2==0==n>0)c++;else{if(1==c)return{start:l,end:{from:v+p,to:v+p+1},matched:g>>1==u>>1};c--}}n>0&&(f+=d.length)}return h.done?{start:l,matched:!1}:null}function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){return r.jT.create(t.ranges.map(e),t.mainIndex)}function g(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function y(t,e){var n=t.state,r=t.dispatch,i=m(n.selection,e);return!i.eq(n.selection)&&(r(g(n,i)),!0)}function k(t,e){return r.jT.cursor(e?t.to:t.from)}function b(t,e){return y(t,(function(n){return n.empty?t.moveByChar(n,e):k(n,e)}))}var w=function(t){return b(t,t.textDirection!=o.Nm.LTR)},x=function(t){return b(t,t.textDirection==o.Nm.LTR)};function S(t,e){return y(t,(function(n){return n.empty?t.moveByGroup(n,e):k(n,e)}))}function A(t,e,n){if(e.type.prop(n))return!0;var r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function C(t,e,n){for(var i=(0,a.qz)(t).resolveInner(e.head),o=n?s.md.closedBy:s.md.openedBy,u=e.head;;){var l=n?i.childAfter(u):i.childBefore(u);if(!l)break;A(t,l,o)?i=l:u=n?l.to:l.from}var h,f;return f=i.type.prop(o)&&(h=n?c(t,i.from,1):c(t,i.to,-1))&&h.matched?n?h.end.to:h.end.from:n?i.to:i.from,r.jT.cursor(f,n?-1:1)}function M(t,e){return y(t,(function(n){if(!n.empty)return k(n,e);var r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)}))}var O=function(t){return M(t,!1)},T=function(t){return M(t,!0)};function D(t,e){var n=t.state,r=m(n.selection,(function(n){return n.empty?t.moveVertically(n,e,t.dom.clientHeight):k(n,e)}));if(r.eq(n.selection))return!1;var i=t.coordsAtPos(n.selection.main.head),a=t.scrollDOM.getBoundingClientRect();return t.dispatch(g(n,r),{effects:i&&i.top>a.top&&i.bottom<a.bottom?o.tk.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-a.top}):void 0}),!0}var E=function(t){return D(t,!1)},R=function(t){return D(t,!0)};function P(t,e,n){var i=t.lineBlockAt(e.head),o=t.moveToLineBoundary(e,n);if(o.head==e.head&&o.head!=(n?i.to:i.from)&&(o=t.moveToLineBoundary(e,n,!1)),!n&&o.head==i.from&&i.length){var a=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;a&&e.head!=i.from+a&&(o=r.jT.cursor(i.from+a))}return o}var B=function(t){return y(t,(function(e){return P(t,e,!0)}))},L=function(t){return y(t,(function(e){return P(t,e,!1)}))};function I(t,e,n){var i=!1,o=m(t.selection,(function(e){var o=c(t,e.head,-1)||c(t,e.head,1)||e.head>0&&c(t,e.head-1,1)||e.head<t.doc.length&&c(t,e.head+1,-1);if(!o||!o.end)return e;i=!0;var a=o.start.from==e.head?o.end.to:o.end.from;return n?r.jT.range(e.anchor,a):r.jT.cursor(a)}));return!!i&&(e(g(t,o)),!0)}function N(t,e){var n=m(t.state.selection,(function(t){var n=e(t);return r.jT.range(t.anchor,n.head,n.goalColumn)}));return!n.eq(t.state.selection)&&(t.dispatch(g(t.state,n)),!0)}function j(t,e){return N(t,(function(n){return t.moveByChar(n,e)}))}var V=function(t){return j(t,t.textDirection!=o.Nm.LTR)},H=function(t){return j(t,t.textDirection==o.Nm.LTR)};function z(t,e){return N(t,(function(n){return t.moveByGroup(n,e)}))}function _(t,e){return N(t,(function(n){return t.moveVertically(n,e)}))}var W=function(t){return _(t,!1)},q=function(t){return _(t,!0)};function F(t,e){return N(t,(function(n){return t.moveVertically(n,e,t.dom.clientHeight)}))}var $=function(t){return F(t,!1)},U=function(t){return F(t,!0)},K=function(t){return N(t,(function(e){return P(t,e,!0)}))},G=function(t){return N(t,(function(e){return P(t,e,!1)}))},J=function(t){var e=t.state;return(0,t.dispatch)(g(e,{anchor:0})),!0},X=function(t){var e=t.state;return(0,t.dispatch)(g(e,{anchor:e.doc.length})),!0},Q=function(t){var e=t.state;return(0,t.dispatch)(g(e,{anchor:e.selection.main.anchor,head:0})),!0},Y=function(t){var e=t.state;return(0,t.dispatch)(g(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0};function Z(t,e){var n=t.state,i=t.dispatch;if(n.readOnly)return!1;var o="delete.selection",a=n.changeByRange((function(t){var n=t.from,i=t.to;if(n==i){var a=e(n);a<n?o="delete.backward":a>n&&(o="delete.forward"),n=Math.min(n,a),i=Math.max(i,a)}return n==i?{range:t}:{changes:{from:n,to:i},range:r.jT.cursor(n)}}));return!a.changes.empty&&(i(n.update(a,{scrollIntoView:!0,userEvent:o})),!0)}function tt(t,e,n){if(t instanceof o.tk){var r,i=v(t.pluginField(o.BF.atomicRanges));try{for(i.s();!(r=i.n()).done;){r.value.between(e,e,(function(t,r){t<e&&r>e&&(e=n?r:t)}))}}catch(a){i.e(a)}finally{i.f()}}return e}var et=function(t,e){return Z(t,(function(n){var r,o,s=t.state,u=s.doc.lineAt(n);if(!e&&n>u.from&&n<u.from+200&&!/[^ \t]/.test(r=u.text.slice(0,n-u.from))){if("\t"==r[r.length-1])return n-1;for(var l=(0,i.IS)(r,s.tabSize)%(0,a.y1)(s)||(0,a.y1)(s),h=0;h<l&&" "==r[r.length-1-h];h++)n--;o=n}else(o=(0,i.cp)(u.text,n-u.from,e,e)+u.from)==n&&u.number!=(e?s.doc.lines:1)&&(o+=e?1:-1);return tt(t,o,e)}))},nt=function(t){return et(t,!1)},rt=function(t){return et(t,!0)},it=function(t,e){return Z(t,(function(n){for(var r=n,o=t.state,a=o.doc.lineAt(r),s=o.charCategorizer(r),u=null;;){if(r==(e?a.to:a.from)){r==n&&a.number!=(e?o.doc.lines:1)&&(r+=e?1:-1);break}var l=(0,i.cp)(a.text,r-a.from,e)+a.from,h=a.text.slice(Math.min(r,l)-a.from,Math.max(r,l)-a.from),c=s(h);if(null!=u&&c!=u)break;" "==h&&r==n||(u=c),r=l}return tt(t,r,e)}))},ot=function(t){return it(t,!1)},at=function(t){return Z(t,(function(e){var n=t.lineBlockAt(e).to;return tt(t,e<n?n:Math.min(t.state.doc.length,e+1),!0)}))};function st(t){var e,n=[],r=-1,i=v(t.selection.ranges);try{for(i.s();!(e=i.n()).done;){var o=e.value,a=t.doc.lineAt(o.from),s=t.doc.lineAt(o.to);if(o.empty||o.to!=s.from||(s=t.doc.lineAt(o.to-1)),r>=a.number){var u=n[n.length-1];u.to=s.to,u.ranges.push(o)}else n.push({from:a.from,to:s.to,ranges:[o]});r=s.number+1}}catch(l){i.e(l)}finally{i.f()}return n}function ut(t,e,n){if(t.readOnly)return!1;var i,o=[],a=[],s=v(st(t));try{for(s.s();!(i=s.n()).done;){var u=i.value;if(n?u.to!=t.doc.length:0!=u.from){var l=t.doc.lineAt(n?u.to+1:u.from-1),h=l.length+1;if(n){o.push({from:u.to,to:l.to},{from:u.from,insert:l.text+t.lineBreak});var c,f=v(u.ranges);try{for(f.s();!(c=f.n()).done;){var d=c.value;a.push(r.jT.range(Math.min(t.doc.length,d.anchor+h),Math.min(t.doc.length,d.head+h)))}}catch(y){f.e(y)}finally{f.f()}}else{o.push({from:l.from,to:u.from},{from:u.to,insert:t.lineBreak+l.text});var p,m=v(u.ranges);try{for(m.s();!(p=m.n()).done;){var g=p.value;a.push(r.jT.range(g.anchor-h,g.head-h))}}catch(y){m.e(y)}finally{m.f()}}}}}catch(y){s.e(y)}finally{s.f()}return!!o.length&&(e(t.update({changes:o,scrollIntoView:!0,selection:r.jT.create(a,t.selection.mainIndex),userEvent:"move.line"})),!0)}function lt(t,e,n){if(t.readOnly)return!1;var r,i=[],o=v(st(t));try{for(o.s();!(r=o.n()).done;){var a=r.value;n?i.push({from:a.from,insert:t.doc.slice(a.from,a.to)+t.lineBreak}):i.push({from:a.to,insert:t.lineBreak+t.doc.slice(a.from,a.to)})}}catch(s){o.e(s)}finally{o.f()}return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var ht=ct(!1);function ct(t){return function(e){var n=e.state,o=e.dispatch;if(n.readOnly)return!1;var u=n.changeByRange((function(e){var o=e.from,u=e.to,l=n.doc.lineAt(o),h=!t&&o==u&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};var n,r=(0,a.qz)(t).resolveInner(e),i=r.childBefore(e),o=r.childAfter(e);return i&&o&&i.to<=e&&o.from>=e&&(n=i.type.prop(s.md.closedBy))&&n.indexOf(o.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(n,o);t&&(o=u=(u<=l.to?l:n.doc.lineAt(u)).to);var c=new a.Gn(n,{simulateBreak:o,simulateDoubleBreak:!!h}),f=(0,a.K0)(c,o);for(null==f&&(f=/^\s*/.exec(n.doc.lineAt(o).text)[0].length);u<l.to&&/\s/.test(l.text[u-l.from]);)u++;h?(o=h.from,u=h.to):o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);var d=["",(0,a.SS)(n,f)];return h&&d.push((0,a.SS)(n,c.lineIndent(l.from,-1))),{changes:{from:o,to:u,insert:i.xv.of(d)},range:r.jT.cursor(o+1+d[1].length)}}));return o(n.update(u,{scrollIntoView:!0,userEvent:"input"})),!0}}function ft(t,e){var n=-1;return t.changeByRange((function(i){for(var o=[],a=i.from;a<=i.to;){var s=t.doc.lineAt(a);s.number>n&&(i.empty||i.to>s.from)&&(e(s,o,i),n=s.number),a=s.to+1}var u=t.changes(o);return{changes:o,range:r.jT.range(u.mapPos(i.anchor,1),u.mapPos(i.head,1))}}))}var dt=function(t){var e=t.state,n=t.dispatch;return!e.readOnly&&(n(e.update(ft(e,(function(t,n){n.push({from:t.from,insert:e.facet(a.c)})})),{userEvent:"input.indent"})),!0)},vt=function(t){var e=t.state,n=t.dispatch;return!e.readOnly&&(n(e.update(ft(e,(function(t,n){var r=/^\s*/.exec(t.text)[0];if(r){for(var o=(0,i.IS)(r,e.tabSize),s=0,u=(0,a.SS)(e,Math.max(0,o-(0,a.y1)(e)));s<r.length&&s<u.length&&r.charCodeAt(s)==u.charCodeAt(s);)s++;n.push({from:t.from+s,to:t.from+r.length,insert:u.slice(s)})}})),{userEvent:"delete.dedent"})),!0)},pt=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:function(t){return y(t,(function(e){return C(t.state,e,t.textDirection!=o.Nm.LTR)}))},shift:function(t){return N(t,(function(e){return C(t.state,e,t.textDirection!=o.Nm.LTR)}))}},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:function(t){return y(t,(function(e){return C(t.state,e,t.textDirection==o.Nm.LTR)}))},shift:function(t){return N(t,(function(e){return C(t.state,e,t.textDirection==o.Nm.LTR)}))}},{key:"Alt-ArrowUp",run:function(t){return ut(t.state,t.dispatch,!1)}},{key:"Shift-Alt-ArrowUp",run:function(t){return lt(t.state,t.dispatch,!1)}},{key:"Alt-ArrowDown",run:function(t){return ut(t.state,t.dispatch,!0)}},{key:"Shift-Alt-ArrowDown",run:function(t){return lt(t.state,t.dispatch,!0)}},{key:"Escape",run:function(t){var e=t.state,n=t.dispatch,i=e.selection,o=null;return i.ranges.length>1?o=r.jT.create([i.main]):i.main.empty||(o=r.jT.create([r.jT.cursor(i.main.head)])),!!o&&(n(g(e,o)),!0)}},{key:"Mod-Enter",run:ct(!0)},{key:"Alt-l",mac:"Ctrl-l",run:function(t){var e=t.state,n=t.dispatch,i=st(e).map((function(t){var n=t.from,i=t.to;return r.jT.range(n,Math.min(i+1,e.doc.length))}));return n(e.update({selection:r.jT.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:function(t){var e=t.state,n=t.dispatch,i=m(e.selection,(function(t){for(var n,i=(0,a.qz)(e).resolveInner(t.head,1);!(i.from<t.from&&i.to>=t.to||i.to>t.to&&i.from<=t.from)&&(null===(n=i.parent)||void 0===n?void 0:n.parent);)i=i.parent;return r.jT.range(i.to,i.from)}));return n(g(e,i)),!0},preventDefault:!0},{key:"Mod-[",run:vt},{key:"Mod-]",run:dt},{key:"Mod-Alt-\\",run:function(t){var e=t.state,n=t.dispatch;if(e.readOnly)return!1;var r=Object.create(null),i=new a.Gn(e,{overrideIndentation:function(t){var e=r[t];return null==e?-1:e}}),o=ft(e,(function(t,n,o){var s=(0,a.K0)(i,t.from);if(null!=s){/\S/.test(t.text)||(s=0);var u=/^\s*/.exec(t.text)[0],l=(0,a.SS)(e,s);(u!=l||o.from<t.from+u.length)&&(r[t.from]=s,n.push({from:t.from,to:t.from+u.length,insert:l}))}}));return o.changes.empty||n(e.update(o,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:function(t){if(t.state.readOnly)return!1;var e=t.state,n=e.changes(st(e).map((function(t){var n=t.from,r=t.to;return n>0?n--:r<e.doc.length&&r++,{from:n,to:r}}))),r=m(e.selection,(function(e){return t.moveVertically(e,!0)})).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:function(t){return I(t.state,t.dispatch,!1)}}].concat([{key:"ArrowLeft",run:w,shift:V,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:function(t){return S(t,t.textDirection!=o.Nm.LTR)},shift:function(t){return z(t,t.textDirection!=o.Nm.LTR)}},{mac:"Cmd-ArrowLeft",run:L,shift:G},{key:"ArrowRight",run:x,shift:H,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:function(t){return S(t,t.textDirection==o.Nm.LTR)},shift:function(t){return z(t,t.textDirection==o.Nm.LTR)}},{mac:"Cmd-ArrowRight",run:B,shift:K},{key:"ArrowUp",run:O,shift:W,preventDefault:!0},{mac:"Cmd-ArrowUp",run:J,shift:Q},{mac:"Ctrl-ArrowUp",run:E,shift:$},{key:"ArrowDown",run:T,shift:q,preventDefault:!0},{mac:"Cmd-ArrowDown",run:X,shift:Y},{mac:"Ctrl-ArrowDown",run:R,shift:U},{key:"PageUp",run:E,shift:$},{key:"PageDown",run:R,shift:U},{key:"Home",run:L,shift:G},{key:"Mod-Home",run:J,shift:Q},{key:"End",run:B,shift:K},{key:"Mod-End",run:X,shift:Y},{key:"Enter",run:ht},{key:"Mod-a",run:function(t){var e=t.state;return(0,t.dispatch)(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0}},{key:"Backspace",run:nt,shift:nt},{key:"Delete",run:rt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ot},{key:"Mod-Delete",mac:"Alt-Delete",run:function(t){return it(t,!0)}},{mac:"Mod-Backspace",run:function(t){return Z(t,(function(e){var n=t.lineBlockAt(e).from;return tt(t,e>n?n:Math.max(0,e-1),!1)}))}},{mac:"Mod-Delete",run:at}].concat([{key:"Ctrl-b",run:w,shift:V,preventDefault:!0},{key:"Ctrl-f",run:x,shift:H},{key:"Ctrl-p",run:O,shift:W},{key:"Ctrl-n",run:T,shift:q},{key:"Ctrl-a",run:function(t){return y(t,(function(e){return r.jT.cursor(t.lineBlockAt(e.head).from,1)}))},shift:function(t){return N(t,(function(e){return r.jT.cursor(t.lineBlockAt(e.head).from)}))}},{key:"Ctrl-e",run:function(t){return y(t,(function(e){return r.jT.cursor(t.lineBlockAt(e.head).to,-1)}))},shift:function(t){return N(t,(function(e){return r.jT.cursor(t.lineBlockAt(e.head).to)}))}},{key:"Ctrl-d",run:rt},{key:"Ctrl-h",run:nt},{key:"Ctrl-k",run:at},{key:"Ctrl-Alt-h",run:ot},{key:"Ctrl-o",run:function(t){var e=t.state,n=t.dispatch;if(e.readOnly)return!1;var o=e.changeByRange((function(t){return{changes:{from:t.from,to:t.to,insert:i.xv.of(["",""])},range:r.jT.cursor(t.from)}}));return n(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:function(t){var e=t.state,n=t.dispatch;if(e.readOnly)return!1;var o=e.changeByRange((function(t){if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};var n=t.from,o=e.doc.lineAt(n),a=n==o.from?n-1:(0,i.cp)(o.text,n-o.from,!1)+o.from,s=n==o.to?n+1:(0,i.cp)(o.text,n-o.from,!0)+o.from;return{changes:{from:a,to:s,insert:e.doc.slice(n,s).append(e.doc.slice(a,n))},range:r.jT.cursor(s)}}));return!o.changes.empty&&(n(e.update(o,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:R}].map((function(t){return{mac:t.key,run:t.run,shift:t.shift}}))))},55987:function(t,e,n){n.d(e,{Eu:function(){return L}});var r=n(91643),i=n(67037),o=n(74075);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var g=function(t){f(n,t);var e=v(n);function n(){return l(this,n),e.apply(this,arguments)}return c(n,[{key:"compare",value:function(t){return this==t||this.constructor==t.constructor&&this.eq(t)}},{key:"eq",value:function(t){return!1}},{key:"destroy",value:function(t){}}]),n}(i.uU);g.prototype.elementClass="",g.prototype.toDOM=void 0,g.prototype.mapMode=o.gc.TrackBefore,g.prototype.startSide=g.prototype.endSide=-1,g.prototype.point=!0;var y=o.r$.define(),k=o.r$.define();var b=r.tk.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),w=o.r$.define({combine:function(t){return t.some((function(t){return t}))}});function x(t){var e=[S,b];return t&&!1===t.fixed&&e.push(w.of(!0)),e}var S=r.lg.fromClass(function(){function t(e){l(this,t),this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(k).map((function(t){return new O(e,t)}));var n,r=s(this.gutters);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.dom.appendChild(i.dom)}}catch(o){r.e(o)}finally{r.f()}this.fixed=!e.state.facet(w),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}return c(t,[{key:"update",value:function(t){if(this.updateGutters(t)){var e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(w)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}},{key:"syncGutters",value:function(t){var e=this,n=this.dom.nextSibling;t&&this.dom.remove();var o,a=i.Xs.iter(this.view.state.facet(y),this.view.viewport.from),u=[],l=this.gutters.map((function(t){return new M(t,e.view.viewport,-e.view.documentPadding.top)})),h=s(this.view.viewportLineBlocks);try{for(h.s();!(o=h.n()).done;){var c=o.value,f=void 0;if(Array.isArray(c.type)){var d,v=s(c.type);try{for(v.s();!(d=v.n()).done;){var p=d.value;if(p.type==r.kH.Text){f=p;break}}}catch(w){v.e(w)}finally{v.f()}}else f=c.type==r.kH.Text?c:void 0;if(f){u.length&&(u=[]),C(a,u,c.from);var m,g=s(l);try{for(g.s();!(m=g.n()).done;){m.value.line(this.view,f,u)}}catch(w){g.e(w)}finally{g.f()}}}}catch(w){h.e(w)}finally{h.f()}var k,b=s(l);try{for(b.s();!(k=b.n()).done;){k.value.finish()}}catch(w){b.e(w)}finally{b.f()}t&&this.view.scrollDOM.insertBefore(this.dom,n)}},{key:"updateGutters",value:function(t){var e=t.startState.facet(k),n=t.state.facet(k),r=t.docChanged||t.heightChanged||t.viewportChanged||!i.Xs.eq(t.startState.facet(y),t.state.facet(y),t.view.viewport.from,t.view.viewport.to);if(e==n){var o,a=s(this.gutters);try{for(a.s();!(o=a.n()).done;){o.value.update(t)&&(r=!0)}}catch(w){a.e(w)}finally{a.f()}}else{r=!0;var u,l=[],h=s(n);try{for(h.s();!(u=h.n()).done;){var c=u.value,f=e.indexOf(c);f<0?l.push(new O(this.view,c)):(this.gutters[f].update(t),l.push(this.gutters[f]))}}catch(w){h.e(w)}finally{h.f()}var d,v=s(this.gutters);try{for(v.s();!(d=v.n()).done;){var p=d.value;p.dom.remove(),l.indexOf(p)<0&&p.destroy()}}catch(w){v.e(w)}finally{v.f()}for(var m=0,g=l;m<g.length;m++){var b=g[m];this.dom.appendChild(b.dom)}this.gutters=l}return r}},{key:"destroy",value:function(){var t,e=s(this.gutters);try{for(e.s();!(t=e.n()).done;){t.value.destroy()}}catch(n){e.e(n)}finally{e.f()}this.dom.remove()}}]),t}(),{provide:r.BF.scrollMargins.from((function(t){return 0!=t.gutters.length&&t.fixed?t.view.textDirection==r.Nm.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null}))});function A(t){return Array.isArray(t)?t:[t]}function C(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}var M=function(){function t(e,n,r){l(this,t),this.gutter=e,this.height=r,this.localMarkers=[],this.i=0,this.cursor=i.Xs.iter(e.markers,n.from)}return c(t,[{key:"line",value:function(t,e,n){this.localMarkers.length&&(this.localMarkers=[]),C(this.cursor,this.localMarkers,e.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(t,e,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=e.top-this.height;if(this.i==o.elements.length){var s=new T(t,e.height,a,r);o.elements.push(s),o.dom.appendChild(s.dom)}else o.elements[this.i].update(t,e.height,a,r);this.height=e.bottom,this.i++}}},{key:"finish",value:function(){for(var t=this.gutter;t.elements.length>this.i;){var e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}]),t}(),O=function(){function t(e,n){var r=this;l(this,t),this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");var i=function(t){r.dom.addEventListener(t,(function(r){var i=e.lineBlockAtHeight(r.clientY-e.documentTop);n.domEventHandlers[t](e,i,r)&&r.preventDefault()}))};for(var o in n.domEventHandlers)i(o);this.markers=A(n.markers(e)),n.initialSpacer&&(this.spacer=new T(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}return c(t,[{key:"update",value:function(t){var e=this.markers;if(this.markers=A(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],t);n!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[n])}var r=t.view.viewport;return!i.Xs.eq(this.markers,e,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}},{key:"destroy",value:function(){var t,e=s(this.elements);try{for(e.s();!(t=e.n()).done;){t.value.destroy()}}catch(n){e.e(n)}finally{e.f()}}}]),t}(),T=function(){function t(e,n,r,i){l(this,t),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.update(e,n,r,i)}return c(t,[{key:"update",value:function(t,e,n,r){this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,r)||this.setMarkers(t,r)}},{key:"setMarkers",value:function(t,e){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,s=i<e.length?e[i++]:null,u=!1;if(s){var l=s.elementClass;l&&(n+=" "+l);for(var h=o;h<this.markers.length;h++)if(this.markers[h].compare(s)){a=h,u=!0;break}}else a=this.markers.length;for(;o<a;){var c=this.markers[o++];if(c.toDOM){c.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!s)break;s.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(s.toDOM(t),r)),u&&o++}this.dom.className=n,this.markers=e}},{key:"destroy",value:function(){this.setMarkers(null,[])}}]),t}();var D=o.r$.define(),E=o.r$.define({combine:function(t){return(0,o.BO)(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(t,e){var n=Object.assign({},t),r=function(t){var r=n[t],i=e[t];n[t]=r?function(t,e,n){return r(t,e,n)||i(t,e,n)}:i};for(var i in e)r(i);return n}})}}),R=function(t){f(n,t);var e=v(n);function n(t){var r;return l(this,n),(r=e.call(this)).number=t,r}return c(n,[{key:"eq",value:function(t){return this.number==t.number}},{key:"toDOM",value:function(){return document.createTextNode(this.number)}}]),n}(g);function P(t,e){return t.state.facet(E).formatNumber(e,t.state)}var B=k.compute([E],(function(t){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(t){return t.state.facet(D)},lineMarker:function(t,e,n){return n.some((function(t){return t.toDOM}))?null:new R(P(t,t.state.doc.lineAt(e.from).number))},lineMarkerChange:function(t){return t.startState.facet(E)!=t.state.facet(E)},initialSpacer:function(t){return new R(P(t,I(t.state.doc.lines)))},updateSpacer:function(t,e){var n=P(e.view,I(e.view.state.doc.lines));return n==t.number?t:new R(n)},domEventHandlers:t.facet(E).domEventHandlers}}));function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[E.of(t),x(),B]}function I(t){for(var e=9;e<t;)e=10*e+9;return e}},42484:function(t,e,n){n.d(e,{Qf:function(){return C},Gv:function(){return k},pJ:function(){return K}});var r=n(97248),i=n(28450),o=n(91643),a=n(74075),s=n(25070),u=n(67037);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}var v=0,p=function(){function t(e,n,r){c(this,t),this.set=e,this.base=n,this.modified=r,this.id=v++}return d(t,null,[{key:"define",value:function(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");var n=new t([],null,[]);if(n.set.push(n),e){var r,i=l(e.set);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.set.push(o)}}catch(a){i.e(a)}finally{i.f()}}return n}},{key:"defineModifier",value:function(){var t=new g;return function(e){return e.modified.indexOf(t)>-1?e:g.get(e.base||e,e.modified.concat(t).sort((function(t,e){return t.id-e.id})))}}}]),t}(),m=0,g=function(){function t(){c(this,t),this.instances=[],this.id=m++}return d(t,null,[{key:"get",value:function(e,n){if(!n.length)return e;var r=n[0].instances.find((function(t){return t.base==e&&(r=n,i=t.modified,r.length==i.length&&r.every((function(t,e){return t==i[e]})));var r,i}));if(r)return r;var i,o=[],a=new p(o,e,n),s=l(n);try{for(s.s();!(i=s.n()).done;){i.value.instances.push(a)}}catch(g){s.e(g)}finally{s.f()}var u,h=y(n),c=l(e.set);try{for(c.s();!(u=c.n()).done;){var f,d=u.value,v=l(h);try{for(v.s();!(f=v.n()).done;){var m=f.value;o.push(t.get(d,m))}}catch(g){v.e(g)}finally{v.f()}}}catch(g){c.e(g)}finally{c.f()}return a}}]),t}();function y(t){for(var e=[t],n=0;n<t.length;n++){var r,i=l(y(t.slice(0,n).concat(t.slice(n+1))));try{for(i.s();!(r=i.n()).done;){var o=r.value;e.push(o)}}catch(a){i.e(a)}finally{i.f()}}return e}function k(t){var e=Object.create(null);for(var n in t){var r=t[n];Array.isArray(r)||(r=[r]);var i,o=l(n.split(" "));try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a){for(var s=[],u=2,h=a,c=0;;){if("..."==h&&c>0&&c+3==a.length){u=1;break}var f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(h);if(!f)throw new RangeError("Invalid path: "+a);if(s.push("*"==f[0]?null:'"'==f[0][0]?JSON.parse(f[0]):f[0]),(c+=f[0].length)==a.length)break;var d=a[c++];if(c==a.length&&"!"==d){u=0;break}if("/"!=d)throw new RangeError("Invalid path: "+a);h=a.slice(c)}var v=s.length-1,p=s[v];if(!p)throw new RangeError("Invalid path: "+a);var m=new A(r,u,v>0?s.slice(0,v):null);e[p]=m.sort(e[p])}}}catch(g){o.e(g)}finally{o.f()}}return b.add(e)}var b=new r.md,w=a.r$.define({combine:function(t){return t.length?C.combinedMatch(t):null}}),x=a.r$.define({combine:function(t){return t.length?t[0].match:null}});function S(t){return t.facet(w)||t.facet(x)}var A=function(){function t(e,n,r,i){c(this,t),this.tags=e,this.mode=n,this.context=r,this.next=i}return d(t,[{key:"sort",value:function(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}},{key:"depth",get:function(){return this.context?this.context.length:0}}]),t}(),C=function(){function t(e,n){var r;function a(t){var e=i.V.newName();return(r||(r=Object.create(null)))["."+e]=t,e}c(this,t),this.map=Object.create(null),this.all="string"==typeof n.all?n.all:n.all?a(n.all):null;var s,u=l(e);try{for(u.s();!(s=u.n()).done;){var h=s.value,f=(h.class||a(Object.assign({},h,{tag:null})))+(this.all?" "+this.all:""),d=h.tag;if(Array.isArray(d)){var v,p=l(d);try{for(p.s();!(v=p.n()).done;){var m=v.value;this.map[m.id]=f}}catch(y){p.e(y)}finally{p.f()}}else this.map[d.id]=f}}catch(y){u.e(y)}finally{u.f()}this.module=r?new i.V(r):null,this.scope=n.scope||null,this.match=this.match.bind(this);var g=[O];this.module&&g.push(o.tk.styleModule.of(this.module)),this.extension=g.concat(w.of(this)),this.fallback=g.concat(x.of(this))}return d(t,[{key:"match",value:function(t,e){if(this.scope&&e!=this.scope)return null;var n,r=l(t.set);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.map[i.id];if(void 0!==o)return i!=t&&(this.map[t.id]=o),o}}catch(a){r.e(a)}finally{r.f()}return this.map[t.id]=this.all}}],[{key:"combinedMatch",value:function(t){if(1==t.length)return t[0].match;var e=t.some((function(t){return t.scope}))?void 0:Object.create(null);return function(n,r){var i=e&&e[n.id];if(void 0!==i)return i;var o,a=null,s=l(t);try{for(s.s();!(o=s.n()).done;){var u=o.value.match(n,r);u&&(a=a?a+" "+u:u)}}catch(h){s.e(h)}finally{s.f()}return e&&(e[n.id]=a),a}}},{key:"define",value:function(e,n){return new t(e,n||{})}},{key:"get",value:function(t,e,n){var i=S(t);return i&&i(e,n||r.Jq.none)}}]),t}();var M=function(){function t(e){c(this,t),this.markCache=Object.create(null),this.tree=(0,s.qz)(e.state),this.decorations=this.buildDeco(e,S(e.state))}return d(t,[{key:"update",value:function(t){var e=(0,s.qz)(t.state),n=S(t.state),r=n!=t.startState.facet(w);e.length<t.view.viewport.to&&!r&&e.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n))}},{key:"buildDeco",value:function(t,e){var n=this;if(!e||!this.tree.length)return o.p.none;var r,i=new u.f_,a=l(t.visibleRanges);try{for(a.s();!(r=a.n()).done;){var s=r.value,h=s.from,c=s.to;E(this.tree,h,c,e,(function(t,e,r){i.add(t,e,n.markCache[r]||(n.markCache[r]=o.p.mark({class:r})))}))}}catch(f){a.e(f)}finally{a.f()}return i.finish()}}]),t}(),O=a.Wl.high(o.lg.fromClass(M,{decorations:function(t){return t.decorations}})),T=[""],D=function(){function t(e,n,r){c(this,t),this.at=e,this.style=n,this.span=r,this.class=""}return d(t,[{key:"startSpan",value:function(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}},{key:"flush",value:function(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}},{key:"highlightRange",value:function(t,e,n,i,o,a){var s=t.type,u=t.from,h=t.to;if(!(u>=n||h<=e)){T[o]=s.name,s.isTop&&(a=s);for(var c=i,f=s.prop(b),d=!1;f;){if(!f.context||R(f.context,T,o)){var v,p=l(f.tags);try{for(p.s();!(v=p.n()).done;){var m=v.value,g=this.style(m,a);g&&(c&&(c+=" "),c+=g,1==f.mode?i+=(i?" ":"")+g:0==f.mode&&(d=!0))}}catch(D){p.e(D)}finally{p.f()}break}f=f.next}if(this.startSpan(t.from,c),!d){var y=t.tree&&t.tree.prop(r.md.mounted);if(y&&y.overlay){for(var k=t.node.enter(y.overlay[0].from+u,1),w=t.firstChild(),x=0,S=u;;x++){var A=x<y.overlay.length?y.overlay[x]:null,C=A?A.from+u:h,M=Math.max(e,S),O=Math.min(n,C);if(M<O&&w)for(;t.from<O&&(this.highlightRange(t,M,O,i,o+1,a),this.startSpan(Math.min(n,t.to),c),!(t.to>=C)&&t.nextSibling()););if(!A||C>n)break;(S=A.to+u)>e&&(this.highlightRange(k.cursor,Math.max(e,A.from+u),Math.min(n,S),i,o,y.tree.type),this.startSpan(S,c))}w&&t.parent()}else if(t.firstChild()){do{if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,i,o+1,a),this.startSpan(Math.min(n,t.to),c)}}while(t.nextSibling());t.parent()}}}}}]),t}();function E(t,e,n,r,i){var o=new D(e,r,i);o.highlightRange(t.cursor(),e,n,"",0,t.type),o.flush(n)}function R(t,e,n){if(t.length>n-1)return!1;for(var r=n-1,i=t.length-1;i>=0;i--,r--){var o=t[i];if(o&&o!=e[r])return!1}return!0}var P=p.define,B=P(),L=P(),I=P(L),N=P(L),j=P(),V=P(j),H=P(j),z=P(),_=P(z),W=P(),q=P(),F=P(),$=P(F),U=P(),K={comment:B,lineComment:P(B),blockComment:P(B),docComment:P(B),name:L,variableName:P(L),typeName:I,tagName:P(I),propertyName:N,attributeName:P(N),className:P(L),labelName:P(L),namespace:P(L),macroName:P(L),literal:j,string:V,docString:P(V),character:P(V),attributeValue:P(V),number:H,integer:P(H),float:P(H),bool:P(j),regexp:P(j),escape:P(j),color:P(j),url:P(j),keyword:W,self:P(W),null:P(W),atom:P(W),unit:P(W),modifier:P(W),operatorKeyword:P(W),controlKeyword:P(W),definitionKeyword:P(W),moduleKeyword:P(W),operator:q,derefOperator:P(q),arithmeticOperator:P(q),logicOperator:P(q),bitwiseOperator:P(q),compareOperator:P(q),updateOperator:P(q),definitionOperator:P(q),typeOperator:P(q),controlOperator:P(q),punctuation:F,separator:P(F),bracket:$,angleBracket:P($),squareBracket:P($),paren:P($),brace:P($),content:z,heading:_,heading1:P(_),heading2:P(_),heading3:P(_),heading4:P(_),heading5:P(_),heading6:P(_),contentSeparator:P(z),list:P(z),quote:P(z),emphasis:P(z),strong:P(z),link:P(z),monospace:P(z),strikethrough:P(z),inserted:P(),deleted:P(),changed:P(),invalid:P(),meta:U,documentMeta:P(U),annotation:P(U),processingInstruction:P(U),definition:p.defineModifier(),constant:p.defineModifier(),function:p.defineModifier(),standard:p.defineModifier(),local:p.defineModifier(),special:p.defineModifier()};K.link,K.heading,K.emphasis,K.strong,K.strikethrough,K.keyword,K.atom,K.bool,K.url,K.contentSeparator,K.labelName,K.literal,K.inserted,K.string,K.deleted,K.regexp,K.escape,K.string,K.variableName,K.variableName,K.typeName,K.namespace,K.className,K.variableName,K.macroName,K.propertyName,K.comment,K.meta,K.invalid,K.link,K.heading,K.emphasis,K.strong,K.keyword,K.atom,K.bool,K.url,K.labelName,K.inserted,K.deleted,K.literal,K.string,K.number,K.regexp,K.escape,K.string,K.variableName,K.variableName,K.variableName,K.variableName,K.propertyName,K.typeName,K.namespace,K.className,K.macroName,K.propertyName,K.operator,K.comment,K.meta,K.invalid,K.punctuation},74506:function(t,e,n){n.d(e,{m8:function(){return p},f$:function(){return R}});var r=n(74075),i=n(91643);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var h=r.q6.define(),c=r.q6.define(),f=r.r$.define(),d=r.r$.define({combine:function(t){return(0,r.BO)(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});var v=r.QQ.define({create:function(){return E.empty},update:function(t,e){var n,i,o=e.state.facet(d),a=e.annotation(h);if(a){var s=e.docChanged?r.jT.single((n=e.changes,i=0,n.iterChangedRanges((function(t,e){return i=e})),i)):void 0,u=w.fromTransaction(e,s),l=a.side,f=0==l?t.undone:t.done;return f=u?x(f,f.length,o.minDepth,u):C(f,e.startState.selection),new E(0==l?a.rest:f,0==l?f:a.rest)}var v=e.annotation(c);if("full"!=v&&"before"!=v||(t=t.isolate()),!1===e.annotation(r.YW.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);var p=w.fromTransaction(e),m=e.annotation(r.YW.time),g=e.annotation(r.YW.userEvent);return p?t=t.addChanges(p,m,g,o.newGroupDelay,o.minDepth):e.selection&&(t=t.addSelection(e.startState.selection,m,g,o.newGroupDelay)),"full"!=v&&"after"!=v||(t=t.isolate()),t},toJSON:function(t){return{done:t.done.map((function(t){return t.toJSON()})),undone:t.undone.map((function(t){return t.toJSON()}))}},fromJSON:function(t){return new E(t.done.map(w.fromJSON),t.undone.map(w.fromJSON))}});function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[v,d.of(t),i.tk.domEventHandlers({beforeinput:function(t,e){var n="historyUndo"==t.inputType?g:"historyRedo"==t.inputType?y:null;return!!n&&(t.preventDefault(),n(e))}})]}function m(t,e){return function(n){var r=n.state,i=n.dispatch;if(!e&&r.readOnly)return!1;var o=r.field(v,!1);if(!o)return!1;var a=o.pop(t,r,e);return!!a&&(i(a),!0)}}var g=m(0,!1),y=m(1,!1),k=m(0,!0),b=m(1,!0);var w=function(){function t(e,n,r,i,o){s(this,t),this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}return l(t,[{key:"setSelAfter",value:function(e){return new t(this.changes,this.effects,this.mapped,this.startSelection,e)}},{key:"toJSON",value:function(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((function(t){return t.toJSON()}))}}}],[{key:"fromJSON",value:function(e){return new t(e.changes&&r.as.fromJSON(e.changes),[],e.mapped&&r.n0.fromJSON(e.mapped),e.startSelection&&r.jT.fromJSON(e.startSelection),e.selectionsAfter.map(r.jT.fromJSON))}},{key:"fromTransaction",value:function(e,n){var r,i=A,a=o(e.startState.facet(f));try{for(a.s();!(r=a.n()).done;){var s=(0,r.value)(e);s.length&&(i=i.concat(s))}}catch(u){a.e(u)}finally{a.f()}return!i.length&&e.changes.empty?null:new t(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,A)}},{key:"selection",value:function(e){return new t(void 0,A,void 0,void 0,e)}}]),t}();function x(t,e,n,r){var i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function S(t,e){return t.length?e.length?t.concat(e):t:e}var A=[];function C(t,e){if(t.length){var n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),x(t,t.length-1,1e9,n.setSelAfter(r)))}return[w.selection([e])]}function M(t){var e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function O(t,e){if(!t.length)return t;for(var n=t.length,r=A;n;){var i=T(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){var o=t.slice(0,n);return o[n-1]=i,o}e=i.mapped,n--,r=i.selectionsAfter}return r.length?[w.selection(r)]:A}function T(t,e,n){var i=S(t.selectionsAfter.length?t.selectionsAfter.map((function(t){return t.map(e)})):A,n);if(!t.changes)return w.selection(i);var o=t.changes.map(e),a=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(a):a;return new w(o,r.Py.mapEffects(t.effects,e),s,t.startSelection.map(a),i)}var D=/^(input\.type|delete)($|\.)/,E=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;s(this,t),this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}return l(t,[{key:"isolate",value:function(){return this.prevTime?new t(this.done,this.undone):this}},{key:"addChanges",value:function(e,n,r,i,o){var a=this.done,s=a[a.length-1];return a=s&&s.changes&&!s.changes.empty&&e.changes&&(!r||D.test(r))&&(!s.selectionsAfter.length&&n-this.prevTime<i&&function(t,e){var n=[],r=!1;return t.iterChangedRanges((function(t,e){return n.push(t,e)})),e.iterChangedRanges((function(t,e,i,o){for(var a=0;a<n.length;){var s=n[a++],u=n[a++];o>=s&&i<=u&&(r=!0)}})),r}(s.changes,e.changes)||"input.type.compose"==r)?x(a,a.length-1,o,new w(e.changes.compose(s.changes),S(e.effects,s.effects),s.mapped,s.startSelection,A)):x(a,a.length,o,e),new t(a,A,n,r)}},{key:"addSelection",value:function(e,n,r,i){var o,a,s=this.done.length?this.done[this.done.length-1].selectionsAfter:A;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&(o=s[s.length-1],a=e,o.ranges.length==a.ranges.length&&0===o.ranges.filter((function(t,e){return t.empty!=a.ranges[e].empty})).length)?this:new t(C(this.done,e),this.undone,n,r)}},{key:"addMapping",value:function(e){return new t(O(this.done,e),O(this.undone,e),this.prevTime,this.prevUserEvent)}},{key:"pop",value:function(t,e,n){var r=0==t?this.done:this.undone;if(0==r.length)return null;var i=r[r.length-1];if(n&&i.selectionsAfter.length)return e.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:h.of({side:t,rest:M(r)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){var o=1==r.length?A:r.slice(0,r.length-1);return i.mapped&&(o=O(o,i.mapped)),e.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:h.of({side:t,rest:o}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}]),t}();E.empty=new E(A,A);var R=[{key:"Mod-z",run:g,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:y,preventDefault:!0},{key:"Mod-u",run:k,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:b,preventDefault:!0}]},25070:function(t,e,n){n.d(e,{Gn:function(){return j},SQ:function(){return b},Be:function(){return C},kU:function(){return k},y1:function(){return L},K0:function(){return N},tK:function(){return P},SS:function(){return I},c:function(){return B},mi:function(){return y},qz:function(){return x}});var r=n(97248),i=n(74075),o=n(91643),a=n(51686);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),t}var y=new r.md;function k(t){return i.r$.define({combine:t?function(e){return e.concat(t)}:void 0})}var b=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];p(this,t),this.data=e,this.topNode=r,i.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(i.yy.prototype,"tree",{get:function(){return x(this)}}),this.parser=n,this.extension=[R.of(this),i.yy.languageData.of((function(t,e,n){return t.facet(w(t,e,n))}))].concat(o)}return g(t,[{key:"isActiveAt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return w(t,e,n)==this.data}},{key:"findRegions",value:function(t){var e=this,n=t.facet(R);if((null==n?void 0:n.data)==this.data)return[{from:0,to:t.doc.length}];if(!n||!n.allowsNesting)return[];var i=[];return function t(n,o){if(n.prop(y)!=e.data){var a=n.prop(r.md.mounted);if(a){if(a.tree.prop(y)==e.data){if(a.overlay){var s,u=d(a.overlay);try{for(u.s();!(s=u.n()).done;){var l=s.value;i.push({from:l.from+o,to:l.to+o})}}catch(v){u.e(v)}finally{u.f()}}else i.push({from:o,to:o+n.length});return}if(a.overlay){var h=i.length;if(t(a.tree,a.overlay[0].from+o),i.length>h)return}}for(var c=0;c<n.children.length;c++){var f=n.children[c];f instanceof r.mp&&t(f,n.positions[c]+o)}}else i.push({from:o,to:o+n.length})}(x(t),0),i}},{key:"allowsNesting",get:function(){return!0}}]),t}();function w(t,e,n){var r=t.facet(R);if(!r)return null;var i=r.data;if(r.allowsNesting)for(var o=x(t).topNode;o;o=o.enter(e,n,!0,!1))i=o.type.prop(y)||i;return i}b.setState=i.Py.define();function x(t){var e=t.field(b.state,!1);return e?e.tree:r.mp.empty}var S=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;p(this,t),this.doc=e,this.length=n,this.cursorPos=0,this.string="",this.cursor=e.iter()}return g(t,[{key:"syncTo",value:function(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}},{key:"chunk",value:function(t){return this.syncTo(t),this.string}},{key:"lineChunks",get:function(){return!0}},{key:"read",value:function(t,e){var n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}]),t}(),A=null,C=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0;p(this,t),this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=a,this.skipped=s,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}return g(t,[{key:"startParse",value:function(){return this.parser.startParse(new S(this.state.doc),this.fragments)}},{key:"work",value:function(t,e){var n=this;return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=r.mp.empty&&(null==e?this.treeLen==this.state.doc.length:this.treeLen>=e)?(this.takeTree(),!0):this.withContext((function(){var i;n.parse||(n.parse=n.startParse()),null!=e&&(null==n.parse.stoppedAt||n.parse.stoppedAt>e)&&e<n.state.doc.length&&n.parse.stopAt(e);for(var o=Date.now()+t;;){var a=n.parse.advance();if(a){if(n.fragments=n.withoutTempSkipped(r.i9.addTree(a,n.fragments,null!=n.parse.stoppedAt)),n.treeLen=null!==(i=n.parse.stoppedAt)&&void 0!==i?i:n.state.doc.length,n.tree=a,n.parse=null,!(n.treeLen<(null!=e?e:n.state.doc.length)))return!0;n.parse=n.startParse()}if(Date.now()>o)return!1}}))}},{key:"takeTree",value:function(){var t,e,n=this;this.parse&&(t=this.parse.parsedPos)>this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((function(){for(;!(e=n.parse.advance()););})),this.tree=e,this.fragments=this.withoutTempSkipped(r.i9.addTree(this.tree,this.fragments,!0)),this.parse=null)}},{key:"withContext",value:function(t){var e=A;A=this;try{return t()}finally{A=e}}},{key:"withoutTempSkipped",value:function(t){for(var e;e=this.tempSkipped.pop();)t=M(t,e.from,e.to);return t}},{key:"changes",value:function(e,n){var i=this.fragments,o=this.tree,a=this.treeLen,s=this.viewport,u=this.skipped;if(this.takeTree(),!e.empty){var l=[];if(e.iterChangedRanges((function(t,e,n,r){return l.push({fromA:t,toA:e,fromB:n,toB:r})})),i=r.i9.applyChanges(i,l),o=r.mp.empty,a=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){u=[];var h,c=d(this.skipped);try{for(c.s();!(h=c.n()).done;){var f=h.value,v=e.mapPos(f.from,1),p=e.mapPos(f.to,-1);v<p&&u.push({from:v,to:p})}}catch(m){c.e(m)}finally{c.f()}}}return new t(this.parser,n,i,o,a,s,u,this.scheduleOn)}},{key:"updateViewport",value:function(t){this.viewport=t;for(var e=this.skipped.length,n=0;n<this.skipped.length;n++){var r=this.skipped[n],i=r.from,o=r.to;i<t.to&&o>t.from&&(this.fragments=M(this.fragments,i,o),this.skipped.splice(n--,1))}return this.skipped.length<e}},{key:"reset",value:function(){this.parse&&(this.takeTree(),this.parse=null)}},{key:"skipUntilInView",value:function(t,e){this.skipped.push({from:t,to:e})}},{key:"movedPast",value:function(t){return this.treeLen<t&&this.parse&&this.parse.parsedPos>=t}}],[{key:"getSkippingParser",value:function(t){return new(function(e){u(i,e);var n=h(i);function i(){return p(this,i),n.apply(this,arguments)}return g(i,[{key:"createParse",value:function(e,n,i){var o=i[0].from,a=i[i.length-1].to;return{parsedPos:o,advance:function(){var e=A;if(e){var n,s=d(i);try{for(s.s();!(n=s.n()).done;){var u=n.value;e.tempSkipped.push(u)}}catch(l){s.e(l)}finally{s.f()}t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=a,new r.mp(r.Jq.none,[],[],a-o)},stoppedAt:null,stopAt:function(){}}}}]),i}(r._b))}},{key:"get",value:function(){return A}}]),t}();function M(t,e,n){return r.i9.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}var O=function(){function t(e){p(this,t),this.context=e,this.tree=e.tree}return g(t,[{key:"apply",value:function(e){if(!e.docChanged)return this;var n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(25,r)||n.takeTree(),new t(n)}}],[{key:"init",value:function(e){var n=new C(e.facet(R).parser,e,[],r.mp.empty,0,{from:0,to:e.doc.length},[],null);return n.work(25)||n.takeTree(),new t(n)}}]),t}();b.state=i.QQ.define({create:O.init,update:function(t,e){var n,r=d(e.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.is(b.setState))return i.value}}catch(o){r.e(o)}finally{r.f()}return e.startState.facet(R)!=e.state.facet(R)?O.init(e.state):t.apply(e)}});var T="undefined"!=typeof window&&window.requestIdleCallback||function(t,e){var n=e.timeout;return setTimeout(t,n)},D="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout,E=o.lg.fromClass(function(){function t(e){p(this,t),this.view=e,this.working=-1,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}return g(t,[{key:"update",value:function(t){var e=this.view.state.field(b.state).context;t.viewportChanged&&(e.updateViewport(t.view.viewport)&&e.reset(),this.view.viewport.to>e.treeLen&&this.scheduleWork()),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}},{key:"scheduleWork",value:function(){if(!(this.working>-1)){var t=this.view.state,e=t.field(b.state),n=e.context.fragments;e.tree==e.context.tree&&e.context.treeLen>=t.doc.length&&n.length&&0==n[0].from&&n[0].to>=t.doc.length||(this.working=T(this.work,{timeout:500}))}}},{key:"work",value:function(t){this.working=-1;var e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),!(this.chunkBudget<=0)){var n=this.view,r=n.state,i=n.viewport.to,o=r.field(b.state);if(!(o.tree==o.context.tree&&o.context.treeLen>=i+1e6)){var a=Math.min(this.chunkBudget,t?Math.max(25,t.timeRemaining()):100),s=o.context.work(a,i+1e6);this.chunkBudget-=Date.now()-e,(s||this.chunkBudget<=0||o.context.movedPast(i))&&(o.context.takeTree(),this.view.dispatch({effects:b.setState.of(new O(o.context))})),!s&&this.chunkBudget>0&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}}}},{key:"checkAsyncSchedule",value:function(t){var e=this;t.scheduleOn&&(t.scheduleOn.then((function(){return e.scheduleWork()})),t.scheduleOn=null)}},{key:"destroy",value:function(){this.working>=0&&D(this.working)}}]),t}(),{eventHandlers:{focus:function(){this.scheduleWork()}}}),R=i.r$.define({combine:function(t){return t.length?t[0]:null},enables:[b.state,E]}),P=i.r$.define(),B=i.r$.define({combine:function(t){if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function L(t){var e=t.facet(B);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function I(t,e){var n="",r=t.tabSize;if(9==t.facet(B).charCodeAt(0))for(;e>=r;)n+="\t",e-=r;for(var i=0;i<e;i++)n+=" ";return n}function N(t,e){t instanceof i.yy&&(t=new j(t));var n,r=d(t.state.facet(P));try{for(r.s();!(n=r.n()).done;){var o=(0,n.value)(t,e);if(null!=o)return o}}catch(s){r.e(s)}finally{r.f()}var a=x(t.state);return a?function(t,e,n){for(var r=e.resolveInner(n),i=r,o=n;;){var a=i.childBefore(o);if(!a)break;a.type.isError&&a.from==a.to?(r=i,o=a.from):o=(i=a).to+1}return z(r,n,t)}(t,a,e):null}var j=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,t),this.state=e,this.options=n,this.unit=L(e)}return g(t,[{key:"lineAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.state.doc.lineAt(t),r=this.options.simulateBreak;return null!=r&&r>=n.from&&r<=n.to?(e<0?r<t:r<=t)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}},{key:"textAfterPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";var n=this.lineAt(t,e),r=n.text,i=n.from;return r.slice(t-i,Math.min(r.length,t+100-i))}},{key:"column",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.lineAt(t,e),r=n.text,i=n.from,o=this.countColumn(r,t-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(o+=a-this.countColumn(r,r.search(/\S|$/))),o}},{key:"countColumn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;return(0,a.IS)(t,this.state.tabSize,e)}},{key:"lineIndent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.lineAt(t,e),r=n.text,i=n.from,o=this.options.overrideIndentation;if(o){var a=o(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}},{key:"simulatedBreak",get:function(){return this.options.simulateBreak||null}}]),t}(),V=new r.md;function H(t){var e=t.type.prop(V);if(e)return e;var n,i=t.firstChild;if(i&&(n=i.type.prop(r.md.closedBy))){var o=t.lastChild,a=o&&n.indexOf(o.name)>-1;return function(t){return F(t,!0,1,void 0,a&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?o.from:void 0)}}return null==t.parent?_:null}function z(t,e,n){for(;t;t=t.parent){var r=H(t);if(r)return r(new W(n,e,t))}return null}function _(){return 0}var W=function(t){u(n,t);var e=h(n);function n(t,r,i){var o;return p(this,n),(o=e.call(this,t.state,t.options)).base=t,o.pos=r,o.node=i,o}return g(n,[{key:"textAfter",get:function(){return this.textAfterPos(this.pos)}},{key:"baseIndent",get:function(){for(var t=this.state.doc.lineAt(this.node.from);;){for(var e=this.node.resolve(t.from);e.parent&&e.parent.from==e.from;)e=e.parent;if(q(e,this.node))break;t=this.state.doc.lineAt(e.from)}return this.lineIndent(t.from)}},{key:"continue",value:function(){var t=this.node.parent;return t?z(t,this.pos,this.base):0}}]),n}(j);function q(t,e){for(var n=e;n;n=n.parent)if(t==n)return!0;return!1}function F(t,e,n,r,i){var o=t.textAfter,a=o.match(/^\s*/)[0].length,s=r&&o.slice(a,a+r.length)==r||i==t.pos+a,u=e?function(t){var e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;for(var i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),a=null==i||i<=o.from?o.to:Math.min(o.to,i),s=n.to;;){var u=e.childAfter(s);if(!u||u==r)return null;if(!u.type.isSkipped)return u.from<a?n:null;s=u.to}}(t):null;return u?s?t.column(u.from):t.column(u.to):t.baseIndent+(s?0:t.unit*n)}},17429:function(t,e,n){n.d(e,{b:function(){return l}});var r=["and","as","block","endblock","by","cycle","debug","else","elif","extends","filter","endfilter","firstof","for","endfor","if","endif","ifchanged","endifchanged","ifequal","endifequal","ifnotequal","endifnotequal","in","include","load","not","now","or","parsed","regroup","reversed","spaceless","endspaceless","ssi","templatetag","openblock","closeblock","openvariable","closevariable","openbrace","closebrace","opencomment","closecomment","widthratio","url","with","endwith","get_current_language","trans","endtrans","noop","blocktrans","endblocktrans","get_available_languages","get_current_language_bidi","plural"],i=/^[+\-*&%=<>!?|~^]/,o=/^[:\[\(\{]/,a=["true","false"],s=/^(\d[+\-\*\/])?\d+(\.\d+)?/;function u(t,e){var n=t.peek();if(e.incomment)return t.skipTo("#}")?(t.eatWhile(/\#|}/),e.incomment=!1):t.skipToEnd(),"comment";if(e.intag){if(e.operator){if(e.operator=!1,t.match(a))return"atom";if(t.match(s))return"number"}if(e.sign){if(e.sign=!1,t.match(a))return"atom";if(t.match(s))return"number"}if(e.instring)return n==e.instring&&(e.instring=!1),t.next(),"string";if("'"==n||'"'==n)return e.instring=n,t.next(),"string";if(t.match(e.intag+"}")||t.eat("-")&&t.match(e.intag+"}"))return e.intag=!1,"tag";if(t.match(i))return e.operator=!0,"operator";if(t.match(o))e.sign=!0;else if(t.eat(" ")||t.sol()){if(t.match(r))return"keyword";if(t.match(a))return"atom";if(t.match(s))return"number";t.sol()&&t.next()}else t.next();return"variable"}if(t.eat("{")){if(t.eat("#"))return e.incomment=!0,t.skipTo("#}")?(t.eatWhile(/\#|}/),e.incomment=!1):t.skipToEnd(),"comment";if(n=t.eat(/\{|%/))return e.intag=n,"{"==n&&(e.intag="}"),t.eat("-"),"tag"}t.next()}r=new RegExp("(("+r.join(")|(")+"))\\b"),a=new RegExp("(("+a.join(")|(")+"))\\b");var l={startState:function(){return{tokenize:u}},token:function(t,e){return e.tokenize(t,e)},languageData:{commentTokens:{block:{open:"{#",close:"#}"}}}}},76697:function(t,e,n){n.d(e,{r:function(){return i}});var r=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i"),i={token:function(t,e){var n=t.peek(),i=e.escaped;if(e.escaped=!1,"#"==n&&(0==t.pos||/\s/.test(t.string.charAt(t.pos-1))))return t.skipToEnd(),"comment";if(t.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(e.literal&&t.indentation()>e.keyCol)return t.skipToEnd(),"string";if(e.literal&&(e.literal=!1),t.sol()){if(e.keyCol=0,e.pair=!1,e.pairStart=!1,t.match("---"))return"def";if(t.match("..."))return"def";if(t.match(/^\s*-\s+/))return"meta"}if(t.match(/^(\{|\}|\[|\])/))return"{"==n?e.inlinePairs++:"}"==n?e.inlinePairs--:"["==n?e.inlineList++:e.inlineList--,"meta";if(e.inlineList>0&&!i&&","==n)return t.next(),"meta";if(e.inlinePairs>0&&!i&&","==n)return e.keyCol=0,e.pair=!1,e.pairStart=!1,t.next(),"meta";if(e.pairStart){if(t.match(/^\s*(\||\>)\s*/))return e.literal=!0,"meta";if(t.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(0==e.inlinePairs&&t.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(e.inlinePairs>0&&t.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(t.match(r))return"keyword"}return!e.pair&&t.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(e.pair=!0,e.keyCol=t.indentation(),"atom"):e.pair&&t.match(/^:\s*/)?(e.pairStart=!0,"meta"):(e.pairStart=!1,e.escaped="\\"==n,t.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}}},67037:function(t,e,n){n.d(e,{Xs:function(){return d},f_:function(){return p},uU:function(){return l}});var r=n(74075);function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}var l=function(){function t(){a(this,t)}return u(t,[{key:"eq",value:function(t){return this==t}},{key:"range",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return new h(t,e,this)}}]),t}();l.prototype.startSide=l.prototype.endSide=0,l.prototype.point=!1,l.prototype.mapMode=r.gc.TrackDel;var h=function t(e,n,r){a(this,t),this.from=e,this.to=n,this.value=r};function c(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}var f=function(){function t(e,n,r,i){a(this,t),this.from=e,this.to=n,this.value=r,this.maxPoint=i}return u(t,[{key:"length",get:function(){return this.to[this.to.length-1]}},{key:"findIndex",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n?this.to:this.from,o=r,a=i.length;;){if(o==a)return o;var s=o+a>>1,u=i[s]-t||(n?this.value[s].endSide:this.value[s].startSide)-e;if(s==o)return u>=0?o:a;u>=0?a=s:o=s+1}}},{key:"between",value:function(t,e,n,r){for(var i=this.findIndex(e,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+t,this.to[i]+t,this.value[i]))return!1}},{key:"map",value:function(e,n){for(var r=[],i=[],o=[],a=-1,s=-1,u=0;u<this.value.length;u++){var l=this.value[u],h=this.from[u]+e,c=this.to[u]+e,f=void 0,d=void 0;if(h==c){var v=n.mapPos(h,l.startSide,l.mapMode);if(null==v)continue;if(f=d=v,l.startSide!=l.endSide&&(d=n.mapPos(h,l.endSide))<f)continue}else if((f=n.mapPos(h,l.startSide))>(d=n.mapPos(c,l.endSide))||f==d&&l.startSide>0&&l.endSide<=0)continue;(d-f||l.endSide-l.startSide)<0||(a<0&&(a=f),l.point&&(s=Math.max(s,d-f)),r.push(l),i.push(f-a),o.push(d-a))}return{mapped:r.length?new t(i,o,r,s):null,pos:a}}}]),t}(),d=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.empty,i=arguments.length>3?arguments[3]:void 0;a(this,t),this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}return u(t,[{key:"length",get:function(){var t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}},{key:"size",get:function(){if(this.isEmpty)return 0;var t,e=this.nextLayer.size,n=i(this.chunk);try{for(n.s();!(t=n.n()).done;){e+=t.value.value.length}}catch(r){n.e(r)}finally{n.f()}return e}},{key:"chunkEnd",value:function(t){return this.chunkPos[t]+this.chunk[t].length}},{key:"update",value:function(e){var n=e.add,r=void 0===n?[]:n,i=e.sort,o=void 0!==i&&i,a=e.filterFrom,s=void 0===a?0:a,u=e.filterTo,l=void 0===u?this.length:u,f=e.filter;if(0==r.length&&!f)return this;if(o&&r.slice().sort(c),this.isEmpty)return r.length?t.of(r):this;for(var d=new g(this,null,-1).goto(0),v=0,m=[],y=new p;d.value||v<r.length;)if(v<r.length&&(d.from-r[v].from||d.startSide-r[v].value.startSide)>=0){var k=r[v++];y.addInner(k.from,k.to,k.value)||m.push(k)}else 1==d.rangeIndex&&d.chunkIndex<this.chunk.length&&(v==r.length||this.chunkEnd(d.chunkIndex)<r[v].from)&&(!f||s>this.chunkEnd(d.chunkIndex)||l<this.chunkPos[d.chunkIndex])&&y.addChunk(this.chunkPos[d.chunkIndex],this.chunk[d.chunkIndex])?d.nextChunk():((!f||s>d.to||l<d.from||f(d.from,d.to,d.value))&&(y.addInner(d.from,d.to,d.value)||m.push(new h(d.from,d.to,d.value))),d.next());return y.finishInner(this.nextLayer.isEmpty&&!m.length?t.empty:this.nextLayer.update({add:m,filter:f,filterFrom:s,filterTo:l}))}},{key:"map",value:function(e){if(0==e.length||this.isEmpty)return this;for(var n=[],r=[],i=-1,o=0;o<this.chunk.length;o++){var a=this.chunkPos[o],s=this.chunk[o],u=e.touchesRange(a,a+s.length);if(!1===u)i=Math.max(i,s.maxPoint),n.push(s),r.push(e.mapPos(a));else if(!0===u){var l=s.map(a,e),h=l.mapped,c=l.pos;h&&(i=Math.max(i,h.maxPoint),n.push(h),r.push(c))}}var f=this.nextLayer.map(e);return 0==n.length?f:new t(r,n,f,i)}},{key:"between",value:function(t,e,n){if(!this.isEmpty){for(var r=0;r<this.chunk.length;r++){var i=this.chunkPos[r],o=this.chunk[r];if(e>=i&&t<=i+o.length&&!1===o.between(i,t-i,e-i,n))return}this.nextLayer.between(t,e,n)}}},{key:"iter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return y.from([this]).goto(t)}},{key:"isEmpty",get:function(){return this.nextLayer==this}}],[{key:"iter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return y.from(t).goto(e)}},{key:"compare",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=t.filter((function(t){return t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i})),a=e.filter((function(t){return t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i})),s=m(o,a,n),u=new b(o,s,i),l=new b(a,s,i);n.iterGaps((function(t,e,n){return w(u,t,l,e,n,r)})),n.empty&&0==n.length&&w(u,0,l,0,0,r)}},{key:"eq",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;null==r&&(r=1e9);var i=t.filter((function(t){return!t.isEmpty&&e.indexOf(t)<0})),o=e.filter((function(e){return!e.isEmpty&&t.indexOf(e)<0}));if(i.length!=o.length)return!1;if(!i.length)return!0;for(var a=m(i,o),s=new b(i,a,0).goto(n),u=new b(o,a,0).goto(n);;){if(s.to!=u.to||!x(s.active,u.active)||s.point&&(!u.point||!s.point.eq(u.point)))return!1;if(s.to>r)return!0;s.next(),u.next()}}},{key:"spans",value:function(t,e,n,r){for(var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=new b(t,null,o,null===(i=r.filterPoint)||void 0===i?void 0:i.bind(r)).goto(e),s=e,u=a.openStart;;){var l=Math.min(a.to,n);if(a.point?(r.point(s,l,a.point,a.activeForPoint(a.to),u),u=a.openEnd(l)+(a.to>l?1:0)):l>s&&(r.span(s,l,a.active,u),u=a.openEnd(l)),a.to>n)break;s=a.to,a.next()}return u}},{key:"of",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new p,o=i(t instanceof h?[t]:n?v(t):t);try{for(o.s();!(e=o.n()).done;){var a=e.value;r.add(a.from,a.to,a.value)}}catch(s){o.e(s)}finally{o.f()}return r.finish()}}]),t}();function v(t){if(t.length>1)for(var e=t[0],n=1;n<t.length;n++){var r=t[n];if(c(e,r)>0)return t.slice().sort(c);e=r}return t}d.empty=new d([],[],null,-1),d.empty.nextLayer=d.empty;var p=function(){function t(){a(this,t),this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}return u(t,[{key:"finishChunk",value:function(t){this.chunks.push(new f(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}},{key:"add",value:function(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new t)).add(e,n,r)}},{key:"addInner",value:function(t,e,n){var r=t-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}},{key:"addChunk",value:function(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);var n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}},{key:"finish",value:function(){return this.finishInner(d.empty)}},{key:"finishInner",value:function(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;var e=new d(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}]),t}();function m(t,e,n){var r,o=new Map,a=i(t);try{for(a.s();!(r=a.n()).done;)for(var s=r.value,u=0;u<s.chunk.length;u++)s.chunk[u].maxPoint<=0&&o.set(s.chunk[u],s.chunkPos[u])}catch(p){a.e(p)}finally{a.f()}var l,h=new Set,c=i(e);try{for(c.s();!(l=c.n()).done;)for(var f=l.value,d=0;d<f.chunk.length;d++){var v=o.get(f.chunk[d]);null==v||(n?n.mapPos(v):v)!=f.chunkPos[d]||(null==n?void 0:n.touchesRange(v,v+f.chunk[d].length))||h.add(f.chunk[d])}}catch(p){c.e(p)}finally{c.f()}return h}var g=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(this,t),this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}return u(t,[{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"endSide",get:function(){return this.value?this.value.endSide:0}},{key:"goto",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}},{key:"gotoInner",value:function(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){var r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){var i=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}},{key:"forward",value:function(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}},{key:"next",value:function(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}var t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}},{key:"setRangeIndex",value:function(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}},{key:"nextChunk",value:function(){this.chunkIndex++,this.rangeIndex=0,this.next()}},{key:"compare",value:function(t){return this.from-t.from||this.startSide-t.startSide||this.to-t.to||this.endSide-t.endSide}}]),t}(),y=function(){function t(e){a(this,t),this.heap=e}return u(t,[{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"goto",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9,r=i(this.heap);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.goto(t,n)}}catch(s){r.e(s)}finally{r.f()}for(var a=this.heap.length>>1;a>=0;a--)k(this.heap,a);return this.next(),this}},{key:"forward",value:function(t,e){var n,r=i(this.heap);try{for(r.s();!(n=r.n()).done;){n.value.forward(t,e)}}catch(a){r.e(a)}finally{r.f()}for(var o=this.heap.length>>1;o>=0;o--)k(this.heap,o);(this.to-t||this.value.endSide-e)<0&&this.next()}},{key:"next",value:function(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{var t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),k(this.heap,0)}}}],[{key:"from",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=[],o=0;o<e.length;o++)for(var a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new g(a,n,r,o));return 1==i.length?i[0]:new t(i)}}]),t}();function k(t,e){for(var n=t[e];;){var r=1+(e<<1);if(r>=t.length)break;var i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}var b=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};a(this,t),this.minPoint=r,this.filterPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=y.from(e,n,r)}return u(t,[{key:"goto",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}},{key:"forward",value:function(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}},{key:"removeActive",value:function(t){S(this.active,t),S(this.activeTo,t),S(this.activeRank,t),this.minActive=C(this.active,this.activeTo)}},{key:"addActive",value:function(t){for(var e=0,n=this.cursor,r=n.value,i=n.to,o=n.rank;e<this.activeRank.length&&this.activeRank[e]<=o;)e++;A(this.active,e,r),A(this.activeTo,e,i),A(this.activeRank,e,o),t&&A(t,e,this.cursor.from),this.minActive=C(this.active,this.activeTo)}},{key:"next",value:function(){var t=this.to,e=this.point;this.point=null;for(var n=this.openStart<0?[]:null,r=0;;){var i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>t){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&S(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}var o=this.cursor.value;if(o.point)if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{if(this.filterPoint(this.cursor.from,this.cursor.to,this.cursor.value,this.cursor.rank)){this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<t&&(r=1),this.cursor.next(),this.to>t&&this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}if(n){for(var a=0;a<n.length&&n[a]<t;)a++;this.openStart=a+r}}},{key:"activeForPoint",value:function(t){if(!this.active.length)return this.active;for(var e=[],n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}},{key:"openEnd",value:function(t){for(var e=0,n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}]),t}();function w(t,e,n,r,i,o){t.goto(e),n.goto(r);for(var a=r+i,s=r,u=r-e;;){var l=t.to+u-n.to||t.endSide-n.endSide,h=l<0?t.to+u:n.to,c=Math.min(h,a);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&x(t.activeForPoint(t.to+u),n.activeForPoint(n.to))||o.comparePoint(s,c,t.point,n.point):c>s&&!x(t.active,n.active)&&o.compareRange(s,c,t.active,n.active),h>a)break;s=h,l<=0&&t.next(),l>=0&&n.next()}}function x(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function S(t,e){for(var n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function A(t,e,n){for(var r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function C(t,e){for(var n=-1,r=1e9,i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}},42454:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(74075),i=n(91643),o=n(51686),a=2e3;function s(t,e){var n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>a?-1:i==r.length?function(t,e){var n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):(0,o.IS)(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function u(t,e){var n=s(t,e),i=t.state.selection;return n?{update:function(t){if(t.docChanged){var e=t.changes.mapPos(t.startState.doc.line(n.line).from),r=t.state.doc.lineAt(e);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},i=i.map(t.changes)}},get:function(e,u,l){var h=s(t,e);if(!h)return i;var c=function(t,e,n){var i=Math.min(e.line,n.line),s=Math.max(e.line,n.line),u=[];if(e.off>a||n.off>a||e.col<0||n.col<0)for(var l=Math.min(e.off,n.off),h=Math.max(e.off,n.off),c=i;c<=s;c++){var f=t.doc.line(c);f.length<=h&&u.push(r.jT.range(f.from+l,f.to+h))}else for(var d=Math.min(e.col,n.col),v=Math.max(e.col,n.col),p=i;p<=s;p++){var m=t.doc.line(p),g=(0,o.Gz)(m.text,d,t.tabSize,!0);if(g>-1){var y=(0,o.Gz)(m.text,v,t.tabSize);u.push(r.jT.range(m.from+g,m.from+y))}}return u}(t.state,n,h);return c.length?l?r.jT.create(c.concat(i.ranges)):r.jT.create(c):i}}:null}function l(t){var e=(null==t?void 0:t.eventFilter)||function(t){return t.altKey&&0==t.button};return i.tk.mouseSelectionStyle.of((function(t,n){return e(n)?u(t,n):null}))}},86315:function(t,e,n){n.d(e,{sW:function(){return X},Lp:function(){return St}});var r=n(91643),i=n(74075);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h=i.r$.define({combine:function(t){var e,n,r,i=u(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;e=e||o.topContainer,n=n||o.bottomContainer}}catch(a){i.e(a)}finally{i.f()}return{topContainer:e,bottomContainer:n}}});function c(t,e){var n=t.plugin(f),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}var f=r.lg.fromClass(function(){function t(e){o(this,t),this.input=e.state.facet(m),this.specs=this.input.filter((function(t){return t})),this.panels=this.specs.map((function(t){return t(e)}));var n=e.state.facet(h);this.top=new d(e,!0,n.topContainer),this.bottom=new d(e,!1,n.bottomContainer),this.top.sync(this.panels.filter((function(t){return t.top}))),this.bottom.sync(this.panels.filter((function(t){return!t.top})));var r,i=u(this.panels);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.dom.classList.add("cm-panel"),a.mount&&a.mount()}}catch(s){i.e(s)}finally{i.f()}}return s(t,[{key:"update",value:function(t){var e=t.state.facet(h);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new d(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new d(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();var n=t.state.facet(m);if(n!=this.input){var r,i=n.filter((function(t){return t})),o=[],a=[],s=[],l=[],c=u(i);try{for(c.s();!(r=c.n()).done;){var f=r.value,v=this.specs.indexOf(f),p=void 0;v<0?(p=f(t.view),l.push(p)):(p=this.panels[v]).update&&p.update(t),o.push(p),(p.top?a:s).push(p)}}catch(S){c.e(S)}finally{c.f()}this.specs=i,this.panels=o,this.top.sync(a),this.bottom.sync(s);for(var g=0,y=l;g<y.length;g++){var k=y[g];k.dom.classList.add("cm-panel"),k.mount&&k.mount()}}else{var b,w=u(this.panels);try{for(w.s();!(b=w.n()).done;){var x=b.value;x.update&&x.update(t)}}catch(S){w.e(S)}finally{w.f()}}}},{key:"destroy",value:function(){this.top.sync([]),this.bottom.sync([])}}]),t}(),{provide:r.BF.scrollMargins.from((function(t){return{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}}))}),d=function(){function t(e,n,r){o(this,t),this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}return s(t,[{key:"sync",value:function(t){this.panels=t,this.syncDOM()}},{key:"syncDOM",value:function(){if(0!=this.panels.length){if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";var t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}var e,n=this.dom.firstChild,r=u(this.panels);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.dom.parentNode==this.dom){for(;n!=i.dom;)n=v(n);n=n.nextSibling}else this.dom.insertBefore(i.dom,n)}}catch(o){r.e(o)}finally{r.f()}for(;n;)n=v(n)}else this.dom&&(this.dom.remove(),this.dom=void 0)}},{key:"scrollMargin",value:function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}},{key:"syncClasses",value:function(){if(this.container&&this.classes!=this.view.themeClasses){var t,e=u(this.classes.split(" "));try{for(e.s();!(t=e.n()).done;){var n=t.value;n&&this.container.classList.remove(n)}}catch(a){e.e(a)}finally{e.f()}var r,i=u((this.classes=this.view.themeClasses).split(" "));try{for(i.s();!(r=i.n()).done;){var o=r.value;o&&this.container.classList.add(o)}}catch(a){i.e(a)}finally{i.f()}}}}]),t}();function v(t){var e=t.nextSibling;return t.remove(),e}var p=r.tk.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),m=i.r$.define({enables:[f,p]}),g=n(67037);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function k(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==y(n)&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?t.setAttribute(r,i):null!=i&&(t[r]=i)}e++}for(;e<arguments.length;e++)b(t,arguments[e]);return t}function b(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)b(t,e[n])}}var w=n(51686);function x(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||R(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}function A(t,e){return A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},A(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}function M(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function D(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=R(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||R(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){if(t){if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),t}var N="function"==typeof String.prototype.normalize?function(t){return t.normalize("NFKD")}:function(t){return t},j=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=arguments.length>4?arguments[4]:void 0;B(this,t),this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?function(t){return o(N(t))}:N,this.query=this.normalize(n)}return I(t,[{key:"peek",value:function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,w.gm)(this.buffer,this.bufferPos)}},{key:"next",value:function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}},{key:"nextOverlapping",value:function(){for(;;){var t=this.peek();if(t<0)return this.done=!0,this;var e=(0,w.bg)(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,w.nZ)(t);for(var r=this.normalize(e),i=0,o=n;;i++){var a=r.charCodeAt(i),s=this.match(a,o);if(s)return this.value=s,this;if(i==r.length-1)break;o==n&&i<e.length&&e.charCodeAt(i)==a&&o++}}}},{key:"match",value:function(t,e){for(var n=null,r=0;r<this.matches.length;r+=2){var i=this.matches[r],o=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?n={from:this.matches[r+1],to:e+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?n={from:e,to:e+1}:this.matches.push(1,e)),n}}]),t}();"undefined"!=typeof Symbol&&(j.prototype[Symbol.iterator]=function(){return this});var V={from:-1,to:-1,match:/.*/.exec("")},H="gm"+(null==/x/.unicode?"":"u"),z=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length;if(B(this,t),this.to=o,this.curLine="",this.done=!1,this.value=V,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new q(e,n,r,i,o);this.re=new RegExp(n,H+((null==r?void 0:r.ignoreCase)?"i":"")),this.iter=e.iter();var a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=i,this.getLine(this.curLineStart)}return I(t,[{key:"getLine",value:function(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}},{key:"nextLine",value:function(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}},{key:"next",value:function(){for(var t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;var e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){var n=this.curLineStart+e.index,r=n+e[0].length;if(this.matchPos=r+(n==r?1:0),n==this.curLine.length&&this.nextLine(),n<r||n>this.value.to)return this.value={from:n,to:r,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}]),t}(),_=new WeakMap,W=function(){function t(e,n){B(this,t),this.from=e,this.text=n}return I(t,[{key:"to",get:function(){return this.from+this.text.length}}],[{key:"get",value:function(e,n,r){var i=_.get(e);if(!i||i.from>=r||i.to<=n){var o=new t(n,e.sliceString(n,r));return _.set(e,o),o}if(i.from==n&&i.to==r)return i;var a=i.text,s=i.from;return s>n&&(a=e.sliceString(n,s)+a,s=n),i.to<r&&(a+=e.sliceString(i.to,r)),_.set(e,new t(s,a)),new t(n,a.slice(n-s,r-s))}}]),t}(),q=function(){function t(e,n,r,i,o){B(this,t),this.text=e,this.to=o,this.done=!1,this.value=V,this.matchPos=i,this.re=new RegExp(n,H+((null==r?void 0:r.ignoreCase)?"i":"")),this.flat=W.get(e,i,this.chunkEnd(i+5e3))}return I(t,[{key:"chunkEnd",value:function(t){return t>=this.to?this.to:this.text.lineAt(t).to}},{key:"next",value:function(){for(;;){var t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e&&this.flat.to<this.to&&e.index+e[0].length>this.flat.text.length-10&&(e=null),e){var n=this.flat.from+e.index,r=n+e[0].length;return this.value={from:n,to:r,match:e},this.matchPos=r+(n==r?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=W.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}]),t}();function F(t){var e=k("input",{class:"cm-textfield",name:"line"});function n(){var n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(n){var r=t.state,o=r.doc.lineAt(r.selection.main.head),a=E(n,5),s=a[1],u=a[2],l=a[3],h=a[4],c=l?+l.slice(1):0,f=u?+u:o.number;if(u&&h){var d=f/100;s&&(d=d*("-"==s?-1:1)+o.number/r.doc.lines),f=Math.round(r.doc.lines*d)}else u&&s&&(f=f*("-"==s?-1:1)+o.number);var v=r.doc.line(Math.max(1,Math.min(r.doc.lines,f)));t.dispatch({effects:$.of(!1),selection:i.jT.cursor(v.from+Math.max(0,Math.min(c,v.length))),scrollIntoView:!0}),t.focus()}}return{dom:k("form",{class:"cm-gotoLine",onkeydown:function(e){27==e.keyCode?(e.preventDefault(),t.dispatch({effects:$.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),n())},onsubmit:function(t){t.preventDefault(),n()}},k("label",t.state.phrase("Go to line"),": ",e)," ",k("button",{class:"cm-button",type:"submit"},t.state.phrase("go"))),pos:-10}}"undefined"!=typeof Symbol&&(z.prototype[Symbol.iterator]=q.prototype[Symbol.iterator]=function(){return this});var $=i.Py.define(),U=i.QQ.define({create:function(){return!0},update:function(t,e){var n,r=D(e.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.is($)&&(t=i.value)}}catch(o){r.e(o)}finally{r.f()}return t},provide:function(t){return m.from(t,(function(t){return t?F:null}))}}),K=r.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),G={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},J=i.r$.define({combine:function(t){return(0,i.BO)(t,G,{highlightWordAroundCursor:function(t,e){return t||e},minSelectionLength:Math.min,maxMatches:Math.min})}});function X(t){var e=[tt,Z];return t&&e.push(J.of(t)),e}var Q=r.p.mark({class:"cm-selectionMatch"}),Y=r.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"}),Z=r.lg.fromClass(function(){function t(e){B(this,t),this.decorations=this.getDeco(e)}return I(t,[{key:"update",value:function(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}},{key:"getDeco",value:function(t){var e=t.state.facet(J),n=t.state,o=n.selection;if(o.ranges.length>1)return r.p.none;var a,s=o.main,u=null;if(s.empty){if(!e.highlightWordAroundCursor)return r.p.none;var l=n.wordAt(s.head);if(!l)return r.p.none;u=n.charCategorizer(s.head),a=n.sliceDoc(l.from,l.to)}else{var h=s.to-s.from;if(h<e.minSelectionLength||h>200)return r.p.none;if(!(a=n.sliceDoc(s.from,s.to).trim()))return r.p.none}var c,f=[],d=D(t.visibleRanges);try{for(d.s();!(c=d.n()).done;)for(var v=c.value,p=new j(n.doc,a,v.from,v.to);!p.next().done;){var m=p.value,g=m.from,y=m.to;if((!u||(0==g||u(n.sliceDoc(g-1,g))!=i.D0.Word)&&(y==n.doc.length||u(n.sliceDoc(y,y+1))!=i.D0.Word))&&(u&&g<=s.from&&y>=s.to?f.push(Y.range(g,y)):(g>=s.to||y<=s.from)&&f.push(Q.range(g,y)),f.length>e.maxMatches))return r.p.none}}catch(k){d.e(k)}finally{d.f()}return r.p.set(f)}}]),t}(),{decorations:function(t){return t.decorations}}),tt=r.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var et=i.r$.define({combine:function(t){var e;return{top:t.reduce((function(t,e){return null!=t?t:e.top}),void 0)||!1,caseSensitive:t.reduce((function(t,e){return null!=t?t:e.caseSensitive||e.matchCase}),void 0)||!1,createPanel:(null===(e=t.find((function(t){return t.createPanel})))||void 0===e?void 0:e.createPanel)||function(t){return new At(t)}}}});var nt=function(){function t(e){B(this,t),this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,H),!0}catch(e){return!1}}(this.search))}return I(t,[{key:"eq",value:function(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp}},{key:"create",value:function(){return this.regexp?new ot(this):new it(this)}}]),t}(),rt=function t(e){B(this,t),this.spec=e},it=function(t){S(n,t);var e=C(n);function n(t){var r;return B(this,n),(r=e.call(this,t)).unquoted=t.search.replace(/\\([nrt\\])/g,(function(t,e){return"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"})),r}return I(n,[{key:"cursor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;return new j(t,this.unquoted,e,n,this.spec.caseSensitive?void 0:function(t){return t.toLowerCase()})}},{key:"nextMatch",value:function(t,e,n){var r=this.cursor(t,n).nextOverlapping();return r.done&&(r=this.cursor(t,0,e).nextOverlapping()),r.done?null:r.value}},{key:"prevMatchInRange",value:function(t,e,n){for(var r=n;;){for(var i=Math.max(e,r-1e4-this.unquoted.length),o=this.cursor(t,i,r),a=null;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(i==e)return null;r-=1e4}}},{key:"prevMatch",value:function(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.length)}},{key:"getReplacement",value:function(t){return this.spec.replace}},{key:"matchAll",value:function(t,e){for(var n=this.cursor(t),r=[];!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}},{key:"highlight",value:function(t,e,n,r){for(var i=this.cursor(t,Math.max(0,e-this.unquoted.length),Math.min(n+this.unquoted.length,t.length));!i.next().done;)r(i.value.from,i.value.to)}}]),n}(rt),ot=function(t){S(n,t);var e=C(n);function n(){return B(this,n),e.apply(this,arguments)}return I(n,[{key:"cursor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;return new z(t,this.spec.search,this.spec.caseSensitive?void 0:{ignoreCase:!0},e,n)}},{key:"nextMatch",value:function(t,e,n){var r=this.cursor(t,n).next();return r.done&&(r=this.cursor(t,0,e).next()),r.done?null:r.value}},{key:"prevMatchInRange",value:function(t,e,n){for(var r=1;;r++){for(var i=Math.max(e,n-1e4*r),o=this.cursor(t,i,n),a=null;!o.next().done;)a=o.value;if(a&&(i==e||a.from>i+10))return a;if(i==e)return null}}},{key:"prevMatch",value:function(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.length)}},{key:"getReplacement",value:function(t){return this.spec.replace.replace(/\$([$&\d+])/g,(function(e,n){return"$"==n?"$":"&"==n?t.match[0]:"0"!=n&&+n<t.match.length?t.match[n]:e}))}},{key:"matchAll",value:function(t,e){for(var n=this.cursor(t),r=[];!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}},{key:"highlight",value:function(t,e,n,r){for(var i=this.cursor(t,Math.max(0,e-250),Math.min(n+250,t.length));!i.next().done;)r(i.value.from,i.value.to)}}]),n}(rt),at=i.Py.define(),st=i.Py.define(),ut=i.QQ.define({create:function(t){return new lt(bt(t).create(),kt)},update:function(t,e){var n,r=D(e.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.is(at)?t=new lt(i.value.create(),t.panel):i.is(st)&&(t=new lt(t.query,i.value?kt:null))}}catch(o){r.e(o)}finally{r.f()}return t},provide:function(t){return m.from(t,(function(t){return t.panel}))}});var lt=function t(e,n){B(this,t),this.query=e,this.panel=n},ht=r.p.mark({class:"cm-searchMatch"}),ct=r.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ft=r.lg.fromClass(function(){function t(e){B(this,t),this.view=e,this.decorations=this.highlight(e.state.field(ut))}return I(t,[{key:"update",value:function(t){var e=t.state.field(ut);(e!=t.startState.field(ut)||t.docChanged||t.selectionSet)&&(this.decorations=this.highlight(e))}},{key:"highlight",value:function(t){var e=t.query;if(!t.panel||!e.spec.valid)return r.p.none;for(var n=this.view,i=new g.f_,o=0,a=n.visibleRanges,s=a.length;o<s;o++){for(var u=a[o],l=u.from,h=u.to;o<s-1&&h>a[o+1].from-500;)h=a[++o].to;e.highlight(n.state.doc,l,h,(function(t,e){var r=n.state.selection.ranges.some((function(n){return n.from==t&&n.to==e}));i.add(t,e,r?ct:ht)}))}return i.finish()}}]),t}(),{decorations:function(t){return t.decorations}});function dt(t){return function(e){var n=e.state.field(ut,!1);return n&&n.query.spec.valid?t(e,n):wt(e)}}var vt=dt((function(t,e){var n=e.query,r=t.state.selection.main,i=r.from,o=r.to,a=n.nextMatch(t.state.doc,i,o);return!(!a||a.from==i&&a.to==o)&&(t.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0,effects:Ot(t,a),userEvent:"select.search"}),!0)})),pt=dt((function(t,e){var n=e.query,r=t.state,i=r.selection.main,o=i.from,a=i.to,s=n.prevMatch(r.doc,o,a);return!!s&&(t.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Ot(t,s),userEvent:"select.search"}),!0)})),mt=dt((function(t,e){var n=e.query.matchAll(t.state.doc,1e3);return!(!n||!n.length)&&(t.dispatch({selection:i.jT.create(n.map((function(t){return i.jT.range(t.from,t.to)}))),userEvent:"select.search.matches"}),!0)})),gt=dt((function(t,e){var n=e.query,r=t.state,i=r.selection.main,o=i.from,a=i.to;if(r.readOnly)return!1;var s=n.nextMatch(r.doc,o,o);if(!s)return!1;var u,l,h=[];if(s.from==o&&s.to==a&&(l=r.toText(n.getReplacement(s)),h.push({from:s.from,to:s.to,insert:l}),s=n.nextMatch(r.doc,s.from,s.to)),s){var c=0==h.length||h[0].from>=s.to?0:s.to-s.from-l.length;u={anchor:s.from-c,head:s.to-c}}return t.dispatch({changes:h,selection:u,scrollIntoView:!!u,effects:s?Ot(t,s):void 0,userEvent:"input.replace"}),!0})),yt=dt((function(t,e){var n=e.query;if(t.state.readOnly)return!1;var r=n.matchAll(t.state.doc,1e9).map((function(t){return{from:t.from,to:t.to,insert:n.getReplacement(t)}}));return!!r.length&&(t.dispatch({changes:r,userEvent:"input.replace.all"}),!0)}));function kt(t){return t.state.facet(et).createPanel(t)}function bt(t,e){var n,r=t.selection.main,i=r.empty||r.to>r.from+100?"":t.sliceDoc(r.from,r.to),o=null!==(n=null==e?void 0:e.caseSensitive)&&void 0!==n?n:t.facet(et).caseSensitive;return e&&!i?e:new nt({search:i.replace(/\n/g,"\\n"),caseSensitive:o})}var wt=function(t){var e=t.state.field(ut,!1);if(e&&e.panel){var n=c(t,kt);if(!n)return!1;var r=n.dom.querySelector("[name=search]");if(r!=t.root.activeElement){var o=bt(t.state,e.query.spec);o.valid&&t.dispatch({effects:at.of(o)}),r.focus(),r.select()}}else t.dispatch({effects:[st.of(!0),e?at.of(bt(t.state,e.query.spec)):i.Py.appendConfig.of(Dt)]});return!0},xt=function(t){var e=t.state.field(ut,!1);if(!e||!e.panel)return!1;var n=c(t,kt);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:st.of(!1)}),!0},St=[{key:"Mod-f",run:wt,scope:"editor search-panel"},{key:"F3",run:vt,shift:pt,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:vt,shift:pt,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:xt,scope:"editor search-panel"},{key:"Mod-Shift-l",run:function(t){var e=t.state,n=t.dispatch,r=e.selection;if(r.ranges.length>1||r.main.empty)return!1;for(var o=r.main,a=o.from,s=o.to,u=[],l=0,h=new j(e.doc,e.sliceDoc(a,s));!h.next().done;){if(u.length>1e3)return!1;h.value.from==a&&(l=u.length),u.push(i.jT.range(h.value.from,h.value.to))}return n(e.update({selection:i.jT.create(u,l),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:function(t){var e=c(t,F);if(!e){var n=[$.of(!0)];null==t.state.field(U,!1)&&n.push(i.Py.appendConfig.of([U,K])),t.dispatch({effects:n}),e=c(t,F)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:function(t){var e=t.state,n=t.dispatch,o=e.selection.ranges;if(o.some((function(t){return t.from===t.to})))return function(t){var e=t.state,n=t.dispatch,r=e.selection,o=i.jT.create(r.ranges.map((function(t){return e.wordAt(t.head)||i.jT.cursor(t.head)})),r.mainIndex);return!o.eq(r)&&(n(e.update({selection:o})),!0)}({state:e,dispatch:n});var a=e.sliceDoc(o[0].from,o[0].to);if(e.selection.ranges.some((function(t){return e.sliceDoc(t.from,t.to)!=a})))return!1;var s=function(t,e){for(var n=t.selection,r=n.main,i=n.ranges,o=t.wordAt(r.head),a=o&&o.from==r.from&&o.to==r.to,s=function(n,r){if(r.next(),!r.done){if(n&&i.some((function(t){return t.from==r.value.from})))return l=r,u=n,"continue";if(a){var o=t.wordAt(r.value.from);if(!o||o.from!=r.value.from||o.to!=r.value.to)return l=r,u=n,"continue"}return u=n,l=r,{v:r.value}}if(n)return l=r,u=n,{v:null};r=new j(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),u=n=!0,l=r},u=!1,l=new j(t.doc,e,i[i.length-1].to);;){var h=s(u,l);if("continue"!==h&&"object"===T(h))return h.v}}(e,a);return!!s&&(n(e.update({selection:e.selection.addRange(i.jT.range(s.from,s.to),!1),effects:r.tk.scrollIntoView(s.to)})),!0)},preventDefault:!0}],At=function(){function t(e){var n=this;B(this,t),this.view=e;var r=this.query=e.state.field(ut).query.spec;function i(t,e,n){return k("button",{class:"cm-button",name:t,onclick:e,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=k("input",{value:r.search,placeholder:Ct(e,"Find"),"aria-label":Ct(e,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=k("input",{value:r.replace,placeholder:Ct(e,"Replace"),"aria-label":Ct(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=k("input",{type:"checkbox",name:"case",checked:r.caseSensitive,onchange:this.commit}),this.reField=k("input",{type:"checkbox",name:"re",checked:r.regexp,onchange:this.commit}),this.dom=k("div",{onkeydown:function(t){return n.keydown(t)},class:"cm-search"},[this.searchField,i("next",(function(){return vt(e)}),[Ct(e,"next")]),i("prev",(function(){return pt(e)}),[Ct(e,"previous")]),i("select",(function(){return mt(e)}),[Ct(e,"all")]),k("label",null,[this.caseField,Ct(e,"match case")]),k("label",null,[this.reField,Ct(e,"regexp")])].concat(x(e.state.readOnly?[]:[k("br"),this.replaceField,i("replace",(function(){return gt(e)}),[Ct(e,"replace")]),i("replaceAll",(function(){return yt(e)}),[Ct(e,"replace all")]),k("button",{name:"close",onclick:function(){return xt(e)},"aria-label":Ct(e,"close"),type:"button"},["×"])])))}return I(t,[{key:"commit",value:function(){var t=new nt({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:at.of(t)}))}},{key:"keydown",value:function(t){(0,r.$1)(this.view,t,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?pt:vt)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),gt(this.view))}},{key:"update",value:function(t){var e,n=D(t.transactions);try{for(n.s();!(e=n.n()).done;){var r,i=D(e.value.effects);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.is(at)&&!o.value.eq(this.query)&&this.setQuery(o.value)}}catch(a){i.e(a)}finally{i.f()}}}catch(a){n.e(a)}finally{n.f()}}},{key:"setQuery",value:function(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp}},{key:"mount",value:function(){this.searchField.select()}},{key:"pos",get:function(){return 80}},{key:"top",get:function(){return this.view.state.facet(et).top}}]),t}();function Ct(t,e){return t.state.phrase(e)}var Mt=/[\s\.,:;?!]/;function Ot(t,e){var n=e.from,i=e.to,o=t.state.doc.lineAt(n).from,a=t.state.doc.lineAt(i).to,s=Math.max(o,n-30),u=Math.min(a,i+30),l=t.state.sliceDoc(s,u);if(s!=o)for(var h=0;h<30;h++)if(!Mt.test(l[h+1])&&Mt.test(l[h])){l=l.slice(h);break}if(u!=a)for(var c=l.length-1;c>l.length-30;c--)if(!Mt.test(l[c-1])&&Mt.test(l[c])){l=l.slice(0,c);break}return r.tk.announce.of("".concat(t.state.phrase("current match"),". ").concat(l," ").concat(t.state.phrase("on line")," ").concat(t.state.doc.lineAt(n).number))}var Tt=r.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Dt=[ut,i.Wl.lowest(ft),Tt]},74075:function(t,e,n){n.d(e,{q6:function(){return et},n0:function(){return m},as:function(){return g},D0:function(){return dt},F6:function(){return W},jT:function(){return C},yy:function(){return mt},r$:function(){return D},gc:function(){return p},Wl:function(){return z},Py:function(){return it},QQ:function(){return B},YW:function(){return ot},BO:function(){return gt}});var r=n(51686);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}var v=/\r\n?|\n/,p=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(p||(p={})),m=function(){function t(e){c(this,t),this.sections=e}return d(t,[{key:"length",get:function(){for(var t=0,e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}},{key:"newLength",get:function(){for(var t=0,e=0;e<this.sections.length;e+=2){var n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}},{key:"empty",get:function(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}},{key:"iterGaps",value:function(t){for(var e=0,n=0,r=0;e<this.sections.length;){var i=this.sections[e++],o=this.sections[e++];o<0?(t(n,r,i),r+=i):r+=o,n+=i}}},{key:"iterChangedRanges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];b(this,t,e)}},{key:"invertedDesc",get:function(){for(var e=[],n=0;n<this.sections.length;){var r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new t(e)}},{key:"composeDesc",value:function(t){return this.empty?t:t.empty?this:x(this,t)}},{key:"mapDesc",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.empty?this:w(this,t,e)}},{key:"mapPos",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.Simple,r=0,i=0,o=0;o<this.sections.length;){var a=this.sections[o++],s=this.sections[o++],u=r+a;if(s<0){if(u>t)return i+(t-r);i+=a}else{if(n!=p.Simple&&u>=t&&(n==p.TrackDel&&r<t&&u>t||n==p.TrackBefore&&r<t||n==p.TrackAfter&&u>t))return null;if(u>t||u==t&&e<0&&!a)return t==r||e<0?i:i+s;i+=s}r=u}if(t>r)throw new RangeError("Position ".concat(t," is out of range for changeset of length ").concat(r));return i}},{key:"touchesRange",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=0,r=0;n<this.sections.length&&r<=e;){var i=this.sections[n++],o=this.sections[n++],a=r+i;if(o>=0&&r<=e&&a>=t)return!(r<t&&a>e)||"cover";r=a}return!1}},{key:"toString",value:function(){for(var t="",e=0;e<this.sections.length;){var n=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+n+(r>=0?":"+r:"")}return t}},{key:"toJSON",value:function(){return this.sections}}],[{key:"fromJSON",value:function(e){if(!Array.isArray(e)||e.length%2||e.some((function(t){return"number"!=typeof t})))throw new RangeError("Invalid JSON representation of ChangeDesc");return new t(e)}}]),t}(),g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,t);var e=u(n);function n(t,r){var i;return c(this,n),(i=e.call(this,t)).inserted=r,i}return d(n,[{key:"apply",value:function(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return b(this,(function(e,n,r,i,o){return t=t.replace(r,r+(n-e),o)}),!1),t}},{key:"mapDesc",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return w(this,t,e,!0)}},{key:"invert",value:function(t){for(var e=this.sections.slice(),i=[],o=0,a=0;o<e.length;o+=2){var s=e[o],u=e[o+1];if(u>=0){e[o]=u,e[o+1]=s;for(var l=o>>1;i.length<l;)i.push(r.xv.empty);i.push(s?t.slice(a,a+s):r.xv.empty)}a+=s}return new n(e,i)}},{key:"compose",value:function(t){return this.empty?t:t.empty?this:x(this,t,!0)}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.empty?this:w(this,t,e,!0)}},{key:"iterChanges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];b(this,t,e)}},{key:"desc",get:function(){return new m(this.sections)}},{key:"filter",value:function(t){var e=[],r=[],i=[],o=new S(this);t:for(var a=0,s=0;;){for(var u=a==t.length?1e9:t[a++];s<u||s==u&&0==o.len;){if(o.done)break t;var l=Math.min(o.len,u-s);y(i,l,-1);var h=-1==o.ins?-1:0==o.off?o.ins:0;y(e,l,h),h>0&&k(r,e,o.text),o.forward(l),s+=l}for(var c=t[a++];s<c;){if(o.done)break t;var f=Math.min(o.len,c-s);y(e,f,-1),y(i,f,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(f),s+=f}}return{changes:new n(e,r),filtered:new m(i)}}},{key:"toJSON",value:function(){for(var t=[],e=0;e<this.sections.length;e+=2){var n=this.sections[e],r=this.sections[e+1];r<0?t.push(n):0==r?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}}],[{key:"of",value:function(t,e,i){var a=[],s=[],u=0,l=null;function h(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||a.length){u<e&&y(a,e-u,-1);var r=new n(a,s);l=l?l.compose(r.map(l)):r,a=[],s=[],u=0}}return function t(c){if(Array.isArray(c)){var f,d=o(c);try{for(d.s();!(f=d.n()).done;){t(f.value)}}catch(S){d.e(S)}finally{d.f()}}else if(c instanceof n){if(c.length!=e)throw new RangeError("Mismatched change set length (got ".concat(c.length,", expected ").concat(e,")"));h(),l=l?l.compose(c.map(l)):c}else{var p=c.from,m=c.to,g=void 0===m?p:m,b=c.insert;if(p>g||p<0||g>e)throw new RangeError("Invalid change range ".concat(p," to ").concat(g," (in doc of length ").concat(e,")"));var w=b?"string"==typeof b?r.xv.of(b.split(i||v)):b:r.xv.empty,x=w.length;if(p==g&&0==x)return;p<u&&h(),p>u&&y(a,p-u,-1),y(a,g-p,x),k(s,a,w),u=g}}(t),h(!l),l}},{key:"empty",value:function(t){return new n(t?[t,-1]:[],[])}},{key:"fromJSON",value:function(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");for(var e=[],i=[],o=0;o<t.length;o++){var a=t[o];if("number"==typeof a)e.push(a,-1);else{if(!Array.isArray(a)||"number"!=typeof a[0]||a.some((function(t,e){return e&&"string"!=typeof t})))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==a.length)e.push(a[0],0);else{for(;i.length<o;)i.push(r.xv.empty);i[o]=r.xv.of(a.slice(1)),e.push(a[0],i[o].length)}}}return new n(e,i)}}]),n}(m);function y(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(0==e&&n<=0)){var i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:0==e&&0==t[i]?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}}function k(t,e,n){if(0!=n.length){var i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(r.xv.empty);t.push(n)}}}function b(t,e,n){for(var i=t.inserted,o=0,a=0,s=0;s<t.sections.length;){var u=t.sections[s++],l=t.sections[s++];if(l<0)o+=u,a+=u;else{for(var h=o,c=a,f=r.xv.empty;h+=u,c+=l,l&&i&&(f=f.append(i[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)u=t.sections[s++],l=t.sections[s++];e(o,h,a,c,f),o=h,a=c}}}function w(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],o=r?[]:null,a=new S(t),s=new S(e),u=0,l=0;;)if(-1==a.ins)u+=a.len,a.next();else if(-1==s.ins&&l<u){var h=Math.min(s.len,u-l);s.forward(h),y(i,h,-1),l+=h}else if(s.ins>=0&&(a.done||l<u||l==u&&(s.len<a.len||s.len==a.len&&!n))){for(y(i,s.ins,-1);u>l&&!a.done&&u+a.len<l+s.len;)u+=a.len,a.next();l+=s.len,s.next()}else{if(!(a.ins>=0)){if(a.done&&s.done)return o?new g(i,o):new m(i);throw new Error("Mismatched change set lengths")}for(var c=0,f=u+a.len;;)if(s.ins>=0&&l>u&&l+s.len<f)c+=s.ins,l+=s.len,s.next();else{if(!(-1==s.ins&&l<f))break;var d=Math.min(s.len,f-l);c+=d,s.forward(d),l+=d}y(i,c,a.ins),o&&k(o,i,a.text),u=f,a.next()}}function x(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=n?[]:null,o=new S(t),a=new S(e),s=!1;;){if(o.done&&a.done)return i?new g(r,i):new m(r);if(0==o.ins)y(r,o.len,0,s),o.next();else if(0!=a.len||a.done){if(o.done||a.done)throw new Error("Mismatched change set lengths");var u=Math.min(o.len2,a.len),l=r.length;if(-1==o.ins){var h=-1==a.ins?-1:a.off?0:a.ins;y(r,u,h,s),i&&h&&k(i,r,a.text)}else-1==a.ins?(y(r,o.off?0:o.len,u,s),i&&k(i,r,o.textBit(u))):(y(r,o.off?0:o.len,a.off?0:a.ins,s),i&&!a.off&&k(i,r,a.text));s=(o.ins>u||a.ins>=0&&a.len>u)&&(s||r.length>l),o.forward2(u),a.forward(u)}else y(r,0,a.ins,s),i&&k(i,r,a.text),a.next()}}var S=function(){function t(e){c(this,t),this.set=e,this.i=0,this.next()}return d(t,[{key:"next",value:function(){var t=this.set.sections;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}},{key:"done",get:function(){return-2==this.ins}},{key:"len2",get:function(){return this.ins<0?this.len:this.ins}},{key:"text",get:function(){var t=this.set.inserted,e=this.i-2>>1;return e>=t.length?r.xv.empty:t[e]}},{key:"textBit",value:function(t){var e=this.set.inserted,n=this.i-2>>1;return n>=e.length&&!t?r.xv.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}},{key:"forward",value:function(t){t==this.len?this.next():(this.len-=t,this.off+=t)}},{key:"forward2",value:function(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}]),t}(),A=function(){function t(e,n,r){c(this,t),this.from=e,this.to=n,this.flags=r}return d(t,[{key:"anchor",get:function(){return 16&this.flags?this.to:this.from}},{key:"head",get:function(){return 16&this.flags?this.from:this.to}},{key:"empty",get:function(){return this.from==this.to}},{key:"assoc",get:function(){return 4&this.flags?-1:8&this.flags?1:0}},{key:"bidiLevel",get:function(){var t=3&this.flags;return 3==t?null:t}},{key:"goalColumn",get:function(){var t=this.flags>>5;return 33554431==t?void 0:t}},{key:"map",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=e.mapPos(this.from,n),i=e.mapPos(this.to,n);return r==this.from&&i==this.to?this:new t(r,i,this.flags)}},{key:"extend",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(t<=this.anchor&&e>=this.anchor)return C.range(t,e);var n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return C.range(this.anchor,n)}},{key:"eq",value:function(t){return this.anchor==t.anchor&&this.head==t.head}},{key:"toJSON",value:function(){return{anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return C.range(t.anchor,t.head)}}]),t}(),C=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c(this,t),this.ranges=e,this.mainIndex=n}return d(t,[{key:"map",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.empty?this:t.create(this.ranges.map((function(t){return t.map(e,n)})),this.mainIndex)}},{key:"eq",value:function(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}},{key:"main",get:function(){return this.ranges[this.mainIndex]}},{key:"asSingle",value:function(){return 1==this.ranges.length?this:new t([this.main])}},{key:"addRange",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.create([e].concat(this.ranges),n?0:this.mainIndex+1)}},{key:"replaceRange",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainIndex,r=this.ranges.slice();return r[n]=e,t.create(r,this.mainIndex)}},{key:"toJSON",value:function(){return{ranges:this.ranges.map((function(t){return t.toJSON()})),main:this.mainIndex}}}],[{key:"fromJSON",value:function(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new t(e.ranges.map((function(t){return A.fromJSON(t)})),e.main)}},{key:"single",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new t([t.range(e,n)],0)}},{key:"create",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==e.length)throw new RangeError("A selection needs at least one range");for(var r=0,i=0;i<e.length;i++){var o=e[i];if(o.empty?o.from<=r:o.from<r)return M(e.slice(),n);r=o.to}return new t(e,n)}},{key:"cursor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new A(t,t,(0==e?0:e<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}},{key:"range",value:function(t,e,n){var r=(null!=n?n:33554431)<<5;return e<t?new A(e,t,16|r):new A(t,e,r)}}]),t}();function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t[e];t.sort((function(t,e){return t.from-e.from})),e=t.indexOf(n);for(var r=1;r<t.length;r++){var i=t[r],o=t[r-1];if(i.empty?i.from<=o.to:i.from<o.to){var a=o.from,s=Math.max(i.to,o.to);r<=e&&e--,t.splice(--r,2,i.anchor>i.head?C.range(s,a):C.range(a,s))}}return new C(t,e)}function O(t,e){var n,r=o(t.ranges);try{for(r.s();!(n=r.n()).done;){if(n.value.to>e)throw new RangeError("Selection points outside of document")}}catch(i){r.e(i)}finally{r.f()}}var T=0,D=function(){function t(e,n,r,i,o){c(this,t),this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.extensions=o,this.id=T++,this.default=e([])}return d(t,[{key:"of",value:function(t){return new R([],this,0,t)}},{key:"compute",value:function(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new R(t,this,1,e)}},{key:"computeN",value:function(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new R(t,this,2,e)}},{key:"from",value:function(t,e){return e||(e=function(t){return t}),this.compute([t],(function(n){return e(n.field(t))}))}}],[{key:"define",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e.combine||function(t){return t},e.compareInput||function(t,e){return t===e},e.compare||(e.combine?function(t,e){return t===e}:E),!!e.static,e.enables)}}]),t}();function E(t,e){return t==e||t.length==e.length&&t.every((function(t,n){return t===e[n]}))}var R=function(){function t(e,n,r,i){c(this,t),this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=T++}return d(t,[{key:"dynamicSlot",value:function(t){var e,n,r=this.value,i=this.facet.compareInput,a=t[this.id]>>1,s=2==this.type,u=!1,l=!1,h=[],c=o(this.dependencies);try{for(c.s();!(n=c.n()).done;){var f=n.value;"doc"==f?u=!0:"selection"==f?l=!0:0==(1&(null!==(e=t[f.id])&&void 0!==e?e:1))&&h.push(t[f.id])}}catch(d){c.e(d)}finally{c.f()}return function(t,e){var n=t.values[a];if(n===$)return t.values[a]=r(t),1;if(e&&(u&&e.docChanged||l&&(e.docChanged||e.selection)||h.some((function(e){return(1&U(t,e))>0})))){var o=r(t);if(s?!function(t,e,n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}(o,n,i):!i(o,n))return t.values[a]=o,1}return 0}}}]),t}();var P=D.define({static:!0}),B=function(){function t(e,n,r,i,o){c(this,t),this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}return d(t,[{key:"create",value:function(t){var e=this,n=t.facet(P).find((function(t){return t.field==e}));return((null==n?void 0:n.create)||this.createF)(t)}},{key:"slot",value:function(t){var e=this,n=t[this.id]>>1;return function(t,r){var i=t.values[n];if(i===$)return t.values[n]=e.create(t),1;if(r){var o=e.updateF(i,r);if(!e.compareF(i,o))return t.values[n]=o,1}return 0}}},{key:"init",value:function(t){return[this,P.of({field:this,create:t})]}},{key:"extension",get:function(){return this}}],[{key:"define",value:function(e){var n=new t(T++,e.create,e.update,e.compare||function(t,e){return t===e},e);return e.provide&&(n.provides=e.provide(n)),n}}]),t}(),L=4,I=3,N=2,j=1,V=0;function H(t){return function(e){return new _(e,t)}}var z={lowest:H(L),low:H(I),default:H(N),high:H(j),highest:H(V),fallback:H(L),extend:H(j),override:H(V)},_=function t(e,n){c(this,t),this.inner=e,this.prec=n},W=function(){function t(){c(this,t)}return d(t,[{key:"of",value:function(t){return new q(this,t)}},{key:"reconfigure",value:function(e){return t.reconfigure.of({compartment:this,extension:e})}},{key:"get",value:function(t){return t.config.compartments.get(this)}}]),t}(),q=function t(e,n){c(this,t),this.compartment=e,this.inner=n},F=function(){function t(e,n,r,i,o){for(c(this,t),this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}return d(t,[{key:"staticFacet",value:function(t){var e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}}],[{key:"resolve",value:function(e,n,r){var i,a=[],s=Object.create(null),u=new Map,l=o(function(t,e,n){var r=[[],[],[],[],[]],i=new Map;function a(t,s){var u=i.get(t);if(null!=u){if(u>=s)return;var l=r[u].indexOf(t);l>-1&&r[u].splice(l,1),t instanceof q&&n.delete(t.compartment)}if(i.set(t,s),Array.isArray(t)){var h,c=o(t);try{for(c.s();!(h=c.n()).done;){a(h.value,s)}}catch(v){c.e(v)}finally{c.f()}}else if(t instanceof q){if(n.has(t.compartment))throw new RangeError("Duplicate use of compartment in extensions");var f=e.get(t.compartment)||t.inner;n.set(t.compartment,f),a(f,s)}else if(t instanceof _)a(t.inner,t.prec);else if(t instanceof B)r[s].push(t),t.provides&&a(t.provides,s);else if(t instanceof R)r[s].push(t),t.facet.extensions&&a(t.facet.extensions,s);else{var d=t.extension;if(!d)throw new Error("Unrecognized extension value in extension set (".concat(t,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));a(d,s)}}return a(t,N),r.reduce((function(t,e){return t.concat(e)}))}(e,n,u));try{for(l.s();!(i=l.n()).done;){var h=i.value;h instanceof B?a.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h)}}catch(C){l.e(C)}finally{l.f()}for(var c=Object.create(null),f=[],d=[],v=[],p=function(){var t=g[m];c[t.id]=d.length<<1,d.push((function(e){return t.slot(e)})),v.push([])},m=0,g=a;m<g.length;m++)p();var y=function(t){var e=s[t],n=e[0].facet;if(e.every((function(t){return 0==t.type}))){c[n.id]=f.length<<1|1;var i=n.combine(e.map((function(t){return t.value}))),a=r?r.config.address[n.id]:null;if(null!=a){var u=K(r,a);n.compare(i,u)&&(i=u)}f.push(i)}else{var l,h=o(e);try{var p=function(){var t=l.value;0==t.type?(c[t.id]=f.length<<1|1,f.push(t.value)):(c[t.id]=d.length<<1,d.push((function(e){return t.dynamicSlot(e)})),v.push(t.dependencies.filter((function(t){return"string"!=typeof t})).map((function(t){return t.id}))))};for(h.s();!(l=h.n()).done;)p()}catch(C){h.e(C)}finally{h.f()}c[n.id]=d.length<<1,d.push((function(t){return function(t,e,n){var r=n.map((function(e){return t[e.id]})),i=n.map((function(t){return t.type})),a=r.filter((function(t){return!(1&t)})),s=t[e.id]>>1;return function(t,n){var u,l=t.values[s],h=l===$||!n,c=o(a);try{for(c.s();!(u=c.n()).done;)1&U(t,u.value)&&(h=!0)}catch(C){c.e(C)}finally{c.f()}if(!h)return 0;for(var f=[],d=0;d<r.length;d++){var v=K(t,r[d]);if(2==i[d]){var p,m=o(v);try{for(m.s();!(p=m.n()).done;){var g=p.value;f.push(g)}}catch(C){m.e(C)}finally{m.f()}}else f.push(v)}var y=e.combine(f);return l!==$&&e.compare(y,l)?0:(t.values[s]=y,1)}}(t,n,e)})),v.push(e.filter((function(t){return 0!=t.type})).map((function(t){return t.id})))}};for(var k in s)y(k);var b=d.map((function(t){return $}));if(r){var w=function t(e,n){if(n>7)return!1;var i=c[e];if(!(1&i))return v[i>>1].every((function(e){return t(e,n+1)}));var o=r.config.address[e];return null!=o&&K(r,o)==f[i>>1]};for(var x in c){var S=c[x],A=r.config.address[x];null!=A&&0==(1&S)&&w(+x,0)&&(b[S>>1]=K(r,A))}}return{configuration:new t(e,u,d.map((function(t){return t(c)})),c,f),values:b}}}]),t}();var $={};function U(t,e){if(1&e)return 2;var n=e>>1,r=t.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;t.status[n]=4;var i=t.config.dynamicSlots[n](t,t.applying);return t.status[n]=2|i}function K(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}var G=D.define(),J=D.define({combine:function(t){return t.some((function(t){return t}))},static:!0}),X=D.define({combine:function(t){return t.length?t[0]:void 0},static:!0}),Q=D.define(),Y=D.define(),Z=D.define(),tt=D.define({combine:function(t){return!!t.length&&t[0]}}),et=function(){function t(e,n){c(this,t),this.type=e,this.value=n}return d(t,null,[{key:"define",value:function(){return new nt}}]),t}(),nt=function(){function t(){c(this,t)}return d(t,[{key:"of",value:function(t){return new et(this,t)}}]),t}(),rt=function(){function t(e){c(this,t),this.map=e}return d(t,[{key:"of",value:function(t){return new it(this,t)}}]),t}(),it=function(){function t(e,n){c(this,t),this.type=e,this.value=n}return d(t,[{key:"map",value:function(e){var n=this.type.map(this.value,e);return void 0===n?void 0:n==this.value?this:new t(this.type,n)}},{key:"is",value:function(t){return this.type==t}}],[{key:"define",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new rt(t.map||function(t){return t})}},{key:"mapEffects",value:function(t,e){if(!t.length)return t;var n,r=[],i=o(t);try{for(i.s();!(n=i.n()).done;){var a=n.value.map(e);a&&r.push(a)}}catch(s){i.e(s)}finally{i.f()}return r}}]),t}();it.reconfigure=it.define(),it.appendConfig=it.define();var ot=function(){function t(e,n,r,i,o,a){c(this,t),this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,r&&O(r,n.newLength),o.some((function(e){return e.type==t.time}))||(this.annotations=o.concat(t.time.of(Date.now())))}return d(t,[{key:"newDoc",get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}},{key:"newSelection",get:function(){return this.selection||this.startState.selection.map(this.changes)}},{key:"state",get:function(){return this._state||this.startState.applyTransaction(this),this._state}},{key:"annotation",value:function(t){var e,n=o(this.annotations);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.type==t)return r.value}}catch(i){n.e(i)}finally{n.f()}}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"reconfigured",get:function(){return this.startState.config!=this.state.config}},{key:"isUserEvent",value:function(e){var n=this.annotation(t.userEvent);return!(!n||!(n==e||n.length>e.length&&n.slice(0,e.length)==e&&"."==n[e.length]))}}]),t}();function at(t,e){for(var n=[],r=0,i=0;;){var o=void 0,a=void 0;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],a=t[r++];else{if(!(i<e.length))return n;o=e[i++],a=e[i++]}!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function st(t,e,n){var r,i,o,a;return n?(i=e.changes,o=g.empty(e.changes.length),a=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(o):null===(r=t.selection)||void 0===r?void 0:r.map(i),effects:it.mapEffects(t.effects,i).concat(it.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function ut(t,e,n){var r=e.selection,i=ct(e.annotations);return e.userEvent&&(i=i.concat(ot.userEvent.of(e.userEvent))),{changes:e.changes instanceof g?e.changes:g.of(e.changes||[],n,t.facet(X)),selection:r&&(r instanceof C?r:C.single(r.anchor,r.head)),effects:ct(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function lt(t,e,n){var r=ut(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(var i=1;i<e.length;i++){!1===e[i].filter&&(n=!1);var a=!!e[i].sequential;r=st(r,ut(t,e[i],a?r.changes.newLength:t.doc.length),a)}var s=new ot(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(t){for(var e=t.startState,n=e.facet(Z),r=t,i=n.length-1;i>=0;i--){var o=n[i](t);o&&Object.keys(o).length&&(r=st(t,ut(e,o,t.changes.newLength),!0))}return r==t?t:new ot(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(t){var e,n=t.startState,r=!0,i=o(n.facet(Q));try{for(i.s();!(e=i.n()).done;){var a=(0,e.value)(t);if(!1===a){r=!1;break}Array.isArray(a)&&(r=!0===r?a:at(r,a))}}catch(d){i.e(d)}finally{i.f()}if(!0!==r){var s,u;if(!1===r)u=t.changes.invertedDesc,s=g.empty(n.doc.length);else{var l=t.changes.filter(r);s=l.changes,u=l.filtered.invertedDesc}t=new ot(n,s,t.selection&&t.selection.map(u),it.mapEffects(t.effects,u),t.annotations,t.scrollIntoView)}for(var h=n.facet(Y),c=h.length-1;c>=0;c--){var f=h[c](t);t=f instanceof ot?f:Array.isArray(f)&&1==f.length&&f[0]instanceof ot?f[0]:lt(n,ct(f),!1)}return t}(s):s)}ot.time=et.define(),ot.userEvent=et.define(),ot.addToHistory=et.define(),ot.remote=et.define();var ht=[];function ct(t){return null==t?ht:Array.isArray(t)?t:[t]}var ft,dt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(dt||(dt={})),vt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{ft=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(yt){}function pt(t){return function(e){if(!/\S/.test(e))return dt.Space;if(function(t){if(ft)return ft.test(t);for(var e=0;e<t.length;e++){var n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||vt.test(n)))return!0}return!1}(e))return dt.Word;for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return dt.Word;return dt.Other}}var mt=function(){function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;c(this,t),this.config=e,this.doc=n,this.selection=r,this.values=i,this.applying=null,this.status=e.statusTemplate.slice(),this.applying=o,o&&(o._state=this);for(var a=0;a<this.config.dynamicSlots.length;a++)U(this,a<<1);this.applying=null}return d(t,[{key:"field",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.config.address[t.id];if(null!=n)return U(this,n),K(this,n);if(e)throw new RangeError("Field is not present in this state")}},{key:"update",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return lt(this,e,!0)}},{key:"applyTransaction",value:function(e){var n,r,i=this.config,a=i,s=a.base,u=a.compartments,l=o(e.effects);try{for(l.s();!(n=l.n()).done;){var h=n.value;h.is(W.reconfigure)?(i&&(u=new Map,i.compartments.forEach((function(t,e){return u.set(e,t)})),i=null),u.set(h.value.compartment,h.value.extension)):h.is(it.reconfigure)?(i=null,s=h.value):h.is(it.appendConfig)&&(i=null,s=ct(s).concat(h.value))}}catch(f){l.e(f)}finally{l.f()}if(i)r=e.startState.values.slice();else{var c=F.resolve(s,u,this);r=new t(i=c.configuration,this.doc,this.selection,c.values,null).values}new t(i,e.newDoc,e.newSelection,r,e)}},{key:"replaceSelection",value:function(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((function(e){return{changes:{from:e.from,to:e.to,insert:t},range:C.cursor(e.from+t.length)}}))}},{key:"changeByRange",value:function(t){for(var e=this.selection,n=t(e.ranges[0]),r=this.changes(n.changes),i=[n.range],o=ct(n.effects),a=1;a<e.ranges.length;a++){for(var s=t(e.ranges[a]),u=this.changes(s.changes),l=u.map(r),h=0;h<a;h++)i[h]=i[h].map(l);var c=r.mapDesc(u,!0);i.push(s.range.map(c)),r=r.compose(l),o=it.mapEffects(o,l).concat(it.mapEffects(ct(s.effects),c))}return{changes:r,selection:C.create(i,e.mainIndex),effects:o}}},{key:"changes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e instanceof g?e:g.of(e,this.doc.length,this.facet(t.lineSeparator))}},{key:"toText",value:function(e){return r.xv.of(e.split(this.facet(t.lineSeparator)||v))}},{key:"sliceDoc",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(t,e,this.lineBreak)}},{key:"facet",value:function(t){var e=this.config.address[t.id];return null==e?t.default:(U(this,e),K(this,e))}},{key:"toJSON",value:function(t){var e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(var n in t){var r=t[n];r instanceof B&&(e[n]=r.spec.toJSON(this.field(t[n]),this))}return e}},{key:"tabSize",get:function(){return this.facet(t.tabSize)}},{key:"lineBreak",get:function(){return this.facet(t.lineSeparator)||"\n"}},{key:"readOnly",get:function(){return this.facet(tt)}},{key:"phrase",value:function(e){var n,r=o(this.facet(t.phrases));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}}catch(a){r.e(a)}finally{r.f()}return e}},{key:"languageDataAt",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=[],a=o(this.facet(G));try{for(a.s();!(n=a.n()).done;){var s,u=n.value,l=o(u(this,e,r));try{for(l.s();!(s=l.n()).done;){var h=s.value;Object.prototype.hasOwnProperty.call(h,t)&&i.push(h[t])}}catch(c){l.e(c)}finally{l.f()}}}catch(c){a.e(c)}finally{a.f()}return i}},{key:"charCategorizer",value:function(t){return pt(this.languageDataAt("wordChars",t).join(""))}},{key:"wordAt",value:function(t){for(var e=this.doc.lineAt(t),n=e.text,i=e.from,o=e.length,a=this.charCategorizer(t),s=t-i,u=t-i;s>0;){var l=(0,r.cp)(n,s,!1);if(a(n.slice(l,s))!=dt.Word)break;s=l}for(;u<o;){var h=(0,r.cp)(n,u);if(a(n.slice(u,h))!=dt.Word)break;u=h}return s==u?null:C.range(s+i,u+i)}}],[{key:"fromJSON",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");var i=[];if(r){var o=function(t){var n=r[t],o=e[t];i.push(n.init((function(t){return n.spec.fromJSON(o,t)})))};for(var a in r)o(a)}return t.create({doc:e.doc,selection:C.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=F.resolve(e.extensions||[],new Map),i=n.configuration,o=n.values,a=e.doc instanceof r.xv?e.doc:r.xv.of((e.doc||"").split(i.staticFacet(t.lineSeparator)||v)),s=e.selection?e.selection instanceof C?e.selection:C.single(e.selection.anchor,e.selection.head):C.single(0);return O(s,a.length),i.staticFacet(J)||(s=s.asSingle()),new t(i,a,s,o)}}]),t}();function gt(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={},a=o(t);try{for(a.s();!(n=a.n()).done;)for(var s=n.value,u=0,l=Object.keys(s);u<l.length;u++){var h=l[u],c=s[h],f=i[h];if(void 0===f)i[h]=c;else if(f===c||void 0===c);else{if(!Object.hasOwnProperty.call(r,h))throw new Error("Config merge conflict for field "+h);i[h]=r[h](f,c)}}}catch(v){a.e(v)}finally{a.f()}for(var d in e)void 0===i[d]&&(i[d]=e[d]);return i}mt.allowMultipleSelections=J,mt.tabSize=D.define({combine:function(t){return t.length?t[0]:4}}),mt.lineSeparator=X,mt.readOnly=tt,mt.phrases=D.define(),mt.languageData=G,mt.changeFilter=Q,mt.transactionFilter=Y,mt.transactionExtender=Z,W.reconfigure=it.define()},67545:function(t,e,n){n.d(e,{i:function(){return A}});var r=n(97248),i=n(42484),o=n(25070);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&k(t.prototype,e),n&&k(t,n),t}function w(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=i,a=r;a<e;a++)9==t.charCodeAt(a)?o+=n-o%n:o++;return o}var x=function(){function t(e,n,r){y(this,t),this.string=e,this.tabSize=n,this.indentUnit=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}return b(t,[{key:"eol",value:function(){return this.pos>=this.string.length}},{key:"sol",value:function(){return 0==this.pos}},{key:"peek",value:function(){return this.string.charAt(this.pos)||void 0}},{key:"next",value:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}},{key:"eat",value:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t instanceof RegExp?t.test(e):t(e)))return++this.pos,e}},{key:"eatWhile",value:function(t){for(var e=this.pos;this.eat(t););return this.pos>e}},{key:"eatSpace",value:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}},{key:"skipToEnd",value:function(){this.pos=this.string.length}},{key:"skipTo",value:function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0}},{key:"backUp",value:function(t){this.pos-=t}},{key:"column",value:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=w(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}},{key:"indentation",value:function(){return w(this.string,null,this.tabSize)}},{key:"match",value:function(t,e,n){if("string"==typeof t){var r=function(t){return n?t.toLowerCase():t};return r(this.string.substr(this.pos,t.length))==r(t)?(!1!==e&&(this.pos+=t.length),!0):null}var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}},{key:"current",value:function(){return this.string.slice(this.start,this.pos)}}]),t}();function S(t){if("object"!=g(t))return t;var e={};for(var n in t){var r=t[n];e[n]=r instanceof Array?r.slice():r}return e}var A=function(t){c(n,t);var e=d(n);function n(t){var i;y(this,n);var a,s,u=(0,o.kU)(t.languageData),l={token:(s=t).token,blankLine:s.blankLine||function(){},startState:s.startState||function(){return!0},copyState:s.copyState||S,indent:s.indent||function(){return null},languageData:s.languageData||{},tokenTable:s.tokenTable||D},h=new(function(t){c(n,t);var e=d(n);function n(){return y(this,n),e.apply(this,arguments)}return b(n,[{key:"createParse",value:function(t,e,n){return new O(a,t,e,n)}}]),n}(r._b));return i=e.call(this,u,h,function(t){var e=r.Jq.define({id:E.length,name:"Document",props:[o.mi.add((function(){return t}))]});return E.push(e),e}(u),[o.tK.of((function(t,e){return i.getIndent(t,e)}))]),a=p(i),i.streamParser=l,i.stateAfter=new r.md({perNode:!0}),i.tokenTable=t.tokenTable?new H(l.tokenTable):z,i}return b(n,[{key:"getIndent",value:function(t,e){for(var n=(0,o.qz)(t.state),r=n.resolve(e);r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;var i,a,s=C(this,n,0,r.from,e);if(s?(a=s.state,i=s.pos+1):(a=this.streamParser.startState(t.unit),i=0),e-i>1e4)return null;for(;i<e;){var u=t.state.doc.lineAt(i),l=Math.min(e,u.to);if(u.length)for(var h=new x(u.text,t.state.tabSize,t.unit);h.pos<l-u.from;)T(this.streamParser.token,h,a);else this.streamParser.blankLine(a,t.unit);if(l==e)break;i=u.to+1}var c=t.state.doc.lineAt(e).text;return this.streamParser.indent(a,/^\s*(.*)/.exec(c)[1],t)}},{key:"allowsNesting",get:function(){return!1}}],[{key:"define",value:function(t){return new n(t)}}]),n}(o.SQ);function C(t,e,n,i,o){var a=n>=i&&n+e.length<=o&&e.prop(t.stateAfter);if(a)return{state:t.streamParser.copyState(a),pos:n+e.length};for(var s=e.children.length-1;s>=0;s--){var u=e.children[s],l=n+e.positions[s],h=u instanceof r.mp&&l<o&&C(t,u,l,i,o);if(h)return h}return null}function M(t,e,n,i,o){if(o&&n<=0&&i>=e.length)return e;o||e.type!=t.topNode||(o=!0);for(var a=e.children.length-1;a>=0;a--){var s=e.positions[a],u=e.children[a],l=void 0;if(s<i&&u instanceof r.mp){if(!(l=M(t,u,n-s,i-s,o)))break;return o?new r.mp(e.type,e.children.slice(0,a).concat(l),e.positions.slice(0,a+1),s+l.length):l}}return null}var O=function(){function t(e,n,i,a){y(this,t),this.lang=e,this.input=n,this.fragments=i,this.ranges=a,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=a[a.length-1].to;var s=o.Be.get(),l=a[0].from,h=function(t,e,n,i){var a,s=u(e);try{for(s.s();!(a=s.n()).done;){var l=a.value,h=l.from+(l.openStart?25:0),c=l.to-(l.openEnd?25:0),f=h<=n&&c>n&&C(t,l.tree,0-l.offset,n,c),d=void 0;if(f&&(d=M(t,l.tree,n+l.offset,f.pos+l.offset,!1)))return{state:f.state,tree:d}}}catch(v){s.e(v)}finally{s.f()}return{state:t.streamParser.startState(i?(0,o.y1)(i):4),tree:r.mp.empty}}(e,i,l,null==s?void 0:s.state),c=h.state,f=h.tree;this.state=c,this.parsedPos=this.chunkStart=l+f.length;for(var d=0;d<f.children.length;d++)this.chunks.push(f.children[d]),this.chunkPos.push(f.positions[d]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState((0,o.y1)(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from)}return b(t,[{key:"advance",value:function(){var t=o.Be.get(),e=null==this.stoppedAt?this.to:this.stoppedAt,n=Math.min(e,this.chunkStart+2048);for(t&&(n=Math.min(n,t.viewport.to));this.parsedPos<n;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=e?this.finish():t&&this.parsedPos>=t.viewport.to?(t.skipUntilInView(this.parsedPos,e),this.finish()):null}},{key:"stopAt",value:function(t){this.stoppedAt=t}},{key:"lineAfter",value:function(t){var e=this.input.chunk(t);if(this.input.lineChunks)"\n"==e&&(e="");else{var n=e.indexOf("\n");n>-1&&(e=e.slice(0,n))}return t+e.length<=this.to?e:e.slice(0,this.to-t)}},{key:"nextLine",value:function(){for(var t=this.parsedPos,e=this.lineAfter(t),n=t+e.length,r=this.rangeIndex;;){var i=this.ranges[r].to;if(i>=n)break;if(e=e.slice(0,i-(n-e.length)),++r==this.ranges.length)break;var o=this.ranges[r].from,a=this.lineAfter(o);e+=a,n=o+a.length}return{line:e,end:n}}},{key:"skipGapsTo",value:function(t,e,n){for(;;){var r=this.ranges[this.rangeIndex].to,i=t+e;if(n>0?r>i:r>=i)break;e+=this.ranges[++this.rangeIndex].from-r}return e}},{key:"emitToken",value:function(t,e,n,r,i){if(this.ranges.length>1){e+=i=this.skipGapsTo(e,i,1);var o=this.chunk.length;n+=i=this.skipGapsTo(n,i,-1),r+=this.chunk.length-o}return this.chunk.push(t,e,n,r),i}},{key:"parseLine",value:function(t){var e=this.nextLine(),n=e.line,r=e.end,i=0,a=this.lang.streamParser,s=new x(n,t?t.state.tabSize:4,t?(0,o.y1)(t.state):2);if(s.eol())a.blankLine(this.state,s.indentUnit);else for(;!s.eol();){var u=T(a.token,s,this.state);if(u&&(i=this.emitToken(this.lang.tokenTable.resolve(u),this.parsedPos+s.start,this.parsedPos+s.pos,4,i)),s.start>1e4)break}this.parsedPos=r,this.parsedPos<this.to&&this.parsedPos++}},{key:"finishChunk",value:function(){var t=r.mp.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:R,topID:0,maxBufferLength:2048,reused:this.chunkReused});t=new r.mp(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}},{key:"finish",value:function(){return new r.mp(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}]),t}();function T(t,e,n){e.start=e.pos;for(var r=0;r<10;r++){var i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}for(var D=Object.create(null),E=[r.Jq.none],R=new r.Lj(E),P=[],B=Object.create(null),L=0,I=[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]];L<I.length;L++){var N=s(I[L],2),j=N[0],V=N[1];B[j]=W(D,V)}var H=function(){function t(e){y(this,t),this.extra=e,this.table=Object.assign(Object.create(null),B)}return b(t,[{key:"resolve",value:function(t){return t?this.table[t]||(this.table[t]=W(this.extra,t)):0}}]),t}(),z=new H(D);function _(t,e){P.indexOf(t)>-1||(P.push(t),console.warn(e))}function W(t,e){var n,o=null,s=u(e.split("."));try{for(s.s();!(n=s.n()).done;){var l=n.value,h=t[l]||i.pJ[l];h?"function"==typeof h?o?o=h(o):_(l,"Modifier ".concat(l," used at start of tag")):o?_(l,"Tag ".concat(l," used as modifier")):o=h:_(l,"Unknown highlighting tag ".concat(l))}}catch(d){s.e(d)}finally{s.f()}if(!o)return 0;var c=e.replace(/ /g,"_"),f=r.Jq.define({id:E.length,name:c,props:[(0,i.Gv)(a({},c,o))]});return E.push(f),f.id}},51686:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},u(t,e,n||t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}n.d(e,{xv:function(){return R},gm:function(){return M},nZ:function(){return T},IS:function(){return D},cp:function(){return w},Gz:function(){return E},bg:function(){return O}});for(var g="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((function(t){return t?parseInt(t,36):1})),y=1;y<g.length;y++)g[y]+=g[y-1];function k(t){for(var e=1;e<g.length;e+=2)if(g[e]>t)return g[e-1]<=t;return!1}function b(t){return t>=127462&&t<=127487}function w(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(n?x:S)(t,e,r)}function x(t,e,n){if(e==t.length)return e;e&&A(t.charCodeAt(e))&&C(t.charCodeAt(e-1))&&e--;var r=M(t,e);for(e+=T(r);e<t.length;){var i=M(t,e);if(8205==r||8205==i||n&&k(i))e+=T(i),r=i;else{if(!b(i))break;for(var o=0,a=e-2;a>=0&&b(M(t,a));)o++,a-=2;if(o%2==0)break;e+=2}}return e}function S(t,e,n){for(;e>0;){var r=x(t,e-2,n);if(r<e)return r;e--}return 0}function A(t){return t>=56320&&t<57344}function C(t){return t>=55296&&t<56320}function M(t,e){var n=t.charCodeAt(e);if(!C(n)||e+1==t.length)return n;var r=t.charCodeAt(e+1);return A(r)?r-56320+(n-55296<<10)+65536:n}function O(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function T(t){return t<65536?1:2}function D(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=0,i=0;i<n;)9==t.charCodeAt(i)?(r+=e-r%e,i++):(r++,i=w(t,i));return r}function E(t,e,n,r){for(var i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=9==t.charCodeAt(i)?n-o%n:1,i=w(t,i)}return!0===r?-1:t.length}var R=function(){function t(){v(this,t)}return m(t,[{key:"lineAt",value:function(t){if(t<0||t>this.length)throw new RangeError("Invalid position ".concat(t," in document of length ").concat(this.length));return this.lineInner(t,!1,1,0)}},{key:"line",value:function(t){if(t<1||t>this.lines)throw new RangeError("Invalid line number ".concat(t," in ").concat(this.lines,"-line document"));return this.lineInner(t,!0,1,0)}},{key:"replace",value:function(t,e,n){var r=[];return this.decompose(0,t,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(e,this.length,r,1),B.from(r,this.length-(e-t)+n.length)}},{key:"append",value:function(t){return this.replace(this.length,this.length,t)}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=[];return this.decompose(t,e,n,0),B.from(n,e-t)}},{key:"eq",value:function(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;for(var e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),r=new j(this),i=new j(t),o=e,a=e;;){if(r.next(o),i.next(o),o=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(a+=r.value.length,r.done||a>=n)return!0}}},{key:"iter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new j(this,t)}},{key:"iterRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new V(this,t,e)}},{key:"iterLines",value:function(t,e){var n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);var r=this.line(t).from;n=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new H(n)}},{key:"toString",value:function(){return this.sliceString(0)}},{key:"toJSON",value:function(){var t=[];return this.flatten(t),t}}],[{key:"of",value:function(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new P(e):B.from(P.split(e,[])):t.empty}}]),t}(),P=function(t){l(n,t);var e=c(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L(t);return v(this,n),(r=e.call(this)).text=t,r.length=i,r}return m(n,[{key:"lines",get:function(){return this.text.length}},{key:"children",get:function(){return null}},{key:"lineInner",value:function(t,e,n,r){for(var i=0;;i++){var o=this.text[i],a=r+o.length;if((e?n:a)>=t)return new z(r,a,n,o);r=a+1,n++}}},{key:"decompose",value:function(t,e,r,i){var o=t<=0&&e>=this.length?this:new n(N(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&i){var a=r.pop(),s=I(o.text,a.text.slice(),0,o.length);if(s.length<=32)r.push(new n(s,a.length+o.length));else{var u=s.length>>1;r.push(new n(s.slice(0,u)),new n(s.slice(u)))}}else r.push(o)}},{key:"replace",value:function(t,e,r){if(!(r instanceof n))return u(d(n.prototype),"replace",this).call(this,t,e,r);var i=I(this.text,I(r.text,N(this.text,0,t)),e),o=this.length+r.length-(e-t);return i.length<=32?new n(i,o):B.from(n.split(i,[]),o)}},{key:"sliceString",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="",i=0,o=0;i<=e&&o<this.text.length;o++){var a=this.text[o],s=i+a.length;i>t&&o&&(r+=n),t<s&&e>i&&(r+=a.slice(Math.max(0,t-i),e-i)),i=s+1}return r}},{key:"flatten",value:function(t){var e,n=o(this.text);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"scanIdentical",value:function(){return 0}}],[{key:"split",value:function(t,e){var r,i=[],a=-1,s=o(t);try{for(s.s();!(r=s.n()).done;){var u=r.value;i.push(u),a+=u.length+1,32==i.length&&(e.push(new n(i,a)),i=[],a=-1)}}catch(l){s.e(l)}finally{s.f()}return a>-1&&e.push(new n(i,a)),e}}]),n}(R),B=function(t){l(n,t);var e=c(n);function n(t,r){var i;v(this,n),(i=e.call(this)).children=t,i.length=r,i.lines=0;var a,s=o(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;i.lines+=u.lines}}catch(l){s.e(l)}finally{s.f()}return i}return m(n,[{key:"lineInner",value:function(t,e,n,r){for(var i=0;;i++){var o=this.children[i],a=r+o.length,s=n+o.lines-1;if((e?s:a)>=t)return o.lineInner(t,e,n,r);r=a+1,n=s+1}}},{key:"decompose",value:function(t,e,n,r){for(var i=0,o=0;o<=e&&i<this.children.length;i++){var a=this.children[i],s=o+a.length;if(t<=s&&e>=o){var u=r&((o<=t?1:0)|(s>=e?2:0));o>=t&&s<=e&&!u?n.push(a):a.decompose(t-o,e-o,n,u)}o=s+1}}},{key:"replace",value:function(t,e,r){if(r.lines<this.lines)for(var i=0,o=0;i<this.children.length;i++){var a=this.children[i],s=o+a.length;if(t>=o&&e<=s){var l=a.replace(t-o,e-o,r),h=this.lines-a.lines+l.lines;if(l.lines<h>>4&&l.lines>h>>6){var c=this.children.slice();return c[i]=l,new n(c,this.length-(e-t)+r.length)}return u(d(n.prototype),"replace",this).call(this,o,s,l)}o=s+1}return u(d(n.prototype),"replace",this).call(this,t,e,r)}},{key:"sliceString",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="",i=0,o=0;i<this.children.length&&o<=e;i++){var a=this.children[i],s=o+a.length;o>t&&i&&(r+=n),t<s&&e>o&&(r+=a.sliceString(t-o,e-o,n)),o=s+1}return r}},{key:"flatten",value:function(t){var e,n=o(this.children);try{for(n.s();!(e=n.n()).done;){e.value.flatten(t)}}catch(r){n.e(r)}finally{n.f()}}},{key:"scanIdentical",value:function(t,e){if(!(t instanceof n))return 0;for(var r=0,o=i(e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1],4),a=o[0],s=o[1],u=o[2],l=o[3];;a+=e,s+=e){if(a==u||s==l)return r;var h=this.children[a],c=t.children[s];if(h!=c)return r+h.scanIdentical(c,e);r+=h.length+1}}}],[{key:"from",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.reduce((function(t,e){return t+e.length+1}),-1),i=0,a=o(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;i+=s.lines}}catch(A){a.e(A)}finally{a.f()}if(i<32){var u,l=[],h=o(t);try{for(h.s();!(u=h.n()).done;){var c=u.value;c.flatten(l)}}catch(A){h.e(A)}finally{h.f()}return new P(l,r)}var f=Math.max(32,i>>5),d=f<<1,v=f>>1,p=[],m=0,g=-1,y=[];function k(t){var e;if(t.lines>d&&t instanceof n){var r,i=o(t.children);try{for(i.s();!(r=i.n()).done;){k(r.value)}}catch(A){i.e(A)}finally{i.f()}}else t.lines>v&&(m>v||!m)?(b(),p.push(t)):t instanceof P&&m&&(e=y[y.length-1])instanceof P&&t.lines+e.lines<=32?(m+=t.lines,g+=t.length+1,y[y.length-1]=new P(e.text.concat(t.text),e.length+1+t.length)):(m+t.lines>f&&b(),m+=t.lines,g+=t.length+1,y.push(t))}function b(){0!=m&&(p.push(1==y.length?y[0]:n.from(y,g)),g=-1,m=y.length=0)}var w,x=o(t);try{for(x.s();!(w=x.n()).done;){var S=w.value;k(S)}}catch(A){x.e(A)}finally{x.f()}return b(),1==p.length?p[0]:new n(p,r)}}]),n}(R);function L(t){var e,n=-1,r=o(t);try{for(r.s();!(e=r.n()).done;){n+=e.value.length+1}}catch(i){r.e(i)}finally{r.f()}return n}function I(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9,i=0,o=0,a=!0;o<t.length&&i<=r;o++){var s=t[o],u=i+s.length;u>=n&&(u>r&&(s=s.slice(0,r-i)),i<n&&(s=s.slice(n-i)),a?(e[e.length-1]+=s,a=!1):e.push(s)),i=u+1}return e}function N(t,e,n){return I(t,[""],e,n)}R.empty=new P([""],0);var j=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v(this,t),this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof P?e.text.length:e.children.length)<<1]}return m(t,[{key:"nextInner",value:function(t,e){for(this.done=this.lineBreak=!1;;){var n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,a=r instanceof P?r.text.length:r.children.length;if(o==(e>0?a:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(r instanceof P){var s=r.text[o+(e<0?-1:0)];if(this.offsets[n]+=e,s.length>Math.max(0,t))return this.value=0==t?s:e>0?s.slice(t):s.slice(0,s.length-t),this;t-=s.length}else{var u=r.children[o+(e<0?-1:0)];t>u.length?(t-=u.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(u),this.offsets.push(e>0?1:(u instanceof P?u.text.length:u.children.length)<<1))}}}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}]),t}(),V=function(){function t(e,n,r){v(this,t),this.value="",this.done=!1,this.cursor=new j(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}return m(t,[{key:"nextInner",value:function(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);var n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;var r=this.cursor.next(t).value;return this.pos+=(r.length+t)*e,this.value=r.length<=n?r:e<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}},{key:"lineBreak",get:function(){return this.cursor.lineBreak&&""!=this.value}}]),t}(),H=function(){function t(e){v(this,t),this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}return m(t,[{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.inner.next(t),n=e.done,r=e.lineBreak,i=e.value;return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}},{key:"lineBreak",get:function(){return!1}}]),t}();"undefined"!=typeof Symbol&&(R.prototype[Symbol.iterator]=function(){return this.iter()},j.prototype[Symbol.iterator]=V.prototype[Symbol.iterator]=H.prototype[Symbol.iterator]=function(){return this});var z=function(){function t(e,n,r,i){v(this,t),this.from=e,this.to=n,this.number=r,this.text=i}return m(t,[{key:"length",get:function(){return this.to-this.from}}]),t}()},91643:function(t,e,n){n.d(e,{kH:function(){return Rt},p:function(){return Pt},Nm:function(){return pe},tk:function(){return vr},BF:function(){return re},lg:function(){return ae},l9:function(){return Et},Uw:function(){return Nr},ZO:function(){return $r},$f:function(){return Or},OO:function(){return te},$1:function(){return Er}});for(var r=n(74075),i=n(51686),o=n(28450),a=n(67037),s={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},u={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},l="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),h="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),c="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),d="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),v=l&&(f||+l[1]<57)||c&&f,p=0;p<10;p++)s[48+p]=s[96+p]=String(p);for(p=1;p<=24;p++)s[p+111]="F"+p;for(p=65;p<=90;p++)s[p]=String.fromCharCode(p+32),u[p]=String.fromCharCode(p);for(var m in s)u.hasOwnProperty(m)||(u[m]=s[m]);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(t,e,n){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},y(t,e,n||t)}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},b(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function C(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=O(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function O(t,e){if(t){if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(t,e):void 0}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t}function P(t){return(11==t.nodeType?t.getSelection?t:t.ownerDocument:t).getSelection()}function B(t,e){return!!e&&t.contains(1!=e.nodeType?e.parentNode:e)}function L(t,e){if(!e.anchorNode)return!1;try{return B(t,e.anchorNode)}catch(n){return!1}}function I(t){return 3==t.nodeType?K(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function N(t,e,n,r){return!!n&&(V(t,e,n,r,-1)||V(t,e,n,r,1))}function j(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function V(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:H(t))){if("DIV"==t.nodeName)return!1;var o=t.parentNode;if(!o||1!=o.nodeType)return!1;e=j(t)+(i<0?0:1),t=o}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(i<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=i<0?H(t):0}}}function H(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}var z={left:0,right:0,top:0,bottom:0};function _(t,e){var n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function W(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}var q,F=function(){function t(){D(this,t),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return R(t,[{key:"eq",value:function(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}},{key:"setRange",value:function(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}},{key:"set",value:function(t,e,n,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=r}}]),t}(),$=null;function U(t){if(t.setActive)return t.setActive();if($)return t.focus($);for(var e=[],n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==$?{get preventScroll(){return $={preventScroll:!0},!0}}:void 0),!$){$=!1;for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=e[r++];i.scrollTop!=o&&(i.scrollTop=o),i.scrollLeft!=a&&(i.scrollLeft=a)}}}function K(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=q||(q=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function G(t,e,n){var r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);var o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function J(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function X(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}var Q=function(){function t(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];D(this,t),this.node=e,this.offset=n,this.precise=r}return R(t,null,[{key:"before",value:function(e,n){return new t(e.parentNode,j(e),n)}},{key:"after",value:function(e,n){return new t(e.parentNode,j(e)+1,n)}}]),t}(),Y=[],Z=function(){function t(){D(this,t),this.parent=null,this.dom=null,this.dirty=2}return R(t,[{key:"editorView",get:function(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"posBefore",value:function(t){var e,n=this.posAtStart,r=M(this.children);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i==t)return n;n+=i.length+i.breakAfter}}catch(o){r.e(o)}finally{r.f()}throw new RangeError("Invalid child in posBefore")}},{key:"posAfter",value:function(t){return this.posBefore(t)+t.length}},{key:"coordsAt",value:function(t,e){return null}},{key:"sync",value:function(e){if(2&this.dirty){var n,r=this.dom,i=r.firstChild,o=M(this.children);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.dirty){if(!a.dom&&i){var s=t.get(i);s&&(s.parent||s.constructor!=a.constructor)||a.reuseDOM(i)}a.sync(e),a.dirty=0}if(e&&!e.written&&e.node==r&&i!=a.dom&&(e.written=!0),a.dom.parentNode==r){for(;i&&i!=a.dom;)i=tt(i);i=a.dom.nextSibling}else r.insertBefore(a.dom,i)}}catch(c){o.e(c)}finally{o.f()}for(i&&e&&e.node==r&&(e.written=!0);i;)i=tt(i)}else if(1&this.dirty){var u,l=M(this.children);try{for(l.s();!(u=l.n()).done;){var h=u.value;h.dirty&&(h.sync(e),h.dirty=0)}}catch(c){l.e(c)}finally{l.f()}}}},{key:"reuseDOM",value:function(t){}},{key:"localPosFromDOM",value:function(e,n){var r;if(e==this.dom)r=this.dom.childNodes[n];else{for(var i=0==H(e)?0:0==n?-1:1;;){var o=e.parentNode;if(o==this.dom)break;0==i&&o.firstChild!=o.lastChild&&(i=e==o.firstChild?-1:1),e=o}r=i<0?e:e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!t.get(r);)r=r.nextSibling;if(!r)return this.length;for(var a=0,s=0;;a++){var u=this.children[a];if(u.dom==r)return s;s+=u.length+u.breakAfter}}},{key:"domBoundsAround",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=-1,i=-1,o=-1,a=-1,s=0,u=n,l=n;s<this.children.length;s++){var h=this.children[s],c=u+h.length;if(u<t&&c>e)return h.domBoundsAround(t,e,u);if(c>=t&&-1==r&&(r=s,i=u),u>e&&h.dom.parentNode==this.dom){o=s,a=l;break}l=c,u=c+h.breakAfter}return{from:i,to:a<0?n+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}},{key:"markDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dirty|=2,this.markParentsDirty(t)}},{key:"markParentsDirty",value:function(t){for(var e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),1&e.dirty)return;e.dirty|=1,t=!1}}},{key:"setParent",value:function(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}},{key:"setDOM",value:function(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}},{key:"rootView",get:function(){for(var t=this;;){var e=t.parent;if(!e)return t;t=e}}},{key:"replaceChildren",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;this.markDirty();for(var i=t;i<e;i++){var o=this.children[i];o.parent==this&&o.destroy()}(n=this.children).splice.apply(n,[t,e-t].concat(C(r)));for(var a=0;a<r.length;a++)r[a].setParent(this)}},{key:"ignoreMutation",value:function(t){return!1}},{key:"ignoreEvent",value:function(t){return!1}},{key:"childCursor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new et(this.children,t,this.children.length)}},{key:"childPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(t,e)}},{key:"toString",value:function(){var t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"isEditable",get:function(){return!0}},{key:"merge",value:function(t,e,n,r,i,o){return!1}},{key:"become",value:function(t){return!1}},{key:"getSide",value:function(){return 0}},{key:"destroy",value:function(){this.parent=null}}],[{key:"get",value:function(t){return t.cmView}}]),t}();function tt(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}Z.prototype.breakAfter=0;var et=function(){function t(e,n,r){D(this,t),this.children=e,this.pos=n,this.i=r,this.off=0}return R(t,[{key:"findPos",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;var n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}]),t}();function nt(t,e,n,r,i,o,a,s,u){var l=t.children,h=l.length?l[e]:null,c=o.length?o[o.length-1]:null,f=c?c.breakAfter:a;if(!(e==r&&h&&!a&&!f&&o.length<2&&h.merge(n,i,o.length?c:null,0==n,s,u))){if(r<l.length){var d=l[r];d&&i<d.length?(e==r&&(d=d.split(i),i=0),!f&&c&&d.merge(0,i,c,!0,0,u)?o[o.length-1]=d:(i&&d.merge(0,i,null,!1,0,u),o.push(d))):(null==d?void 0:d.breakAfter)&&(c?c.breakAfter=1:a=1),r++}for(h&&(h.breakAfter=a,n>0&&(!a&&o.length&&h.merge(n,h.length,o[0],!1,s,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,s,0),e++));e<r&&o.length;)if(l[r-1].become(o[o.length-1]))r--,o.pop(),u=o.length?0:s;else{if(!l[e].become(o[0]))break;e++,o.shift(),s=o.length?0:u}!o.length&&e&&r<l.length&&!l[e-1].breakAfter&&l[r].merge(0,0,l[e-1],!1,s,u)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function rt(t,e,n,r,i,o){var a,s=t.childCursor(),u=s.findPos(n,1),l=u.i,h=u.off,c=s.findPos(e,-1),f=c.i,d=c.off,v=e-n,p=M(r);try{for(p.s();!(a=p.n()).done;){v+=a.value.length}}catch(m){p.e(m)}finally{p.f()}t.length+=v,nt(t,f,d,l,h,r,0,i,o)}var it=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||O(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}("undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],2),ot=it[0],at=it[1],st=/Edge\/(\d+)/.exec(ot.userAgent),ut=/MSIE \d/.test(ot.userAgent),lt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ot.userAgent),ht=!!(ut||lt||st),ct=!ht&&/gecko\/(\d+)/i.test(ot.userAgent),ft=!ht&&/Chrome\/(\d+)/.exec(ot.userAgent),dt="webkitFontSmoothing"in at.documentElement.style,vt=!ht&&/Apple Computer/.test(ot.vendor),pt=vt&&(/Mobile\/\w+/.test(ot.userAgent)||ot.maxTouchPoints>2),mt={mac:pt||/Mac/.test(ot.platform),windows:/Win/.test(ot.platform),linux:/Linux|X11/.test(ot.platform),ie:ht,ie_version:ut?at.documentMode||6:lt?+lt[1]:st?+st[1]:0,gecko:ct,gecko_version:ct?+(/Firefox\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,chrome:!!ft,chrome_version:ft?+ft[1]:0,ios:pt,android:/Android\b/.test(ot.userAgent),webkit:dt,safari:vt,webkit_version:dt?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=at.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},gt=function(t){k(n,t);var e=w(n);function n(t){var r;return D(this,n),(r=e.call(this)).text=t,r}return R(n,[{key:"length",get:function(){return this.text.length}},{key:"createDOM",value:function(t){this.setDOM(t||document.createTextNode(this.text))}},{key:"sync",value:function(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}},{key:"reuseDOM",value:function(t){3==t.nodeType&&this.createDOM(t)}},{key:"merge",value:function(t,e,r){return(!r||r instanceof n&&!(this.length-(e-t)+r.length>256))&&(this.text=this.text.slice(0,t)+(r?r.text:"")+this.text.slice(e),this.markDirty(),!0)}},{key:"split",value:function(t){var e=new n(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e}},{key:"localPosFromDOM",value:function(t,e){return t==this.dom?e:e?this.text.length:0}},{key:"domAtPos",value:function(t){return new Q(this.dom,t)}},{key:"domBoundsAround",value:function(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(t,e){return kt(this.dom,t,e)}}]),n}(Z),yt=function(t){k(n,t);var e=w(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;D(this,n),(r=e.call(this)).mark=t,r.children=i,r.length=o;var a,s=M(i);try{for(s.s();!(a=s.n()).done;){var u=a.value;u.setParent(S(r))}}catch(l){s.e(l)}finally{s.f()}return r}return R(n,[{key:"setAttrs",value:function(t){if(X(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(var e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}},{key:"reuseDOM",value:function(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}},{key:"sync",value:function(t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),y(A(n.prototype),"sync",this).call(this,t)}},{key:"merge",value:function(t,e,r,i,o,a){return(!r||!(!(r instanceof n&&r.mark.eq(this.mark))||t&&o<=0||e<this.length&&a<=0))&&(rt(this,t,e,r?r.children:[],o-1,a-1),this.markDirty(),!0)}},{key:"split",value:function(t){var e,r=[],i=0,o=-1,a=0,s=M(this.children);try{for(s.s();!(e=s.n()).done;){var u=e.value,l=i+u.length;l>t&&r.push(i<t?u.split(t-i):u),o<0&&i>=t&&(o=a),i=l,a++}}catch(c){s.e(c)}finally{s.f()}var h=this.length-t;return this.length=t,o>-1&&(this.children.length=o,this.markDirty()),new n(this.mark,r,h)}},{key:"domAtPos",value:function(t){return At(this.dom,this.children,t)}},{key:"coordsAt",value:function(t,e){return Mt(this,t,e)}}]),n}(Z);function kt(t,e,n){var r=t.nodeValue.length;e>r&&(e=r);var i=e,o=e,a=0;0==e&&n<0||e==r&&n>=0?mt.chrome||mt.gecko||(e?(i--,a=1):(o++,a=-1)):n<0?i--:o++;var s=K(t,i,o).getClientRects();if(!s.length)return z;var u=s[(a?a<0:n>=0)?0:s.length-1];return mt.safari&&!a&&0==u.width&&(u=Array.prototype.find.call(s,(function(t){return t.width}))||u),a?_(u,a<0):u||null}var bt=function(t){k(n,t);var e=w(n);function n(t,r,i){var o;return D(this,n),(o=e.call(this)).widget=t,o.length=r,o.side=i,o}return R(n,[{key:"split",value:function(t){var e=n.create(this.widget,this.length-t,this.side);return this.length-=t,e}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(t,e,r,i,o,a){return!(r&&(!(r instanceof n&&this.widget.compare(r.widget))||t>0&&o<=0||e<this.length&&a<=0))&&(this.length=t+(r?r.length:0)+(this.length-e),!0)}},{key:"become",value:function(t){return t.length==this.length&&t instanceof n&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.eq(t.widget)||this.markDirty(!0),this.widget=t.widget,!0)}},{key:"ignoreMutation",value:function(){return!0}},{key:"ignoreEvent",value:function(t){return this.widget.ignoreEvent(t)}},{key:"overrideDOMText",get:function(){if(0==this.length)return i.xv.empty;for(var t=this;t.parent;)t=t.parent;var e=t.editorView,n=e&&e.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):i.xv.empty}},{key:"domAtPos",value:function(t){return 0==t?Q.before(this.dom):Q.after(this.dom,t==this.length)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(t,e){var n=this.dom.getClientRects(),r=null;if(!n.length)return z;for(var i=t>0?n.length-1:0;r=n[i],!(t>0?0==i:i==n.length-1||r.top<r.bottom);i+=t>0?-1:1);return 0==t&&e>0||t==this.length&&e<=0?r:_(r,0==t)}},{key:"isEditable",get:function(){return!1}},{key:"destroy",value:function(){y(A(n.prototype),"destroy",this).call(this),this.dom&&this.widget.destroy(this.dom)}}],[{key:"create",value:function(t,e,r){return new(t.customView||n)(t,e,r)}}]),n}(Z),wt=function(t){k(n,t);var e=w(n);function n(){return D(this,n),e.apply(this,arguments)}return R(n,[{key:"domAtPos",value:function(t){return new Q(this.widget.text,t)}},{key:"sync",value:function(){this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(t,e){return e?3==t.nodeType?Math.min(e,this.length):this.length:0}},{key:"ignoreMutation",value:function(){return!1}},{key:"overrideDOMText",get:function(){return null}},{key:"coordsAt",value:function(t,e){return kt(this.widget.text,t,e)}},{key:"isEditable",get:function(){return!0}}]),n}(bt),xt=mt.android?"​​":"​",St=function(t){k(n,t);var e=w(n);function n(t){var r;return D(this,n),(r=e.call(this)).side=t,r}return R(n,[{key:"length",get:function(){return 0}},{key:"merge",value:function(){return!1}},{key:"become",value:function(t){return t instanceof n&&t.side==this.side}},{key:"split",value:function(){return new n(this.side)}},{key:"sync",value:function(){this.dom?this.dirty&&this.dom.nodeValue!=xt&&(this.dom.nodeValue=xt):this.setDOM(document.createTextNode(xt))}},{key:"getSide",value:function(){return this.side}},{key:"domAtPos",value:function(t){return Q.before(this.dom)}},{key:"localPosFromDOM",value:function(){return 0}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(t){var e=I(this.dom);return e[e.length-1]||null}},{key:"overrideDOMText",get:function(){return i.xv.of([this.dom.nodeValue.replace(/\u200b/g,"")])}}]),n}(Z);function At(t,e,n){for(var r=0,i=0;r<e.length;r++){var o=e[r],a=i+o.length;if(!(a==i&&o.getSide()<=0)){if(n>i&&n<a&&o.dom.parentNode==t)return o.domAtPos(n-i);if(n<=i)break;i=a}}for(;r>0;r--){var s=e[r-1].dom;if(s.parentNode==t)return Q.after(s)}return new Q(t,0)}function Ct(t,e,n){var r,i=t.children;n>0&&e instanceof yt&&i.length&&(r=i[i.length-1])instanceof yt&&r.mark.eq(e.mark)?Ct(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function Mt(t,e,n){for(var r=0,i=0;i<t.children.length;i++){var o=t.children[i],a=r+o.length,s=void 0;if((n<=0||a==t.length||o.getSide()>0?a>=e:a>e)&&(e<a||i+1==t.children.length||(s=t.children[i+1]).length||s.getSide()>0)){var u=0;if(a==r){if(o.getSide()<=0)continue;u=n=-o.getSide()}var l=o.coordsAt(e-r,n);return u&&l?_(l,n<0):l}r=a}var h=t.dom.lastChild;if(!h)return t.dom.getBoundingClientRect();var c=I(h);return c[c.length-1]||null}function Ot(t,e){for(var n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}function Tt(t,e){if(t==e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0,o=n;i<o.length;i++){var a=o[i];if(-1==r.indexOf(a)||t[a]!==e[a])return!1}return!0}function Dt(t,e,n){if(e)for(var r in e)n&&r in n||t.removeAttribute(r);if(n)for(var i in n)e&&e[i]==n[i]||t.setAttribute(i,n[i])}gt.prototype.children=bt.prototype.children=St.prototype.children=Y;var Et=function(){function t(){D(this,t)}return R(t,[{key:"eq",value:function(t){return!1}},{key:"updateDOM",value:function(t){return!1}},{key:"compare",value:function(t){return this==t||this.constructor==t.constructor&&this.eq(t)}},{key:"estimatedHeight",get:function(){return-1}},{key:"ignoreEvent",value:function(t){return!0}},{key:"customView",get:function(){return null}},{key:"destroy",value:function(t){}}]),t}(),Rt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Rt||(Rt={})),Pt=function(t){k(n,t);var e=w(n);function n(t,r,i,o){var a;return D(this,n),(a=e.call(this)).startSide=t,a.endSide=r,a.widget=i,a.spec=o,a}return R(n,[{key:"heightRelevant",get:function(){return!1}},{key:"hasHeight",value:function(){return!!this.widget&&this.widget.estimatedHeight>-1}}],[{key:"mark",value:function(t){return new Bt(t)}},{key:"widget",value:function(t){var e=t.side||0,n=!!t.block;return new It(t,e+=n?e>0?3e8:-4e8:e>0?1e8:-1e8,e,n,t.widget||null,!1)}},{key:"replace",value:function(t){var e=!!t.block,n=Nt(t,e),r=n.start,i=n.end;return new It(t,e?r?-3e8:-1:4e8,e?i?2e8:1:-5e8,e,t.widget||null,!0)}},{key:"line",value:function(t){return new Lt(t)}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.Xs.of(t,e)}}]),n}(a.uU);Pt.none=a.Xs.empty;var Bt=function(t){k(n,t);var e=w(n);function n(t){var r;D(this,n);var i=Nt(t),o=i.start,a=i.end;return(r=e.call(this,o?-1:4e8,a?1:-5e8,null,t)).tagName=t.tagName||"span",r.class=t.class||"",r.attrs=t.attributes||null,r}return R(n,[{key:"eq",value:function(t){return this==t||t instanceof n&&this.tagName==t.tagName&&this.class==t.class&&Tt(this.attrs,t.attrs)}},{key:"range",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(t>=e)throw new RangeError("Mark decorations may not be empty");return y(A(n.prototype),"range",this).call(this,t,e)}}]),n}(Pt);Bt.prototype.point=!1;var Lt=function(t){k(n,t);var e=w(n);function n(t){return D(this,n),e.call(this,-2e8,-2e8,null,t)}return R(n,[{key:"eq",value:function(t){return t instanceof n&&Tt(this.spec.attributes,t.spec.attributes)}},{key:"range",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return y(A(n.prototype),"range",this).call(this,t,e)}}]),n}(Pt);Lt.prototype.mapMode=r.gc.TrackBefore,Lt.prototype.point=!0;var It=function(t){k(n,t);var e=w(n);function n(t,i,o,a,s,u){var l;return D(this,n),(l=e.call(this,i,o,s,t)).block=a,l.isReplace=u,l.mapMode=a?i<=0?r.gc.TrackBefore:r.gc.TrackAfter:r.gc.TrackDel,l}return R(n,[{key:"type",get:function(){return this.startSide<this.endSide?Rt.WidgetRange:this.startSide<=0?Rt.WidgetBefore:Rt.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}},{key:"eq",value:function(t){return t instanceof n&&(e=this.widget,r=t.widget,e==r||!!(e&&r&&e.compare(r)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,r}},{key:"range",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return y(A(n.prototype),"range",this).call(this,t,e)}}]),n}(Pt);function Nt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.inclusiveStart,r=t.inclusiveEnd;return null==n&&(n=t.inclusive),null==r&&(r=t.inclusive),{start:null!=n?n:e,end:null!=r?r:e}}function jt(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}It.prototype.point=!0;var Vt=function(t){k(n,t);var e=w(n);function n(){var t;return D(this,n),(t=e.apply(this,arguments)).children=[],t.length=0,t.prevAttrs=void 0,t.attrs=null,t.breakAfter=0,t}return R(n,[{key:"merge",value:function(t,e,r,i,o,a){if(r){if(!(r instanceof n))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),rt(this,t,e,r?r.children:[],o,a),!0}},{key:"split",value:function(t){var e=new n;if(e.breakAfter=this.breakAfter,0==this.length)return e;var r=this.childPos(t),i=r.i,o=r.off;o&&(e.append(this.children[i].split(o),0),this.children[i].merge(o,this.children[i].length,null,!1,0,0),i++);for(var a=i;a<this.children.length;a++)e.append(this.children[a],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=t,e}},{key:"transferDOM",value:function(t){this.dom&&(t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}},{key:"setDeco",value:function(t){Tt(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}},{key:"append",value:function(t,e){Ct(this,t,e)}},{key:"addLineDeco",value:function(t){var e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=Ot(e,this.attrs||{})),n&&(this.attrs=Ot({class:n},this.attrs||{}))}},{key:"domAtPos",value:function(t){return At(this.dom,this.children,t)}},{key:"reuseDOM",value:function(t){"DIV"==t.nodeName&&(this.setDOM(t),this.dirty|=6)}},{key:"sync",value:function(t){var e;this.dom?4&this.dirty&&(X(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Dt(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),y(A(n.prototype),"sync",this).call(this,t);for(var r=this.dom.lastChild;r&&Z.get(r)instanceof yt;)r=r.lastChild;if(!r||"BR"!=r.nodeName&&0==(null===(e=Z.get(r))||void 0===e?void 0:e.isEditable)&&(!mt.ios||!this.children.some((function(t){return t instanceof gt})))){var i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}},{key:"measureTextSize",value:function(){if(0==this.children.length||this.length>20)return null;var t,e=0,n=M(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!(r instanceof gt))return null;var i=I(r.dom);if(1!=i.length)return null;e+=i[0].width}}catch(o){n.e(o)}finally{n.f()}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}},{key:"coordsAt",value:function(t,e){return Mt(this,t,e)}},{key:"become",value:function(t){return!1}},{key:"type",get:function(){return Rt.Text}}],[{key:"find",value:function(t,e){for(var r=0,i=0;r<t.children.length;r++){var o=t.children[r],a=i+o.length;if(a>=e){if(o instanceof n)return o;if(a>e)break}i=a+o.breakAfter}return null}}]),n}(Z),Ht=function(t){k(n,t);var e=w(n);function n(t,r,i){var o;return D(this,n),(o=e.call(this)).widget=t,o.length=r,o.type=i,o.breakAfter=0,o}return R(n,[{key:"merge",value:function(t,e,r,i,o,a){return!(r&&(!(r instanceof n&&this.widget.compare(r.widget))||t>0&&o<=0||e<this.length&&a<=0))&&(this.length=t+(r?r.length:0)+(this.length-e),!0)}},{key:"domAtPos",value:function(t){return 0==t?Q.before(this.dom):Q.after(this.dom,t==this.length)}},{key:"split",value:function(t){var e=this.length-t;this.length=t;var r=new n(this.widget,e,this.type);return r.breakAfter=this.breakAfter,r}},{key:"children",get:function(){return Y}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):i.xv.empty}},{key:"domBoundsAround",value:function(){return null}},{key:"become",value:function(t){return t instanceof n&&t.type==this.type&&t.widget.constructor==this.widget.constructor&&(t.widget.eq(this.widget)||this.markDirty(!0),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0)}},{key:"ignoreMutation",value:function(){return!0}},{key:"ignoreEvent",value:function(t){return this.widget.ignoreEvent(t)}},{key:"destroy",value:function(){y(A(n.prototype),"destroy",this).call(this),this.dom&&this.widget.destroy(this.dom)}}]),n}(Z),zt=function(){function t(e,n,r,i){D(this,t),this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsBelow=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}return R(t,[{key:"posCovered",value:function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof Ht&&t.type==Rt.WidgetBefore)}},{key:"getLine",value:function(){return this.curLine||(this.content.push(this.curLine=new Vt),this.atCursorPos=!0),this.curLine}},{key:"flushBuffer",value:function(t){this.pendingBuffer&&(this.curLine.append(_t(new St(-1),t),t.length),this.pendingBuffer=0)}},{key:"addBlockWidget",value:function(t){this.flushBuffer([]),this.curLine=null,this.content.push(t)}},{key:"finish",value:function(t){t?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}},{key:"buildText",value:function(t,e,n){for(;t>0;){if(this.textOff==this.text.length){var r=this.cursor.next(this.skip),i=r.value,o=r.lineBreak,a=r.done;if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,t--;continue}this.text=i,this.textOff=0}var s=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(0,n)),this.getLine().append(_t(new gt(this.text.slice(this.textOff,this.textOff+s)),e),n),this.atCursorPos=!0,this.textOff+=s,t-=s,n=0}}},{key:"span",value:function(t,e,n,r){this.buildText(e-t,n,r),this.pos=e,this.openStart<0&&(this.openStart=r)}},{key:"point",value:function(t,e,n,r,i){var o=e-t;if(n instanceof It)if(n.block){var a=n.type;a!=Rt.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Ht(n.widget||new Wt("div"),o,a))}else{var s=bt.create(n.widget||new Wt("span"),o,n.startSide),u=this.atCursorPos&&!s.isEditable&&i<=r.length&&(t<e||n.startSide>0),l=!s.isEditable&&(t<e||n.startSide<=0),h=this.getLine();2!=this.pendingBuffer||u||(this.pendingBuffer=0),this.flushBuffer(r),u&&(h.append(_t(new St(1),r),i),i=r.length+Math.max(0,i-r.length)),h.append(_t(s,r),i),this.atCursorPos=l,this.pendingBuffer=l?t<e?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=i)}},{key:"filterPoint",value:function(t,e,n,r){if(r>=this.disallowBlockEffectsBelow||!(n instanceof It))return!0;if(n.block)throw new RangeError("Block decorations may not be specified via plugins");return e<=this.doc.lineAt(this.pos).to}}],[{key:"build",value:function(e,n,r,i,o){var s=new t(e,n,r,o);return s.openEnd=a.Xs.spans(i,n,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}]),t}();function _t(t,e){var n,r=M(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t=new yt(i,[t],t.length)}}catch(o){r.e(o)}finally{r.f()}return t}var Wt=function(t){k(n,t);var e=w(n);function n(t){var r;return D(this,n),(r=e.call(this)).tag=t,r}return R(n,[{key:"eq",value:function(t){return t.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(t){return t.nodeName.toLowerCase()==this.tag}}]),n}(Et),qt=[],Ft=r.r$.define(),$t=r.r$.define(),Ut=r.r$.define(),Kt=r.r$.define(),Gt=r.r$.define(),Jt=r.r$.define(),Xt=r.Py.define({map:function(t,e){return t.map(e)}}),Qt=r.Py.define({map:function(t,e){return t.map(e)}}),Yt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;D(this,t),this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o}return R(t,[{key:"map",value:function(e){return e.empty?this:new t(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}]),t}(),Zt=r.Py.define({map:function(t,e){return t.map(e)}});function te(t,e,n){var r=t.facet(Kt);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}var ee=r.r$.define({combine:function(t){return!t.length||t[0]}}),ne=function t(e,n){D(this,t),this.field=e,this.get=n},re=function(){function t(){D(this,t)}return R(t,[{key:"from",value:function(t){return new ne(this,t)}}],[{key:"define",value:function(){return new t}}]),t}();re.decorations=re.define(),re.atomicRanges=re.define(),re.scrollMargins=re.define();var ie=0,oe=r.r$.define(),ae=function(){function t(e,n,r){D(this,t),this.id=e,this.create=n,this.fields=r,this.extension=oe.of(this)}return R(t,null,[{key:"define",value:function(e,n){var r=n||{},i=r.eventHandlers,o=r.provide,a=r.decorations,s=[];if(o){var u,l=M(Array.isArray(o)?o:[o]);try{for(l.s();!(u=l.n()).done;){var h=u.value;s.push(h)}}catch(c){l.e(c)}finally{l.f()}}return i&&s.push(se.from((function(t){return{plugin:t,handlers:i}}))),a&&s.push(re.decorations.from(a)),new t(ie++,e,s)}},{key:"fromClass",value:function(e,n){return t.define((function(t){return new e(t)}),n)}}]),t}(),se=re.define(),ue=function(){function t(e){D(this,t),this.spec=e,this.mustUpdate=null,this.value=null}return R(t,[{key:"takeField",value:function(t,e){if(this.spec){var n,r=M(this.spec.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.field,a=i.get;o==t&&e.push(a(this.value))}}catch(s){r.e(s)}finally{r.f()}}}},{key:"update",value:function(t){if(this.value){if(this.mustUpdate){var e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(n){if(te(e.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(r){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(n){te(t.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}},{key:"destroy",value:function(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(n){te(t.state,n,"CodeMirror plugin crashed")}}},{key:"deactivate",value:function(){this.spec=this.value=null}}]),t}(),le=r.r$.define(),he=r.r$.define(),ce=r.r$.define(),fe=r.r$.define(),de=function(){function t(e,n,r,i){D(this,t),this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}return R(t,[{key:"join",value:function(e){return new t(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}},{key:"addToSet",value:function(t){for(var e=t.length,n=this;e>0;e--){var r=t[e-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),t.splice(e-1,1)}}return t.splice(e,0,n),t}}],[{key:"extendWithRanges",value:function(e,n){if(0==n.length)return e;for(var r=[],i=0,o=0,a=0,s=0;;i++){for(var u=i==e.length?null:e[i],l=a-s,h=u?u.fromB:1e9;o<n.length&&n[o]<h;){var c=n[o],f=n[o+1],d=Math.max(s,c),v=Math.min(h,f);if(d<=v&&new t(d+l,v+l,d,v).addToSet(r),f>h)break;o+=2}if(!u)return r;new t(u.fromA,u.toA,u.fromB,u.toB).addToSet(r),a=u.toA,s=u.toB}}}]),t}(),ve=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qt;D(this,t),this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=r.as.empty(this.startState.doc.length);var o,a=M(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.changes=this.changes.compose(s.changes)}}catch(h){a.e(h)}finally{a.f()}var u=[];this.changes.iterChangedRanges((function(t,e,n,r){return u.push(new de(t,e,n,r))})),this.changedRanges=u;var l=e.hasFocus;l!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=l,this.flags|=1)}return R(t,[{key:"viewportChanged",get:function(){return(4&this.flags)>0}},{key:"heightChanged",get:function(){return(2&this.flags)>0}},{key:"geometryChanged",get:function(){return this.docChanged||(10&this.flags)>0}},{key:"focusChanged",get:function(){return(1&this.flags)>0}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"selectionSet",get:function(){return this.transactions.some((function(t){return t.selection}))}},{key:"empty",get:function(){return 0==this.flags&&0==this.transactions.length}}]),t}(),pe=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(pe||(pe={})),me=pe.LTR,ge=pe.RTL;function ye(t){for(var e=[],n=0;n<t.length;n++)e.push(1<<+t[n]);return e}for(var ke=ye("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),be=ye("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),we=Object.create(null),xe=[],Se=0,Ae=["()","[]","{}"];Se<Ae.length;Se++){var Ce=Ae[Se],Me=Ce.charCodeAt(0),Oe=Ce.charCodeAt(1);we[Me]=Oe,we[Oe]=-Me}function Te(t){return t<=247?ke[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?be[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203||8204==t?256:1}var De=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Ee=function(){function t(e,n,r){D(this,t),this.from=e,this.to=n,this.level=r}return R(t,[{key:"dir",get:function(){return this.level%2?ge:me}},{key:"side",value:function(t,e){return this.dir==e==t?this.to:this.from}}],[{key:"find",value:function(t,e,n,r){for(var i=-1,o=0;o<t.length;o++){var a=t[o];if(a.from<=e&&a.to>=e){if(a.level==n)return o;(i<0||(0!=r?r<0?a.from<e:a.to>e:t[i].level>a.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}]),t}(),Re=[];function Pe(t,e){var n=t.length,r=e==me?1:2,i=e==me?2:1;if(!t||1==r&&!De.test(t))return Be(n);for(var o=0,a=r,s=r;o<n;o++){var u=Te(t.charCodeAt(o));512==u?u=a:8==u&&4==s&&(u=16),Re[o]=4==u?2:u,7&u&&(s=u),a=u}for(var l=0,h=r,c=r;l<n;l++){var f=Re[l];if(128==f)l<n-1&&h==Re[l+1]&&24&h?f=Re[l]=h:Re[l]=256;else if(64==f){for(var d=l+1;d<n&&64==Re[d];)d++;for(var v=l&&8==h||d<n&&8==Re[d]?1==c?1:8:256,p=l;p<d;p++)Re[p]=v;l=d-1}else 8==f&&1==c&&(Re[l]=1);h=f,7&f&&(c=f)}for(var m,g,y,k=0,b=0,w=0;k<n;k++)if(g=we[m=t.charCodeAt(k)])if(g<0){for(var x=b-3;x>=0;x-=3)if(xe[x+1]==-g){var S=xe[x+2],A=2&S?r:4&S?1&S?i:r:0;A&&(Re[k]=Re[xe[x]]=A),b=x;break}}else{if(189==xe.length)break;xe[b++]=k,xe[b++]=m,xe[b++]=w}else if(2==(y=Re[k])||1==y){var C=y==r;w=C?0:1;for(var M=b-3;M>=0;M-=3){var O=xe[M+2];if(2&O)break;if(C)xe[M+2]|=2;else{if(4&O)break;xe[M+2]|=4}}}for(var T=0;T<n;T++)if(256==Re[T]){for(var D=T+1;D<n&&256==Re[D];)D++;for(var E=1==(T?Re[T-1]:r),R=E==(1==(D<n?Re[D]:r))?E?1:2:r,P=T;P<D;P++)Re[P]=R;T=D-1}var B=[];if(1==r)for(var L=0;L<n;){for(var I=L,N=1!=Re[L++];L<n&&N==(1!=Re[L]);)L++;if(N)for(var j=L;j>I;){for(var V=j,H=2!=Re[--j];j>I&&H==(2!=Re[j-1]);)j--;B.push(new Ee(j,V,H?2:1))}else B.push(new Ee(I,L,0))}else for(var z=0;z<n;){for(var _=z,W=2==Re[z++];z<n&&W==(2==Re[z]);)z++;B.push(new Ee(_,z,W?1:2))}return B}function Be(t){return[new Ee(0,t,0)]}var Le="";function Ie(t,e,n,o,a){var s,u=o.head-t.from,l=-1;if(0==u){if(!a||!t.length)return null;e[0].level!=n&&(u=e[0].side(!1,n),l=0)}else if(u==t.length){if(a)return null;var h=e[e.length-1];h.level!=n&&(u=h.side(!0,n),l=e.length-1)}l<0&&(l=Ee.find(e,u,null!==(s=o.bidiLevel)&&void 0!==s?s:-1,o.assoc));var c=e[l];u==c.side(a,n)&&(u=(c=e[l+=a?1:-1]).side(!a,n));var f=a==(c.dir==n),d=(0,i.cp)(t.text,u,f);if(Le=t.text.slice(Math.min(u,d),Math.max(u,d)),d!=c.side(a,n))return r.jT.cursor(d+t.from,f?-1:1,c.level);var v=l==(a?e.length-1:0)?null:e[l+(a?1:-1)];return v||c.level==n?v&&v.level<c.level?r.jT.cursor(v.side(!a,n)+t.from,a?1:-1,v.level):r.jT.cursor(d+t.from,a?-1:1,c.level):r.jT.cursor(a?t.to:t.from,a?-1:1,n)}var Ne=function(){function t(e,n){D(this,t),this.points=e,this.view=n,this.text="",this.lineBreak=n.state.lineBreak}return R(t,[{key:"readRange",value:function(t,e){if(!t)return this;for(var n=t.parentNode,r=t;;){this.findPointBefore(n,r),this.readNode(r);var i=r.nextSibling;if(i==e)break;var o=Z.get(r),a=Z.get(i);(o&&a?o.breakAfter:(o?o.breakAfter:je(r))||je(i)&&("BR"!=r.nodeName||r.cmIgnore))&&(this.text+=this.lineBreak),r=i}return this.findPointBefore(n,e),this}},{key:"readTextNode",value:function(t){var e,n,r=t.nodeValue;return/^\u200b/.test(r)&&"false"==(null===(e=t.previousSibling)||void 0===e?void 0:e.contentEditable)&&(r=r.slice(1)),/\u200b$/.test(r)&&"false"==(null===(n=t.nextSibling)||void 0===n?void 0:n.contentEditable)&&(r=r.slice(0,r.length-1)),r}},{key:"readNode",value:function(t){if(!t.cmIgnore){var e,n=Z.get(t),r=n&&n.overrideDOMText;null!=r?e=r.sliceString(0,void 0,this.lineBreak):3==t.nodeType?e=this.readTextNode(t):"BR"==t.nodeName?e=t.nextSibling?this.lineBreak:"":1==t.nodeType&&this.readRange(t.firstChild,null),null!=e&&(this.findPointIn(t,e.length),this.text+=e,mt.chrome&&13==this.view.inputState.lastKeyCode&&!t.nextSibling&&/\n\n$/.test(this.text)&&(this.text=this.text.slice(0,-1)))}}},{key:"findPointBefore",value:function(t,e){var n,r=M(this.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}}catch(o){r.e(o)}finally{r.f()}}},{key:"findPointIn",value:function(t,e){var n,r=M(this.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e))}}catch(o){r.e(o)}finally{r.f()}}}]),t}();function je(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}var Ve=function t(e,n){D(this,t),this.node=e,this.offset=n,this.pos=-1},He=function(t){k(n,t);var e=w(n);function n(t){var r;return D(this,n),(r=e.call(this)).view=t,r.compositionDeco=Pt.none,r.decorations=[],r.pluginDecorationLength=0,r.minWidth=0,r.minWidthFrom=0,r.minWidthTo=0,r.impreciseAnchor=null,r.impreciseHead=null,r.forceSelection=!1,r.lastUpdate=Date.now(),r.setDOM(t.contentDOM),r.children=[new Vt],r.children[0].setParent(S(r)),r.updateDeco(),r.updateInner([new de(0,0,0,t.state.doc.length)],0),r}return R(n,[{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}},{key:"update",value:function(t){var e=this,n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((function(t){var n=t.fromA;return t.toA<e.minWidthFrom||n>e.minWidthTo}))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Pt.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=function(t,e){var n=We(t);if(!n)return Pt.none;var r=n.from,i=n.to,o=n.node,a=n.text,s=e.mapPos(r,1),u=Math.max(s,e.mapPos(i,-1)),l=t.state,h=3==o.nodeType?o.nodeValue:new Ne([],t).readRange(o.firstChild,null).text;if(u-s<h.length)if(l.sliceDoc(s,Math.min(l.doc.length,s+h.length))==h)u=s+h.length;else{if(l.sliceDoc(Math.max(0,u-h.length),u)!=h)return Pt.none;s=u-h.length}else if(l.sliceDoc(s,u)!=h)return Pt.none;return Pt.set(Pt.replace({widget:new qe(o,a)}).range(s,u))}(this.view,t.changes)),(mt.ie||mt.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);var r,i,o,s,u=this.decorations,l=this.updateDeco(),h=(r=u,i=l,o=t.changes,s=new Ue,a.Xs.compare(r,i,o,s),s.changes);return n=de.extendWithRanges(n,h),(0!=this.dirty||0!=n.length)&&(this.updateInner(n,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}},{key:"updateInner",value:function(t,e){var n=this;this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e);var r=this.view.observer;r.ignore((function(){n.dom.style.height=n.view.viewState.contentHeight+"px",n.dom.style.minWidth=n.minWidth?n.minWidth+"px":"";var t=mt.chrome||mt.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;n.sync(t),n.dirty=0,t&&(t.written||r.selectionRange.focusNode!=t.node)&&(n.forceSelection=!0),n.dom.style.height=""}));var i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){var o,a=M(this.children);try{for(a.s();!(o=a.n()).done;){var s=o.value;s instanceof Ht&&s.widget instanceof _e&&i.push(s.dom)}}catch(u){a.e(u)}finally{a.f()}}r.updateGaps(i)}},{key:"updateChildren",value:function(t,e){for(var n=this.childCursor(e),r=t.length-1;;r--){var i=r>=0?t[r]:null;if(!i)break;var o=i.fromA,a=i.toA,s=i.fromB,u=i.toB,l=zt.build(this.view.state.doc,s,u,this.decorations,this.pluginDecorationLength),h=l.content,c=l.breakAtStart,f=l.openStart,d=l.openEnd,v=n.findPos(a,1),p=v.i,m=v.off,g=n.findPos(o,-1);nt(this,g.i,g.off,p,m,h,c,f,d)}}},{key:"updateSelection",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&this.view.observer.readSelectionRange(),!(!n&&!this.mayControlSelection()||mt.ios&&this.view.inputState.rapidCompositionStart)){var r=this.forceSelection;this.forceSelection=!1;var i=this.view.state.selection.main,o=this.domAtPos(i.anchor),a=i.empty?o:this.domAtPos(i.head);if(mt.gecko&&i.empty&&ze(o)){var s=document.createTextNode("");this.view.observer.ignore((function(){return o.node.insertBefore(s,o.node.childNodes[o.offset]||null)})),o=a=new Q(s,0),r=!0}var u=this.view.observer.selectionRange;!r&&u.focusNode&&N(o.node,o.offset,u.anchorNode,u.anchorOffset)&&N(a.node,a.offset,u.focusNode,u.focusOffset)||(this.view.observer.ignore((function(){mt.android&&mt.chrome&&t.dom.contains(u.focusNode)&&Ke(u.focusNode,t.dom)&&(t.dom.blur(),t.dom.focus({preventScroll:!0}));var e=P(t.root);if(i.empty){if(mt.gecko){var n=$e(o.node,o.offset);if(n&&3!=n){var r=Fe(o.node,o.offset,1==n?1:-1);r&&(o=new Q(r,1==n?0:r.nodeValue.length))}}e.collapse(o.node,o.offset),null!=i.bidiLevel&&null!=u.cursorBidiLevel&&(u.cursorBidiLevel=i.bidiLevel)}else if(e.extend)e.collapse(o.node,o.offset),e.extend(a.node,a.offset);else{var s=document.createRange();if(i.anchor>i.head){var l=[a,o];o=l[0],a=l[1]}s.setEnd(a.node,a.offset),s.setStart(o.node,o.offset),e.removeAllRanges(),e.addRange(s)}})),this.view.observer.setSelectionRange(o,a)),this.impreciseAnchor=o.precise?null:new Q(u.anchorNode,u.anchorOffset),this.impreciseHead=a.precise?null:new Q(u.focusNode,u.focusOffset)}}},{key:"enforceCursorAssoc",value:function(){if(!this.compositionDeco.size){var t=this.view.state.selection.main,e=P(this.root);if(t.empty&&t.assoc&&e.modify){var n=Vt.find(this,t.head);if(n){var r=n.posAtStart;if(t.head!=r&&t.head!=r+n.length){var i=this.coordsAt(t.head,-1),o=this.coordsAt(t.head,1);if(i&&o&&!(i.bottom>o.top)){var a=this.domAtPos(t.head+t.assoc);e.collapse(a.node,a.offset),e.modify("move",t.assoc<0?"forward":"backward","lineboundary")}}}}}}},{key:"mayControlSelection",value:function(){return this.view.state.facet(ee)?this.root.activeElement==this.dom:L(this.dom,this.view.observer.selectionRange)}},{key:"nearest",value:function(t){for(var e=t;e;){var n=Z.get(e);if(n&&n.rootView==this)return n;e=e.parentNode}return null}},{key:"posFromDOM",value:function(t,e){var n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}},{key:"domAtPos",value:function(t){for(var e=this.childCursor().findPos(t,-1),n=e.i,r=e.off;n<this.children.length-1;){var i=this.children[n];if(r<i.length||i instanceof Vt)break;n++,r=0}return this.children[n].domAtPos(r)}},{key:"coordsAt",value:function(t,e){for(var n=this.length,r=this.children.length-1;;r--){var i=this.children[r],o=n-i.breakAfter-i.length;if(t>o||t==o&&i.type!=Rt.WidgetBefore&&i.type!=Rt.WidgetAfter&&(!r||2==e||this.children[r-1].breakAfter||this.children[r-1].type==Rt.WidgetBefore&&e>-2))return i.coordsAt(t-o,e);n=o}}},{key:"measureVisibleLineHeights",value:function(){for(var t=[],e=this.view.viewState.viewport,n=e.from,r=e.to,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,s=0,u=0;u<this.children.length;u++){var l=this.children[u],h=s+l.length;if(h>r)break;if(s>=n){var c=l.dom.getBoundingClientRect();if(t.push(c.height),o){var f=l.dom.lastChild,d=f?I(f):[];if(d.length){var v=d[d.length-1],p=this.view.textDirection==pe.LTR?v.right-c.left:c.right-v.left;p>a&&(a=p,this.minWidth=i,this.minWidthFrom=s,this.minWidthTo=h)}}}s=h+l.breakAfter}return t}},{key:"measureTextSize",value:function(){var t,e=this,n=M(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof Vt){var i=r.measureTextSize();if(i)return i}}}catch(u){n.e(u)}finally{n.f()}var o,a,s=document.createElement("div");return s.className="cm-line",s.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((function(){e.dom.appendChild(s);var t=I(s.firstChild)[0];o=s.getBoundingClientRect().height,a=t?t.width/27:7,s.remove()})),{lineHeight:o,charWidth:a}}},{key:"childCursor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,e=this.children.length;return e&&(t-=this.children[--e].length),new et(this.children,t,e)}},{key:"computeBlockGapDeco",value:function(){for(var t=[],e=this.view.viewState,n=0,r=0;;r++){var i=r==e.viewports.length?null:e.viewports[r],o=i?i.from-1:this.length;if(o>n){var a=e.lineBlockAt(o).bottom-e.lineBlockAt(n).top;t.push(Pt.replace({widget:new _e(a),block:!0,inclusive:!0}).range(n,o))}if(!i)break;n=i.to+1}return Pt.set(t)}},{key:"updateDeco",value:function(){var t=this.view.pluginField(re.decorations);return this.pluginDecorationLength=t.length,this.decorations=[].concat(C(t),C(this.view.state.facet(ce)),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])}},{key:"scrollIntoView",value:function(t){var e,n=t.range,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(r){!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,e.left),top:Math.min(r.top,e.top),right:Math.max(r.right,e.right),bottom:Math.max(r.bottom,e.bottom)});var i,o=0,a=0,s=0,u=0,l=M(this.view.pluginField(re.scrollMargins));try{for(l.s();!(i=l.n()).done;){var h=i.value;if(h){var c=h.left,f=h.right,d=h.top,v=h.bottom;null!=c&&(o=Math.max(o,c)),null!=f&&(a=Math.max(a,f)),null!=d&&(s=Math.max(s,d)),null!=v&&(u=Math.max(u,v))}}}catch(m){l.e(m)}finally{l.f()}var p={left:r.left-o,top:r.top-s,right:r.right+a,bottom:r.bottom+u};!function(t,e,n,r,i,o,a,s){for(var u=t.ownerDocument,l=u.defaultView,h=t;h;)if(1==h.nodeType){var c=void 0,f=h==u.body;if(f)c=W(l);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.parentNode;continue}var d=h.getBoundingClientRect();c={left:d.left,right:d.left+h.clientWidth,top:d.top,bottom:d.top+h.clientHeight}}var v=0,p=0;if("nearest"==i)e.top<c.top?(p=-(c.top-e.top+a),n>0&&e.bottom>c.bottom+p&&(p=e.bottom-c.bottom+p+a)):e.bottom>c.bottom&&(p=e.bottom-c.bottom+a,n<0&&e.top-p<c.top&&(p=-(c.top+p-e.top+a)));else{var m=e.bottom-e.top,g=c.bottom-c.top;p=("center"==i&&m<=g?e.top+m/2-g/2:"start"==i||"center"==i&&n<0?e.top-a:e.bottom-g+a)-c.top}if("nearest"==r?e.left<c.left?(v=-(c.left-e.left+o),n>0&&e.right>c.right+v&&(v=e.right-c.right+v+o)):e.right>c.right&&(v=e.right-c.right+o,n<0&&e.left<c.left+v&&(v=-(c.left+v-e.left+o))):v=("center"==r?e.left+(e.right-e.left)/2-(c.right-c.left)/2:"start"==r==s?e.left-o:e.right-(c.right-c.left)+o)-c.left,v||p)if(f)l.scrollBy(v,p);else{if(p){var y=h.scrollTop;h.scrollTop+=p,p=h.scrollTop-y}if(v){var k=h.scrollLeft;h.scrollLeft+=v,v=h.scrollLeft-k}e={left:e.left-v,top:e.top-p,right:e.right-v,bottom:e.bottom-p}}if(f)break;h=h.assignedSlot||h.parentNode,r=i="nearest"}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,p,n.head<n.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==pe.LTR)}}}]),n}(Z);function ze(t){return 1==t.node.nodeType&&t.node.firstChild&&(0==t.offset||"false"==t.node.childNodes[t.offset-1].contentEditable)&&(t.offset==t.node.childNodes.length||"false"==t.node.childNodes[t.offset].contentEditable)}var _e=function(t){k(n,t);var e=w(n);function n(t){var r;return D(this,n),(r=e.call(this)).height=t,r}return R(n,[{key:"toDOM",value:function(){var t=document.createElement("div");return this.updateDOM(t),t}},{key:"eq",value:function(t){return t.height==this.height}},{key:"updateDOM",value:function(t){return t.style.height=this.height+"px",!0}},{key:"estimatedHeight",get:function(){return this.height}}]),n}(Et);function We(t){var e=t.observer.selectionRange,n=e.focusNode&&Fe(e.focusNode,e.focusOffset,0);if(!n)return null;var r=t.docView.nearest(n);if(!r)return null;if(r instanceof Vt){for(var i=n;i.parentNode!=r.dom;)i=i.parentNode;for(var o=i.previousSibling;o&&!Z.get(o);)o=o.previousSibling;var a=o?Z.get(o).posAtEnd:r.posAtStart;return{from:a,to:a,node:i,text:n}}for(;;){var s=r.parent;if(!s)return null;if(s instanceof Vt)break;r=s}var u=r.posAtStart;return{from:u,to:u+r.length,node:r.dom,text:n}}var qe=function(t){k(n,t);var e=w(n);function n(t,r){var i;return D(this,n),(i=e.call(this)).top=t,i.text=r,i}return R(n,[{key:"eq",value:function(t){return this.top==t.top&&this.text==t.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",value:function(){return!1}},{key:"customView",get:function(){return wt}}]),n}(Et);function Fe(t,e,n){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0&&n<=0)e=H(t=t.childNodes[e-1]);else{if(!(1==t.nodeType&&e<t.childNodes.length&&n>=0))return null;t=t.childNodes[e],e=0}}}function $e(t,e){return 1!=t.nodeType?0:(e&&"false"==t.childNodes[e-1].contentEditable?1:0)|(e<t.childNodes.length&&"false"==t.childNodes[e].contentEditable?2:0)}var Ue=function(){function t(){D(this,t),this.changes=[]}return R(t,[{key:"compareRange",value:function(t,e){jt(t,e,this.changes)}},{key:"comparePoint",value:function(t,e){jt(t,e,this.changes)}}]),t}();function Ke(t,e){for(var n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}function Ge(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Je(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Xe(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Qe(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Ye(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Ze(t,e,n){for(var r,i,o,a,s,u,l,h,c=t.firstChild;c;c=c.nextSibling)for(var f=I(c),d=0;d<f.length;d++){var v=f[d];i&&Xe(i,v)&&(v=Qe(Ye(v,i.bottom),i.top));var p=Ge(e,v),m=Je(n,v);if(0==p&&0==m)return 3==c.nodeType?tn(c,e,n):Ze(c,e,n);(!r||a>m||a==m&&o>p)&&(r=c,i=v,o=p,a=m),0==p?n>v.bottom&&(!l||l.bottom<v.bottom)?(s=c,l=v):n<v.top&&(!h||h.top>v.top)&&(u=c,h=v):l&&Xe(l,v)?l=Ye(l,v.bottom):h&&Xe(h,v)&&(h=Qe(h,v.top))}if(l&&l.bottom>=n?(r=s,i=l):h&&h.top<=n&&(r=u,i=h),!r)return{node:t,offset:0};var g=Math.max(i.left,Math.min(i.right,e));return 3==r.nodeType?tn(r,g,n):o||"true"!=r.contentEditable?{node:t,offset:Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0)}:Ze(r,g,n)}function tn(t,e,n){for(var r=t.nodeValue.length,i=-1,o=1e9,a=0,s=0;s<r;s++)for(var u=K(t,s,s+1).getClientRects(),l=0;l<u.length;l++){var h=u[l];if(h.top!=h.bottom){a||(a=e-h.left);var c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&c<o){var f=e>=(h.left+h.right)/2,d=f;if(mt.chrome||mt.gecko)K(t,s).getBoundingClientRect().left==h.right&&(d=!f);if(c<=0)return{node:t,offset:s+(d?1:0)};i=s+(d?1:0),o=c}}}return{node:t,offset:i>-1?i:a>0?t.nodeValue.length:0}}function en(t,e,n){var r,i,o=e.x,a=e.y,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,u=t.contentDOM.getBoundingClientRect(),l=u.top+t.viewState.paddingTop,h=t.viewState.docHeight,c=a-l;if(c<0)return 0;if(c>h)return t.state.doc.length;for(var f=t.defaultLineHeight/2,d=!1;(i=t.elementAtHeight(c)).type!=Rt.Text;)for(;!((c=s>0?i.bottom+f:i.top-f)>=0&&c<=h);){if(d)return n?null:0;d=!0,s=-s}a=l+c;var v=i.from;if(v<t.viewport.from)return 0==t.viewport.from?0:n?null:nn(t,u,i,o,a);if(v>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:nn(t,u,i,o,a);var p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,g=m.elementFromPoint(o,a);g&&!t.contentDOM.contains(g)&&(g=null),g||(o=Math.max(u.left+1,Math.min(u.right-1,o)),(g=m.elementFromPoint(o,a))&&!t.contentDOM.contains(g)&&(g=null));var y,k=-1;if(g&&0!=(null===(r=t.docView.nearest(g))||void 0===r?void 0:r.isEditable))if(p.caretPositionFromPoint){var b=p.caretPositionFromPoint(o,a);b&&(y=b.offsetNode,k=b.offset)}else if(p.caretRangeFromPoint){var w=p.caretRangeFromPoint(o,a);w&&(y=w.startContainer,k=w.startOffset,mt.safari&&rn(y,k,o)&&(y=void 0))}if(!y||!t.docView.dom.contains(y)){var x=Vt.find(t.docView,v);if(!x)return c>i.top+i.height/2?i.to:i.from;var S=Ze(x.dom,o,a);y=S.node,k=S.offset}return t.docView.posFromDOM(y,k)}function nn(t,e,n,r,o){var a=Math.round((r-e.left)*t.defaultCharacterWidth);t.lineWrapping&&n.height>1.5*t.defaultLineHeight&&(a+=Math.floor((o-n.top)/t.defaultLineHeight)*t.viewState.heightOracle.lineLength);var s=t.state.sliceDoc(n.from,n.to);return n.from+(0,i.Gz)(s,a,t.state.tabSize)}function rn(t,e,n){var r;if(3!=t.nodeType||e!=(r=t.nodeValue.length))return!1;for(var i=t.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return K(t,r-1,r).getBoundingClientRect().left>n}function on(t,e,n,i){var o=t.state.doc.lineAt(e.head),a=i&&t.lineWrapping?t.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head):null;if(a){var s=t.dom.getBoundingClientRect(),u=t.posAtCoords({x:n==(t.textDirection==pe.LTR)?s.right-1:s.left+1,y:(a.top+a.bottom)/2});if(null!=u)return r.jT.cursor(u,n?-1:1)}var l=Vt.find(t.docView,e.head),h=l?n?l.posAtEnd:l.posAtStart:n?o.to:o.from;return r.jT.cursor(h,n?-1:1)}function an(t,e,n,i){for(var o=t.state.doc.lineAt(e.head),a=t.bidiSpans(o),s=e,u=null;;){var l=Ie(o,a,t.textDirection,s,n),h=Le;if(!l){if(o.number==(n?t.state.doc.lines:1))return s;h="\n",o=t.state.doc.line(o.number+(n?1:-1)),a=t.bidiSpans(o),l=r.jT.cursor(n?o.from:o.to)}if(u){if(!u(h))return s}else{if(!i)return l;u=i(h)}s=l}}function sn(t,e,n){for(var i=t.pluginField(re.atomicRanges);;){var o,a=!1,s=M(i);try{for(s.s();!(o=s.n()).done;){o.value.between(n.from-1,n.from+1,(function(t,i,o){n.from>t&&n.from<i&&(n=e.from>n.from?r.jT.cursor(t,1):r.jT.cursor(i,-1),a=!0)}))}}catch(u){s.e(u)}finally{s.f()}if(!a)return n}}var un=function(){function t(e){var n=this;D(this,t),this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;var r=function(t){var r=dn[t];e.contentDOM.addEventListener(t,(function(i){"keydown"==t&&n.keydown(e,i)||fn(e,i)&&!n.ignoreDuringComposition(i)&&(n.mustFlushObserver(i)&&e.observer.forceFlush(),n.runCustomHandlers(t,e,i)?i.preventDefault():r(e,i))})),n.registeredEvents.push(t)};for(var i in dn)r(i);this.notifiedFocused=e.hasFocus,this.ensureHandlers(e),mt.safari&&e.contentDOM.addEventListener("input",(function(){return null}))}return R(t,[{key:"setSelectionOrigin",value:function(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(t){var e,n=this,r=M(this.customHandlers=t.pluginField(se));try{for(r.s();!(e=r.n()).done;){var i=e.value,o=function(e){n.registeredEvents.indexOf(e)<0&&"scroll"!=e&&(n.registeredEvents.push(e),t.contentDOM.addEventListener(e,(function(r){fn(t,r)&&n.runCustomHandlers(e,t,r)&&r.preventDefault()})))};for(var a in i.handlers)o(a)}}catch(s){r.e(s)}finally{r.f()}}},{key:"runCustomHandlers",value:function(t,e,n){var r,i=M(this.customHandlers);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.handlers[t];if(a)try{if(a.call(o.plugin,n,e)||n.defaultPrevented)return!0}catch(s){te(e.state,s)}}}catch(u){i.e(u)}finally{i.f()}return!1}},{key:"runScrollHandlers",value:function(t,e){var n,r=M(this.customHandlers);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.handlers.scroll;if(o)try{o.call(i.plugin,e,t)}catch(a){te(t.state,a)}}}catch(s){r.e(s)}finally{r.f()}}},{key:"keydown",value:function(t,e){var n,r=this;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),!!this.screenKeyEvent(t,e)||(!mt.android||!mt.chrome||e.synthetic||13!=e.keyCode&&8!=e.keyCode?!(!mt.ios||!(n=ln.find((function(t){return t.keyCode==e.keyCode})))||e.ctrlKey||e.altKey||e.metaKey||e.synthetic)&&(this.pendingIOSKey=n,setTimeout((function(){return r.flushIOSKey(t)}),250),!0):(t.observer.delayAndroidKey(e.key,e.keyCode),!0))}},{key:"flushIOSKey",value:function(t){var e=this.pendingIOSKey;return!!e&&(this.pendingIOSKey=void 0,G(t.contentDOM,e.key,e.keyCode))}},{key:"ignoreDuringComposition",value:function(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(mt.safari&&Date.now()-this.compositionEndedAt<500)&&(this.compositionEndedAt=0,!0))}},{key:"screenKeyEvent",value:function(t,e){var n=9==e.keyCode&&Date.now()<this.lastEscPress+2e3;return 27==e.keyCode?this.lastEscPress=Date.now():hn.indexOf(e.keyCode)<0&&(this.lastEscPress=0),n}},{key:"mustFlushObserver",value:function(t){return"keydown"==t.type&&229!=t.keyCode||"compositionend"==t.type&&!mt.ios}},{key:"startMouseSelection",value:function(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}},{key:"update",value:function(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}},{key:"destroy",value:function(){this.mouseSelection&&this.mouseSelection.destroy()}}]),t}(),ln=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],hn=[16,17,18,20,91,92,224,225],cn=function(){function t(e,n,i,o){D(this,t),this.view=e,this.style=i,this.mustSelect=o,this.lastEvent=n;var a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(r.yy.allowMultipleSelections)&&function(t,e){var n=t.state.facet(Ft);return n.length?n[0](e):mt.mac?e.metaKey:e.ctrlKey}(e,n),this.dragMove=function(t,e){var n=t.state.facet($t);return n.length?n[0](e):mt.mac?!e.altKey:!e.ctrlKey}(e,n),this.dragging=!(!function(t,e){if(t.state.selection.main.empty)return!1;var n=P(t.root);if(0==n.rangeCount)return!0;for(var r=n.getRangeAt(0).getClientRects(),i=0;i<r.length;i++){var o=r[i];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}(e,n)||1!=Mn(n))&&null,!1===this.dragging&&(n.preventDefault(),this.select(n))}return R(t,[{key:"move",value:function(t){if(0==t.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=t)}},{key:"up",value:function(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}},{key:"destroy",value:function(){var t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}},{key:"select",value:function(t){var e=this.style.get(t,this.extend,this.multiple);!this.mustSelect&&e.eq(this.view.state.selection)&&e.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:e,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}},{key:"update",value:function(t){var e=this;t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout((function(){return e.select(e.lastEvent)}),20)}}]),t}();function fn(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n,r=e.target;r!=t.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=Z.get(r))&&n.ignoreEvent(e))return!1;return!0}var dn=Object.create(null),vn=mt.ie&&mt.ie_version<15||mt.ios&&mt.webkit_version<604;function pn(t,e){var n,i=t.state,o=1,a=i.toText(e),s=a.lines==i.selection.ranges.length,u=null!=Tn&&i.selection.ranges.every((function(t){return t.empty}))&&Tn==a.toString();if(u){var l=-1;n=i.changeByRange((function(t){var n=i.doc.lineAt(t.from);if(n.from==l)return{range:t};l=n.from;var u=i.toText((s?a.line(o++).text:e)+i.lineBreak);return{changes:{from:n.from,insert:u},range:r.jT.cursor(t.from+u.length)}}))}else n=s?i.changeByRange((function(t){var e=a.line(o++);return{changes:{from:t.from,to:t.to,insert:e.text},range:r.jT.cursor(t.from+e.length)}})):i.replaceSelection(a);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}dn.keydown=function(t,e){t.inputState.setSelectionOrigin("select")};var mn=0;function gn(t,e,n,o){if(1==o)return r.jT.cursor(e,n);if(2==o)return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=t.charCategorizer(e),a=t.doc.lineAt(e),s=e-a.from;if(0==a.length)return r.jT.cursor(e);0==s?n=1:s==a.length&&(n=-1);var u=s,l=s;n<0?u=(0,i.cp)(a.text,s,!1):l=(0,i.cp)(a.text,s);for(var h=o(a.text.slice(u,l));u>0;){var c=(0,i.cp)(a.text,u,!1);if(o(a.text.slice(c,u))!=h)break;u=c}for(;l<a.length;){var f=(0,i.cp)(a.text,l);if(o(a.text.slice(l,f))!=h)break;l=f}return r.jT.range(u+a.from,l+a.from)}(t.state,e,n);var a=Vt.find(t.docView,e),s=t.state.doc.lineAt(a?a.posAtEnd:e),u=a?a.posAtStart:s.from,l=a?a.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,r.jT.range(u,l)}dn.touchstart=function(t,e){mn=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},dn.touchmove=function(t){t.inputState.setSelectionOrigin("select.pointer")},dn.mousedown=function(t,e){if(t.observer.flush(),!(mn>Date.now()-2e3&&1==Mn(e))){var n,i=null,o=M(t.state.facet(Ut));try{for(o.s();!(n=o.n()).done;){if(i=(0,n.value)(t,e))break}}catch(s){o.e(s)}finally{o.f()}if(i||0!=e.button||(i=function(t,e){var n=wn(t,e),i=Mn(e),o=t.state.selection,a=n,s=e;return{update:function(t){t.docChanged&&(n&&(n.pos=t.changes.mapPos(n.pos)),o=o.map(t.changes),s=null)},get:function(e,u,l){var h;if(s&&e.clientX==s.clientX&&e.clientY==s.clientY?h=a:(h=a=wn(t,e),s=e),!h||!n)return o;var c=gn(t,h.pos,h.bias,i);if(n.pos!=h.pos&&!u){var f=gn(t,n.pos,n.bias,i),d=Math.min(f.from,c.from),v=Math.max(f.to,c.to);c=d<c.from?r.jT.range(d,v):r.jT.range(v,d)}return u?o.replaceRange(o.main.extend(c.from,c.to)):l?o.addRange(c):r.jT.create([c])}}}(t,e)),i){var a=t.root.activeElement!=t.contentDOM;a&&t.observer.ignore((function(){return U(t.contentDOM)})),t.inputState.startMouseSelection(new cn(t,e,i,a))}}};var yn=function(t,e){return t>=e.top&&t<=e.bottom},kn=function(t,e,n){return yn(e,n)&&t>=n.left&&t<=n.right};function bn(t,e,n,r){var i=Vt.find(t.docView,e);if(!i)return 1;var o=e-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;var a=i.coordsAt(o,-1);if(a&&kn(n,r,a))return-1;var s=i.coordsAt(o,1);return s&&kn(n,r,s)?1:a&&yn(r,a)?-1:1}function wn(t,e){var n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:bn(t,n,e.clientX,e.clientY)}}var xn=mt.ie&&mt.ie_version<=11,Sn=null,An=0,Cn=0;function Mn(t){if(!xn)return t.detail;var e=Sn,n=Cn;return Sn=t,Cn=Date.now(),An=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(An+1)%3:1}function On(t,e,n,r){if(n){var i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();var o=t.inputState.mouseSelection,a=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,s={from:i,insert:n},u=t.state.changes(a?[a,s]:s);t.focus(),t.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"})}}dn.dragstart=function(t,e){var n=t.state.selection.main,r=t.inputState.mouseSelection;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")},dn.drop=function(t,e){if(e.dataTransfer){if(t.state.readOnly)return e.preventDefault();var n=e.dataTransfer.files;n&&n.length?function(){e.preventDefault();for(var r=Array(n.length),i=0,o=function(){++i==n.length&&On(t,e,r.filter((function(t){return null!=t})).join(t.state.lineBreak),!1)},a=function(t){var e=new FileReader;e.onerror=o,e.onload=function(){/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(r[t]=e.result),o()},e.readAsText(n[t])},s=0;s<n.length;s++)a(s)}():On(t,e,e.dataTransfer.getData("Text"),!0)}},dn.paste=function(t,e){if(t.state.readOnly)return e.preventDefault();t.observer.flush();var n=vn?null:e.clipboardData;n?(pn(t,n.getData("text/plain")),e.preventDefault()):function(t){var e=t.dom.parentNode;if(e){var n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){t.focus(),n.remove(),pn(t,n.value)}),50)}}(t)};var Tn=null;function Dn(t,e){if(t.docView.compositionDeco.size){t.inputState.rapidCompositionStart=e;try{t.update([])}finally{t.inputState.rapidCompositionStart=!1}}}dn.copy=dn.cut=function(t,e){var n=function(t){var e,n=[],r=[],i=!1,o=M(t.selection.ranges);try{for(o.s();!(e=o.n()).done;){var a=e.value;a.empty||(n.push(t.sliceDoc(a.from,a.to)),r.push(a))}}catch(f){o.e(f)}finally{o.f()}if(!n.length){var s,u=-1,l=M(t.selection.ranges);try{for(l.s();!(s=l.n()).done;){var h=s.value.from,c=t.doc.lineAt(h);c.number>u&&(n.push(c.text),r.push({from:c.from,to:Math.min(t.doc.length,c.to+1)})),u=c.number}}catch(f){l.e(f)}finally{l.f()}i=!0}return{text:n.join(t.lineBreak),ranges:r,linewise:i}}(t.state),r=n.text,i=n.ranges,o=n.linewise;if(r||o){Tn=o?r:null;var a=vn?null:e.clipboardData;a?(e.preventDefault(),a.clearData(),a.setData("text/plain",r)):function(t,e){var n=t.dom.parentNode;if(n){var r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout((function(){r.remove(),t.focus()}),50)}}(t,r),"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})}},dn.focus=dn.blur=function(t){setTimeout((function(){t.hasFocus!=t.inputState.notifiedFocused&&t.update([])}),10)},dn.beforeprint=function(t){t.viewState.printing=!0,t.requestMeasure(),setTimeout((function(){t.viewState.printing=!1,t.requestMeasure()}),2e3)},dn.compositionstart=dn.compositionupdate=function(t){null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0,t.docView.compositionDeco.size&&(t.observer.flush(),Dn(t,!0)))},dn.compositionend=function(t){t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionFirstChange=null,setTimeout((function(){t.inputState.composing<0&&Dn(t,!1)}),50)},dn.contextmenu=function(t){t.inputState.lastContextMenu=Date.now()},dn.beforeinput=function(t,e){var n,r;if(mt.chrome&&mt.android&&(r=ln.find((function(t){return t.inputType==e.inputType})))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){var i=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((function(){var e;((null===(e=window.visualViewport)||void 0===e?void 0:e.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}};var En=["pre-wrap","normal","pre-line","break-spaces"],Rn=function(){function t(){D(this,t),this.doc=i.xv.empty,this.lineWrapping=!1,this.direction=pe.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}return R(t,[{key:"heightForGap",value:function(t,e){var n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}},{key:"heightForLine",value:function(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}},{key:"setDoc",value:function(t){return this.doc=t,this}},{key:"mustRefreshForStyle",value:function(t,e){return En.indexOf(t)>-1!=this.lineWrapping||this.direction!=e}},{key:"mustRefreshForHeights",value:function(t){for(var e=!1,n=0;n<t.length;n++){var r=t[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(e=!0,this.heightSamples[Math.floor(10*r)]=!0)}return e}},{key:"refresh",value:function(t,e,n,r,i,o){var a=En.indexOf(t)>-1,s=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a||this.direction!=e;if(this.lineWrapping=a,this.direction=e,this.lineHeight=n,this.charWidth=r,this.lineLength=i,s){this.heightSamples={};for(var u=0;u<o.length;u++){var l=o[u];l<0?u++:this.heightSamples[Math.floor(10*l)]=!0}}return s}}]),t}(),Pn=function(){function t(e,n){D(this,t),this.from=e,this.heights=n,this.index=0}return R(t,[{key:"more",get:function(){return this.index<this.heights.length}}]),t}(),Bn=function(){function t(e,n,r,i,o){D(this,t),this.from=e,this.length=n,this.top=r,this.height=i,this.type=o}return R(t,[{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}},{key:"join",value:function(e){var n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new t(this.from,this.length+e.length,this.top,this.height+e.height,n)}},{key:"moveY",value:function(e){return e?new t(this.from,this.length,this.top+e,this.height,Array.isArray(this.type)?this.type.map((function(t){return t.moveY(e)})):this.type):this}}]),t}(),Ln=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Ln||(Ln={})),In=.001,Nn=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;D(this,t),this.length=e,this.height=n,this.flags=r}return R(t,[{key:"outdated",get:function(){return(2&this.flags)>0},set:function(t){this.flags=(t?2:0)|-3&this.flags}},{key:"setHeight",value:function(t,e){this.height!=e&&(Math.abs(this.height-e)>In&&(t.heightChanged=!0),this.height=e)}},{key:"replace",value:function(e,n,r){return t.of(r)}},{key:"decomposeLeft",value:function(t,e){e.push(this)}},{key:"decomposeRight",value:function(t,e){e.push(this)}},{key:"applyChanges",value:function(t,e,n,r){for(var i=this,o=r.length-1;o>=0;o--){var a=r[o],s=a.fromA,u=a.toA,l=a.fromB,h=a.toB,c=i.lineAt(s,Ln.ByPosNoHeight,e,0,0),f=c.to>=u?c:i.lineAt(u,Ln.ByPosNoHeight,e,0,0);for(h+=f.to-u,u=f.to;o>0&&c.from<=r[o-1].toA;)s=r[o-1].fromA,l=r[o-1].fromB,o--,s<c.from&&(c=i.lineAt(s,Ln.ByPosNoHeight,e,0,0));l+=c.from-s,s=c.from;var d=Wn.build(n,t,l,h);i=i.replace(s,u,d)}return i.updateHeight(n,0)}}],[{key:"empty",value:function(){return new Vn(0,0)}},{key:"of",value:function(e){if(1==e.length)return e[0];for(var n=0,r=e.length,i=0,o=0;;)if(n==r)if(i>2*o){var a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else{if(!(o>2*i))break;var s=e[r];s.break?e.splice(r,1,s.left,null,s.right):e.splice(r,1,s.left,s.right),r+=2+s.break,o-=s.size}else if(i<o){var u=e[n++];u&&(i+=u.size)}else{var l=e[--r];l&&(o+=l.size)}var h=0;return null==e[n-1]?(h=1,n--):null==e[n]&&(h=1,r++),new zn(t.of(e.slice(0,n)),h,t.of(e.slice(r)))}}]),t}();Nn.prototype.size=1;var jn=function(t){k(n,t);var e=w(n);function n(t,r,i){var o;return D(this,n),(o=e.call(this,t,r)).type=i,o}return R(n,[{key:"blockAt",value:function(t,e,n,r){return new Bn(r,this.length,n,this.height,this.type)}},{key:"lineAt",value:function(t,e,n,r,i){return this.blockAt(0,n,r,i)}},{key:"forEachLine",value:function(t,e,n,r,i,o){o(this.blockAt(0,n,r,i))}},{key:"updateHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3?arguments[3]:void 0;return n&&n.from<=e&&n.more&&this.setHeight(t,n.heights[n.index++]),this.outdated=!1,this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]),n}(Nn),Vn=function(t){k(n,t);var e=w(n);function n(t,r){var i;return D(this,n),(i=e.call(this,t,r,Rt.Text)).collapsed=0,i.widgetHeight=0,i}return R(n,[{key:"replace",value:function(t,e,r){var i=r[0];return 1==r.length&&(i instanceof n||i instanceof Hn&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Hn?i=new n(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Nn.of(r)}},{key:"updateHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return r&&r.from<=e&&r.more?this.setHeight(t,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]),n}(jn),Hn=function(t){k(n,t);var e=w(n);function n(t){return D(this,n),e.call(this,t,0)}return R(n,[{key:"lines",value:function(t,e){var n=t.lineAt(e).number,r=t.lineAt(e+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}},{key:"blockAt",value:function(t,e,n,r){var i=this.lines(e,r),o=i.firstLine,a=i.lastLine,s=i.lineHeight,u=Math.max(0,Math.min(a-o,Math.floor((t-n)/s))),l=e.line(o+u),h=l.from,c=l.length;return new Bn(h,c,n+s*u,s,Rt.Text)}},{key:"lineAt",value:function(t,e,n,r,i){if(e==Ln.ByHeight)return this.blockAt(t,n,r,i);if(e==Ln.ByPosNoHeight){var o=n.lineAt(t),a=o.from,s=o.to;return new Bn(a,s-a,0,0,Rt.Text)}var u=this.lines(n,i),l=u.firstLine,h=u.lineHeight,c=n.lineAt(t),f=c.from,d=c.length,v=c.number;return new Bn(f,d,r+h*(v-l),h,Rt.Text)}},{key:"forEachLine",value:function(t,e,n,r,i,o){for(var a=this.lines(n,i),s=a.firstLine,u=a.lineHeight,l=Math.max(t,i),h=Math.min(i+this.length,e);l<=h;){var c=n.lineAt(l);l==t&&(r+=u*(c.number-s)),o(new Bn(c.from,c.length,r,u,Rt.Text)),r+=u,l=c.to+1}}},{key:"replace",value:function(t,e,r){var i=this.length-e;if(i>0){var o=r[r.length-1];o instanceof n?r[r.length-1]=new n(o.length+i):r.push(null,new n(i-1))}if(t>0){var a=r[0];a instanceof n?r[0]=new n(t+a.length):r.unshift(new n(t-1),null)}return Nn.of(r)}},{key:"decomposeLeft",value:function(t,e){e.push(new n(t-1),null)}},{key:"decomposeRight",value:function(t,e){e.push(null,new n(this.length-t-1))}},{key:"updateHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=e+this.length;if(i&&i.from<=e+this.length&&i.more){var a=[],s=Math.max(e,i.from),u=-1,l=t.heightChanged;for(i.from>e&&a.push(new n(i.from-e-1).updateHeight(t,e));s<=o&&i.more;){var h=t.doc.lineAt(s).length;a.length&&a.push(null);var c=i.heights[i.index++];-1==u?u=c:Math.abs(c-u)>=In&&(u=-2);var f=new Vn(h,c);f.outdated=!1,a.push(f),s+=h+1}s<=o&&a.push(null,new n(o-s).updateHeight(t,s));var d=Nn.of(a);return t.heightChanged=l||u<0||Math.abs(d.height-this.height)>=In||Math.abs(u-this.lines(t.doc,e).lineHeight)>=In,d}return(r||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]),n}(Nn),zn=function(t){k(n,t);var e=w(n);function n(t,r,i){var o;return D(this,n),(o=e.call(this,t.length+r+i.length,t.height+i.height,r|(t.outdated||i.outdated?2:0))).left=t,o.right=i,o.size=t.size+i.size,o}return R(n,[{key:"break",get:function(){return 1&this.flags}},{key:"blockAt",value:function(t,e,n,r){var i=n+this.left.height;return t<i?this.left.blockAt(t,e,n,r):this.right.blockAt(t,e,i,r+this.left.length+this.break)}},{key:"lineAt",value:function(t,e,n,r,i){var o=r+this.left.height,a=i+this.left.length+this.break,s=e==Ln.ByHeight?t<o:t<a,u=s?this.left.lineAt(t,e,n,r,i):this.right.lineAt(t,e,n,o,a);if(this.break||(s?u.to<a:u.from>a))return u;var l=e==Ln.ByPosNoHeight?Ln.ByPosNoHeight:Ln.ByPos;return s?u.join(this.right.lineAt(a,l,n,o,a)):this.left.lineAt(a,l,n,r,i).join(u)}},{key:"forEachLine",value:function(t,e,n,r,i,o){var a=r+this.left.height,s=i+this.left.length+this.break;if(this.break)t<s&&this.left.forEachLine(t,e,n,r,i,o),e>=s&&this.right.forEachLine(t,e,n,a,s,o);else{var u=this.lineAt(s,Ln.ByPos,n,r,i);t<u.from&&this.left.forEachLine(t,u.from-1,n,r,i,o),u.to>=t&&u.from<=e&&o(u),e>u.to&&this.right.forEachLine(u.to+1,e,n,a,s,o)}}},{key:"replace",value:function(t,e,n){var r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,n));var i=[];t>0&&this.decomposeLeft(t,i);var o,a=i.length,s=M(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;i.push(u)}}catch(h){s.e(h)}finally{s.f()}if(t>0&&_n(i,a-1),e<this.length){var l=i.length;this.decomposeRight(e,i),_n(i,l)}return Nn.of(i)}},{key:"decomposeLeft",value:function(t,e){var n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&t>=++n&&e.push(null),t>n&&this.right.decomposeLeft(t-n,e)}},{key:"decomposeRight",value:function(t,e){var n=this.left.length,r=n+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}},{key:"balanced",value:function(t,e){return t.size>2*e.size||e.size>2*t.size?Nn.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}},{key:"updateHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=this.left,o=this.right,a=e+i.length+this.break,s=null;return r&&r.from<=e+i.length&&r.more?s=i=i.updateHeight(t,e,n,r):i.updateHeight(t,e,n),r&&r.from<=a+o.length&&r.more?s=o=o.updateHeight(t,a,n,r):o.updateHeight(t,a,n),s?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}},{key:"toString",value:function(){return this.left+(this.break?" ":"-")+this.right}}]),n}(Nn);function _n(t,e){var n,r;null==t[e]&&(n=t[e-1])instanceof Hn&&(r=t[e+1])instanceof Hn&&t.splice(e-1,3,new Hn(n.length+1+r.length))}var Wn=function(){function t(e,n){D(this,t),this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}return R(t,[{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"span",value:function(t,e){if(this.lineStart>-1){var n=Math.min(e,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Vn?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Vn(n-this.pos,-1)),this.writtenTo=n,e>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}},{key:"point",value:function(t,e,n){if(t<e||n.heightRelevant){var r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);var i=e-t;n.block?this.addBlock(new jn(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}},{key:"enterLine",value:function(){if(!(this.lineStart>-1)){var t=this.oracle.doc.lineAt(this.pos),e=t.from,n=t.to;this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vn(this.pos-e,-1)),this.writtenTo=this.pos}}},{key:"blankContent",value:function(t,e){var n=new Hn(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}},{key:"ensureLine",value:function(){this.enterLine();var t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Vn)return t;var e=new Vn(0,-1);return this.nodes.push(e),e}},{key:"addBlock",value:function(t){this.enterLine(),t.type!=Rt.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=Rt.WidgetBefore&&(this.covering=t)}},{key:"addLineDeco",value:function(t,e){var n=this.ensureLine();n.length+=e,n.collapsed+=e,n.widgetHeight=Math.max(n.widgetHeight,t),this.writtenTo=this.pos=this.pos+e}},{key:"finish",value:function(t){var e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof Vn||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Vn(0,-1));var n,r=t,i=M(this.nodes);try{for(i.s();!(n=i.n()).done;){var o=n.value;o instanceof Vn&&o.updateHeight(this.oracle,r),r+=o?o.length:1}}catch(a){i.e(a)}finally{i.f()}return this.nodes}}],[{key:"build",value:function(e,n,r,i){var o=new t(r,e);return a.Xs.spans(n,r,i,o,0),o.finish(r)}}]),t}();function qn(t,e,n){var r=new Fn;return a.Xs.compare(t,e,n,r,0),r.changes}var Fn=function(){function t(){D(this,t),this.changes=[]}return R(t,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(t,e,n,r){(t<e||n&&n.heightRelevant||r&&r.heightRelevant)&&jt(t,e,this.changes,5)}}]),t}();var $n=function(){function t(e,n,r){D(this,t),this.from=e,this.to=n,this.size=r}return R(t,[{key:"draw",value:function(t){return Pt.replace({widget:new Un(this.size,t)}).range(this.from,this.to)}}],[{key:"same",value:function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}}]),t}(),Un=function(t){k(n,t);var e=w(n);function n(t,r){var i;return D(this,n),(i=e.call(this)).size=t,i.vertical=r,i}return R(n,[{key:"eq",value:function(t){return t.size==this.size&&t.vertical==this.vertical}},{key:"toDOM",value:function(){var t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]),n}(Et),Kn=function(){function t(e){D(this,t),this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new Rn,this.scaler=Yn,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=Nn.empty().applyChanges(e.facet(ce),i.xv.empty,this.heightOracle.setDoc(e.doc),[new de(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Pt.set(this.lineGaps.map((function(t){return t.draw(!1)}))),this.computeVisibleRanges()}return R(t,[{key:"updateForViewport",value:function(){for(var t=this,e=[this.viewport],n=this.state.selection.main,r=function(r){var i=r?n.head:n.anchor;if(!e.some((function(t){var e=t.from,n=t.to;return i>=e&&i<=n}))){var o=t.lineBlockAt(i),a=o.from,s=o.to;e.push(new Gn(a,s))}},i=0;i<=1;i++)r(i);this.viewports=e.sort((function(t,e){return t.from-e.from})),this.scaler=this.heightMap.height<=7e6?Yn:new Zn(this.heightOracle.doc,this.heightMap,this.viewports)}},{key:"updateViewportLines",value:function(){var t=this;this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(function(e){t.viewportLines.push(1==t.scaler.scale?e:tr(e,t.scaler))}))}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state;this.state=t.state;var i=this.state.facet(ce),o=t.changedRanges,a=de.extendWithRanges(o,qn(t.startState.facet(ce),i,t?t.changes:r.as.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(i,n.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=s&&(t.flags|=2);var u=a.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<u.from||e.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,e));var l=!t.changes.empty||2&t.flags||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}},{key:"measure",value:function(t){var e=t.contentDOM,n=window.getComputedStyle(e),r=this.heightOracle,i=n.whiteSpace,o="rtl"==n.direction?pe.RTL:pe.LTR,a=this.heightOracle.mustRefreshForStyle(i,o),s=a||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight,u=0,l=0;if(s){this.mustMeasureContent=!1,this.contentDOMHeight=e.clientHeight;var h=parseInt(n.paddingTop)||0,c=parseInt(n.paddingBottom)||0;this.paddingTop==h&&this.paddingBottom==c||(u|=8,this.paddingTop=h,this.paddingBottom=c)}var f=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:function(t,e){for(var n=t.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),o=Math.max(0,n.top),a=Math.min(innerHeight,n.bottom),s=t.ownerDocument.body,u=t.parentNode;u&&u!=s;)if(1==u.nodeType){var l=u,h=window.getComputedStyle(l);if((l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth)&&"visible"!=h.overflow){var c=l.getBoundingClientRect();r=Math.max(r,c.left),i=Math.min(i,c.right),o=Math.max(o,c.top),a=Math.min(a,c.bottom)}u="absolute"==h.position||"fixed"==h.position?l.offsetParent:l.parentNode}else{if(11!=u.nodeType)break;u=u.host}return{left:r-n.left,right:Math.max(r,i)-n.left,top:o-(n.top+e),bottom:Math.max(o,a)-(n.top+e)}}(e,this.paddingTop),d=f.top-this.pixelViewport.top,v=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;var p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(s=!0)),!this.inView)return 0;var m=e.clientWidth;if(this.contentDOMWidth==m&&this.editorHeight==t.scrollDOM.clientHeight&&this.editorWidth==t.scrollDOM.clientWidth||(this.contentDOMWidth=m,this.editorHeight=t.scrollDOM.clientHeight,this.editorWidth=t.scrollDOM.clientWidth,u|=8),s){var g=t.docView.measureVisibleLineHeights();if(r.mustRefreshForHeights(g)&&(a=!0),a||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){var y=t.docView.measureTextSize(),k=y.lineHeight,b=y.charWidth;(a=r.refresh(i,o,k,b,m/b,g))&&(t.docView.minWidth=0,u|=8)}d>0&&v>0?l=Math.max(d,v):d<0&&v<0&&(l=Math.min(d,v)),r.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(r,0,a,new Pn(this.viewport.from,g)),r.heightChanged&&(u|=2)}var w=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&u||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),u}},{key:"visibleTop",get:function(){return this.scaler.fromDOM(this.pixelViewport.top)}},{key:"visibleBottom",get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)}},{key:"getViewport",value:function(t,e){var n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,i=this.state.doc,o=this.visibleTop,a=this.visibleBottom,s=new Gn(r.lineAt(o-1e3*n,Ln.ByHeight,i,0,0).from,r.lineAt(a+1e3*(1-n),Ln.ByHeight,i,0,0).to);if(e){var u=e.range.head,l=this.editorHeight;if(u<s.from||u>s.to){var h,c=r.lineAt(u,Ln.ByPos,i,0,0);h="center"==e.y?(c.top+c.bottom)/2-l/2:"start"==e.y||"nearest"==e.y&&u<s.from?c.top:c.bottom-l,s=new Gn(r.lineAt(h-500,Ln.ByHeight,i,0,0).from,r.lineAt(h+l+500,Ln.ByHeight,i,0,0).to)}}return s}},{key:"mapViewport",value:function(t,e){var n=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new Gn(this.heightMap.lineAt(n,Ln.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Ln.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(t){var e=t.from,n=t.to,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.inView)return!0;var i=this.heightMap.lineAt(e,Ln.ByPos,this.state.doc,0,0),o=i.top,a=this.heightMap.lineAt(n,Ln.ByPos,this.state.doc,0,0),s=a.bottom,u=this.visibleTop,l=this.visibleBottom;return(0==e||o<=u-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(r,250)))&&o>u-2e3&&s<l+2e3}},{key:"mapLineGaps",value:function(t,e){if(!t.length||e.empty)return t;var n,r=[],i=M(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.touchesRange(o.from,o.to)||r.push(new $n(e.mapPos(o.from),e.mapPos(o.to),o.size))}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"ensureLineGaps",value:function(t){var e=this,n=[];if(this.heightOracle.direction!=pe.LTR)return n;var r,i=M(this.viewportLines);try{var o=function(){var i=r.value;if(i.length<4e3)return"continue";var o=function(t,e,n){var r=[],i=t,o=0;a.Xs.spans(n.facet(ce),t,e,{span:function(){},point:function(t,e){t>i&&(r.push({from:i,to:t}),o+=t-i),i=e}},20),i<e&&(r.push({from:i,to:e}),o+=e-i);return{total:o,ranges:r}}(i.from,i.to,e.state);if(o.total<4e3)return"continue";var s=void 0,u=void 0;if(e.heightOracle.lineWrapping){var l=2e3/e.heightOracle.lineLength*e.heightOracle.lineHeight;s=Jn(o,(e.visibleTop-i.top-l)/i.height),u=Jn(o,(e.visibleBottom-i.top+l)/i.height)}else{var h=o.total*e.heightOracle.charWidth,c=2e3*e.heightOracle.charWidth;s=Jn(o,(e.pixelViewport.left-c)/h),u=Jn(o,(e.pixelViewport.right+c)/h)}var f=[];s>i.from&&f.push({from:i.from,to:s}),u<i.to&&f.push({from:u,to:i.to});var d=e.state.selection.main;d.from>=i.from&&d.from<=i.to&&Qn(f,d.from-10,d.from+10),!d.empty&&d.to>=i.from&&d.to<=i.to&&Qn(f,d.to-10,d.to+10);for(var v=function(){var r=m[p],a=r.from,s=r.to;s-a>1e3&&n.push(function(t,e){var n,r=M(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e(i))return i}}catch(o){r.e(o)}finally{r.f()}return}(t,(function(t){return t.from>=i.from&&t.to<=i.to&&Math.abs(t.from-a)<1e3&&Math.abs(t.to-s)<1e3}))||new $n(a,s,e.gapSize(i,a,s,o)))},p=0,m=f;p<m.length;p++)v()};for(i.s();!(r=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}return n}},{key:"gapSize",value:function(t,e,n,r){var i=Xn(r,n)-Xn(r,e);return this.heightOracle.lineWrapping?t.height*i:r.total*this.heightOracle.charWidth*i}},{key:"updateLineGaps",value:function(t){var e=this;$n.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Pt.set(t.map((function(t){return t.draw(e.heightOracle.lineWrapping)}))))}},{key:"computeVisibleRanges",value:function(){var t=this.state.facet(ce);this.lineGaps.length&&(t=t.concat(this.lineGapDeco));var e=[];a.Xs.spans(t,this.viewport.from,this.viewport.to,{span:function(t,n){e.push({from:t,to:n})},point:function(){}},20);var n=e.length!=this.visibleRanges.length||this.visibleRanges.some((function(t,n){return t.from!=e[n].from||t.to!=e[n].to}));return this.visibleRanges=e,n?4:0}},{key:"lineBlockAt",value:function(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((function(e){return e.from<=t&&e.to>=t}))||tr(this.heightMap.lineAt(t,Ln.ByPos,this.state.doc,0,0),this.scaler)}},{key:"lineBlockAtHeight",value:function(t){return tr(this.heightMap.lineAt(this.scaler.fromDOM(t),Ln.ByHeight,this.state.doc,0,0),this.scaler)}},{key:"elementAtHeight",value:function(t){return tr(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}},{key:"docHeight",get:function(){return this.scaler.toDOM(this.heightMap.height)}},{key:"contentHeight",get:function(){return this.docHeight+this.paddingTop+this.paddingBottom}}]),t}(),Gn=function t(e,n){D(this,t),this.from=e,this.to=n};function Jn(t,e){var n=t.total,r=t.ranges;if(e<=0)return r[0].from;if(e>=1)return r[r.length-1].to;for(var i=Math.floor(n*e),o=0;;o++){var a=r[o],s=a.from,u=a.to-s;if(i<=u)return s+i;i-=u}}function Xn(t,e){var n,r=0,i=M(t.ranges);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.from,s=o.to;if(e<=s){r+=e-a;break}r+=s-a}}catch(u){i.e(u)}finally{i.f()}return r/t.total}function Qn(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(i.from<n&&i.to>e){var o=[];i.from<e&&o.push({from:i.from,to:e}),i.to>n&&o.push({from:n,to:i.to}),t.splice.apply(t,[r,1].concat(o)),r+=o.length-1}}}var Yn={toDOM:function(t){return t},fromDOM:function(t){return t},scale:1},Zn=function(){function t(e,n,r){D(this,t);var i=0,o=0,a=0;this.viewports=r.map((function(t){var r=t.from,o=t.to,a=n.lineAt(r,Ln.ByPos,e,0,0).top,s=n.lineAt(o,Ln.ByPos,e,0,0).bottom;return i+=s-a,{from:r,to:o,top:a,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(n.height-i);var s,u=M(this.viewports);try{for(u.s();!(s=u.n()).done;){var l=s.value;l.domTop=a+(l.top-o)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}}catch(h){u.e(h)}finally{u.f()}}return R(t,[{key:"toDOM",value:function(t){for(var e=0,n=0,r=0;;e++){var i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.top)return r+(t-n)*this.scale;if(t<=i.bottom)return i.domTop+(t-i.top);n=i.bottom,r=i.domBottom}}},{key:"fromDOM",value:function(t){for(var e=0,n=0,r=0;;e++){var i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.domTop)return n+(t-r)/this.scale;if(t<=i.domBottom)return i.top+(t-i.domTop);n=i.bottom,r=i.domBottom}}}]),t}();function tr(t,e){if(1==e.scale)return t;var n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Bn(t.from,t.length,n,r-n,Array.isArray(t.type)?t.type.map((function(t){return tr(t,e)})):t.type)}var er=r.r$.define({combine:function(t){return t.join(" ")}}),nr=r.r$.define({combine:function(t){return t.indexOf(!0)>-1}}),rr=o.V.newName(),ir=o.V.newName(),or=o.V.newName(),ar={"&light":"."+ir,"&dark":"."+or};function sr(t,e,n){return new o.V(e,{finish:function(e){return/&/.test(e)?e.replace(/&\w*/,(function(e){if("&"==e)return t;if(!n||!n[e])throw new RangeError("Unsupported selector: ".concat(e));return n[e]})):t+" "+e}})}var ur=sr("."+rr,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ar),lr={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},hr=mt.ie&&mt.ie_version<=11,cr=function(){function t(e,n,r){var i=this;D(this,t),this.view=e,this.onChange=n,this.onScrollChanged=r,this.active=!1,this.selectionRange=new F,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((function(t){var n,r=M(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;i.queue.push(o)}}catch(a){r.e(a)}finally{r.f()}(mt.ie&&mt.ie_version<=11||mt.ios&&e.composing)&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?i.flushSoon():i.flush()})),hr&&(this.onCharData=function(t){i.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),i.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((function(){i.view.docView.lastUpdate<Date.now()-75&&i.resizeTimeout<0&&(i.resizeTimeout=setTimeout((function(){i.resizeTimeout=-1,i.view.requestMeasure()}),50))})),this.resize.observe(e.scrollDOM)),this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((function(t){i.parentCheck<0&&(i.parentCheck=setTimeout(i.listenForScroll.bind(i),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=i.intersecting&&(i.intersecting=!i.intersecting,i.intersecting!=i.view.inView&&i.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((function(t){t.length>0&&t[t.length-1].intersectionRatio>0&&i.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}return R(t,[{key:"onScroll",value:function(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}},{key:"updateGaps",value:function(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((function(e,n){return e!=t[n]})))){this.gapIntersection.disconnect();var e,n=M(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.gapIntersection.observe(r)}}catch(i){n.e(i)}finally{n.f()}this.gaps=t}}},{key:"onSelectionChange",value:function(t){if(this.readSelectionRange()&&!this.delayedAndroidKey){var e=this.view,n=this.selectionRange;if(e.state.facet(ee)?e.root.activeElement==this.dom:L(e.dom,n)){var r=n.anchorNode&&e.docView.nearest(n.anchorNode);r&&r.ignoreEvent(t)||((mt.ie&&mt.ie_version<=11||mt.android&&mt.chrome)&&!e.state.selection.main.empty&&n.focusNode&&N(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}}}},{key:"readSelectionRange",value:function(){var t=this.view.root,e=P(t),n=mt.safari&&11==t.nodeType&&function(){for(var t=document.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}()==this.view.contentDOM&&function(t){var e=null;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;var r=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);if(N(s.node,s.offset,o,a)){var u=[o,a,r,i];r=u[0],i=u[1],o=u[2],a=u[3]}return{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}}(this.view)||e;return!this.selectionRange.eq(n)&&(this.selectionRange.setRange(n),this.selectionChanged=!0)}},{key:"setSelectionRange",value:function(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}},{key:"listenForScroll",value:function(){this.parentCheck=-1;for(var t=0,e=null,n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){var r,i=M(this.scrollTargets);try{for(i.s();!(r=i.n()).done;){r.value.removeEventListener("scroll",this.onScroll)}}catch(s){i.e(s)}finally{i.f()}var o,a=M(this.scrollTargets=e);try{for(a.s();!(o=a.n()).done;){o.value.addEventListener("scroll",this.onScroll)}}catch(s){a.e(s)}finally{a.f()}}}},{key:"ignore",value:function(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}},{key:"start",value:function(){this.active||(this.observer.observe(this.dom,lr),hr&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}},{key:"stop",value:function(){this.active&&(this.active=!1,this.observer.disconnect(),hr&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}},{key:"clear",value:function(){this.observer.takeRecords(),this.queue.length=0,this.selectionChanged=!1}},{key:"delayAndroidKey",value:function(t,e){var n=this;this.delayedAndroidKey||requestAnimationFrame((function(){var t=n.delayedAndroidKey;n.delayedAndroidKey=null;var e=n.view.state;G(n.view.contentDOM,t.key,t.keyCode)?n.processRecords():n.flush(),n.view.state==e&&n.view.update([])})),this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e})}},{key:"flushSoon",value:function(){var t=this;this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((function(){t.delayedFlush=-1,t.flush()}),20))}},{key:"forceFlush",value:function(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}},{key:"processRecords",value:function(){var t,e=this.queue,n=M(this.observer.takeRecords());try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r)}}catch(c){n.e(c)}finally{n.f()}e.length&&(this.queue=[]);var i,o=-1,a=-1,s=!1,u=M(e);try{for(u.s();!(i=u.n()).done;){var l=i.value,h=this.readMutation(l);h&&(h.typeOver&&(s=!0),-1==o?(o=h.from,a=h.to):(o=Math.min(h.from,o),a=Math.max(h.to,a)))}}catch(c){u.e(c)}finally{u.f()}return{from:o,to:a,typeOver:s}}},{key:"flush",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!(this.delayedFlush>=0||this.delayedAndroidKey)){t&&this.readSelectionRange();var e=this.processRecords(),n=e.from,r=e.to,i=e.typeOver,o=this.selectionChanged&&L(this.dom,this.selectionRange);if(!(n<0)||o){this.selectionChanged=!1;var a=this.view.state;this.onChange(n,r,i),this.view.state==a&&this.view.update([])}}}},{key:"readMutation",value:function(t){var e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.dirty|=4),"childList"==t.type){var n=fr(e,t.previousSibling||t.target.previousSibling,-1),r=fr(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}},{key:"destroy",value:function(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();var r,i=M(this.scrollTargets);try{for(i.s();!(r=i.n()).done;){r.value.removeEventListener("scroll",this.onScroll)}}catch(o){i.e(o)}finally{i.f()}window.removeEventListener("scroll",this.onScroll),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}]),t}();function fr(t,e,n){for(;e;){var r=Z.get(e);if(r&&r.parent==t)return r;var i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function dr(t,e,n,i){var o,a,s=t.state.selection.main;if(e>-1){var u=t.docView.domBoundsAround(e,n,0);if(!u||t.state.readOnly)return;var l=u.from,h=u.to,c=t.docView.impreciseHead||t.docView.impreciseAnchor?[]:function(t){var e=[];if(t.root.activeElement!=t.contentDOM)return e;var n=t.observer.selectionRange,r=n.anchorNode,i=n.anchorOffset,o=n.focusNode,a=n.focusOffset;r&&(e.push(new Ve(r,i)),o==r&&a==i||e.push(new Ve(o,a)));return e}(t),f=new Ne(c,t);f.readRange(u.startDOM,u.endDOM),a=function(t,e){if(0==t.length)return null;var n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?r.jT.single(n+e,i+e):null}(c,l);var d=s.from,v=null;(8===t.inputState.lastKeyCode&&t.inputState.lastKeyTime>Date.now()-100||mt.android&&f.text.length<h-l)&&(d=s.to,v="end");var p=function(t,e,n,r){var i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;var a=t.length,s=e.length;for(;a>0&&s>0&&t.charCodeAt(a-1)==e.charCodeAt(s-1);)a--,s--;if("end"==r){n-=a+Math.max(0,o-Math.min(a,s))-o}if(a<o&&t.length<e.length){s=(o-=n<=o&&n>=a?o-n:0)+(s-a),a=o}else if(s<o){a=(o-=n<=o&&n>=s?o-n:0)+(a-s),s=o}return{from:o,toA:a,toB:s}}(t.state.sliceDoc(l,h),f.text,d-l,v);p&&(o={from:l+p.from,to:l+p.toA,insert:t.state.toText(f.text.slice(p.from,p.toB))})}else if(t.hasFocus||!t.state.facet(ee)){var m=t.observer.selectionRange,g=t.docView,y=g.impreciseHead,k=g.impreciseAnchor,b=y&&y.node==m.focusNode&&y.offset==m.focusOffset||!B(t.contentDOM,m.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(m.focusNode,m.focusOffset),w=k&&k.node==m.anchorNode&&k.offset==m.anchorOffset||!B(t.contentDOM,m.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(m.anchorNode,m.anchorOffset);b==s.head&&w==s.anchor||(a=r.jT.single(w,b))}if(o||a)if(!o&&i&&!s.empty&&a&&a.main.empty?o={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:o&&o.from>=s.from&&o.to<=s.to&&(o.from!=s.from||o.to!=s.to)&&s.to-s.from-(o.to-o.from)<=4&&(o={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,o.from).append(o.insert).append(t.state.doc.slice(o.to,s.to))}),o){var x=t.state;if(mt.ios&&t.inputState.flushIOSKey(t))return;if(mt.android&&(o.from==s.from&&o.to==s.to&&1==o.insert.length&&2==o.insert.lines&&G(t.contentDOM,"Enter",13)||o.from==s.from-1&&o.to==s.to&&0==o.insert.length&&G(t.contentDOM,"Backspace",8)||o.from==s.from&&o.to==s.to+1&&0==o.insert.length&&G(t.contentDOM,"Delete",46)))return;var S,A=o.insert.toString();if(t.state.facet(Jt).some((function(e){return e(t,o.from,o.to,A)})))return;if(t.inputState.composing>=0&&t.inputState.composing++,o.from>=s.from&&o.to<=s.to&&o.to-o.from>=(s.to-s.from)/3&&(!a||a.main.empty&&a.main.from==o.from+o.insert.length)&&t.inputState.composing<0){var C=s.from<o.from?x.sliceDoc(s.from,o.from):"",M=s.to>o.to?x.sliceDoc(o.to,s.to):"";S=x.replaceSelection(t.state.toText(C+o.insert.sliceString(0,void 0,t.state.lineBreak)+M))}else{var O=x.changes(o),T=a&&!x.selection.main.eq(a.main)&&a.main.to<=O.newLength?a.main:void 0;if(x.selection.ranges.length>1&&t.inputState.composing>=0&&o.to<=s.to&&o.to>=s.to-10){var D=t.state.sliceDoc(o.from,o.to),E=We(t)||t.state.doc.lineAt(s.head),R=s.to-o.to,P=s.to-s.from;S=x.changeByRange((function(e){if(e.from==s.from&&e.to==s.to)return{changes:O,range:T||e.map(O)};var n=e.to-R,i=n-D.length;if(e.to-e.from!=P||t.state.sliceDoc(i,n)!=D||E&&e.to>=E.from&&e.from<=E.to)return{range:e};var a=x.changes({from:i,to:n,insert:o.insert}),u=e.to-s.to;return{changes:a,range:T?r.jT.range(Math.max(0,T.anchor+u),Math.max(0,T.head+u)):e.map(a)}}))}else S={changes:O,selection:T&&x.selection.replaceRange(T)}}var L="input.type";t.composing&&(L+=".compose",t.inputState.compositionFirstChange&&(L+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(S,{scrollIntoView:!0,userEvent:L})}else if(a&&!a.main.eq(s)){var I=!1,N="select";t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(I=!0),N=t.inputState.lastSelectionOrigin),t.dispatch({selection:a,scrollIntoView:I,userEvent:N})}}var vr=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D(this,t),this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=n.dispatch||function(t){return e.update([t])},this.dispatch=this.dispatch.bind(this),this.root=n.root||J(n.parent)||document,this.viewState=new Kn(n.state||r.yy.create()),this.plugins=this.state.facet(oe).map((function(t){return new ue(t)}));var i,o=M(this.plugins);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.update(this)}}catch(s){o.e(s)}finally{o.f()}this.observer=new cr(this,(function(t,n,r){dr(e,t,n,r)}),(function(t){e.inputState.runScrollHandlers(e,t),e.observer.intersecting&&e.measure()})),this.inputState=new un(this),this.docView=new He(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,yr(),this.requestMeasure(),n.parent&&n.parent.appendChild(this.dom)}return R(t,[{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing>0}},{key:"dispatch",value:function(){var t;this._dispatch(1==arguments.length&&(arguments.length<=0?void 0:arguments[0])instanceof r.YW?arguments.length<=0?void 0:arguments[0]:(t=this.state).update.apply(t,arguments))}},{key:"update",value:function(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");var e,n,i=!1,o=this.state,a=M(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=s.state}}catch(y){a.e(y)}finally{a.f()}if(this.destroyed)this.viewState.state=o;else{if(o.facet(r.yy.phrases)!=this.state.facet(r.yy.phrases))return this.setState(o);e=new ve(this,o,t);var u=this.viewState.scrollTarget;try{this.updateState=2;var l,h=M(t);try{for(h.s();!(l=h.n()).done;){var c=l.value;if(u&&(u=u.map(c.changes)),c.scrollIntoView){var f=c.state.selection.main;u=new Yt(f.empty?f:r.jT.cursor(f.head,f.head>f.anchor?-1:1))}var d,v=M(c.effects);try{for(v.s();!(d=v.n()).done;){var p=d.value;p.is(Xt)?u=new Yt(p.value):p.is(Qt)?u=new Yt(p.value,"center"):p.is(Zt)&&(u=p.value)}}catch(y){v.e(y)}finally{v.f()}}}catch(y){h.e(y)}finally{h.f()}this.viewState.update(e,u),this.bidiCache=wr.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),i=this.docView.update(e),this.state.facet(fe)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(i,t.some((function(t){return t.isUserEvent("select.pointer")})))}finally{this.updateState=0}if((i||u||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure(),!e.empty){var m,g=M(this.state.facet(Gt));try{for(g.s();!(m=g.n()).done;){(0,m.value)(e)}}catch(y){g.e(y)}finally{g.f()}}}}},{key:"setState",value:function(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)this.viewState.state=t;else{this.updateState=2;var e=this.hasFocus;try{var n,r=M(this.plugins);try{for(r.s();!(n=r.n()).done;){n.value.destroy(this)}}catch(a){r.e(a)}finally{r.f()}this.viewState=new Kn(t),this.plugins=t.facet(oe).map((function(t){return new ue(t)})),this.pluginMap.clear();var i,o=M(this.plugins);try{for(o.s();!(i=o.n()).done;){i.value.update(this)}}catch(a){o.e(a)}finally{o.f()}this.docView=new He(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}}},{key:"updatePlugins",value:function(t){var e=t.startState.facet(oe),n=t.state.facet(oe);if(e!=n){var r,i=[],o=M(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=e.indexOf(a);if(s<0)i.push(new ue(a));else{var u=this.plugins[s];u.mustUpdate=t,i.push(u)}}}catch(p){o.e(p)}finally{o.f()}var l,h=M(this.plugins);try{for(h.s();!(l=h.n()).done;){var c=l.value;c.mustUpdate!=t&&c.destroy(this)}}catch(p){h.e(p)}finally{h.f()}this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this)}else{var f,d=M(this.plugins);try{for(d.s();!(f=d.n()).done;){f.value.mustUpdate=t}}catch(p){d.e(p)}finally{d.f()}}for(var v=0;v<this.plugins.length;v++)this.plugins[v].update(this)}},{key:"measure",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.destroyed){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();var n=null;try{for(var r=0;;r++){this.updateState=1;var i=this.viewport,o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(r>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var a=[];if(!(4&o)){var s=[a,this.measureRequests];this.measureRequests=s[0],a=s[1]}var u=a.map((function(e){try{return e.read(t)}catch(n){return te(t.state,n),br}})),l=new ve(this,this.state),h=!1,c=!1;l.flags|=o,n?n.flags|=o:n=l,this.updateState=2,l.empty||(this.updatePlugins(l),this.inputState.update(l),this.updateAttrs(),h=this.docView.update(l));for(var f=0;f<a.length;f++)if(u[f]!=br)try{var d=a[f];d.write&&d.write(u[f],this)}catch(g){te(this.state,g)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,c=!0),h&&this.docView.updateSelection(!0),this.viewport.from==i.from&&this.viewport.to==i.to&&!c&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty){var v,p=M(this.state.facet(Gt));try{for(p.s();!(v=p.n()).done;){var m=v.value;m(n)}}catch(y){p.e(y)}finally{p.f()}}}}},{key:"themeClasses",get:function(){return rr+" "+(this.state.facet(nr)?or:ir)+" "+this.state.facet(er)}},{key:"updateAttrs",value:function(){var t=this,e=xr(this,le,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ee)?"true":"false",class:"cm-content",style:"".concat(mt.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),xr(this,he,n),this.observer.ignore((function(){Dt(t.contentDOM,t.contentAttrs,n),Dt(t.dom,t.editorAttrs,e)})),this.editorAttrs=e,this.contentAttrs=n}},{key:"showAnnouncements",value:function(e){var n,r=!0,i=M(e);try{for(i.s();!(n=i.n()).done;){var o,a=M(n.value.effects);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.is(t.announce))r&&(this.announceDOM.textContent=""),r=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=s.value}}catch(u){a.e(u)}finally{a.f()}}}catch(u){i.e(u)}finally{i.f()}}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(fe),o.V.mount(this.root,this.styleModules.concat(ur).reverse())}},{key:"readMeasured",value:function(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}},{key:"requestMeasure",value:function(t){var e=this;if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((function(){return e.measure()}))),t){if(null!=t.key)for(var n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===t.key)return void(this.measureRequests[n]=t);this.measureRequests.push(t)}}},{key:"pluginField",value:function(t){var e,n=[],r=M(this.plugins);try{for(r.s();!(e=r.n()).done;){e.value.update(this).takeField(t,n)}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"plugin",value:function(t){var e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((function(e){return e.spec==t}))||null),e&&e.update(this).value}},{key:"documentTop",get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}},{key:"documentPadding",get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}},{key:"blockAtHeight",value:function(t,e){var n=mr(e,this);return this.elementAtHeight(t-n).moveY(n)}},{key:"elementAtHeight",value:function(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}},{key:"visualLineAtHeight",value:function(t,e){var n=mr(e,this);return this.lineBlockAtHeight(t-n).moveY(n)}},{key:"lineBlockAtHeight",value:function(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}},{key:"viewportLines",value:function(t,e){var n,r=mr(e,this),i=M(this.viewportLineBlocks);try{for(i.s();!(n=i.n()).done;){t(n.value.moveY(r))}}catch(o){i.e(o)}finally{i.f()}}},{key:"viewportLineBlocks",get:function(){return this.viewState.viewportLines}},{key:"visualLineAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.lineBlockAt(t).moveY(e+this.viewState.paddingTop)}},{key:"lineBlockAt",value:function(t){return this.viewState.lineBlockAt(t)}},{key:"contentHeight",get:function(){return this.viewState.contentHeight}},{key:"moveByChar",value:function(t,e,n){return sn(this,t,an(this,t,e,n))}},{key:"moveByGroup",value:function(t,e){var n=this;return sn(this,t,an(this,t,e,(function(e){return function(t,e,n){var i=t.state.charCategorizer(e),o=i(n);return function(t){var e=i(t);return o==r.D0.Space&&(o=e),o==e}}(n,t.head,e)})))}},{key:"moveToLineBoundary",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return on(this,t,e,n)}},{key:"moveVertically",value:function(t,e,n){return sn(this,t,function(t,e,n,i){var o=e.head,a=n?1:-1;if(o==(n?t.state.doc.length:0))return r.jT.cursor(o,e.assoc);var s,u=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),h=t.coordsAtPos(o),c=t.documentTop;if(h)null==u&&(u=h.left-l.left),s=a<0?h.top:h.bottom;else{var f=t.viewState.lineBlockAt(o-c);null==u&&(u=Math.min(l.right-l.left,t.defaultCharacterWidth*(o-f.from))),s=(a<0?f.top:f.bottom)+c}for(var d=l.left+u,v=null!=i?i:t.defaultLineHeight>>1,p=0;;p+=10){var m=s+(v+p)*a,g=en(t,{x:d,y:m},!1,a);if(m<l.top||m>l.bottom||(a<0?g<o:g>o))return r.jT.cursor(g,e.assoc,void 0,u)}}(this,t,e,n))}},{key:"scrollPosIntoView",value:function(t){this.dispatch({effects:Xt.of(r.jT.cursor(t))})}},{key:"domAtPos",value:function(t){return this.docView.domAtPos(t)}},{key:"posAtDOM",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(t,e)}},{key:"posAtCoords",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.readMeasured(),en(this,t,e)}},{key:"coordsAtPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();var n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;var r=this.state.doc.lineAt(t),i=this.bidiSpans(r),o=i[Ee.find(i,t-r.from,-1,e)];return _(n,o.dir==pe.LTR==e>0)}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"bidiSpans",value:function(t){if(t.length>pr)return Be(t.length);var e,n=this.textDirection,r=M(this.bidiCache);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.from==t.from&&i.dir==n)return i.order}}catch(a){r.e(a)}finally{r.f()}var o=Pe(t.text,this.textDirection);return this.bidiCache.push(new wr(t.from,t.to,n,o)),o}},{key:"hasFocus",get:function(){var t;return(document.hasFocus()||mt.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}},{key:"focus",value:function(){var t=this;this.observer.ignore((function(){U(t.contentDOM),t.docView.updateSelection()}))}},{key:"destroy",value:function(){var t,e=M(this.plugins);try{for(e.s();!(t=e.n()).done;){t.value.destroy(this)}}catch(n){e.e(n)}finally{e.f()}this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}}],[{key:"scrollIntoView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Zt.of(new Yt("number"==typeof t?r.jT.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}},{key:"domEventHandlers",value:function(t){return ae.define((function(){return{}}),{eventHandlers:t})}},{key:"theme",value:function(t,e){var n=o.V.newName(),r=[er.of(n),fe.of(sr(".".concat(n),t))];return e&&e.dark&&r.push(nr.of(!0)),r}},{key:"baseTheme",value:function(t){return r.Wl.lowest(fe.of(sr("."+rr,t,ar)))}}]),t}();vr.scrollTo=Xt,vr.centerOn=Qt,vr.styleModule=fe,vr.inputHandler=Jt,vr.exceptionSink=Kt,vr.updateListener=Gt,vr.editable=ee,vr.mouseSelectionStyle=Ut,vr.dragMovesSelection=$t,vr.clickAddsSelectionRange=Ft,vr.decorations=ce,vr.darkTheme=nr,vr.contentAttributes=he,vr.editorAttributes=le,vr.lineWrapping=vr.contentAttributes.of({class:"cm-lineWrapping"}),vr.announce=r.Py.define();var pr=4096;function mr(t,e){return(null==t?e.contentDOM.getBoundingClientRect().top:t)+e.viewState.paddingTop}var gr=-1;function yr(){window.addEventListener("resize",(function(){-1==gr&&(gr=setTimeout(kr,50))}))}function kr(){gr=-1;for(var t=document.querySelectorAll(".cm-content"),e=0;e<t.length;e++){var n=Z.get(t[e]);n&&n.editorView.requestMeasure()}}var br={},wr=function(){function t(e,n,r,i){D(this,t),this.from=e,this.to=n,this.dir=r,this.order=i}return R(t,null,[{key:"update",value:function(e,n){if(n.empty)return e;for(var r=[],i=e.length?e[e.length-1].dir:pe.LTR,o=Math.max(0,e.length-10);o<e.length;o++){var a=e[o];a.dir!=i||n.touchesRange(a.from,a.to)||r.push(new t(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.order))}return r}}]),t}();function xr(t,e,n){for(var r=t.state.facet(e),i=r.length-1;i>=0;i--){var o=r[i],a="function"==typeof o?o(t):o;a&&Ot(a,n)}return n}var Sr=mt.mac?"mac":mt.windows?"win":mt.linux?"linux":"key";function Ar(t,e){var n,r,i,o,a=t.split(/-(?!$)/),s=a[a.length-1];"Space"==s&&(s=" ");for(var u=0;u<a.length-1;++u){var l=a[u];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))i=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);"mac"==e?o=!0:r=!0}}return n&&(s="Alt-"+s),r&&(s="Ctrl-"+s),o&&(s="Meta-"+s),i&&(s="Shift-"+s),s}function Cr(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}var Mr=vr.domEventHandlers({keydown:function(t,e){return Br(Dr(e.state),t,e,"editor")}}),Or=r.r$.define({enables:Mr}),Tr=new WeakMap;function Dr(t){var e=t.facet(Or),n=Tr.get(e);return n||Tr.set(e,n=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sr,r=Object.create(null),i=Object.create(null),o=function(t,e){var n=i[t];if(null==n)i[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},a=function(t,e,i,a){for(var s=r[t]||(r[t]=Object.create(null)),u=e.split(/ (?!$)/).map((function(t){return Ar(t,n)})),l=function(e){var n=u.slice(0,e).join(" ");o(n,!0),s[n]||(s[n]={preventDefault:!0,commands:[function(e){var r=Rr={view:e,prefix:n,scope:t};return setTimeout((function(){Rr==r&&(Rr=null)}),Pr),!0}]})},h=1;h<u.length;h++)l(h);var c=u.join(" ");o(c,!1);var f=s[c]||(s[c]={preventDefault:!1,commands:[]});f.commands.push(i),a&&(f.preventDefault=!0)},s=M(t);try{for(s.s();!(e=s.n()).done;){var u=e.value,l=u[n]||u.key;if(l){var h,c=M(u.scope?u.scope.split(" "):["editor"]);try{for(c.s();!(h=c.n()).done;){var f=h.value;a(f,l,u.run,u.preventDefault),u.shift&&a(f,"Shift-"+l,u.shift,u.preventDefault)}}catch(d){c.e(d)}finally{c.f()}}}}catch(d){s.e(d)}finally{s.f()}return r}(e.reduce((function(t,e){return t.concat(e)}),[]))),n}function Er(t,e,n){return Br(Dr(t.state),e,t,n)}var Rr=null,Pr=4e3;function Br(t,e,n,r){var i=function(t){var e=!(v&&(t.ctrlKey||t.altKey||t.metaKey)||(h||d)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?u:s)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),o=1==i.length&&" "!=i,a="",l=!1;Rr&&Rr.view==n&&Rr.scope==r&&(a=Rr.prefix+" ",(l=hn.indexOf(e.keyCode)<0)&&(Rr=null));var c,f=function(t){if(t){var e,r=M(t.commands);try{for(r.s();!(e=r.n()).done;){if((0,e.value)(n))return!0}}catch(i){r.e(i)}finally{r.f()}t.preventDefault&&(l=!0)}return!1},p=t[r];if(p){if(f(p[a+Cr(i,e,!o)]))return!0;if(o&&(e.shiftKey||e.altKey||e.metaKey)&&(c=s[e.keyCode])&&c!=i){if(f(p[a+Cr(c,e,!0)]))return!0}else if(o&&e.shiftKey&&f(p[a+Cr(i,e,!0)]))return!0}return l}var Lr=!mt.ios,Ir=r.r$.define({combine:function(t){return(0,r.BO)(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(t,e){return Math.min(t,e)},drawRangeCursor:function(t,e){return t||e}})}});function Nr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Ir.of(t),Vr,zr]}var jr=function(){function t(e,n,r,i,o){D(this,t),this.left=e,this.top=n,this.width=r,this.height=i,this.className=o}return R(t,[{key:"draw",value:function(){var t=document.createElement("div");return t.className=this.className,this.adjust(t),t}},{key:"adjust",value:function(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width>=0&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}},{key:"eq",value:function(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}}]),t}(),Vr=ae.fromClass(function(){function t(e){D(this,t),this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}return R(t,[{key:"setBlinkRate",value:function(){this.cursorLayer.style.animationDuration=this.view.state.facet(Ir).cursorBlinkRate+"ms"}},{key:"update",value:function(t){var e=t.startState.facet(Ir)!=t.state.facet(Ir);(e||t.selectionSet||t.geometryChanged||t.viewportChanged)&&this.view.requestMeasure(this.measureReq),t.transactions.some((function(t){return t.scrollIntoView}))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}},{key:"readPos",value:function(){var t,e=this,n=this.view.state,r=n.facet(Ir),i=n.selection.ranges.map((function(t){return t.empty?[]:function(t,e){if(e.to<=t.viewport.from||e.from>=t.viewport.to)return[];var n=Math.max(e.from,t.viewport.from),r=Math.min(e.to,t.viewport.to),i=t.textDirection==pe.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),s=_r(t),u=window.getComputedStyle(o.firstChild),l=a.left+parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)),h=a.right-parseInt(u.paddingRight),c=qr(t,n),f=qr(t,r),d=c.type==Rt.Text?c:null,v=f.type==Rt.Text?f:null;t.lineWrapping&&(d&&(d=Wr(t,n,d)),v&&(v=Wr(t,r,v)));if(d&&v&&d.from==v.from)return k(b(e.from,e.to,d));var p=d?b(e.from,null,d):w(c,!1),m=v?b(null,e.to,v):w(f,!0),g=[];return(d||c).to<(v||f).from-1?g.push(y(l,p.bottom,h,m.top)):p.bottom<m.top&&t.elementAtHeight((p.bottom+m.top)/2).type==Rt.Text&&(p.bottom=m.top=(p.bottom+m.top)/2),k(p).concat(g).concat(k(m));function y(t,e,n,r){return new jr(t-s.left,e-s.top-.01,n-t,r-e+.01,"cm-selectionBackground")}function k(t){for(var e=t.top,n=t.bottom,r=t.horizontal,i=[],o=0;o<r.length;o+=2)i.push(y(r[o],e,r[o+1],n));return i}function b(e,n,r){var o=1e9,a=-1e9,s=[];function u(e,n,u,c,f){var d=t.coordsAtPos(e,e==r.to?-2:2),v=t.coordsAtPos(u,u==r.from?2:-2);o=Math.min(d.top,v.top,o),a=Math.max(d.bottom,v.bottom,a),f==pe.LTR?s.push(i&&n?l:d.left,i&&c?h:v.right):s.push(!i&&c?l:v.left,!i&&n?h:d.right)}var c,f=null!=e?e:r.from,d=null!=n?n:r.to,v=M(t.visibleRanges);try{for(v.s();!(c=v.n()).done;){var p=c.value;if(p.to>f&&p.from<d)for(var m=Math.max(p.from,f),g=Math.min(p.to,d);;){var y,k=t.state.doc.lineAt(m),b=M(t.bidiSpans(k));try{for(b.s();!(y=b.n()).done;){var w=y.value,x=w.from+k.from,S=w.to+k.from;if(x>=g)break;S>m&&u(Math.max(x,m),null==e&&x<=f,Math.min(S,g),null==n&&S>=d,w.dir)}}catch(A){b.e(A)}finally{b.f()}if((m=k.to+1)>=g)break}}}catch(A){v.e(A)}finally{v.f()}return 0==s.length&&u(f,null==e,d,null==n,t.textDirection),{top:o,bottom:a,horizontal:s}}function w(t,e){var n=a.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}(e.view,t)})).reduce((function(t,e){return t.concat(e)})),o=[],a=M(n.selection.ranges);try{for(a.s();!(t=a.n()).done;){var s=t.value,u=s==n.selection.main;if(s.empty?!u||Lr:r.drawRangeCursor){var l=Fr(this.view,s,u);l&&o.push(l)}}}catch(h){a.e(h)}finally{a.f()}return{rangePieces:i,cursors:o}}},{key:"drawSel",value:function(t){var e=this,n=t.rangePieces,r=t.cursors;if(n.length!=this.rangePieces.length||n.some((function(t,n){return!t.eq(e.rangePieces[n])}))){this.selectionLayer.textContent="";var i,o=M(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.selectionLayer.appendChild(a.draw())}}catch(c){o.e(c)}finally{o.f()}this.rangePieces=n}if(r.length!=this.cursors.length||r.some((function(t,n){return!t.eq(e.cursors[n])}))){var s=this.cursorLayer.children;if(s.length!==r.length){this.cursorLayer.textContent="";var u,l=M(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;this.cursorLayer.appendChild(h.draw())}}catch(c){l.e(c)}finally{l.f()}}else r.forEach((function(t,e){return t.adjust(s[e])}));this.cursors=r}}},{key:"destroy",value:function(){this.selectionLayer.remove(),this.cursorLayer.remove()}}]),t}()),Hr={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Lr&&(Hr[".cm-line"].caretColor="transparent !important");var zr=r.Wl.highest(vr.theme(Hr));function _r(t){var e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==pe.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function Wr(t,e,n){var i=r.jT.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:Rt.Text}}function qr(t,e){var n=t.lineBlockAt(e);if(Array.isArray(n.type)){var r,i=M(n.type);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.to>e||o.to==e&&(o.to==n.to||o.type==Rt.Text))return o}}catch(a){i.e(a)}finally{i.f()}}return n}function Fr(t,e,n){var r=t.coordsAtPos(e.head,e.assoc||1);if(!r)return null;var i=_r(t);return new jr(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function $r(){return Kr}var Ur=Pt.line({class:"cm-activeLine"}),Kr=ae.fromClass(function(){function t(e){D(this,t),this.decorations=this.getDeco(e)}return R(t,[{key:"update",value:function(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}},{key:"getDeco",value:function(t){var e,n=-1,r=[],i=M(t.state.selection.ranges);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(!o.empty)return Pt.none;var a=t.lineBlockAt(o.head);a.from>n&&(r.push(Ur.range(a.from)),n=a.from)}}catch(s){i.e(s)}finally{i.f()}return Pt.set(r)}}]),t}(),{decorations:function(t){return t.decorations}})},97248:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{md:function(){return f},Lj:function(){return p},Jq:function(){return v},_b:function(){return P},mp:function(){return g},i9:function(){return R}});var h=0,c=function t(e,n){l(this,t),this.from=e,this.to=n},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,t),this.id=h++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||function(){throw new Error("This node type doesn't define a deserialize function")}}return u(t,[{key:"add",value:function(t){var e=this;if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=v.match(t)),function(n){var r=t(n);return void 0===r?null:[e,r]}}}]),t}();f.closedBy=new f({deserialize:function(t){return t.split(" ")}}),f.openedBy=new f({deserialize:function(t){return t.split(" ")}}),f.group=new f({deserialize:function(t){return t.split(" ")}}),f.contextHash=new f({perNode:!0}),f.lookAhead=new f({perNode:!0}),f.mounted=new f({perNode:!0});var d=Object.create(null),v=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;l(this,t),this.name=e,this.props=n,this.id=r,this.flags=i}return u(t,[{key:"prop",value:function(t){return this.props[t.id]}},{key:"isTop",get:function(){return(1&this.flags)>0}},{key:"isSkipped",get:function(){return(2&this.flags)>0}},{key:"isError",get:function(){return(4&this.flags)>0}},{key:"isAnonymous",get:function(){return(8&this.flags)>0}},{key:"is",value:function(t){if("string"==typeof t){if(this.name==t)return!0;var e=this.prop(f.group);return!!e&&e.indexOf(t)>-1}return this.id==t}}],[{key:"define",value:function(e){var n=e.props&&e.props.length?Object.create(null):d,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),o=new t(e.name||"",n,e.id,r);if(e.props){var a,s=i(e.props);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(Array.isArray(u)||(u=u(o)),u){if(u[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[u[0].id]=u[1]}}}catch(l){s.e(l)}finally{s.f()}}return o}},{key:"match",value:function(t){var e=Object.create(null);for(var n in t){var r,o=i(n.split(" "));try{for(o.s();!(r=o.n()).done;){var a=r.value;e[a]=t[n]}}catch(s){o.e(s)}finally{o.f()}}return function(t){for(var n=t.prop(f.group),r=-1;r<(n?n.length:0);r++){var i=e[r<0?t.name:n[r]];if(i)return i}}}}]),t}();v.none=new v("",Object.create(null),0,8);var p=function(){function t(e){l(this,t),this.types=e;for(var n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}return u(t,[{key:"extend",value:function(){for(var e=[],n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a,s=i(this.types);try{for(s.s();!(a=s.n()).done;){var u,l=a.value,h=null,c=i(r);try{for(c.s();!(u=c.n()).done;){var f=u.value,d=f(l);d&&(h||(h=Object.assign({},l.props)),h[d[0].id]=d[1])}}catch(p){c.e(p)}finally{c.f()}e.push(h?new v(l.name,h,l.id,l.flags):l)}}catch(p){s.e(p)}finally{s.f()}return new t(e)}}]),t}(),m=new WeakMap,g=function(){function t(e,n,o,a,s){if(l(this,t),this.type=e,this.children=n,this.positions=o,this.length=a,this.props=null,s&&s.length){this.props=Object.create(null);var u,h=i(s);try{for(h.s();!(u=h.n()).done;){var c=r(u.value,2),f=c[0],d=c[1];this.props["number"==typeof f?f:f.id]=d}}catch(v){h.e(v)}finally{h.f()}}}return u(t,[{key:"toString",value:function(){var t=this.prop(f.mounted);if(t&&!t.overlay)return t.tree.toString();var e,n="",r=i(this.children);try{for(r.s();!(e=r.n()).done;){var o=e.value.toString();o&&(n&&(n+=","),n+=o)}}catch(a){r.e(a)}finally{r.f()}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}},{key:"cursor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null!=t&&m.get(this)||this.topNode,r=new C(n);return null!=t&&(r.moveTo(t,e),m.set(this,r._tree)),r}},{key:"fullCursor",value:function(){return new C(this.topNode,1)}},{key:"topNode",get:function(){return new w(this,0,0,null)}},{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.cursor(t,e).node}},{key:"resolveInner",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.topNode;;){var r=n.enter(t,e);if(!r)return n;n=r}}},{key:"iterate",value:function(t){for(var e=t.enter,n=t.leave,r=t.from,i=void 0===r?0:r,o=t.to,a=void 0===o?this.length:o,s=this.cursor(),u=function(){return s.node};;){var l=!1;if(s.from<=a&&s.to>=i&&(s.type.isAnonymous||!1!==e(s.type,s.from,s.to,u))){if(s.firstChild())continue;s.type.isAnonymous||(l=!0)}for(;l&&n&&n(s.type,s.from,s.to,u),l=s.type.isAnonymous,!s.nextSibling();){if(!s.parent())return;l=!0}}}},{key:"prop",value:function(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}},{key:"propValues",get:function(){var t=[];if(this.props)for(var e in this.props)t.push([+e,this.props[e]]);return t}},{key:"balance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:E(this.type,this.children,this.positions,0,this.children.length,0,this.length,(function(n,r,i){return new t(e.type,n,r,i,e.propValues)}),n.makeTree||function(e,n,r){return new t(v.none,e,n,r)})}}],[{key:"build",value:function(t){return O(t)}}]),t}();g.empty=new g(v.none,[],[],0);var y=function(){function t(e,n){l(this,t),this.buffer=e,this.index=n}return u(t,[{key:"id",get:function(){return this.buffer[this.index-4]}},{key:"start",get:function(){return this.buffer[this.index-3]}},{key:"end",get:function(){return this.buffer[this.index-2]}},{key:"size",get:function(){return this.buffer[this.index-1]}},{key:"pos",get:function(){return this.index}},{key:"next",value:function(){this.index-=4}},{key:"fork",value:function(){return new t(this.buffer,this.index)}}]),t}(),k=function(){function t(e,n,r){l(this,t),this.buffer=e,this.length=n,this.set=r}return u(t,[{key:"type",get:function(){return v.none}},{key:"toString",value:function(){for(var t=[],e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}},{key:"childString",value:function(t){var e=this.buffer[t],n=this.buffer[t+3],r=this.set.types[e],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(t+=4))return i;for(var o=[];t<n;)o.push(this.childString(t)),t=this.buffer[t+3];return i+"("+o.join(",")+")"}},{key:"findChild",value:function(t,e,n,r,i){for(var o=this.buffer,a=-1,s=t;s!=e&&!(b(i,r,o[s+1],o[s+2])&&(a=s,n>0));s=o[s+3]);return a}},{key:"slice",value:function(e,n,r,i){for(var o=this.buffer,a=new Uint16Array(n-e),s=e,u=0;s<n;)a[u++]=o[s++],a[u++]=o[s++]-r,a[u++]=o[s++]-r,a[u++]=o[s++]-e;return new t(a,i-r,this.set)}}]),t}();function b(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}var w=function(){function t(e,n,r,i){l(this,t),this.node=e,this._from=n,this.index=r,this._parent=i}return u(t,[{key:"type",get:function(){return this.node.type}},{key:"name",get:function(){return this.node.type.name}},{key:"from",get:function(){return this._from}},{key:"to",get:function(){return this._from+this.node.length}},{key:"nextChild",value:function(e,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this;;){for(var s=a.node,u=s.children,l=s.positions,h=n>0?u.length:-1;e!=h;e+=n){var c=u[e],d=l[e]+a._from;if(b(i,r,d,d+c.length))if(c instanceof k){if(2&o)continue;var v=c.findChild(0,c.buffer.length,n,r-d,i);if(v>-1)return new A(new S(a,c,e,d),null,v)}else if(1&o||!c.type.isAnonymous||M(c)){var p=void 0;if(c.props&&(p=c.prop(f.mounted))&&!p.overlay)return new t(p.tree,d,e,a);var m=new t(c,d,e,a);return 1&o||!m.type.isAnonymous?m:m.nextChild(n<0?c.children.length-1:0,n,r,i)}}if(1&o||!a.type.isAnonymous)return null;if(e=a.index>=0?a.index+n:n<0?-1:a._parent.node.children.length,!(a=a._parent))return null}}},{key:"firstChild",get:function(){return this.nextChild(0,1,0,4)}},{key:"lastChild",get:function(){return this.nextChild(this.node.children.length-1,-1,0,4)}},{key:"childAfter",value:function(t){return this.nextChild(0,1,t,2)}},{key:"childBefore",value:function(t){return this.nextChild(this.node.children.length-1,-1,t,-2)}},{key:"enter",value:function(e,n){var r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(o&&(r=this.node.prop(f.mounted))&&r.overlay){var s,u=e-this.from,l=i(r.overlay);try{for(l.s();!(s=l.n()).done;){var h=s.value,c=h.from,d=h.to;if((n>0?c<=u:c<u)&&(n<0?d>=u:d>u))return new t(r.tree,r.overlay[0].from+this.from,-1,this)}}catch(v){l.e(v)}finally{l.f()}}return this.nextChild(0,1,e,n,a?0:2)}},{key:"nextSignificantParent",value:function(){for(var t=this;t.type.isAnonymous&&t._parent;)t=t._parent;return t}},{key:"parent",get:function(){return this._parent?this._parent.nextSignificantParent():null}},{key:"nextSibling",get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}},{key:"prevSibling",get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}},{key:"cursor",get:function(){return new C(this)}},{key:"tree",get:function(){return this.node}},{key:"toTree",value:function(){return this.node}},{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.cursor.moveTo(t,e).node}},{key:"getChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=x(this,t,e,n);return r.length?r[0]:null}},{key:"getChildren",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return x(this,t,e,n)}},{key:"toString",value:function(){return this.node.toString()}}]),t}();function x(t,e,n,r){var i=t.cursor,o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}var S=function t(e,n,r,i){l(this,t),this.parent=e,this.buffer=n,this.index=r,this.start=i},A=function(){function t(e,n,r){l(this,t),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}return u(t,[{key:"name",get:function(){return this.type.name}},{key:"from",get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]}},{key:"to",get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]}},{key:"child",value:function(e,n,r){var i=this.context.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new t(this.context,this,o)}},{key:"firstChild",get:function(){return this.child(1,0,4)}},{key:"lastChild",get:function(){return this.child(-1,0,4)}},{key:"childAfter",value:function(t){return this.child(1,t,2)}},{key:"childBefore",value:function(t){return this.child(-1,t,-2)}},{key:"enter",value:function(e,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!i)return null;var o=this.context.buffer,a=o.findChild(this.index+4,o.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return a<0?null:new t(this.context,this,a)}},{key:"parent",get:function(){return this._parent||this.context.parent.nextSignificantParent()}},{key:"externalSibling",value:function(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}},{key:"nextSibling",get:function(){var e=this.context.buffer,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new t(this.context,this._parent,n):this.externalSibling(1)}},{key:"prevSibling",get:function(){var e=this.context.buffer,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new t(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}},{key:"cursor",get:function(){return new C(this)}},{key:"tree",get:function(){return null}},{key:"toTree",value:function(){var t=[],e=[],n=this.context.buffer,r=this.index+4,i=n.buffer[this.index+3];if(i>r){var o=n.buffer[this.index+1],a=n.buffer[this.index+2];t.push(n.slice(r,i,o,a)),e.push(0)}return new g(this.type,t,e,this.to-this.from)}},{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.cursor.moveTo(t,e).node}},{key:"toString",value:function(){return this.context.buffer.childString(this.index)}},{key:"getChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=x(this,t,e,n);return r.length?r[0]:null}},{key:"getChildren",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return x(this,t,e,n)}}]),t}(),C=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(l(this,t),this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof w)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(var r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}return u(t,[{key:"name",get:function(){return this.type.name}},{key:"yieldNode",value:function(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}},{key:"yieldBuf",value:function(t,e){this.index=t;var n=this.buffer,r=n.start,i=n.buffer;return this.type=e||i.set.types[i.buffer[t]],this.from=r+i.buffer[t+1],this.to=r+i.buffer[t+2],!0}},{key:"yield",value:function(t){return!!t&&(t instanceof w?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}},{key:"toString",value:function(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}},{key:"enterChild",value:function(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree.node.children.length-1:0,t,e,n,this.mode));var r=this.buffer.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}},{key:"firstChild",value:function(){return this.enterChild(1,0,4)}},{key:"lastChild",value:function(){return this.enterChild(-1,0,4)}},{key:"childAfter",value:function(t){return this.enterChild(1,t,2)}},{key:"childBefore",value:function(t){return this.enterChild(-1,t,-2)}},{key:"enter",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.buffer?!!r&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n,r))}},{key:"parent",value:function(){if(!this.buffer)return this.yieldNode(1&this.mode?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var t=1&this.mode?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}},{key:"sibling",value:function(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));var e=this.buffer.buffer,n=this.stack.length-1;if(t<0){var r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(e.findChild(r,this.index,-1,0,4))}else{var i=e.buffer[this.index+3];if(i<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}},{key:"nextSibling",value:function(){return this.sibling(1)}},{key:"prevSibling",value:function(){return this.sibling(-1)}},{key:"atLastNode",value:function(t){var e,n,r=this.buffer;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(var i=0;i<this.index;i++)if(r.buffer.buffer[i+3]<this.index)return!1;e=r.index,n=r.parent}else{var o=this._tree;e=o.index,n=o._parent}for(;n;e=(a=n).index,n=a._parent,a){var a;if(e>-1)for(var s=e+t,u=t<0?-1:n.node.children.length;s!=u;s+=t){var l=n.node.children[s];if(1&this.mode||l instanceof k||!l.type.isAnonymous||M(l))return!1}}return!0}},{key:"move",value:function(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}},{key:"next",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,t)}},{key:"prev",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,t)}},{key:"moveTo",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}},{key:"node",get:function(){if(!this.buffer)return this._tree;var t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(var r=this.index,i=this.stack.length;i>=0;){for(var o=t;o;o=o._parent)if(o.index==r){if(r==this.index)return o;e=o,n=i+1;break t}r=this.stack[--i]}for(var a=n;a<this.stack.length;a++)e=new A(this.buffer,e,this.stack[a]);return this.bufferNode=new A(this.buffer,e,this.index)}},{key:"tree",get:function(){return this.buffer?null:this._tree.node}}]),t}();function M(t){return t.children.some((function(t){return t instanceof k||!t.type.isAnonymous||M(t)}))}function O(t){var e,n=t.buffer,r=t.nodeSet,i=t.maxBufferLength,o=void 0===i?1024:i,a=t.reused,s=void 0===a?[]:a,u=t.minRepeatType,l=void 0===u?r.types.length:u,h=Array.isArray(n)?new y(n,n.length):n,c=r.types,d=0,v=0;function p(t,e,n,i,a){for(var u=h.id,y=h.start,x=h.end,S=h.size,A=v;S<0;){if(h.next(),-1==S){var C=s[u];return n.push(C),void i.push(y-t)}if(-3==S)return void(d=u);if(-4==S)return void(v=u);throw new RangeError("Unrecognized record size: ".concat(S))}var M,O,T=c[u],D=y-t;if(x-y<=o&&(O=function(t,e){var n=h.fork(),r=0,i=0,a=0,s=n.end-o,u={size:0,start:0,skip:0};t:for(var c=n.pos-t;n.pos>c;){var f=n.size;if(n.id==e&&f>=0)u.size=r,u.start=i,u.skip=a,a+=4,r+=4,n.next();else{var d=n.pos-f;if(f<0||d<c||n.start<s)break;var v=n.id>=l?4:0,p=n.start;for(n.next();n.pos>d;){if(n.size<0){if(-3!=n.size)break t;v+=4}else n.id>=l&&(v+=4);n.next()}i=p,r+=f,a+=v}}(e<0||r==t)&&(u.size=r,u.start=i,u.skip=a);return u.size>4?u:void 0}(h.pos-e,a))){for(var R=new Uint16Array(O.size-O.skip),P=h.pos-O.size,B=R.length;h.pos>P;)B=w(O.start,R,B);M=new k(R,x-O.start,r),D=O.start-t}else{var L=h.pos-S;h.next();for(var I=[],N=[],j=u>=l?u:-1,V=0,H=x;h.pos>L;)j>=0&&h.id==j&&h.size>=0?(h.end<=H-o&&(m(I,N,y,V,h.end,H,j,A),V=I.length,H=h.end),h.next()):p(y,L,I,N,j);if(j>=0&&V>0&&V<I.length&&m(I,N,y,V,y,H,j,A),I.reverse(),N.reverse(),j>-1&&V>0){var z=function(t){return function(e,n,r){var i,o,a=0,s=e.length-1;if(s>=0&&(i=e[s])instanceof g){if(!s&&i.type==t&&i.length==r)return i;(o=i.prop(f.lookAhead))&&(a=n[s]+i.length+o)}return b(t,e,n,r,a)}}(T);M=E(T,I,N,0,I.length,0,x-y,z,z)}else M=b(T,I,N,x-y,A-x)}n.push(M),i.push(D)}function m(t,e,n,i,o,a,s,u){for(var l=[],h=[];t.length>i;)l.push(t.pop()),h.push(e.pop()+n-o);t.push(b(r.types[s],l,h,a-o,u-a)),e.push(o-n)}function b(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;if(d){var a=[f.contextHash,d];o=o?[a].concat(o):[a]}if(i>25){var s=[f.lookAhead,i];o=o?[s].concat(o):[s]}return new g(t,e,n,r,o)}function w(t,e,n){var r=h.id,i=h.start,o=h.end,a=h.size;if(h.next(),a>=0&&r<l){var s=n;if(a>4)for(var u=h.pos-(a-4);h.pos>u;)n=w(t,e,n);e[--n]=s,e[--n]=o-t,e[--n]=i-t,e[--n]=r}else-3==a?d=r:-4==a&&(v=r);return n}for(var x=[],S=[];h.pos>0;)p(t.start||0,t.bufferStart||0,x,S,-1);var A=null!==(e=t.length)&&void 0!==e?e:x.length?S[0]+x[0].length:0;return new g(c[t.topID],x.reverse(),S.reverse(),A)}var T=new WeakMap;function D(t,e){if(!t.isAnonymous||e instanceof k||e.type!=t)return 1;var n=T.get(e);return null==n&&(n=e.children.reduce((function(e,n){return e+D(t,n)}),1),T.set(e,n)),n}function E(t,e,n,r,i,o,a,s,u){for(var l=0,h=r;h<i;h++)l+=D(t,e[h]);var c=Math.ceil(1.5*l/8),f=[],d=[];return function e(n,r,i,a,s){for(var l=i;l<a;){var h=l,v=r[l],p=D(t,n[l]);for(l++;l<a;l++){var m=D(t,n[l]);if(p+m>=c)break;p+=m}if(l==h+1){if(p>c){var g=n[h];e(g.children,g.positions,0,g.children.length,r[h]+s);continue}f.push(n[h])}else{var y=r[l-1]+n[l-1].length-v;f.push(E(t,n,r,h,l,v,y,null,u))}d.push(v+s-o)}}(e,n,r,i,0),(s||u)(f,d,a)}var R=function(){function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];l(this,t),this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(a?2:0)}return u(t,[{key:"openStart",get:function(){return(1&this.open)>0}},{key:"openEnd",get:function(){return(2&this.open)>0}}],[{key:"addTree",value:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[new t(0,e.length,e,0,!1,o)],s=i(r);try{for(s.s();!(n=s.n()).done;){var u=n.value;u.to>e.length&&a.push(u)}}catch(l){s.e(l)}finally{s.f()}return a}},{key:"applyChanges",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!n.length)return e;for(var i=[],o=1,a=e.length?e[0]:null,s=0,u=0,l=0;;s++){var h=s<n.length?n[s]:null,c=h?h.fromA:1e9;if(c-u>=r)for(;a&&a.from<c;){var f=a;if(u>=f.from||c<=f.to||l){var d=Math.max(f.from,u)-l,v=Math.min(f.to,c)-l;f=d>=v?null:new t(d,v,f.tree,f.offset+l,s>0,!!h)}if(f&&i.push(f),a.to>c)break;a=o<e.length?e[o++]:null}if(!h)break;u=h.toA,l=h.toA-h.toB}return i}}]),t}(),P=function(){function t(){l(this,t)}return u(t,[{key:"startParse",value:function(t,e,n){return"string"==typeof t&&(t=new B(t)),n=n?n.length?n.map((function(t){return new c(t.from,t.to)})):[new c(0,0)]:[new c(0,t.length)],this.createParse(t,e||[],n)}},{key:"parse",value:function(t,e,n){for(var r=this.startParse(t,e,n);;){var i=r.advance();if(i)return i}}}]),t}(),B=function(){function t(e){l(this,t),this.string=e}return u(t,[{key:"length",get:function(){return this.string.length}},{key:"chunk",value:function(t){return this.string.slice(t)}},{key:"lineChunks",get:function(){return!1}},{key:"read",value:function(t,e){return this.string.slice(t,e)}}]),t}()},28450:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,{V:function(){return h}});var s="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),u="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{},h=function(){function t(e,n){i(this,t),this.rules=[];var o=(n||{}).finish;function a(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function s(t,e,n,i){var u=[],l=/^@(\w+)\b/.exec(t[0]),h=l&&"keyframes"==l[1];if(l&&null==e)return n.push(t[0]+";");for(var c in e){var f=e[c];if(/&/.test(c))s(c.split(/,\s*/).map((function(e){return t.map((function(t){return e.replace(/&/,t)}))})).reduce((function(t,e){return t.concat(e)})),f,n);else if(f&&"object"==r(f)){if(!l)throw new RangeError("The value of a property ("+c+") should be a primitive value.");s(a(c),f,u,h)}else null!=f&&u.push(c.replace(/_.*/,"").replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))+": "+f+";")}(u.length||h)&&n.push((!o||l||i?t:t.map(o)).join(", ")+" {"+u.join(" ")+"}")}for(var u in e)s(a(u),e[u],this.rules)}return a(t,[{key:"getRules",value:function(){return this.rules.join("\n")}}],[{key:"newName",value:function(){var t=l[s]||1;return l[s]=t+1,"ͼ"+t.toString(36)}},{key:"mount",value:function(t,e){(t[u]||new f(t)).mount(Array.isArray(e)?e:[e])}}]),t}(),c=null,f=function(){function t(e){if(i(this,t),!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(c)return e.adoptedStyleSheets=[c.sheet].concat(e.adoptedStyleSheets),e[u]=c;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),c=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");var n=e.head||e;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],e[u]=this}return a(t,[{key:"mount",value:function(t){for(var e=this.sheet,n=0,r=0,i=0;i<t.length;i++){var o=t[i],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),-1==a){if(this.modules.splice(r++,0,o),e)for(var s=0;s<o.rules.length;s++)e.insertRule(o.rules[s],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!e){for(var u="",l=0;l<this.modules.length;l++)u+=this.modules[l].getRules()+"\n";this.styleTag.textContent=u}}}]),t}()}}]);