"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["5547"],{65522:function(e,a,t){t.d(a,{A:function(){return i}});t(42762);var i=function(e){var a;return null===(a=e.name)||void 0===a?void 0:a.trim()}},66033:function(e,a,t){t.d(a,{L:function(){return i}});var i=function(e,a){var t=e.floor_id;return{area:e,floor:(t?a[t]:void 0)||null}}},13467:function(e,a,t){var i,r=t(72153),s=t(43080),o=t(44734),n=t(69683),l=t(6454),c=t(62826),d=t(41216),u=t(78960),h=t(75640),p=t(91735),v=t(43826),_=t(96196),f=t(77845),m=function(e){function a(){return(0,o.A)(this,a),(0,n.A)(this,a,arguments)}return(0,l.A)(a,e),(0,s.A)(a)}(d.R);m.styles=[p.R,v.R,h.R,u.R,(0,_.AH)(i||(i=(0,r.A)([":host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-input-chip-container-shape:16px;--md-input-chip-outline-color:var(--outline-color);--md-input-chip-selected-container-color:rgba(\n          var(--rgb-primary-text-color),\n          0.15\n        );--ha-input-chip-selected-container-opacity:1;--md-input-chip-label-text-font:Roboto,sans-serif}::slotted([slot=icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.selected::before{opacity:var(--ha-input-chip-selected-container-opacity)}"])))],m=(0,c.Cg)([(0,f.EM)("ha-input-chip")],m)},66086:function(e,a,t){t.a(e,async function(e,a){try{var i,r,s,o,n,l,c,d=t(61397),u=t(50264),h=t(72153),p=t(44734),v=t(43080),_=t(69683),f=t(6454),m=(t(28706),t(2008),t(74423),t(62062),t(18111),t(81148),t(22489),t(61701),t(13579),t(26099),t(16034),t(21699),t(11392),t(62826)),g=t(96196),y=t(77845),A=t(22786),b=t(1087),k=t(65522),C=t(71727),w=t(55931),L=t(66033),M=t(43870),z=t(44927),x=t(65063),V=t(34023),q=(t(75064),t(38508)),H=(t(50888),t(67094),e([q]));q=(H.then?(await H)():H)[0];var Z="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",D="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",F="___ADD_NEW___",N=[{name:"search_labels.areaName",weight:10},{name:"search_labels.aliases",weight:8},{name:"search_labels.floorName",weight:6},{name:"search_labels.id",weight:3}],E=function(e){function a(){var e;(0,p.A)(this,a);for(var t=arguments.length,c=new Array(t),d=0;d<t;d++)c[d]=arguments[d];return(e=(0,_.A)(this,a,[].concat(c))).noAdd=!1,e.disabled=!1,e.required=!1,e._computeValueRenderer=(0,A.A)(function(a){return function(a){var t=e.hass.areas[a];if(!t)return(0,g.qy)(i||(i=(0,h.A)([' <ha-svg-icon slot="start" .path="','"></ha-svg-icon> <span slot="headline">',"</span> "])),D,t);var l=(0,L.L)(t,e.hass.floors).floor,c=t?(0,k.A)(t):void 0,d=l?(0,w.X)(l):void 0,u=t.icon;return(0,g.qy)(r||(r=(0,h.A)([" ",' <span slot="headline">',"</span> "," "])),u?(0,g.qy)(s||(s=(0,h.A)(['<ha-icon slot="start" .icon="','"></ha-icon>'])),u):(0,g.qy)(o||(o=(0,h.A)(['<ha-svg-icon slot="start" .path="','"></ha-svg-icon>'])),D),c,d?(0,g.qy)(n||(n=(0,h.A)(['<span slot="supporting-text">',"</span>"])),d):g.s6)}}),e._getAreas=(0,A.A)(function(a,t,i,r,s,o,n,l,c){var d,u,h={},p=Object.values(a),v=Object.values(t),_=Object.values(i);(r||s||o||n||l)&&(h=(0,z.g2)(_),d=v,u=_.filter(function(e){return e.area_id}),r&&(d=d.filter(function(e){var a=h[e.id];return!(!a||!a.length)&&h[e.id].some(function(e){return r.includes((0,C.m)(e.entity_id))})}),u=u.filter(function(e){return r.includes((0,C.m)(e.entity_id))})),s&&(d=d.filter(function(e){var a=h[e.id];return!a||!a.length||_.every(function(e){return!s.includes((0,C.m)(e.entity_id))})}),u=u.filter(function(e){return!s.includes((0,C.m)(e.entity_id))})),o&&(d=d.filter(function(a){var t=h[a.id];return!(!t||!t.length)&&h[a.id].some(function(a){var t=e.hass.states[a.entity_id];return!!t&&(t.attributes.device_class&&o.includes(t.attributes.device_class))})}),u=u.filter(function(a){var t=e.hass.states[a.entity_id];return t.attributes.device_class&&o.includes(t.attributes.device_class)})),n&&(d=d.filter(function(e){return n(e)})),l&&(d=d.filter(function(a){var t=h[a.id];return!(!t||!t.length)&&h[a.id].some(function(a){var t=e.hass.states[a.entity_id];return!!t&&l(t)})}),u=u.filter(function(a){var t=e.hass.states[a.entity_id];return!!t&&l(t)})));var f,m=p;return d&&(f=d.filter(function(e){return e.area_id}).map(function(e){return e.area_id})),u&&(f=(null!=f?f:[]).concat(u.filter(function(e){return e.area_id}).map(function(e){return e.area_id}))),f&&(m=m.filter(function(e){return f.includes(e.area_id)})),c&&(m=m.filter(function(e){return!c.includes(e.area_id)})),m.map(function(a){var t=(0,L.L)(a,e.hass.floors).floor,i=t?(0,w.X)(t):void 0,r=(0,k.A)(a);return{id:a.area_id,primary:r||a.area_id,secondary:i,icon:a.icon||void 0,icon_path:a.icon?void 0:D,search_labels:{areaName:r||null,floorName:i||null,id:a.area_id,aliases:a.aliases.join(" ")}}})}),e._getItems=function(){return e._getAreas(e.hass.areas,e.hass.devices,e.hass.entities,e.includeDomains,e.excludeDomains,e.includeDeviceClasses,e.deviceFilter,e.entityFilter,e.excludeAreas)},e._allAreaNames=(0,A.A)(function(e){return Object.values(e).map(function(e){var a;return null===(a=(0,k.A)(e))||void 0===a?void 0:a.toLowerCase()}).filter(Boolean)}),e._getAdditionalItems=function(a){if(e.noAdd)return[];var t=e._allAreaNames(e.hass.areas);return a&&!t.includes(a.toLowerCase())?[{id:F+a,primary:e.hass.localize("ui.components.area-picker.add_new_sugestion",{name:a}),icon_path:Z}]:[{id:F,primary:e.hass.localize("ui.components.area-picker.add_new"),icon_path:Z}]},e._notFoundLabel=function(a){return e.hass.localize("ui.components.area-picker.no_match",{term:(0,g.qy)(l||(l=(0,h.A)(["<b>‘","’</b>"])),a)})},e}return(0,f.A)(a,e),(0,v.A)(a,[{key:"open",value:(t=(0,u.A)((0,d.A)().m(function e(){var a;return(0,d.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.updateComplete;case 1:return e.n=2,null===(a=this._picker)||void 0===a?void 0:a.open();case 2:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,a=null!==(e=this.label)&&void 0!==e?e:this.hass.localize("ui.components.area-picker.area"),t=this._computeValueRenderer(this.hass.areas),i=a;if(this.value&&a){var r=this.hass.areas[this.value];if(r)(0,L.L)(r,this.hass.floors).floor&&(i=void 0)}return(0,g.qy)(c||(c=(0,h.A)([' <ha-generic-picker .hass="','" .autofocus="','" .label="','" .helper="','" .notFoundLabel="','" .emptyLabel="','" .disabled="','" .required="','" .value="','" .getItems="','" .getAdditionalItems="','" .valueRenderer="','" .addButtonLabel="','" .searchKeys="','" .unknownItemText="','" @value-changed="','"> </ha-generic-picker> '])),this.hass,this.autofocus,i,this.helper,this._notFoundLabel,this.hass.localize("ui.components.area-picker.no_areas"),this.disabled,this.required,this.value,this._getItems,this._getAdditionalItems,t,this.addButtonLabel,N,this.hass.localize("ui.components.area-picker.unknown"),this._valueChanged)}},{key:"_valueChanged",value:function(e){var a=this;e.stopPropagation();var t=e.detail.value;if(t)if(t.startsWith(F)){this.hass.loadFragmentTranslation("config");var i=t.substring(13);(0,V.J)(this,{suggestedName:i,createEntry:(r=(0,u.A)((0,d.A)().m(function e(t){var i,r;return(0,d.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,M.L3)(a.hass,t);case 1:i=e.v,a._setValue(i.area_id),e.n=3;break;case 2:e.p=2,r=e.v,(0,x.K$)(a,{title:a.hass.localize("ui.components.area-picker.failed_create_area"),text:r.message});case 3:return e.a(2)}},e,null,[[0,2]])})),function(e){return r.apply(this,arguments)})})}else{var r;this._setValue(t)}else this._setValue(void 0)}},{key:"_setValue",value:function(e){this.value=e,(0,b.r)(this,"value-changed",{value:e}),(0,b.r)(this,"change")}}]);var t}(g.WF);(0,m.Cg)([(0,y.MZ)({attribute:!1})],E.prototype,"hass",void 0),(0,m.Cg)([(0,y.MZ)()],E.prototype,"label",void 0),(0,m.Cg)([(0,y.MZ)()],E.prototype,"value",void 0),(0,m.Cg)([(0,y.MZ)()],E.prototype,"helper",void 0),(0,m.Cg)([(0,y.MZ)()],E.prototype,"placeholder",void 0),(0,m.Cg)([(0,y.MZ)({type:Boolean,attribute:"no-add"})],E.prototype,"noAdd",void 0),(0,m.Cg)([(0,y.MZ)({type:Array,attribute:"include-domains"})],E.prototype,"includeDomains",void 0),(0,m.Cg)([(0,y.MZ)({type:Array,attribute:"exclude-domains"})],E.prototype,"excludeDomains",void 0),(0,m.Cg)([(0,y.MZ)({type:Array,attribute:"include-device-classes"})],E.prototype,"includeDeviceClasses",void 0),(0,m.Cg)([(0,y.MZ)({type:Array,attribute:"exclude-areas"})],E.prototype,"excludeAreas",void 0),(0,m.Cg)([(0,y.MZ)({attribute:!1})],E.prototype,"deviceFilter",void 0),(0,m.Cg)([(0,y.MZ)({attribute:!1})],E.prototype,"entityFilter",void 0),(0,m.Cg)([(0,y.MZ)({type:Boolean})],E.prototype,"disabled",void 0),(0,m.Cg)([(0,y.MZ)({type:Boolean})],E.prototype,"required",void 0),(0,m.Cg)([(0,y.MZ)({attribute:"add-button-label"})],E.prototype,"addButtonLabel",void 0),(0,m.Cg)([(0,y.P)("ha-generic-picker")],E.prototype,"_picker",void 0),E=(0,m.Cg)([(0,y.EM)("ha-area-picker")],E),a()}catch(R){a(R)}})},91622:function(e,a,t){t.a(e,async function(e,i){try{t.r(a);var r,s,o,n,l,c,d,u,h,p,v=t(61397),_=t(50264),f=t(72153),m=t(44734),g=t(43080),y=t(69683),A=t(6454),b=(t(28706),t(2008),t(23792),t(62062),t(18111),t(22489),t(61701),t(2892),t(26099),t(16034),t(31415),t(17642),t(58004),t(33853),t(45876),t(32475),t(15024),t(31698),t(47764),t(42762),t(62953),t(62826)),k=t(96196),C=t(77845),w=t(4937),L=t(22786),M=t(1087),z=(t(5745),t(13467),t(38962),t(832)),x=t(66086),V=t(18350),q=(t(93444),t(18198),t(8034),t(67094),t(75709),t(45331)),H=t(43870),Z=t(14503),D=t(34023),F=e([z,x,V,q]);[z,x,V,q]=F.then?(await F)():F;var N=function(e){function a(){var e;(0,m.A)(this,a);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(e=(0,y.A)(this,a,[].concat(i)))._addedAreas=new Set,e._removedAreas=new Set,e._open=!1,e._floorAreas=(0,L.A)(function(e,a,t,i){return Object.values(a).filter(function(a){return(a.floor_id===(null==e?void 0:e.floor_id)||t.has(a.area_id))&&!i.has(a.area_id)})}),e}return(0,A.A)(a,e),(0,g.A)(a,[{key:"showDialog",value:function(e){var a,t,i,r;this._params=e,this._error=void 0,this._name=this._params.entry?this._params.entry.name:this._params.suggestedName||"",this._aliases=(null===(a=this._params.entry)||void 0===a?void 0:a.aliases)||[],this._icon=(null===(t=this._params.entry)||void 0===t?void 0:t.icon)||null,this._level=null!==(i=null===(r=this._params.entry)||void 0===r?void 0:r.level)&&void 0!==i?i:null,this._addedAreas.clear(),this._removedAreas.clear(),this._open=!0}},{key:"closeDialog",value:function(){this._open=!1}},{key:"_dialogClosed",value:function(){this._error="",this._params=void 0,this._addedAreas.clear(),this._removedAreas.clear(),(0,M.r)(this,"dialog-closed",{dialog:this.localName})}},{key:"render",value:function(){var e,a=this,t=this._floorAreas(null===(e=this._params)||void 0===e?void 0:e.entry,this.hass.areas,this._addedAreas,this._removedAreas);if(!this._params)return k.s6;var i=this._params.entry;return(0,k.qy)(r||(r=(0,f.A)([' <ha-wa-dialog .hass="','" .open="','" header-title="','" @closed="','"> <div> ',' <div class="form"> ',' <ha-textfield autofocus .value="','" @input="','" .label="','" .validationMessage="','" required></ha-textfield> <ha-textfield .value="','" @input="','" .label="','" type="number" .helper="','" helperPersistent></ha-textfield> <ha-icon-picker .hass="','" .value="','" @value-changed="','" .label="','"> ',' </ha-icon-picker> <h3 class="header"> '," </h3> ",' <ha-area-picker no-add .hass="','" @value-changed="','" .excludeAreas="','" .addButtonLabel="','"></ha-area-picker> <h3 class="header"> ',' </h3> <p class="description"> ',' </p> <ha-aliases-editor .hass="','" .aliases="','" @value-changed="','"></ha-aliases-editor> </div> </div> <ha-dialog-footer slot="footer"> <ha-button appearance="plain" slot="secondaryAction" @click="','"> ',' </ha-button> <ha-button slot="primaryAction" @click="','" .disabled="','"> '," </ha-button> </ha-dialog-footer> </ha-wa-dialog> "])),this.hass,this._open,i?this.hass.localize("ui.panel.config.floors.editor.update_floor"):this.hass.localize("ui.panel.config.floors.editor.create_floor"),this._dialogClosed,this._error?(0,k.qy)(s||(s=(0,f.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):"",i?(0,k.qy)(o||(o=(0,f.A)([' <ha-settings-row> <span slot="heading"> ',' </span> <span slot="description">',"</span> </ha-settings-row> "])),this.hass.localize("ui.panel.config.floors.editor.floor_id"),i.floor_id):k.s6,this._name,this._nameChanged,this.hass.localize("ui.panel.config.floors.editor.name"),this.hass.localize("ui.panel.config.floors.editor.name_required"),this._level,this._levelChanged,this.hass.localize("ui.panel.config.floors.editor.level"),this.hass.localize("ui.panel.config.floors.editor.level_helper"),this.hass,this._icon,this._iconChanged,this.hass.localize("ui.panel.config.areas.editor.icon"),this._icon?k.s6:(0,k.qy)(n||(n=(0,f.A)([' <ha-floor-icon slot="start" .floor="','"></ha-floor-icon> '])),{level:this._level}),this.hass.localize("ui.panel.config.floors.editor.areas_section"),t.length?(0,k.qy)(l||(l=(0,f.A)(["<ha-chip-set> "," </ha-chip-set>"])),(0,w.u)(t,function(e){return e.area_id},function(e){return(0,k.qy)(c||(c=(0,f.A)(['<ha-input-chip .area="','" @click="','" @remove="','" .label="','"> '," </ha-input-chip>"])),e,a._openArea,a._removeArea,null==e?void 0:e.name,e.icon?(0,k.qy)(d||(d=(0,f.A)(['<ha-icon slot="icon" .icon="','"></ha-icon>'])),e.icon):(0,k.qy)(u||(u=(0,f.A)(['<ha-svg-icon slot="icon" .path="','"></ha-svg-icon>'])),"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z"))})):(0,k.qy)(h||(h=(0,f.A)(['<p class="description"> '," </p>"])),this.hass.localize("ui.panel.config.floors.editor.areas_description")),this.hass,this._addArea,t.map(function(e){return e.area_id}),this.hass.localize("ui.panel.config.floors.editor.add_area"),this.hass.localize("ui.panel.config.floors.editor.aliases_section"),this.hass.localize("ui.panel.config.floors.editor.aliases_description"),this.hass,this._aliases,this._aliasesChanged,this.closeDialog,this.hass.localize("ui.common.cancel"),this._updateEntry,!!this._submitting,i?this.hass.localize("ui.common.save"):this.hass.localize("ui.common.create"))}},{key:"_openArea",value:function(e){var a=this,t=e.target.area;(0,D.J)(this,{entry:t,updateEntry:function(e){return(0,H.gs)(a.hass,t.area_id,e)}})}},{key:"_removeArea",value:function(e){var a=e.target.area.area_id;if(this._addedAreas.has(a))return this._addedAreas.delete(a),void(this._addedAreas=new Set(this._addedAreas));this._removedAreas.add(a),this._removedAreas=new Set(this._removedAreas)}},{key:"_addArea",value:function(e){var a=e.detail.value;if(a){if(e.target.value="",this._removedAreas.has(a))return this._removedAreas.delete(a),void(this._removedAreas=new Set(this._removedAreas));this._addedAreas.add(a),this._addedAreas=new Set(this._addedAreas)}}},{key:"_nameChanged",value:function(e){this._error=void 0,this._name=e.target.value}},{key:"_levelChanged",value:function(e){this._error=void 0,this._level=""===e.target.value?null:Number(e.target.value)}},{key:"_iconChanged",value:function(e){this._error=void 0,this._icon=e.detail.value}},{key:"_updateEntry",value:(t=(0,_.A)((0,v.A)().m(function e(){var a,t,i;return(0,v.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(""!==this._name.trim()){e.n=1;break}return this._error=this.hass.localize("ui.panel.config.floors.editor.name_required"),e.a(2);case 1:if(this._error=void 0,this._submitting=!0,a=!this._params.entry,e.p=2,t={name:this._name.trim(),icon:this._icon||(a?void 0:null),level:this._level,aliases:this._aliases},!a){e.n=4;break}return e.n=3,this._params.createEntry(t,this._addedAreas);case 3:e.n=5;break;case 4:return e.n=5,this._params.updateEntry(t,this._addedAreas,this._removedAreas);case 5:this.closeDialog(),e.n=7;break;case 6:e.p=6,i=e.v,this._error=i.message||this.hass.localize("ui.panel.config.floors.editor.unknown_error");case 7:return e.p=7,this._submitting=!1,e.f(7);case 8:return e.a(2)}},e,this,[[2,6,7,8]])})),function(){return t.apply(this,arguments)})},{key:"_aliasesChanged",value:function(e){this._aliases=e.detail.value}}],[{key:"styles",get:function(){return[Z.RF,Z.nA,(0,k.AH)(p||(p=(0,f.A)(["ha-textfield{display:block;margin-bottom:var(--ha-space-4)}ha-floor-icon{color:var(--secondary-text-color)}ha-chip-set{margin-bottom:var(--ha-space-2)}"])))]}}]);var t}(k.WF);(0,b.Cg)([(0,C.MZ)({attribute:!1})],N.prototype,"hass",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_name",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_aliases",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_icon",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_level",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_error",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_params",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_submitting",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_addedAreas",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_removedAreas",void 0),(0,b.Cg)([(0,C.wk)()],N.prototype,"_open",void 0),N=(0,b.Cg)([(0,C.EM)("dialog-floor-registry-detail")],N),i()}catch(E){i(E)}})},34023:function(e,a,t){t.d(a,{J:function(){return s}});t(23792),t(26099),t(3362),t(47764),t(62953);var i=t(1087),r=function(){return Promise.all([t.e("6919"),t.e("969"),t.e("2877"),t.e("5676"),t.e("8851"),t.e("6770"),t.e("71"),t.e("6201"),t.e("9038"),t.e("1361"),t.e("314"),t.e("5462")]).then(t.bind(t,39803))},s=function(e,a){(0,i.r)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:r,dialogParams:a})}}}]);
//# sourceMappingURL=5547.5528a61f6ec3ca51.js.map