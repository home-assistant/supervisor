"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["2987"],{79381:function(e,t,i){i.a(e,(async function(e,r){try{i.r(t);var n,s,a=i(9833),o=i(94524),d=i(63038),u=i(27862),c=i(52565),l=i(92776),h=i(5776),v=i(21475),f=i(77204),k=(i(38419),i(19423),i(57243)),_=i(50778),b=i(55290),w=i(28820),p=i(22381),y=i(36522),m=(i(99426),e([w]));w=(m.then?(await m)():m)[0];(0,v.Z)([(0,_.Mo)("flow-preview-generic")],(function(e,t){var i,r=function(t){function i(){var t;(0,c.Z)(this,i);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=(0,l.Z)(this,i,[].concat(n)),e(t),t}return(0,h.Z)(i,t),(0,u.Z)(i)}(t);return{F:r,d:[{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.Cb)()],key:"flowType",value:void 0},{kind:"field",key:"handler",value:void 0},{kind:"field",decorators:[(0,_.Cb)()],key:"domain",value:void 0},{kind:"field",decorators:[(0,_.Cb)()],key:"stepId",value:void 0},{kind:"field",decorators:[(0,_.Cb)()],key:"flowId",value:void 0},{kind:"field",decorators:[(0,_.Cb)()],key:"stepData",value:void 0},{kind:"field",decorators:[(0,_.SB)()],key:"_preview",value:void 0},{kind:"field",decorators:[(0,_.SB)()],key:"_error",value:void 0},{kind:"field",key:"_unsub",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,f.Z)(r,"disconnectedCallback",this,3)([]),this._unsub&&(this._unsub.then((function(e){return e()})),this._unsub=void 0)}},{kind:"method",key:"willUpdate",value:function(e){e.has("stepData")&&this._debouncedSubscribePreview()}},{kind:"method",key:"render",value:function(){return this._error?(0,k.dy)(n||(n=(0,d.Z)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):(0,k.dy)(s||(s=(0,d.Z)(['<entity-preview-row .hass="','" .stateObj="','"></entity-preview-row>'])),this.hass,this._preview)}},{kind:"field",key:"_setPreview",value:function(){var e=this;return function(t){var i=(new Date).toISOString();e._preview=Object.assign({entity_id:"".concat(e.stepId,".___flow_preview___"),last_changed:i,last_updated:i,context:{id:"",parent_id:null,user_id:null}},t)}}},{kind:"field",key:"_debouncedSubscribePreview",value:function(){var e=this;return(0,p.D)((function(){e._subscribePreview()}),250)}},{kind:"method",key:"_subscribePreview",value:(i=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._unsub){e.next=6;break}return e.next=3,this._unsub;case 3:e.t0=e.sent,(0,e.t0)(),this._unsub=void 0;case 6:if("repair_flow"!==this.flowType){e.next=8;break}return e.abrupt("return");case 8:try{this._unsub=(0,b.H)(this.hass,this.domain,this.flowId,this.flowType,this.stepData,this._setPreview),(0,y.B)(this,"set-flow-errors",{errors:{}})}catch(t){"string"==typeof t.message?this._error=t.message:(this._error=void 0,(0,y.B)(this,"set-flow-errors",t.message)),this._unsub=void 0,this._preview=void 0}case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}]}}),k.oi);r()}catch(Z){r(Z)}}))}}]);
//# sourceMappingURL=2987.513df438d34dfad6.js.map