"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["4783"],{4845:function(t,e,i){i.d(e,{U:function(){return C}});var o,a,n=i(72153),s=i(44734),r=i(43080),c=i(69683),l=i(6454),d=i(25460),h=(i(69085),i(62826)),u=(i(27673),i(9270)),p=i(12451),v=i(56161),g=i(99864),f=i(7658),y={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},_={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"},m=function(t){function e(i){return t.call(this,(0,h.Cl)((0,h.Cl)({},e.defaultAdapter),i))||this}return(0,h.C6)(e,t),Object.defineProperty(e,"strings",{get:function(){return _},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return y},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!1,configurable:!0}),e.prototype.setChecked=function(t){this.adapter.setNativeControlChecked(t),this.updateAriaChecked(t),this.updateCheckedStyling(t)},e.prototype.setDisabled=function(t){this.adapter.setNativeControlDisabled(t),t?this.adapter.addClass(y.DISABLED):this.adapter.removeClass(y.DISABLED)},e.prototype.handleChange=function(t){var e=t.target;this.updateAriaChecked(e.checked),this.updateCheckedStyling(e.checked)},e.prototype.updateCheckedStyling=function(t){t?this.adapter.addClass(y.CHECKED):this.adapter.removeClass(y.CHECKED)},e.prototype.updateAriaChecked=function(t){this.adapter.setNativeControlAttr(_.ARIA_CHECKED_ATTR,""+!!t)},e}(f.I),b=i(96196),A=i(77845),w=i(32288),C=function(t){function e(){var t;return(0,s.A)(this,e),(t=(0,c.A)(this,e,arguments)).checked=!1,t.disabled=!1,t.shouldRenderRipple=!1,t.mdcFoundationClass=m,t.rippleHandlers=new g.I(function(){return t.shouldRenderRipple=!0,t.ripple}),t}return(0,l.A)(e,t),(0,r.A)(e,[{key:"changeHandler",value:function(t){this.mdcFoundation.handleChange(t),this.checked=this.formElement.checked}},{key:"createAdapter",value:function(){var t=this;return Object.assign(Object.assign({},(0,p.i)(this.mdcRoot)),{setNativeControlChecked:function(e){t.formElement.checked=e},setNativeControlDisabled:function(e){t.formElement.disabled=e},setNativeControlAttr:function(e,i){t.formElement.setAttribute(e,i)}})}},{key:"renderRipple",value:function(){return this.shouldRenderRipple?(0,b.qy)(o||(o=(0,n.A)([' <mwc-ripple .accent="','" .disabled="','" unbounded> </mwc-ripple>'])),this.checked,this.disabled):""}},{key:"focus",value:function(){var t=this.formElement;t&&(this.rippleHandlers.startFocus(),t.focus())}},{key:"blur",value:function(){var t=this.formElement;t&&(this.rippleHandlers.endFocus(),t.blur())}},{key:"click",value:function(){this.formElement&&!this.disabled&&(this.formElement.focus(),this.formElement.click())}},{key:"firstUpdated",value:function(){var t=this;(0,d.A)(e,"firstUpdated",this,3)([]),this.shadowRoot&&this.mdcRoot.addEventListener("change",function(e){t.dispatchEvent(new Event("change",e))})}},{key:"render",value:function(){return(0,b.qy)(a||(a=(0,n.A)([' <div class="mdc-switch"> <div class="mdc-switch__track"></div> <div class="mdc-switch__thumb-underlay"> ',' <div class="mdc-switch__thumb"> <input type="checkbox" id="basic-switch" class="mdc-switch__native-control" role="switch" aria-label="','" aria-labelledby="','" @change="','" @focus="','" @blur="','" @mousedown="','" @mouseenter="','" @mouseleave="','" @touchstart="','" @touchend="','" @touchcancel="','"> </div> </div> </div>'])),this.renderRipple(),(0,w.J)(this.ariaLabel),(0,w.J)(this.ariaLabelledBy),this.changeHandler,this.handleRippleFocus,this.handleRippleBlur,this.handleRippleMouseDown,this.handleRippleMouseEnter,this.handleRippleMouseLeave,this.handleRippleTouchStart,this.handleRippleDeactivate,this.handleRippleDeactivate)}},{key:"handleRippleMouseDown",value:function(t){var e=this,i=function(){window.removeEventListener("mouseup",i),e.handleRippleDeactivate()};window.addEventListener("mouseup",i),this.rippleHandlers.startPress(t)}},{key:"handleRippleTouchStart",value:function(t){this.rippleHandlers.startPress(t)}},{key:"handleRippleDeactivate",value:function(){this.rippleHandlers.endPress()}},{key:"handleRippleMouseEnter",value:function(){this.rippleHandlers.startHover()}},{key:"handleRippleMouseLeave",value:function(){this.rippleHandlers.endHover()}},{key:"handleRippleFocus",value:function(){this.rippleHandlers.startFocus()}},{key:"handleRippleBlur",value:function(){this.rippleHandlers.endFocus()}}])}(p.O);(0,h.Cg)([(0,A.MZ)({type:Boolean}),(0,v.P)(function(t){this.mdcFoundation.setChecked(t)})],C.prototype,"checked",void 0),(0,h.Cg)([(0,A.MZ)({type:Boolean}),(0,v.P)(function(t){this.mdcFoundation.setDisabled(t)})],C.prototype,"disabled",void 0),(0,h.Cg)([u.T,(0,A.MZ)({attribute:"aria-label"})],C.prototype,"ariaLabel",void 0),(0,h.Cg)([u.T,(0,A.MZ)({attribute:"aria-labelledby"})],C.prototype,"ariaLabelledBy",void 0),(0,h.Cg)([(0,A.P)(".mdc-switch")],C.prototype,"mdcRoot",void 0),(0,h.Cg)([(0,A.P)("input")],C.prototype,"formElement",void 0),(0,h.Cg)([(0,A.nJ)("mwc-ripple")],C.prototype,"ripple",void 0),(0,h.Cg)([(0,A.wk)()],C.prototype,"shouldRenderRipple",void 0),(0,h.Cg)([(0,A.Ls)({passive:!0})],C.prototype,"handleRippleMouseDown",null),(0,h.Cg)([(0,A.Ls)({passive:!0})],C.prototype,"handleRippleTouchStart",null)},49065:function(t,e,i){i.d(e,{R:function(){return n}});var o,a=i(72153),n=(0,i(96196).AH)(o||(o=(0,a.A)([".mdc-switch__thumb-underlay{left:-14px;right:initial;top:-17px;width:48px;height:48px}.mdc-switch__thumb-underlay[dir=rtl],[dir=rtl] .mdc-switch__thumb-underlay{left:initial;right:-14px}.mdc-switch__native-control{width:64px;height:48px}.mdc-switch{display:inline-block;position:relative;outline:0;user-select:none}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786);border-color:#018786;border-color:var(--mdc-theme-secondary,#018786)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:#000;background-color:var(--mdc-theme-on-surface,#000)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:#fff;background-color:var(--mdc-theme-surface,#fff);border-color:#fff;border-color:var(--mdc-theme-surface,#fff)}.mdc-switch__native-control{left:0;right:initial;position:absolute;top:0;margin:0;opacity:0;cursor:pointer;pointer-events:auto;transition:transform 90ms cubic-bezier(.4, 0, .2, 1)}.mdc-switch__native-control[dir=rtl],[dir=rtl] .mdc-switch__native-control{left:initial;right:0}.mdc-switch__track{box-sizing:border-box;width:36px;height:14px;border:1px solid transparent;border-radius:7px;opacity:.38;transition:opacity 90ms cubic-bezier(.4, 0, .2, 1),background-color 90ms cubic-bezier(.4, 0, .2, 1),border-color 90ms cubic-bezier(.4, 0, .2, 1)}.mdc-switch__thumb-underlay{display:flex;position:absolute;align-items:center;justify-content:center;transform:translateX(0);transition:transform 90ms cubic-bezier(.4, 0, .2, 1),background-color 90ms cubic-bezier(.4, 0, .2, 1),border-color 90ms cubic-bezier(.4, 0, .2, 1)}.mdc-switch__thumb{box-shadow:0px 3px 1px -2px rgba(0,0,0,.2),0px 2px 2px 0px rgba(0,0,0,.14),0px 1px 5px 0px rgba(0,0,0,.12);box-sizing:border-box;width:20px;height:20px;border:10px solid;border-radius:50%;pointer-events:none;z-index:1}.mdc-switch--checked .mdc-switch__track{opacity:.54}.mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(16px)}.mdc-switch--checked .mdc-switch__thumb-underlay[dir=rtl],[dir=rtl] .mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(-16px)}.mdc-switch--checked .mdc-switch__native-control{transform:translateX(-16px)}.mdc-switch--checked .mdc-switch__native-control[dir=rtl],[dir=rtl] .mdc-switch--checked .mdc-switch__native-control{transform:translateX(16px)}.mdc-switch--disabled{opacity:.38;pointer-events:none}.mdc-switch--disabled .mdc-switch__thumb{border-width:1px}.mdc-switch--disabled .mdc-switch__native-control{cursor:default;pointer-events:none}:host{display:inline-flex;outline:0;-webkit-tap-highlight-color:transparent}"])))},42778:function(t,e,i){var o=i(44734),a=i(43080),n=i(69683),s=i(6454),r=i(62826),c=i(77845),l=i(10139),d=function(t){function e(){return(0,o.A)(this,e),(0,n.A)(this,e,[l.PV,l.am,function(t){return{device_id:t||"",domain:"",entity_id:""}}])}return(0,s.A)(e,t),(0,a.A)(e,[{key:"NO_AUTOMATION_TEXT",get:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.no_actions")}},{key:"UNKNOWN_AUTOMATION_TEXT",get:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.unknown_action")}}])}(i(17062).V);d=(0,r.Cg)([(0,c.EM)("ha-device-action-picker")],d)},39927:function(t,e,i){var o,a=i(72153),n=i(44734),s=i(43080),r=i(69683),c=i(6454),l=(i(28706),i(2892),i(69085),i(62826)),d=i(96196),h=i(77845),u=i(1087),p=(i(32656),function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,r.A)(this,e,[].concat(o))).required=!1,t.enableMillisecond=!1,t.enableDay=!1,t.disabled=!1,t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){return(0,d.qy)(o||(o=(0,a.A)([' <ha-base-time-input .label="','" .helper="','" .required="','" .clearable="','" .autoValidate="','" .disabled="','" errorMessage="Required" enable-second .enableMillisecond="','" .enableDay="','" format="24" .days="','" .hours="','" .minutes="','" .seconds="','" .milliseconds="','" @value-changed="','" no-hours-limit day-label="dd" hour-label="hh" min-label="mm" sec-label="ss" ms-label="ms"></ha-base-time-input> '])),this.label,this.helper,this.required,!this.required&&void 0!==this.data,this.required,this.disabled,this.enableMillisecond,this.enableDay,this._days,this._hours,this._minutes,this._seconds,this._milliseconds,this._durationChanged)}},{key:"_days",get:function(){var t;return null!==(t=this.data)&&void 0!==t&&t.days?Number(this.data.days):this.required||this.data?0:NaN}},{key:"_hours",get:function(){var t;return null!==(t=this.data)&&void 0!==t&&t.hours?Number(this.data.hours):this.required||this.data?0:NaN}},{key:"_minutes",get:function(){var t;return null!==(t=this.data)&&void 0!==t&&t.minutes?Number(this.data.minutes):this.required||this.data?0:NaN}},{key:"_seconds",get:function(){var t;return null!==(t=this.data)&&void 0!==t&&t.seconds?Number(this.data.seconds):this.required||this.data?0:NaN}},{key:"_milliseconds",get:function(){var t;return null!==(t=this.data)&&void 0!==t&&t.milliseconds?Number(this.data.milliseconds):this.required||this.data?0:NaN}},{key:"_durationChanged",value:function(t){t.stopPropagation();var e,i=t.detail.value?Object.assign({},t.detail.value):void 0;i&&(i.hours||(i.hours=0),i.minutes||(i.minutes=0),i.seconds||(i.seconds=0),"days"in i&&(i.days||(i.days=0)),"milliseconds"in i&&(i.milliseconds||(i.milliseconds=0)),this.enableMillisecond||i.milliseconds?i.milliseconds>999&&(i.seconds+=Math.floor(i.milliseconds/1e3),i.milliseconds%=1e3):delete i.milliseconds,i.seconds>59&&(i.minutes+=Math.floor(i.seconds/60),i.seconds%=60),i.minutes>59&&(i.hours+=Math.floor(i.minutes/60),i.minutes%=60),this.enableDay&&i.hours>24&&(i.days=(null!==(e=i.days)&&void 0!==e?e:0)+Math.floor(i.hours/24),i.hours%=24));(0,u.r)(this,"value-changed",{value:i})}}])}(d.WF));(0,l.Cg)([(0,h.MZ)({attribute:!1})],p.prototype,"data",void 0),(0,l.Cg)([(0,h.MZ)()],p.prototype,"label",void 0),(0,l.Cg)([(0,h.MZ)()],p.prototype,"helper",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],p.prototype,"required",void 0),(0,l.Cg)([(0,h.MZ)({attribute:"enable-millisecond",type:Boolean})],p.prototype,"enableMillisecond",void 0),(0,l.Cg)([(0,h.MZ)({attribute:"enable-day",type:Boolean})],p.prototype,"enableDay",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],p.prototype,"disabled",void 0),p=(0,l.Cg)([(0,h.EM)("ha-duration-input")],p)},6274:function(t,e,i){i.a(t,async function(t,o){try{i.r(e),i.d(e,{HaActionSelector:function(){return C}});var a,n,s,r=i(72153),c=i(44734),l=i(43080),d=i(69683),h=i(6454),u=(i(28706),i(62826)),p=i(16527),v=i(96196),g=i(77845),f=i(22786),y=i(38911),_=i(59241),m=i(84025),b=i(54706),A=i(68469),w=t([A]);A=(w.then?(await w)():w)[0];var C=function(t){function e(){var t;(0,c.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,d.A)(this,e,[].concat(o))).narrow=!1,t.disabled=!1,t.hassSubscribeRequiredHostProps=["_entitiesContext"],t._actions=(0,f.A)(function(t){return t?(0,m.Rn)(t):[]}),t}return(0,h.A)(e,t),(0,l.A)(e,[{key:"firstUpdated",value:function(){this._entityReg||(this._entitiesContext=new p.DT(this,{context:y.ih,initialValue:[]}))}},{key:"hassSubscribe",value:function(){var t=this;return[(0,_.Bz)(this.hass.connection,function(e){t._entitiesContext.setValue(e)})]}},{key:"expandAll",value:function(){var t;null===(t=this._actionElement)||void 0===t||t.expandAll()}},{key:"collapseAll",value:function(){var t;null===(t=this._actionElement)||void 0===t||t.collapseAll()}},{key:"render",value:function(){var t;return(0,v.qy)(a||(a=(0,r.A)([" ",' <ha-automation-action .disabled="','" .actions="','" .hass="','" .narrow="','" .optionsInSidebar="','"></ha-automation-action> '])),this.label?(0,v.qy)(n||(n=(0,r.A)(["<label>","</label>"])),this.label):v.s6,this.disabled,this._actions(this.value),this.hass,this.narrow,!(null===(t=this.selector.action)||void 0===t||!t.optionsInSidebar))}}])}((0,b.E)(v.WF));C.styles=(0,v.AH)(s||(s=(0,r.A)(["ha-automation-action{display:block}label{display:block;margin-bottom:4px;font-weight:var(--ha-font-weight-medium);color:var(--secondary-text-color)}"]))),(0,u.Cg)([(0,g.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,u.Cg)([(0,g.MZ)({type:Boolean})],C.prototype,"narrow",void 0),(0,u.Cg)([(0,g.MZ)({attribute:!1})],C.prototype,"selector",void 0),(0,u.Cg)([(0,g.MZ)({attribute:!1})],C.prototype,"value",void 0),(0,u.Cg)([(0,g.MZ)()],C.prototype,"label",void 0),(0,u.Cg)([(0,g.MZ)({type:Boolean,reflect:!0})],C.prototype,"disabled",void 0),(0,u.Cg)([(0,g.wk)(),(0,p.Fg)({context:y.ih,subscribe:!0})],C.prototype,"_entityReg",void 0),(0,u.Cg)([(0,g.wk)()],C.prototype,"_entitiesContext",void 0),(0,u.Cg)([(0,g.P)("ha-automation-action")],C.prototype,"_actionElement",void 0),C=(0,u.Cg)([(0,g.EM)("ha-selector-action")],C),o()}catch(k){o(k)}})},59646:function(t,e,i){var o,a=i(72153),n=i(44734),s=i(43080),r=i(69683),c=i(6454),l=i(25460),d=(i(28706),i(62826)),h=i(4845),u=i(49065),p=i(96196),v=i(77845),g=i(88360),f=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,r.A)(this,e,[].concat(o))).haptic=!1,t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"firstUpdated",value:function(){var t=this;(0,l.A)(e,"firstUpdated",this,3)([]),this.addEventListener("change",function(){t.haptic&&(0,g.j)(t,"light")})}}])}(h.U);f.styles=[u.R,(0,p.AH)(o||(o=(0,a.A)([":host{--mdc-theme-secondary:var(--switch-checked-color)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:var(--switch-checked-button-color);border-color:var(--switch-checked-button-color)}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:var(--switch-checked-track-color);border-color:var(--switch-checked-track-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:var(--switch-unchecked-button-color);border-color:var(--switch-unchecked-button-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:var(--switch-unchecked-track-color);border-color:var(--switch-unchecked-track-color)}"])))],(0,d.Cg)([(0,v.MZ)({type:Boolean})],f.prototype,"haptic",void 0),f=(0,d.Cg)([(0,v.EM)("ha-switch")],f)},30780:function(t,e,i){i.d(e,{EN:function(){return c},I8:function(){return h},L_:function(){return d},MC:function(){return l},O$:function(){return a},bM:function(){return r},ix:function(){return n},rP:function(){return s}});i(23792),i(26099),i(31415),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(47764),i(62953);var o="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",a={condition:"M4 2A2 2 0 0 0 2 4V12H4V8H6V12H8V4A2 2 0 0 0 6 2H4M4 4H6V6H4M22 15.5V14A2 2 0 0 0 20 12H16V22H20A2 2 0 0 0 22 20V18.5A1.54 1.54 0 0 0 20.5 17A1.54 1.54 0 0 0 22 15.5M20 20H18V18H20V20M20 16H18V14H20M5.79 21.61L4.21 20.39L18.21 2.39L19.79 3.61Z",delay:"M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M11,14H13V8H11M15,1H9V3H15V1Z",event:"M10,9A1,1 0 0,1 11,8A1,1 0 0,1 12,9V13.47L13.21,13.6L18.15,15.79C18.68,16.03 19,16.56 19,17.14V21.5C18.97,22.32 18.32,22.97 17.5,23H11C10.62,23 10.26,22.85 10,22.57L5.1,18.37L5.84,17.6C6.03,17.39 6.3,17.28 6.58,17.28H6.8L10,19V9M11,5A4,4 0 0,1 15,9C15,10.5 14.2,11.77 13,12.46V11.24C13.61,10.69 14,9.89 14,9A3,3 0 0,0 11,6A3,3 0 0,0 8,9C8,9.89 8.39,10.69 9,11.24V12.46C7.8,11.77 7,10.5 7,9A4,4 0 0,1 11,5M11,3A6,6 0 0,1 17,9C17,10.7 16.29,12.23 15.16,13.33L14.16,12.88C15.28,11.96 16,10.56 16,9A5,5 0 0,0 11,4A5,5 0 0,0 6,9C6,11.05 7.23,12.81 9,13.58V14.66C6.67,13.83 5,11.61 5,9A6,6 0 0,1 11,3Z",play_media:"M8,5.14V19.14L19,12.14L8,5.14Z",service:"M12,5A2,2 0 0,1 14,7C14,7.24 13.96,7.47 13.88,7.69C17.95,8.5 21,11.91 21,16H3C3,11.91 6.05,8.5 10.12,7.69C10.04,7.47 10,7.24 10,7A2,2 0 0,1 12,5M22,19H2V17H22V19Z",wait_template:"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",wait_for_trigger:"M12,9A2,2 0 0,1 10,7C10,5.89 10.9,5 12,5C13.11,5 14,5.89 14,7A2,2 0 0,1 12,9M12,14A2,2 0 0,1 10,12C10,10.89 10.9,10 12,10C13.11,10 14,10.89 14,12A2,2 0 0,1 12,14M12,19A2,2 0 0,1 10,17C10,15.89 10.9,15 12,15C13.11,15 14,15.89 14,17A2,2 0 0,1 12,19M20,10H17V8.86C18.72,8.41 20,6.86 20,5H17V4A1,1 0 0,0 16,3H8A1,1 0 0,0 7,4V5H4C4,6.86 5.28,8.41 7,8.86V10H4C4,11.86 5.28,13.41 7,13.86V15H4C4,16.86 5.28,18.41 7,18.86V20A1,1 0 0,0 8,21H16A1,1 0 0,0 17,20V18.86C18.72,18.41 20,16.86 20,15H17V13.86C18.72,13.41 20,11.86 20,10Z",repeat:o,repeat_count:o,repeat_while:o,repeat_until:o,repeat_for_each:o,choose:"M11,5H8L12,1L16,5H13V9.43C12.25,9.89 11.58,10.46 11,11.12V5M22,11L18,7V10C14.39,9.85 11.31,12.57 11,16.17C9.44,16.72 8.62,18.44 9.17,20C9.72,21.56 11.44,22.38 13,21.83C14.56,21.27 15.38,19.56 14.83,18C14.53,17.14 13.85,16.47 13,16.17C13.47,12.17 17.47,11.97 17.95,11.97V14.97L22,11M10.63,11.59C9.3,10.57 7.67,10 6,10V7L2,11L6,15V12C7.34,12.03 8.63,12.5 9.64,13.4C9.89,12.76 10.22,12.15 10.63,11.59Z",if:"M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29",device_id:"M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",stop:"M13 24C9.74 24 6.81 22 5.6 19L2.57 11.37C2.26 10.58 3 9.79 3.81 10.05L4.6 10.31C5.16 10.5 5.62 10.92 5.84 11.47L7.25 15H8V3.25C8 2.56 8.56 2 9.25 2S10.5 2.56 10.5 3.25V12H11.5V1.25C11.5 .56 12.06 0 12.75 0S14 .56 14 1.25V12H15V2.75C15 2.06 15.56 1.5 16.25 1.5C16.94 1.5 17.5 2.06 17.5 2.75V12H18.5V5.75C18.5 5.06 19.06 4.5 19.75 4.5S21 5.06 21 5.75V16C21 20.42 17.42 24 13 24Z",sequence:"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",parallel:"M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16",variables:"M21 2H3C1.9 2 1 2.9 1 4V20C1 21.1 1.9 22 3 22H21C22.1 22 23 21.1 23 20V4C23 2.9 22.1 2 21 2M21 20H3V6H21V20M16.6 8C18.1 9.3 19 11.1 19 13C19 14.9 18.1 16.7 16.6 18L15 17.4C16.3 16.4 17 14.7 17 13S16.3 9.6 15 8.6L16.6 8M7.4 8L9 8.6C7.7 9.6 7 11.3 7 13S7.7 16.4 9 17.4L7.4 18C5.9 16.7 5 14.9 5 13S5.9 9.3 7.4 8M12.1 12L13.5 10H15L12.8 13L14.1 16H12.8L12 14L10.6 16H9L11.3 12.9L10 10H11.3L12.1 12Z",set_conversation_response:"M12,8H4A2,2 0 0,0 2,10V14A2,2 0 0,0 4,16H5V20A1,1 0 0,0 6,21H8A1,1 0 0,0 9,20V16H12L17,20V4L12,8M21.5,12C21.5,13.71 20.54,15.26 19,16V8C20.53,8.75 21.5,10.3 21.5,12Z"},n=new Set(["variables"]),s=[{groups:{device_id:{},dynamicGroups:{}}},{titleKey:"ui.panel.config.automation.editor.actions.groups.helpers.label",groups:{helpers:{}}},{titleKey:"ui.panel.config.automation.editor.actions.groups.other.label",groups:{event:{},service:{},set_conversation_response:{},other:{}}}],r={condition:{},delay:{},wait_template:{},wait_for_trigger:{},repeat_count:{},repeat_while:{},repeat_until:{},repeat_for_each:{},choose:{},if:{},stop:{},sequence:{},parallel:{},variables:{}},c={repeat_count:{repeat:{count:2,sequence:[]}},repeat_while:{repeat:{while:[],sequence:[]}},repeat_until:{repeat:{until:[],sequence:[]}},repeat_for_each:{repeat:{for_each:{},sequence:[]}}},l=["ha-automation-action-choose","ha-automation-action-condition","ha-automation-action-if","ha-automation-action-parallel","ha-automation-action-repeat","ha-automation-action-sequence"],d=["choose","if","parallel","sequence","repeat_while","repeat_until"],h=["repeat_count","repeat_for_each","wait_for_trigger"]},88360:function(t,e,i){i.d(e,{j:function(){return a}});var o=i(1087),a=function(t,e){(0,o.r)(t,"haptic",e)}},45464:function(t,e,i){i.a(t,async function(t,o){try{i.d(e,{u:function(){return y}});var a=i(78261),n=(i(16280),i(28706),i(62062),i(44114),i(18111),i(61701),i(33110),i(79432),i(26099),i(42781),i(44537)),s=i(82591),r=i(27167),c=i(28978),l=i(8185),d=i(24790),h=i(79800),u=i(10139),p=i(95350),v=i(84025),g=t([s,l,h]);[s,l,h]=g.then?(await g)():g;var f="ui.panel.config.automation.editor.actions.type",y=function(t,e,i,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{var n=_(t,e,i,o,a);if("string"!=typeof n)throw new Error(String(n));return n}catch(r){console.error(r);var s="Error in describing action";return r.message&&(s+=": "+r.message),s}},_=function(t,e,i,o){var g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i.alias&&!g)return i.alias;if(o||(o=(0,v.pq)(i)),"service"===o){var y=i,_=[],m=y.target||y.data;if("string"==typeof m&&(0,d.F)(m)&&_.push(t.localize("".concat(f,".service.description.target_template"),{name:"target"})),y.service_template||y.action&&(0,d.F)(y.action))return t.localize(_.length?"".concat(f,".service.description.service_based_on_template"):"".concat(f,".service.description.service_based_on_template_no_targets"),{targets:(0,l.c)(t.locale,_)});if(y.action){var b,A,w=y.action.split(".",2),C=(0,a.A)(w,2),k=C[0],M=C[1],V=null===(b=t.services[k])||void 0===b||null===(b=b[M])||void 0===b?void 0:b.description_placeholders,H=t.localize("component.".concat(k,".services.").concat(M,".name"),V)||(null===(A=t.services[k])||void 0===A||null===(A=A[M])||void 0===A?void 0:A.name);return y.metadata?t.localize("".concat(f,".service.description.service_name_no_targets"),{domain:(0,p.p$)(t.localize,k),name:H||y.action}):t.localize("".concat(f,".service.description.service_based_on_name_no_targets"),{name:H?"".concat((0,p.p$)(t.localize,k),": ").concat(H):y.action})}return t.localize("".concat(f,".service.description.service"))}if("delay"===o){var S,x=i;return S="number"==typeof x.delay?t.localize("".concat(f,".delay.description.duration_string"),{string:(0,r.A)(x.delay)}):"string"==typeof x.delay?(0,d.F)(x.delay)?t.localize("".concat(f,".delay.description.duration_template")):t.localize("".concat(f,".delay.description.duration_string"),{string:x.delay||t.localize("".concat(f,".delay.description.duration_unknown"))}):x.delay?t.localize("".concat(f,".delay.description.duration_string"),{string:(0,s.nR)(t.locale,x.delay)}):t.localize("".concat(f,".delay.description.duration_string"),{string:t.localize("".concat(f,".delay.description.duration_unknown"))}),t.localize("".concat(f,".delay.description.full"),{duration:S})}if("wait_for_trigger"===o){var L=i,Z=(0,n.e)(L.wait_for_trigger);return Z&&0!==Z.length?t.localize("".concat(f,".wait_for_trigger.description.wait_for_triggers"),{count:Z.length}):t.localize("".concat(f,".wait_for_trigger.description.wait_for_a_trigger"))}if("variables"===o){var E=i;return t.localize("".concat(f,".variables.description.full"),{names:(0,l.c)(t.locale,Object.keys(E.variables))})}if("fire_event"===o){var O=i;return(0,d.F)(O.event)?t.localize("".concat(f,".event.description.full"),{name:t.localize("".concat(f,".event.description.template"))}):t.localize("".concat(f,".event.description.full"),{name:O.event})}if("wait_template"===o)return t.localize("".concat(f,".wait_template.description.full"));if("stop"===o){var z=i;return t.localize("".concat(f,".stop.description.full"),{hasReason:void 0!==z.stop?"true":"false",reason:z.stop})}if("if"===o)return void 0!==i.else?t.localize("".concat(f,".if.description.if_else")):t.localize("".concat(f,".if.description.if"));if("choose"===o){var q=i;if(q.choose){var I=(0,n.e)(q.choose).length+(q.default?1:0);return t.localize("".concat(f,".choose.description.full"),{number:I})}return t.localize("".concat(f,".choose.description.no_action"))}if("repeat"===o){var R=i,D="";if("count"in R.repeat){var P=R.repeat.count;D=t.localize("".concat(f,".repeat.description.count"),{count:P})}else if("while"in R.repeat){var j=(0,n.e)(R.repeat.while);D=t.localize("".concat(f,".repeat.description.while_count"),{count:j.length})}else if("until"in R.repeat){var B=(0,n.e)(R.repeat.until);D=t.localize("".concat(f,".repeat.description.until_count"),{count:B.length})}else if("for_each"in R.repeat){var F=(0,n.e)(R.repeat.for_each).map(function(t){return JSON.stringify(t)});D=t.localize("".concat(f,".repeat.description.for_each"),{items:(0,l.c)(t.locale,F)})}return t.localize("".concat(f,".repeat.description.full"),{chosenAction:D})}if("check_condition"===o)return t.localize("".concat(f,".check_condition.description.full"),{condition:(0,h.p)(i,t,e)});if("device_action"===o){var N=i;if(!N.device_id)return t.localize("".concat(f,".device_id.description.no_device"));var T=(0,u.PV)(t,e,N);if(T)return T;var U=t.states[N.entity_id];return N.type?"".concat(N.type," ").concat(U?(0,c.u)(U):N.entity_id):t.localize("".concat(f,".device_id.description.perform_device_action"),{device:U?(0,c.u)(U):N.entity_id})}if("sequence"===o){var K=i,W=(0,n.e)(K.sequence).length;return t.localize("".concat(f,".sequence.description.full"),{number:W})}if("parallel"===o){var Y=i,X=(0,n.e)(Y.parallel).length;return t.localize("".concat(f,".parallel.description.full"),{number:X})}if("set_conversation_response"===o){var $=i;return(0,d.F)($.set_conversation_response)?t.localize("".concat(f,".set_conversation_response.description.template")):t.localize("".concat(f,".set_conversation_response.description.full"),{response:$.set_conversation_response})}return o};o()}catch(m){o(m)}})},38859:function(t,e,i){i.d(e,{d:function(){return o}});i(74423);var o=function(t,e){return t.callWS({type:"execute_script",sequence:e})}},24423:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s,r=i(72153),c=i(44734),l=i(43080),d=i(69683),h=i(6454),u=(i(28706),i(69085),i(62826)),p=i(96196),v=i(77845),g=i(94333),f=i(69558),y=i(1087),_=i(10763),m=i(30780),b=i(84025),A=(i(15702),i(57116)),w=i(60232),C=t([_,w]);[_,w]=C.then?(await C)():C;var k=function(t){function e(){var t;(0,c.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,d.A)(this,e,[].concat(o))).disabled=!1,t.yamlMode=!1,t.indent=!1,t.selected=!1,t.narrow=!1,t.inSidebar=!1,t.uiSupported=!1,t}return(0,h.A)(e,t),(0,l.A)(e,[{key:"render",value:function(){var t=this.yamlMode||!this.uiSupported,e=(0,w.MS)(this.action);return(0,p.qy)(o||(o=(0,r.A)([' <div class="','"> '," </div> "])),(0,g.H)({"card-content":!0,disabled:!this.indent&&(this.disabled||!1===this.action.enabled&&!this.yamlMode),yaml:t,indent:this.indent,card:!this.inSidebar}),t?(0,p.qy)(a||(a=(0,r.A)([" ",' <ha-yaml-editor .hass="','" .defaultValue="','" @value-changed="','" .readOnly="','"></ha-yaml-editor> '])),this.uiSupported?p.s6:(0,p.qy)(n||(n=(0,r.A)([' <ha-automation-editor-warning .alertTitle="','" .localize="','"></ha-automation-editor-warning> '])),this.hass.localize("ui.panel.config.automation.editor.actions.unsupported_action"),this.hass.localize),this.hass,this.action,this._onYamlChange,this.disabled):(0,p.qy)(s||(s=(0,r.A)([' <div @value-changed="','"> '," </div> "])),this._onUiChanged,(0,f._)("ha-automation-action-".concat(e),{hass:this.hass,action:this.action,disabled:this.disabled,narrow:this.narrow,optionsInSidebar:this.indent,indent:this.indent,inSidebar:this.inSidebar})))}},{key:"_onYamlChange",value:function(t){t.stopPropagation(),t.detail.isValid&&(0,y.r)(this,this.inSidebar?"yaml-changed":"value-changed",{value:(0,b.Rn)(t.detail.value)})}},{key:"_onUiChanged",value:function(t){t.stopPropagation();var e=Object.assign(Object.assign({},this.action.alias?{alias:this.action.alias}:{}),t.detail.value);(0,y.r)(this,"value-changed",{value:e})}},{key:"expandAll",value:function(){var t,e;null===(t=this._collapsibleElement)||void 0===t||null===(e=t.expandAll)||void 0===e||e.call(t)}},{key:"collapseAll",value:function(){var t,e;null===(t=this._collapsibleElement)||void 0===t||null===(e=t.collapseAll)||void 0===e||e.call(t)}}])}(p.WF);k.styles=[A.yj,A.aM],(0,u.Cg)([(0,v.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,u.Cg)([(0,v.MZ)({attribute:!1})],k.prototype,"action",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean})],k.prototype,"disabled",void 0),(0,u.Cg)([(0,v.MZ)({attribute:!1})],k.prototype,"yamlMode",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean})],k.prototype,"indent",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,reflect:!0})],k.prototype,"selected",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean})],k.prototype,"narrow",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,attribute:"sidebar"})],k.prototype,"inSidebar",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,attribute:"supported"})],k.prototype,"uiSupported",void 0),(0,u.Cg)([(0,v.P)("ha-yaml-editor")],k.prototype,"yamlEditor",void 0),(0,u.Cg)([(0,v.P)(m.MC.join(", "))],k.prototype,"_collapsibleElement",void 0),k=(0,u.Cg)([(0,v.EM)("ha-automation-action-editor")],k),e()}catch(M){e(M)}})},60232:function(t,e,i){i.a(t,async function(t,o){try{i.d(e,{MS:function(){return Mt},Pb:function(){return Vt}});var a,n,s,r,c,l,d,h,u,p,v,g,f,y,_,m,b,A,w,C,k,M=i(94741),V=i(61397),H=i(50264),S=i(72153),x=i(44734),L=i(43080),Z=i(75864),E=i(69683),O=i(6454),z=i(25460),q=i(26520),I=(i(28706),i(50113),i(74423),i(18111),i(20116),i(13579),i(69085),i(79432),i(26099),i(21699),i(42781),i(62826)),R=(i(94422),i(16527)),D=i(34271),P=i(53289),j=i(96196),B=i(77845),F=i(22786),N=i(44537),T=i(93905),U=i(1087),K=i(99124),W=i(57237),Y=i(52943),X=i(78978),$=i(63130),J=(i(14844),i(76776),i(29823)),G=(i(70947),i(11382),i(50888),i(65329)),Q=i(34127),tt=i(30780),et=i(87225),it=i(12596),ot=i(38911),at=i(84025),nt=i(45464),st=i(38859),rt=i(65063),ct=i(41570),lt=i(81619),dt=(i(15702),i(57116)),ht=i(62711),ut=i(24423),pt=i(35877),vt=i(49707),gt=(i(67909),i(83108)),ft=i(57826),yt=i(75107),_t=i(23063),mt=i(49063),bt=i(85933),At=i(19809),wt=(i(66710),i(11864),i(88166)),Ct=(i(21446),t([J,G,Q,ht,ut,pt,vt,gt,ft,yt,_t,bt,At,wt,nt,mt]));[J,G,Q,ht,ut,pt,vt,gt,ft,yt,_t,bt,At,wt,nt,mt]=Ct.then?(await Ct)():Ct;var kt="M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z",Mt=(0,F.A)(function(t){if(t)return"action"in t?(0,at.pq)(t):et.I8.some(function(e){return e in t})?"condition":Object.keys(tt.O$).find(function(e){return e in t})}),Vt=function(t,e){var i,o;e.stopPropagation();var a=null===(i=e.target)||void 0===i?void 0:i.name;if(a){var n,s=(null===(o=e.detail)||void 0===o?void 0:o.value)||e.target.value;if((t.action[a]||"")!==s)s?n=Object.assign(Object.assign({},t.action),{},(0,q.A)({},a,s)):delete(n=Object.assign({},t.action))[a],(0,U.r)(t,"value-changed",{value:n})}},Ht=function(t){function e(){var t;(0,x.A)(this,e);for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=(0,E.A)(this,e,[].concat(o))).narrow=!1,t.disabled=!1,t.root=!1,t.optionsInSidebar=!1,t.sortSelected=!1,t._uiModeAvailable=!0,t._yamlMode=!1,t._selected=!1,t._collapsed=!0,t._renderTargets=(0,F.A)(function(e){return(0,j.qy)(a||(a=(0,S.A)(['<ha-automation-row-targets .hass="','" .target="','"></ha-automation-row-targets>'])),t.hass,e)}),t._onDisable=function(){var e,i,o=!(null===(e=t.action.enabled)||void 0===e||e),a=Object.assign(Object.assign({},t.action),{},{enabled:o});((0,U.r)((0,Z.A)(t),"value-changed",{value:a}),t._selected&&t.optionsInSidebar&&t.openSidebar(a),t._yamlMode&&!t.optionsInSidebar)&&(null===(i=t._actionEditor)||void 0===i||null===(i=i.yamlEditor)||void 0===i||i.setValue(a))},t._runAction=(0,H.A)((0,V.A)().m(function e(){var i,o;return(0,V.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return requestAnimationFrame(function(){t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView()}),e.n=1,(0,it.$)(t.hass,{actions:t.action});case 1:if((i=e.v).actions.valid){e.n=2;break}return(0,rt.K$)((0,Z.A)(t),{title:t.hass.localize("ui.panel.config.automation.editor.actions.invalid_action"),text:i.actions.error}),e.a(2);case 2:return e.p=2,e.n=3,(0,st.d)(t.hass,t.action);case 3:e.n=5;break;case 4:return e.p=4,o=e.v,(0,rt.K$)((0,Z.A)(t),{title:t.hass.localize("ui.panel.config.automation.editor.actions.run_action_error"),text:o.message||o}),e.a(2);case 5:(0,lt.P)((0,Z.A)(t),{message:t.hass.localize("ui.panel.config.automation.editor.actions.run_action_success")});case 6:return e.a(2)}},e,null,[[2,4]])})),t._onDelete=function(){(0,U.r)((0,Z.A)(t),"value-changed",{value:null}),t._selected&&(0,U.r)((0,Z.A)(t),"close-sidebar"),(0,lt.P)((0,Z.A)(t),{message:t.hass.localize("ui.common.successfully_deleted"),duration:4e3,action:{text:t.hass.localize("ui.common.undo"),action:function(){(0,U.r)(window,"undo-change")}}})},t._renameAction=(0,H.A)((0,V.A)().m(function e(){var i,o,a;return(0,V.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,rt.an)((0,Z.A)(t),{title:t.hass.localize("ui.panel.config.automation.editor.actions.change_alias"),inputLabel:t.hass.localize("ui.panel.config.automation.editor.actions.alias"),inputType:"string",placeholder:(0,Y.Z)((0,nt.u)(t.hass,t._entityReg,t.action,void 0,!0)),defaultValue:t.action.alias,confirmText:t.hass.localize("ui.common.submit")});case 1:null!==(i=e.v)&&(o=Object.assign({},t.action),""===i?delete o.alias:o.alias=i,(0,U.r)((0,Z.A)(t),"value-changed",{value:o}),t._selected&&t.optionsInSidebar?t.openSidebar(o):t._yamlMode&&(null===(a=t._actionEditor)||void 0===a||null===(a=a.yamlEditor)||void 0===a||a.setValue(o)));case 2:return e.a(2)}},e)})),t._duplicateAction=function(){(0,U.r)((0,Z.A)(t),"duplicate")},t._insertAfter=function(e){return!(0,N.e)(e).some(function(t){return!(0,at.ve)(t)})&&((0,U.r)((0,Z.A)(t),"insert-after",{value:e}),!0)},t._copyAction=function(){t._setClipboard(),(0,lt.P)((0,Z.A)(t),{message:t.hass.localize("ui.panel.config.automation.editor.actions.copied_to_clipboard"),duration:2e3})},t._cutAction=function(){t._setClipboard(),(0,U.r)((0,Z.A)(t),"value-changed",{value:null}),t._selected&&(0,U.r)((0,Z.A)(t),"close-sidebar"),(0,lt.P)((0,Z.A)(t),{message:t.hass.localize("ui.panel.config.automation.editor.actions.cut_to_clipboard"),duration:2e3})},t._moveUp=function(){(0,U.r)((0,Z.A)(t),"move-up")},t._moveDown=function(){(0,U.r)((0,Z.A)(t),"move-down")},t._toggleYamlMode=function(e){t._yamlMode?t._switchUiMode():t._switchYamlMode(),t.optionsInSidebar?e&&t.openSidebar():t.expand()},t._uiSupported=(0,F.A)(function(t){return void 0!==customElements.get("ha-automation-action-".concat(t))}),t}return(0,O.A)(e,t),(0,L.A)(e,[{key:"selected",get:function(){return this._selected}},{key:"firstUpdated",value:function(t){(0,z.A)(e,"firstUpdated",this,3)([t]),this.root&&(this._collapsed=!1)}},{key:"willUpdate",value:function(t){if(t.has("yamlMode")&&(this._warnings=void 0),t.has("action")){var e=Mt(this.action);this._uiModeAvailable=void 0!==e&&!tt.ix.has(e),this._uiModeAvailable||this._yamlMode||(this._yamlMode=!0)}}},{key:"_renderOverflowLabel",value:function(t,e){return(0,j.qy)(n||(n=(0,S.A)([' <div class="overflow-label"> '," "," </div> "])),t,this.optionsInSidebar&&!this.narrow?e||(0,j.qy)(s||(s=(0,S.A)(['<span class="shortcut-placeholder ','"></span>'])),ct.c?"mac":""):j.s6)}},{key:"_renderRow",value:function(){var t=Mt(this.action);return(0,j.qy)(r||(r=(0,S.A)([" ",' <h3 slot="header"> '," ",' </h3> <slot name="icons" slot="icons"></slot> ',' <ha-dropdown slot="icons" @click="','" @keydown="','" @wa-select="','" placement="bottom-end"> <ha-icon-button slot="trigger" .label="','" .path="','"></ha-icon-button> <ha-dropdown-item value="run"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> ',' </ha-dropdown-item> <ha-dropdown-item value="rename" .disabled="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> ',' </ha-dropdown-item> <wa-divider></wa-divider> <ha-dropdown-item value="duplicate" .disabled="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> ',' </ha-dropdown-item> <ha-dropdown-item value="copy" .disabled="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> ',' </ha-dropdown-item> <ha-dropdown-item value="cut" .disabled="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> '," </ha-dropdown-item> ",' <ha-dropdown-item value="toggle_yaml_mode" .disabled="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> ',' </ha-dropdown-item> <wa-divider></wa-divider> <ha-dropdown-item value="disable" .disabled="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> ',' </ha-dropdown-item> <ha-dropdown-item value="delete" variant="danger" .disabled="','"> <ha-svg-icon class="warning" slot="icon" .path="','"></ha-svg-icon> '," </ha-dropdown-item> </ha-dropdown> "," "])),"service"===t&&"action"in this.action&&this.action.action?(0,j.qy)(c||(c=(0,S.A)([' <ha-service-icon slot="leading-icon" class="action-icon" .hass="','" .service="','"></ha-service-icon> '])),this.hass,this.action.action):(0,j.qy)(l||(l=(0,S.A)([' <ha-svg-icon slot="leading-icon" class="action-icon" .path="','"></ha-svg-icon> '])),tt.O$[t]),(0,Y.Z)((0,nt.u)(this.hass,this._entityReg,this.action)),"service"===t&&"target"in this.action?this._renderTargets(this.action.target):j.s6,"condition"!==t&&!0===this.action.continue_on_error?(0,j.qy)(d||(d=(0,S.A)(['<ha-svg-icon id="svg-icon" slot="icons" .path="','"></ha-svg-icon> <ha-tooltip for="svg-icon"> '," </ha-tooltip>"])),"M18.75 22.16L16 19.16L17.16 18L18.75 19.59L22.34 16L23.5 17.41L18.75 22.16M13 13V7H11V13H13M13 17V15H11V17H13M12 2C17.5 2 22 6.5 22 12L21.91 13.31C21.31 13.11 20.67 13 20 13C16.69 13 14 15.69 14 19C14 19.95 14.22 20.85 14.62 21.65C13.78 21.88 12.91 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2Z",this.hass.localize("ui.panel.config.automation.editor.actions.continue_on_error")):j.s6,K.C,W.d,this._handleDropdownSelect,this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z","M8,5.14V19.14L19,12.14L8,5.14Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.actions.run")),this.disabled,"M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.triggers.rename")),this.disabled,"M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")),this.disabled,"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.triggers.copy"),(0,j.qy)(h||(h=(0,S.A)(['<span class="shortcut"> <span>',"</span> <span>+</span> <span>C</span> </span>"])),ct.c?(0,j.qy)(u||(u=(0,S.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),kt):this.hass.localize("ui.panel.config.automation.editor.ctrl"))),this.disabled,"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.triggers.cut"),(0,j.qy)(p||(p=(0,S.A)(['<span class="shortcut"> <span>',"</span> <span>+</span> <span>X</span> </span>"])),ct.c?(0,j.qy)(v||(v=(0,S.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),kt):this.hass.localize("ui.panel.config.automation.editor.ctrl"))),this.optionsInSidebar?j.s6:(0,j.qy)(g||(g=(0,S.A)([' <ha-dropdown-item value="move_up" .disabled="','"> ',' <ha-svg-icon slot="icon" .path="','"></ha-svg-icon></ha-dropdown-item> <ha-dropdown-item value="move_down" .disabled="','"> ',' <ha-svg-icon slot="icon" .path="','"></ha-svg-icon></ha-dropdown-item> '])),this.disabled||!!this.first,this.hass.localize("ui.panel.config.automation.editor.move_up"),"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",this.disabled||!!this.last,this.hass.localize("ui.panel.config.automation.editor.move_down"),"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z"),!this._uiModeAvailable||!!this._warnings,"M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.edit_".concat(this._yamlMode?"ui":"yaml"))),this.disabled,!1===this.action.enabled?"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z":"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.actions.".concat(!1===this.action.enabled?"enable":"disable"))),this.disabled,"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.actions.delete"),(0,j.qy)(f||(f=(0,S.A)(['<span class="shortcut"> <span>',"</span> <span>+</span> <span>","</span> </span>"])),ct.c?(0,j.qy)(y||(y=(0,S.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),kt):this.hass.localize("ui.panel.config.automation.editor.ctrl"),this.hass.localize("ui.panel.config.automation.editor.del"))),this.optionsInSidebar?j.s6:(0,j.qy)(_||(_=(0,S.A)(["",' <ha-automation-action-editor .hass="','" .action="','" .disabled="','" .yamlMode="','" .narrow="','" .uiSupported="','" @ui-mode-not-available="','"></ha-automation-action-editor>'])),this._warnings?(0,j.qy)(m||(m=(0,S.A)(['<ha-automation-editor-warning .localize="','" .warnings="','"> </ha-automation-editor-warning>'])),this.hass.localize,this._warnings):j.s6,this.hass,this.action,this.disabled,this._yamlMode,this.narrow,this._uiSupported(t),this._handleUiModeNotAvailable))}},{key:"render",value:function(){if(!this.action)return j.s6;var t=Mt(this.action),e="repeat"===t?"repeat_".concat((0,mt.m)(this.action.repeat)):t;return(0,j.qy)(b||(b=(0,S.A)([" <ha-card outlined> "," "," </ha-card> "," "])),!1===this.action.enabled?(0,j.qy)(A||(A=(0,S.A)([' <div class="disabled-bar"> '," </div> "])),this.hass.localize("ui.panel.config.automation.editor.actions.disabled")):j.s6,this.optionsInSidebar?(0,j.qy)(w||(w=(0,S.A)(['<ha-automation-row .disabled="','" .leftChevron="','" .collapsed="','" .selected="','" .highlight="','" .buildingBlock="','" .sortSelected="','" @click="','" @toggle-collapsed="','">',"</ha-automation-row>"])),!1===this.action.enabled,[].concat((0,M.A)(tt.L_),(0,M.A)(tt.I8)).includes(e)||"condition"===e&&et.I8.includes(this.action.condition),this._collapsed,this._selected,this.highlight,[].concat((0,M.A)(tt.L_),(0,M.A)(tt.I8)).includes(e),this.sortSelected,this._toggleSidebar,this._toggleCollapse,this._renderRow()):(0,j.qy)(C||(C=(0,S.A)([" <ha-expansion-panel left-chevron> "," </ha-expansion-panel> "])),this._renderRow()),this.optionsInSidebar&&([].concat((0,M.A)(tt.L_),(0,M.A)(tt.I8)).includes(e)||"condition"===e&&et.I8.includes(this.action.condition))?(0,j.qy)(k||(k=(0,S.A)(['<ha-automation-action-editor class="','" .hass="','" .action="','" .narrow="','" .disabled="','" .uiSupported="','" indent .selected="','" @value-changed="','"></ha-automation-action-editor>'])),this._collapsed?"hidden":"",this.hass,this.action,this.narrow,this.disabled,this._uiSupported(t),this._selected,this._onValueChange):j.s6)}},{key:"_onValueChange",value:function(t){this._selected&&this.optionsInSidebar&&this.openSidebar(t.detail.value)}},{key:"_setClipboard",value:function(){this._clipboard=Object.assign(Object.assign({},this._clipboard),{},{action:(0,D.A)(this.action)});var t=this.action;"sequence"in t&&(t=Object.assign(Object.assign({},this.action),{},{metadata:{}})),(0,$.l)((0,P.Bh)(t))}},{key:"_switchUiMode",value:function(){this._yamlMode=!1}},{key:"_switchYamlMode",value:function(){this._yamlMode=!0}},{key:"_handleUiModeNotAvailable",value:function(t){this._warnings=(0,X._)(this.hass,t.detail).warnings,this._yamlMode||(this._yamlMode=!0)}},{key:"_toggleSidebar",value:function(t){null==t||t.stopPropagation(),this._selected?(0,U.r)(this,"request-close-sidebar"):this.openSidebar()}},{key:"openSidebar",value:function(t){var e=this,i=null!=t?t:this.action,o=Mt(i);(0,U.r)(this,"open-sidebar",{save:function(t){(0,U.r)(e,"value-changed",{value:t})},close:function(t){e._selected=!1,(0,U.r)(e,"close-sidebar"),t&&e.focus()},rename:function(){e._renameAction()},toggleYamlMode:function(){e._toggleYamlMode(),e.openSidebar()},disable:this._onDisable,delete:this._onDelete,copy:this._copyAction,cut:this._cutAction,duplicate:this._duplicateAction,insertAfter:this._insertAfter,run:this._runAction,config:{action:i},uiSupported:!!o&&this._uiSupported(o),yamlMode:this._yamlMode}),this._selected=!0,this._collapsed=!1,this.narrow&&window.setTimeout(function(){e.scrollIntoView({block:"start",behavior:"smooth"})},180)}},{key:"expand",value:function(){var t=this;this.optionsInSidebar?this._collapsed=!1:this.updateComplete.then(function(){t.shadowRoot.querySelector("ha-expansion-panel").expanded=!0})}},{key:"collapse",value:function(){var t=this;this.optionsInSidebar?this._collapsed=!0:this.updateComplete.then(function(){t.shadowRoot.querySelector("ha-expansion-panel").expanded=!1})}},{key:"expandAll",value:function(){var t;this.expand(),null===(t=this._actionEditor)||void 0===t||t.expandAll()}},{key:"collapseAll",value:function(){var t;this.collapse(),null===(t=this._actionEditor)||void 0===t||t.collapseAll()}},{key:"_toggleCollapse",value:function(){this._collapsed=!this._collapsed}},{key:"focus",value:function(){var t;null===(t=this._automationRowElement)||void 0===t||t.focus()}},{key:"_handleDropdownSelect",value:function(t){var e,i=null===(e=t.detail)||void 0===e||null===(e=e.item)||void 0===e?void 0:e.value;if(i)switch(i){case"run":this._runAction();break;case"rename":this._renameAction();break;case"duplicate":this._duplicateAction();break;case"copy":this._copyAction();break;case"cut":this._cutAction();break;case"move_up":this._moveUp();break;case"move_down":this._moveDown();break;case"toggle_yaml_mode":this._toggleYamlMode(t.target);break;case"disable":this._onDisable();break;case"delete":this._onDelete()}}}])}(j.WF);Ht.styles=[dt.bH,dt.Lt],(0,I.Cg)([(0,B.MZ)({attribute:!1})],Ht.prototype,"hass",void 0),(0,I.Cg)([(0,B.MZ)({attribute:!1})],Ht.prototype,"action",void 0),(0,I.Cg)([(0,B.MZ)({type:Boolean})],Ht.prototype,"narrow",void 0),(0,I.Cg)([(0,B.MZ)({type:Boolean})],Ht.prototype,"disabled",void 0),(0,I.Cg)([(0,B.MZ)({type:Boolean})],Ht.prototype,"root",void 0),(0,I.Cg)([(0,B.MZ)({type:Boolean})],Ht.prototype,"first",void 0),(0,I.Cg)([(0,B.MZ)({type:Boolean})],Ht.prototype,"last",void 0),(0,I.Cg)([(0,B.MZ)({type:Boolean})],Ht.prototype,"highlight",void 0),(0,I.Cg)([(0,B.MZ)({type:Boolean,attribute:"sidebar"})],Ht.prototype,"optionsInSidebar",void 0),(0,I.Cg)([(0,B.MZ)({type:Boolean,attribute:"sort-selected"})],Ht.prototype,"sortSelected",void 0),(0,I.Cg)([(0,T.I)({key:"automationClipboard",state:!1,subscribe:!0,storage:"sessionStorage"})],Ht.prototype,"_clipboard",void 0),(0,I.Cg)([(0,B.wk)(),(0,R.Fg)({context:ot.ih,subscribe:!0})],Ht.prototype,"_entityReg",void 0),(0,I.Cg)([(0,B.wk)()],Ht.prototype,"_uiModeAvailable",void 0),(0,I.Cg)([(0,B.wk)()],Ht.prototype,"_yamlMode",void 0),(0,I.Cg)([(0,B.wk)()],Ht.prototype,"_selected",void 0),(0,I.Cg)([(0,B.wk)()],Ht.prototype,"_collapsed",void 0),(0,I.Cg)([(0,B.wk)()],Ht.prototype,"_warnings",void 0),(0,I.Cg)([(0,B.P)("ha-automation-action-editor")],Ht.prototype,"_actionEditor",void 0),(0,I.Cg)([(0,B.P)("ha-automation-row")],Ht.prototype,"_automationRowElement",void 0),Ht=(0,I.Cg)([(0,B.EM)("ha-automation-action-row")],Ht),o()}catch(St){o(St)}})},68469:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s=i(94741),r=i(61397),c=i(50264),l=i(72153),d=i(26520),h=i(44734),u=i(43080),p=i(75864),v=i(69683),g=i(6454),f=i(25460),y=(i(28706),i(2008),i(74423),i(23792),i(34782),i(54554),i(71658),i(18111),i(22489),i(7588),i(69085),i(26099),i(38781),i(21699),i(47764),i(73772),i(23500),i(62953),i(62826)),_=i(34271),m=i(96196),b=i(77845),A=i(4937),w=i(44537),C=i(93905),k=i(1087),M=i(57237),V=i(12587),H=i(18350),S=(i(85938),i(67094),i(30780)),x=i(88249),L=i(82405),Z=i(57116),E=i(60232),O=t([H,E]);[H,E]=O.then?(await O)():O;var z=function(t){function e(){var t;(0,h.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,v.A)(this,e,[].concat(o))).narrow=!1,t.disabled=!1,t.root=!1,t.optionsInSidebar=!1,t._focusLastActionOnChange=!1,t._actionKeys=new WeakMap,t._addAction=function(e,i){var o;if(e===L.u)o=t.actions.concat((0,_.A)(t._clipboard.action));else if(e in S.EN)o=t.actions.concat(S.EN[e]);else if((0,x.Q)(e))o=t.actions.concat({action:(0,x.Dt)(e),metadata:{},target:i});else{var a=customElements.get("ha-automation-action-".concat(e));o=t.actions.concat(a?Object.assign({},a.defaultConfig):(0,d.A)({},e,{}))}t._focusLastActionOnChange=!0,(0,k.r)((0,p.A)(t),"value-changed",{value:o})},t}return(0,g.A)(e,t),(0,u.A)(e,[{key:"render",value:function(){var t=this;return(0,m.qy)(o||(o=(0,l.A)([' <ha-sortable handle-selector=".handle" draggable-selector="ha-automation-action-row" .disabled="','" group="actions" invert-swap @item-moved="','" @item-added="','" @item-removed="','"> <div class="rows ','"> ',' <div class="buttons"> <ha-button .disabled="','" @click="','" .appearance="','" .size="','"> <ha-svg-icon .path="','" slot="start"></ha-svg-icon> '," </ha-button> </div> </div> </ha-sortable> "])),this.disabled,this._actionMoved,this._actionAdded,this._actionRemoved,this.optionsInSidebar?"":"no-sidebar",(0,A.u)(this.actions,function(e){return t._getKey(e)},function(e,i){var o;return(0,m.qy)(a||(a=(0,l.A)([' <ha-automation-action-row .root="','" .sortableData="','" .index="','" .first="','" .last="','" .action="','" .narrow="','" .disabled="','" @duplicate="','" @insert-after="','" @move-down="','" @move-up="','" @value-changed="','" .hass="','" .highlight="','" .optionsInSidebar="','" .sortSelected="','" @stop-sort-selection="','"> '," </ha-automation-action-row> "])),t.root,e,i,0===i,i===t.actions.length-1,e,t.narrow,t.disabled,t._duplicateAction,t._insertAfter,t._moveDown,t._moveUp,t._actionChanged,t.hass,null===(o=t.highlightedActions)||void 0===o?void 0:o.includes(e),t.optionsInSidebar,t._rowSortSelected===i,t._stopSortSelection,t.disabled?m.s6:(0,m.qy)(n||(n=(0,l.A)([' <div tabindex="0" class="handle ','" slot="icons" @keydown="','" @click="','" .index="','"> <ha-svg-icon .path="','"></ha-svg-icon> </div> '])),t._rowSortSelected===i?"active":"",t._handleDragKeydown,M.d,i,"M21 11H3V9H21V11M21 13H3V15H21V13Z"))}),this.disabled,this._addActionDialog,this.root?"accent":"filled",this.root?"medium":"small","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",this.hass.localize("ui.panel.config.automation.editor.actions.add"))}},{key:"updated",value:function(t){var i=this;if((0,f.A)(e,"updated",this,3)([t]),t.has("actions")&&(this._focusLastActionOnChange||void 0!==this._focusActionIndexOnChange)){var o=this._focusLastActionOnChange?"new":"moved",a=this.shadowRoot.querySelector("ha-automation-action-row:".concat("new"===o?"last-of-type":"nth-of-type(".concat(this._focusActionIndexOnChange+1,")")));this._focusLastActionOnChange=!1,this._focusActionIndexOnChange=void 0,a.updateComplete.then(function(){var t=(0,E.MS)(a.action);!t||!i.optionsInSidebar||S.L_.includes(t)&&"moved"!==o||(a.openSidebar(),i.narrow&&a.scrollIntoView({block:"start",behavior:"smooth"})),"new"===o&&a.expand(),i.optionsInSidebar||a.focus()})}}},{key:"expandAll",value:function(){var t;null===(t=this._actionRowElements)||void 0===t||t.forEach(function(t){t.expandAll()})}},{key:"collapseAll",value:function(){var t;null===(t=this._actionRowElements)||void 0===t||t.forEach(function(t){t.collapseAll()})}},{key:"_addActionDialog",value:function(){var t;this.narrow&&(0,k.r)(this,"request-close-sidebar"),(0,L.g)(this,{type:"action",add:this._addAction,clipboardItem:(0,E.MS)(null===(t=this._clipboard)||void 0===t?void 0:t.action)})}},{key:"_getKey",value:function(t){return this._actionKeys.has(t)||this._actionKeys.set(t,Math.random().toString()),this._actionKeys.get(t)}},{key:"_moveUp",value:(C=(0,c.A)((0,r.A)().m(function t(e){var i,o;return(0,r.A)().w(function(t){for(;;)switch(t.n){case 0:e.stopPropagation(),i=e.target.index,e.target.first||(o=i-1,this._move(i,o),this._rowSortSelected===i&&(this._rowSortSelected=o),e.target.focus());case 1:return t.a(2)}},t,this)})),function(t){return C.apply(this,arguments)})},{key:"_moveDown",value:(b=(0,c.A)((0,r.A)().m(function t(e){var i,o;return(0,r.A)().w(function(t){for(;;)switch(t.n){case 0:e.stopPropagation(),i=e.target.index,e.target.last||(o=i+1,this._move(i,o),this._rowSortSelected===i&&(this._rowSortSelected=o),e.target.focus());case 1:return t.a(2)}},t,this)})),function(t){return b.apply(this,arguments)})},{key:"_move",value:function(t,e){var i=this.actions.concat(),o=i.splice(t,1)[0];i.splice(e,0,o),this.actions=i,(0,k.r)(this,"value-changed",{value:i})}},{key:"_actionMoved",value:function(t){t.stopPropagation();var e=t.detail,i=e.oldIndex,o=e.newIndex;this._move(i,o)}},{key:"_actionAdded",value:(y=(0,c.A)((0,r.A)().m(function t(e){var i,o,a,n,c,l;return(0,r.A)().w(function(t){for(;;)switch(t.n){case 0:return e.stopPropagation(),i=e.detail,o=i.index,a=i.data,n=e.detail.item,c=n.selected,l=[].concat((0,s.A)(this.actions.slice(0,o)),[a],(0,s.A)(this.actions.slice(o))),this.actions=l,c&&(this._focusActionIndexOnChange=1===l.length?0:o),t.n=1,(0,V.E)();case 1:this.actions!==l&&(l=[].concat((0,s.A)(this.actions.slice(0,o)),[a],(0,s.A)(this.actions.slice(o))),c&&(this._focusActionIndexOnChange=1===l.length?0:o)),(0,k.r)(this,"value-changed",{value:l});case 2:return t.a(2)}},t,this)})),function(t){return y.apply(this,arguments)})},{key:"_actionRemoved",value:(i=(0,c.A)((0,r.A)().m(function t(e){var i,o,a;return(0,r.A)().w(function(t){for(;;)switch(t.n){case 0:return e.stopPropagation(),i=e.detail.index,o=this.actions[i],this.actions=this.actions.filter(function(t){return t!==o}),t.n=1,(0,V.E)();case 1:a=this.actions.filter(function(t){return t!==o}),(0,k.r)(this,"value-changed",{value:a});case 2:return t.a(2)}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"_actionChanged",value:function(t){t.stopPropagation();var e=(0,s.A)(this.actions),i=t.detail.value,o=t.target.index;if(null===i)e.splice(o,1);else{var a=this._getKey(e[o]);this._actionKeys.set(i,a),e[o]=i}(0,k.r)(this,"value-changed",{value:e})}},{key:"_duplicateAction",value:function(t){t.stopPropagation();var e=t.target.index;(0,k.r)(this,"value-changed",{value:this.actions.toSpliced(e+1,0,(0,_.A)(this.actions[e]))})}},{key:"_insertAfter",value:function(t){var e;t.stopPropagation();var i=t.target.index,o=(0,w.e)(t.detail.value);this.highlightedActions=o,(0,k.r)(this,"value-changed",{value:(e=this.actions).toSpliced.apply(e,[i+1,0].concat((0,s.A)(o)))})}},{key:"_handleDragKeydown",value:function(t){"Enter"!==t.key&&" "!==t.key||(t.stopPropagation(),this._rowSortSelected=void 0===this._rowSortSelected?t.target.index:void 0)}},{key:"_stopSortSelection",value:function(){this._rowSortSelected=void 0}}]);var i,y,b,C}(m.WF);z.styles=Z.Ju,(0,y.Cg)([(0,b.MZ)({attribute:!1})],z.prototype,"hass",void 0),(0,y.Cg)([(0,b.MZ)({type:Boolean})],z.prototype,"narrow",void 0),(0,y.Cg)([(0,b.MZ)({type:Boolean})],z.prototype,"disabled",void 0),(0,y.Cg)([(0,b.MZ)({type:Boolean})],z.prototype,"root",void 0),(0,y.Cg)([(0,b.MZ)({attribute:!1})],z.prototype,"actions",void 0),(0,y.Cg)([(0,b.MZ)({attribute:!1})],z.prototype,"highlightedActions",void 0),(0,y.Cg)([(0,b.MZ)({type:Boolean,attribute:"sidebar"})],z.prototype,"optionsInSidebar",void 0),(0,y.Cg)([(0,b.wk)()],z.prototype,"_rowSortSelected",void 0),(0,y.Cg)([(0,b.wk)(),(0,C.I)({key:"automationClipboard",state:!0,subscribe:!0,storage:"sessionStorage"})],z.prototype,"_clipboard",void 0),(0,y.Cg)([(0,b.YG)("ha-automation-action-row")],z.prototype,"_actionRowElements",void 0),z=(0,y.Cg)([(0,b.EM)("ha-automation-action")],z),e()}catch(q){e(q)}})},35877:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s=i(61397),r=i(50264),c=i(72153),l=i(44734),d=i(43080),h=i(69683),u=i(6454),p=(i(28706),i(69085),i(62826)),v=i(96196),g=i(77845),f=i(44537),y=i(1087),_=i(14503),m=i(83307),b=i(6650),A=i(57116),w=i(68469),C=t([m,b,w]);[m,b,w]=C.then?(await C)():C;var k=function(t){function e(){var t;(0,l.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,h.A)(this,e,[].concat(o))).disabled=!1,t.narrow=!1,t.indent=!1,t._showDefault=!1,t}return(0,u.A)(e,t),(0,d.A)(e,[{key:"render",value:function(){var t=this.action,e=t.choose?(0,f.e)(t.choose):[];return(0,v.qy)(o||(o=(0,c.A)([' <ha-automation-option .options="','" .disabled="','" @value-changed="','" .hass="','" .narrow="','" .optionsInSidebar="','" .showDefaultActions="','" @show-default-actions="','"></ha-automation-option> '," "])),e,this.disabled,this._optionsChanged,this.hass,this.narrow,this.indent,this._showDefault||!!t.default,this._addDefault,this._showDefault||t.default?(0,v.qy)(a||(a=(0,c.A)([' <ha-automation-option-row .defaultActions="','" .narrow="','" .disabled="','" .hass="','" .optionsInSidebar="','" @value-changed="','"></ha-automation-option-row> '])),(0,f.e)(t.default)||[],this.narrow,this.disabled,this.hass,this.indent,this._defaultChanged):v.s6)}},{key:"_addDefault",value:(i=(0,r.A)((0,s.A)().m(function t(){var e,i;return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:return this._showDefault=!0,t.n=1,null===(e=this._defaultOptionRowElement)||void 0===e?void 0:e.updateComplete;case 1:null===(i=this._defaultOptionRowElement)||void 0===i||i.expand();case 2:return t.a(2)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"_optionsChanged",value:function(t){t.stopPropagation();var e=t.detail.value;(0,y.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{choose:e})})}},{key:"_defaultChanged",value:function(t){t.stopPropagation(),this._showDefault=!0;var e=t.detail.value,i=Object.assign(Object.assign({},this.action),{},{default:e});0===e.length&&delete i.default,(0,y.r)(this,"value-changed",{value:i})}},{key:"expandAll",value:function(){var t,e;null===(t=this._optionElement)||void 0===t||t.expandAll(),null===(e=this._defaultOptionRowElement)||void 0===e||e.expandAll()}},{key:"collapseAll",value:function(){var t,e;null===(t=this._optionElement)||void 0===t||t.collapseAll(),null===(e=this._defaultOptionRowElement)||void 0===e||e.collapseAll()}}],[{key:"defaultConfig",get:function(){return{choose:[{conditions:[],sequence:[]}]}}},{key:"styles",get:function(){return[_.RF,A.aM,(0,v.AH)(n||(n=(0,c.A)(["ha-automation-option-row{display:block;margin-top:24px}h3{font-size:inherit;font-weight:inherit}"])))]}}]);var i}(v.WF);(0,p.Cg)([(0,g.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,p.Cg)([(0,g.MZ)({type:Boolean})],k.prototype,"disabled",void 0),(0,p.Cg)([(0,g.MZ)({attribute:!1})],k.prototype,"action",void 0),(0,p.Cg)([(0,g.MZ)({type:Boolean})],k.prototype,"narrow",void 0),(0,p.Cg)([(0,g.MZ)({type:Boolean})],k.prototype,"indent",void 0),(0,p.Cg)([(0,g.wk)()],k.prototype,"_showDefault",void 0),(0,p.Cg)([(0,g.P)("ha-automation-option")],k.prototype,"_optionElement",void 0),(0,p.Cg)([(0,g.P)("ha-automation-option-row")],k.prototype,"_defaultOptionRowElement",void 0),k=(0,p.Cg)([(0,g.EM)("ha-automation-action-choose")],k),e()}catch(M){e(M)}})},49707:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s,r,c=i(78261),l=i(72153),d=i(94741),h=i(44734),u=i(43080),p=i(69683),v=i(6454),g=(i(28706),i(74423),i(62062),i(26910),i(18111),i(61701),i(69085),i(79432),i(26099),i(21699),i(62826)),f=i(96196),y=i(77845),_=i(22786),m=i(1087),b=i(57237),A=i(52220),w=i(76623),C=(i(28732),i(606),i(88249)),k=i(87225),M=i(54706),V=i(49313),H=i(80081),S=i(30356),x=i(4601),L=i(97681),Z=i(4519),E=(i(93977),i(40998),i(60092)),O=i(23484),z=(i(52128),i(56860)),q=t([V,H,S,x,L,Z,E,O,z,w]);[V,H,S,x,L,Z,E,O,z,w]=q.then?(await q)():q;var I=function(t){function e(){var t;(0,h.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,p.A)(this,e,[].concat(o))).disabled=!1,t.narrow=!1,t.inSidebar=!1,t.indent=!1,t._conditionDescriptions={},t._processedTypes=(0,_.A)(function(e,i){var o=Object.keys(w.D).map(function(t){return[t,i("ui.panel.config.automation.editor.conditions.type.".concat(t,".label")),t]}),a=Object.keys(e).map(function(t){var e=(0,k.ob)(t),o=(0,k.YQ)(t);return["".concat(C.VH).concat(t),i("component.".concat(e,".conditions.").concat(o,".name"))||t,t]});return[].concat((0,d.A)(o),(0,d.A)(a)).sort(function(e,i){return(0,A.xL)(e[1],i[1],t.hass.locale.language)})}),t._getType=(0,_.A)(function(t,e){return t.condition in e?"platform":t.condition}),t._uiSupported=(0,_.A)(function(t){return void 0!==customElements.get("ha-automation-condition-".concat(t))}),t}return(0,v.A)(e,t),(0,u.A)(e,[{key:"hassSubscribe",value:function(){var t=this;return[(0,k.bn)(this.hass,function(e){return t._addConditions(e)})]}},{key:"_addConditions",value:function(t){this._conditionDescriptions=Object.assign(Object.assign({},this._conditionDescriptions),t)}},{key:"render",value:function(){var t=this,e=k.I8.includes(this.action.condition);return(0,f.qy)(o||(o=(0,l.A)([" "," "," "])),this.inSidebar||!this.inSidebar&&!this.indent?(0,f.qy)(a||(a=(0,l.A)([' <ha-select fixedMenuPosition .label="','" .disabled="','" .value="','" naturalMenuWidth @selected="','" @closed="','"> '," </ha-select> "])),this.hass.localize("ui.panel.config.automation.editor.conditions.type_select"),this.disabled,this.action.condition in this._conditionDescriptions?"".concat(C.VH).concat(this.action.condition):this.action.condition,this._typeChanged,b.d,this._processedTypes(this._conditionDescriptions,this.hass.localize).map(function(e){var i=(0,c.A)(e,3),o=i[0],a=i[1],s=i[2];return(0,f.qy)(n||(n=(0,l.A)([' <ha-list-item .value="','" graphic="icon"> ',' <ha-condition-icon .hass="','" slot="graphic" .condition="','"></ha-condition-icon> </ha-list-item> '])),o,a,t.hass,s)})):f.s6,this.indent&&e||this.inSidebar&&!e||!this.indent&&!this.inSidebar?(0,f.qy)(s||(s=(0,l.A)([' <ha-automation-condition-editor .condition="','" .description="','" .disabled="','" .hass="','" @value-changed="','" .narrow="','" .uiSupported="','" .indent="','" action></ha-automation-condition-editor> '])),this.action,this._conditionDescriptions[this.action.condition],this.disabled,this.hass,this._conditionChanged,this.narrow,this._uiSupported(this._getType(this.action,this._conditionDescriptions)),this.indent):f.s6)}},{key:"_conditionChanged",value:function(t){t.stopPropagation(),(0,m.r)(this,"value-changed",{value:t.detail.value})}},{key:"_typeChanged",value:function(t){var e=t.target.value;if(e)if((0,C.Q)(e)){var i=(0,C.Dt)(e);i!==this.action.condition&&(0,m.r)(this,"value-changed",{value:{condition:i}})}else{var o=customElements.get("ha-automation-condition-".concat(e));e!==this.action.condition&&(0,m.r)(this,"value-changed",{value:Object.assign({},o.defaultConfig)})}}},{key:"expandAll",value:function(){var t;null===(t=this._conditionEditor)||void 0===t||t.expandAll()}},{key:"collapseAll",value:function(){var t;null===(t=this._conditionEditor)||void 0===t||t.collapseAll()}}],[{key:"defaultConfig",get:function(){return{condition:"state"}}}])}((0,M.E)(f.WF));I.styles=(0,f.AH)(r||(r=(0,l.A)(["ha-select{margin-bottom:24px}"]))),(0,g.Cg)([(0,y.MZ)({attribute:!1})],I.prototype,"hass",void 0),(0,g.Cg)([(0,y.MZ)({type:Boolean})],I.prototype,"disabled",void 0),(0,g.Cg)([(0,y.MZ)({attribute:!1})],I.prototype,"action",void 0),(0,g.Cg)([(0,y.MZ)({type:Boolean})],I.prototype,"narrow",void 0),(0,g.Cg)([(0,y.MZ)({type:Boolean,attribute:"sidebar"})],I.prototype,"inSidebar",void 0),(0,g.Cg)([(0,y.MZ)({type:Boolean,attribute:"indent"})],I.prototype,"indent",void 0),(0,g.Cg)([(0,y.wk)()],I.prototype,"_conditionDescriptions",void 0),(0,g.Cg)([(0,y.P)("ha-automation-condition-editor")],I.prototype,"_conditionEditor",void 0),I=(0,g.Cg)([(0,y.EM)("ha-automation-action-condition")],I),e()}catch(R){e(R)}})},67909:function(t,e,i){var o,a=i(72153),n=i(44734),s=i(43080),r=i(69683),c=i(6454),l=(i(16280),i(28706),i(69085),i(62826)),d=i(96196),h=i(77845),u=i(1087),p=i(24790),v=(i(39927),i(57673)),g=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,r.A)(this,e,[].concat(o))).disabled=!1,t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"willUpdate",value:function(t){t.has("action")&&(this.action&&(0,p.r)(this.action)?(0,u.r)(this,"ui-mode-not-available",Error(this.hass.localize("ui.errors.config.no_template_editor_support"))):this._timeData=(0,v.z)(this.action.delay))}},{key:"render",value:function(){return(0,d.qy)(o||(o=(0,a.A)(['<ha-duration-input .label="','" .disabled="','" .data="','" enable-millisecond required @value-changed="','"></ha-duration-input>'])),this.hass.localize("ui.panel.config.automation.editor.actions.type.delay.delay"),this.disabled,this._timeData,this._valueChanged)}},{key:"_valueChanged",value:function(t){t.stopPropagation();var e=t.detail.value;e&&(0,u.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{delay:e})})}}],[{key:"defaultConfig",get:function(){return{delay:""}}}])}(d.WF);(0,l.Cg)([(0,h.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],g.prototype,"disabled",void 0),(0,l.Cg)([(0,h.MZ)({attribute:!1})],g.prototype,"action",void 0),(0,l.Cg)([(0,h.wk)()],g.prototype,"_timeData",void 0),g=(0,l.Cg)([(0,h.EM)("ha-automation-action-delay")],g)},83108:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s=i(61397),r=i(50264),c=i(72153),l=i(44734),d=i(43080),h=i(69683),u=i(6454),p=(i(16280),i(28706),i(18111),i(7588),i(69085),i(26099),i(23500),i(62826)),v=i(16527),g=i(96196),f=i(77845),y=i(22786),_=i(1087),m=(i(42778),i(1798)),b=(i(52763),i(38911)),A=i(10139),w=t([m]);m=(w.then?(await w)():w)[0];var C=function(t){function e(){var t;(0,l.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,h.A)(this,e,[].concat(o))).disabled=!1,t._extraFieldsData=(0,y.A)(function(t,e){var i={};return e.extra_fields.forEach(function(e){void 0!==t[e.name]&&(i[e.name]=t[e.name])}),i}),t}return(0,u.A)(e,t),(0,d.A)(e,[{key:"shouldUpdate",value:function(t){return!t.has("action")||(!this.action.device_id||this.action.device_id in this.hass.devices||((0,_.r)(this,"ui-mode-not-available",Error(this.hass.localize("ui.panel.config.automation.editor.edit_unknown_device"))),!1))}},{key:"render",value:function(){var t,e=this._deviceId||this.action.device_id;return(0,g.qy)(o||(o=(0,c.A)([' <ha-device-picker .value="','" .disabled="','" @value-changed="','" .hass="','" label="','"></ha-device-picker> <ha-device-action-picker .value="','" .deviceId="','" .disabled="','" @value-changed="','" .hass="','" label="','"></ha-device-action-picker> '," "])),e,this.disabled,this._devicePicked,this.hass,this.hass.localize("ui.panel.config.automation.editor.actions.type.device_id.label"),this.action,e,this.disabled,this._deviceActionPicked,this.hass,this.hass.localize("ui.panel.config.automation.editor.actions.type.device_id.action"),null!==(t=this._capabilities)&&void 0!==t&&null!==(t=t.extra_fields)&&void 0!==t&&t.length?(0,g.qy)(a||(a=(0,c.A)([' <ha-form .hass="','" .data="','" .schema="','" .disabled="','" .computeLabel="','" .computeHelper="','" @value-changed="','"></ha-form> '])),this.hass,this._extraFieldsData(this.action,this._capabilities),this._capabilities.extra_fields,this.disabled,(0,A.T_)(this.hass,this.action),(0,A.TH)(this.hass,this.action),this._extraFieldsChanged):"")}},{key:"firstUpdated",value:function(){this.hass.loadBackendTranslation("device_automation"),this._capabilities||this._getCapabilities(),this.action&&(this._origAction=this.action)}},{key:"updated",value:function(t){var e=t.get("action");e&&!(0,A.Po)(this._entityReg,e,this.action)&&(this._deviceId=void 0,this._getCapabilities())}},{key:"_getCapabilities",value:(i=(0,r.A)((0,s.A)().m(function t(){var e;return(0,s.A)().w(function(t){for(;;)switch(t.n){case 0:if(!this.action.domain){t.n=2;break}return t.n=1,(0,A.jR)(this.hass,this.action);case 1:e=t.v,t.n=3;break;case 2:e=void 0;case 3:this._capabilities=e;case 4:return t.a(2)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"_devicePicked",value:function(t){t.stopPropagation(),this._deviceId=t.target.value,void 0===this._deviceId&&(0,_.r)(this,"value-changed",{value:e.defaultConfig})}},{key:"_deviceActionPicked",value:function(t){t.stopPropagation();var e=t.detail.value;this._origAction&&(0,A.Po)(this._entityReg,this._origAction,e)&&(e=this._origAction),(0,_.r)(this,"value-changed",{value:e})}},{key:"_extraFieldsChanged",value:function(t){t.stopPropagation(),(0,_.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),t.detail.value)})}}],[{key:"defaultConfig",get:function(){return{device_id:"",domain:"",entity_id:""}}}]);var i}(g.WF);C.styles=(0,g.AH)(n||(n=(0,c.A)(["ha-device-picker{display:block;margin-bottom:24px}ha-device-action-picker{display:block}ha-form{display:block;margin-top:24px}"]))),(0,p.Cg)([(0,f.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,p.Cg)([(0,f.MZ)({type:Boolean})],C.prototype,"disabled",void 0),(0,p.Cg)([(0,f.MZ)({type:Object})],C.prototype,"action",void 0),(0,p.Cg)([(0,f.wk)()],C.prototype,"_deviceId",void 0),(0,p.Cg)([(0,f.wk)()],C.prototype,"_capabilities",void 0),(0,p.Cg)([(0,f.wk)(),(0,v.Fg)({context:b.ih,subscribe:!0})],C.prototype,"_entityReg",void 0),C=(0,p.Cg)([(0,f.EM)("ha-automation-action-device_id")],C),e()}catch(k){e(k)}})},57826:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n=i(72153),s=i(44734),r=i(43080),c=i(69683),l=i(6454),d=(i(28706),i(69085),i(62826)),h=i(96196),u=i(77845),p=i(1087),v=i(82474),g=i(99766),f=(i(75709),i(10763)),y=i(60232),_=t([v,g,f,y]);[v,g,f,y]=_.then?(await _)():_;var m=function(t){function e(){var t;(0,s.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,c.A)(this,e,[].concat(o))).disabled=!1,t}return(0,l.A)(e,t),(0,r.A)(e,[{key:"updated",value:function(t){t.has("action")&&(this._actionData&&this._actionData!==this.action.event_data&&this._yamlEditor&&this._yamlEditor.setValue(this.action.event_data),this._actionData=this.action.event_data)}},{key:"render",value:function(){var t=this.action,e=t.event,i=t.event_data;return(0,h.qy)(o||(o=(0,n.A)([' <ha-textfield .label="','" .value="','" .disabled="','" @change="','"></ha-textfield> <ha-yaml-editor .hass="','" .label="','" .name="','" .readOnly="','" .defaultValue="','" @value-changed="','"></ha-yaml-editor> '])),this.hass.localize("ui.panel.config.automation.editor.actions.type.event.event"),e,this.disabled,this._eventChanged,this.hass,this.hass.localize("ui.panel.config.automation.editor.actions.type.event.event_data"),"event_data",this.disabled,i,this._dataChanged)}},{key:"_dataChanged",value:function(t){t.stopPropagation(),t.detail.isValid&&(this._actionData=t.detail.value,(0,y.Pb)(this,t))}},{key:"_eventChanged",value:function(t){t.stopPropagation(),(0,p.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{event:t.target.value})})}}],[{key:"defaultConfig",get:function(){return{event:"",event_data:{}}}}])}(h.WF);m.styles=(0,h.AH)(a||(a=(0,n.A)(["ha-textfield{display:block}"]))),(0,d.Cg)([(0,u.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,d.Cg)([(0,u.MZ)({type:Boolean})],m.prototype,"disabled",void 0),(0,d.Cg)([(0,u.MZ)({attribute:!1})],m.prototype,"action",void 0),(0,d.Cg)([(0,u.P)("ha-yaml-editor",!0)],m.prototype,"_yamlEditor",void 0),m=(0,d.Cg)([(0,u.EM)("ha-automation-action-event")],m),e()}catch(b){e(b)}})},75107:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n=i(72153),s=i(44734),r=i(43080),c=i(69683),l=i(6454),d=(i(28706),i(18111),i(7588),i(69085),i(26099),i(23500),i(62826)),h=i(96196),u=i(77845),p=i(1087),v=(i(75709),i(14503)),g=i(68469),f=t([g]);g=(f.then?(await f)():f)[0];var y=function(t){function e(){var t;(0,s.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,c.A)(this,e,[].concat(o))).disabled=!1,t.narrow=!1,t.indent=!1,t}return(0,l.A)(e,t),(0,r.A)(e,[{key:"render",value:function(){var t,e,i=this.action;return(0,h.qy)(o||(o=(0,n.A)([" <h4> ",': </h4> <ha-automation-condition .conditions="','" .disabled="','" @value-changed="','" .hass="','" .narrow="','" .optionsInSidebar="','"></ha-automation-condition> <h4> ',': </h4> <ha-automation-action .actions="','" .disabled="','" @value-changed="','" .hass="','" .narrow="','" .optionsInSidebar="','"></ha-automation-action> <h4> ',': </h4> <ha-automation-action .actions="','" .disabled="','" @value-changed="','" .hass="','" .narrow="','" .optionsInSidebar="','"></ha-automation-action> '])),this.hass.localize("ui.panel.config.automation.editor.actions.type.if.if"),null!==(t=i.if)&&void 0!==t?t:[],this.disabled,this._ifChanged,this.hass,this.narrow,this.indent,this.hass.localize("ui.panel.config.automation.editor.actions.type.if.then"),null!==(e=i.then)&&void 0!==e?e:[],this.disabled,this._thenChanged,this.hass,this.narrow,this.indent,this.hass.localize("ui.panel.config.automation.editor.actions.type.if.else"),i.else||[],this.disabled,this._elseChanged,this.hass,this.narrow,this.indent)}},{key:"_ifChanged",value:function(t){t.stopPropagation();var e=t.detail.value;(0,p.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{if:e})})}},{key:"_thenChanged",value:function(t){t.stopPropagation();var e=t.detail.value;(0,p.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{then:e})})}},{key:"_elseChanged",value:function(t){t.stopPropagation();var e=t.detail.value,i=Object.assign(Object.assign({},this.action),{},{else:e});0===e.length&&delete i.else,(0,p.r)(this,"value-changed",{value:i})}},{key:"expandAll",value:function(){var t,e;null===(t=this._conditionElement)||void 0===t||t.expandAll(),null===(e=this._actionElements)||void 0===e||e.forEach(function(t){var e;return null===(e=t.expandAll)||void 0===e?void 0:e.call(t)})}},{key:"collapseAll",value:function(){var t,e;null===(t=this._conditionElement)||void 0===t||t.collapseAll(),null===(e=this._actionElements)||void 0===e||e.forEach(function(t){var e;return null===(e=t.collapseAll)||void 0===e?void 0:e.call(t)})}}],[{key:"defaultConfig",get:function(){return{if:[],then:[]}}},{key:"styles",get:function(){return[v.RF,(0,h.AH)(a||(a=(0,n.A)(["h4{color:var(--secondary-text-color);margin-bottom:8px}h4:first-child{margin-top:0}"])))]}}])}(h.WF);(0,d.Cg)([(0,u.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,d.Cg)([(0,u.MZ)({type:Boolean})],y.prototype,"disabled",void 0),(0,d.Cg)([(0,u.MZ)({attribute:!1})],y.prototype,"action",void 0),(0,d.Cg)([(0,u.MZ)({type:Boolean})],y.prototype,"narrow",void 0),(0,d.Cg)([(0,u.MZ)({type:Boolean})],y.prototype,"indent",void 0),(0,d.Cg)([(0,u.P)("ha-automation-condition")],y.prototype,"_conditionElement",void 0),(0,d.Cg)([(0,u.YG)("ha-automation-action")],y.prototype,"_actionElements",void 0),y=(0,d.Cg)([(0,u.EM)("ha-automation-action-if")],y),e()}catch(_){e(_)}})},23063:function(t,e,i){i.a(t,async function(t,e){try{var o,a=i(72153),n=i(44734),s=i(43080),r=i(69683),c=i(6454),l=(i(28706),i(69085),i(62826)),d=i(96196),h=i(77845),u=i(1087),p=(i(75709),i(14503)),v=i(68469),g=t([v]);v=(g.then?(await g)():g)[0];var f=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,r.A)(this,e,[].concat(o))).disabled=!1,t.narrow=!1,t.indent=!1,t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){var t=this.action;return(0,d.qy)(o||(o=(0,a.A)([' <ha-automation-action .actions="','" .narrow="','" .disabled="','" @value-changed="','" .hass="','" .optionsInSidebar="','"></ha-automation-action> '])),t.parallel,this.narrow,this.disabled,this._actionsChanged,this.hass,this.indent)}},{key:"_actionsChanged",value:function(t){t.stopPropagation();var e=t.detail.value;(0,u.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{parallel:e})})}},{key:"expandAll",value:function(){var t;null===(t=this._actionElement)||void 0===t||t.expandAll()}},{key:"collapseAll",value:function(){var t;null===(t=this._actionElement)||void 0===t||t.collapseAll()}}],[{key:"defaultConfig",get:function(){return{parallel:[]}}},{key:"styles",get:function(){return p.RF}}])}(d.WF);(0,l.Cg)([(0,h.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],f.prototype,"disabled",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],f.prototype,"narrow",void 0),(0,l.Cg)([(0,h.MZ)({attribute:!1})],f.prototype,"action",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],f.prototype,"indent",void 0),(0,l.Cg)([(0,h.P)("ha-automation-action")],f.prototype,"_actionElement",void 0),f=(0,l.Cg)([(0,h.EM)("ha-automation-action-parallel")],f),e()}catch(y){e(y)}})},49063:function(t,e,i){i.a(t,async function(t,o){try{i.d(e,{m:function(){return w}});var a,n,s=i(72153),r=i(94741),c=i(44734),l=i(43080),d=i(69683),h=i(6454),u=(i(28706),i(50113),i(23418),i(44114),i(18111),i(7588),i(69085),i(26099),i(47764),i(42781),i(23500),i(62826)),p=i(96196),v=i(77845),g=i(22786),f=i(1087),y=(i(75709),i(14503)),_=i(68469),m=i(24790),b=(i(52763),t([_]));_=(b.then?(await b)():b)[0];var A=["count","while","until","for_each"],w=function(t){return A.find(function(e){return e in t})},C=function(t){function e(){var t;(0,c.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,d.A)(this,e,[].concat(o))).disabled=!1,t.narrow=!1,t.inSidebar=!1,t.indent=!1,t._schema=(0,g.A)(function(t,e,i,o){return[].concat((0,r.A)("count"!==t||!i&&(i||o)?[]:[{name:"count",required:!0,selector:e?{template:{}}:{number:{mode:"box",min:1}}}]),(0,r.A)("until"!==t&&"while"!==t||!o&&(i||o)?[]:[{name:t,selector:{condition:{optionsInSidebar:o}}}]),(0,r.A)("for_each"!==t||!i&&(i||o)?[]:[{name:"for_each",required:!0,selector:{object:{}}}]),(0,r.A)(o||!i&&!o?[{name:"sequence",selector:{action:{optionsInSidebar:o}}}]:[]))}),t._computeLabelCallback=function(e){switch(e.name){case"count":return t.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.type.count.label");case"while":return t.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.type.while.conditions")+":";case"until":return t.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.type.until.conditions")+":";case"for_each":return t.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.type.for_each.items")+":";case"sequence":return t.hass.localize("ui.panel.config.automation.editor.actions.type.repeat.sequence")+":"}return""},t}return(0,h.A)(e,t),(0,l.A)(e,[{key:"render",value:function(){var t=this.action.repeat,e=w(t),i=this._schema(null!=e?e:"count","count"in t&&"string"==typeof t.count&&(0,m.F)(t.count),this.inSidebar,this.indent),o=Object.assign(Object.assign({},t),{},{type:e});return(0,p.qy)(a||(a=(0,s.A)(['<ha-form .hass="','" .data="','" .schema="','" .disabled="','" @value-changed="','" .computeLabel="','" .narrow="','"></ha-form>'])),this.hass,o,i,this.disabled,this._valueChanged,this._computeLabelCallback,this.narrow)}},{key:"_valueChanged",value:function(t){t.stopPropagation();var e=t.detail.value,i=e.type;if(delete e.type,i!==w(this.action.repeat)){var o,a;if("count"===i&&(e.count=2,delete e.while,delete e.until,delete e.for_each),"while"===i)e.while=null!==(o=e.until)&&void 0!==o?o:[],delete e.count,delete e.until,delete e.for_each;if("until"===i)e.until=null!==(a=e.while)&&void 0!==a?a:[],delete e.count,delete e.while,delete e.for_each;"for_each"===i&&(e.for_each={},delete e.count,delete e.while,delete e.until)}(0,f.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{repeat:Object.assign({},e)})})}},{key:"_getSelectorElements",value:function(){if(this._formElement){var t,e=null===(t=this._formElement.shadowRoot)||void 0===t?void 0:t.querySelectorAll("ha-selector"),i=[];return null==e||e.forEach(function(t){var e;i.push.apply(i,(0,r.A)(Array.from((null===(e=t.shadowRoot)||void 0===e?void 0:e.querySelectorAll("ha-selector-condition, ha-selector-action"))||[])))}),i}return[]}},{key:"expandAll",value:function(){this._getSelectorElements().forEach(function(t){var e;null===(e=t.expandAll)||void 0===e||e.call(t)})}},{key:"collapseAll",value:function(){this._getSelectorElements().forEach(function(t){var e;null===(e=t.collapseAll)||void 0===e||e.call(t)})}}],[{key:"defaultConfig",get:function(){return{repeat:{count:2,sequence:[]}}}},{key:"styles",get:function(){return[y.RF,(0,p.AH)(n||(n=(0,s.A)(["ha-textfield{margin-top:16px}"])))]}}])}(p.WF);(0,u.Cg)([(0,v.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean})],C.prototype,"disabled",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean})],C.prototype,"narrow",void 0),(0,u.Cg)([(0,v.MZ)({attribute:!1})],C.prototype,"action",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,attribute:"sidebar"})],C.prototype,"inSidebar",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,attribute:"indent"})],C.prototype,"indent",void 0),(0,u.Cg)([(0,v.P)("ha-form")],C.prototype,"_formElement",void 0),C=(0,u.Cg)([(0,v.EM)("ha-automation-action-repeat")],C),o()}catch(k){o(k)}})},85933:function(t,e,i){i.a(t,async function(t,e){try{var o,a=i(72153),n=i(44734),s=i(43080),r=i(69683),c=i(6454),l=(i(28706),i(69085),i(62826)),d=i(96196),h=i(77845),u=i(1087),p=(i(75709),i(14503)),v=i(68469),g=t([v]);v=(g.then?(await g)():g)[0];var f=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,r.A)(this,e,[].concat(o))).disabled=!1,t.narrow=!1,t.indent=!1,t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){var t=this.action;return(0,d.qy)(o||(o=(0,a.A)([' <ha-automation-action .actions="','" .narrow="','" .disabled="','" @value-changed="','" .hass="','" .optionsInSidebar="','"></ha-automation-action> '])),t.sequence,this.narrow,this.disabled,this._actionsChanged,this.hass,this.indent)}},{key:"_actionsChanged",value:function(t){t.stopPropagation();var e=t.detail.value;(0,u.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{sequence:e})})}},{key:"expandAll",value:function(){var t;null===(t=this._actionElement)||void 0===t||t.expandAll()}},{key:"collapseAll",value:function(){var t;null===(t=this._actionElement)||void 0===t||t.collapseAll()}}],[{key:"defaultConfig",get:function(){return{sequence:[]}}},{key:"styles",get:function(){return p.RF}}])}(d.WF);(0,l.Cg)([(0,h.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],f.prototype,"disabled",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],f.prototype,"narrow",void 0),(0,l.Cg)([(0,h.MZ)({attribute:!1})],f.prototype,"action",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],f.prototype,"indent",void 0),(0,l.Cg)([(0,h.P)("ha-automation-action")],f.prototype,"_actionElement",void 0),f=(0,l.Cg)([(0,h.EM)("ha-automation-action-sequence")],f),e()}catch(y){e(y)}})},19809:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s,r,c=i(72153),l=i(78261),d=i(44734),h=i(43080),u=i(69683),p=i(6454),v=(i(16280),i(28706),i(74423),i(18111),i(13579),i(69085),i(5506),i(26099),i(62826)),g=i(96196),f=i(77845),y=i(83374),_=i(1087),m=i(24790),b=i(67431),A=i(84025),w=t([b]);b=(w.then?(await w)():w)[0];var C=function(t){function e(){var t;(0,d.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,u.A)(this,e,[].concat(o))).disabled=!1,t.narrow=!1,t._responseChecked=!1,t}return(0,p.A)(e,t),(0,h.A)(e,[{key:"willUpdate",value:function(t){if(t.has("action")){try{(0,y.vA)(this.action,A.BD)}catch(e){return void(0,_.r)(this,"ui-mode-not-available",e)}this.action&&Object.entries(this.action).some(function(t){var e=(0,l.A)(t,2),i=e[0],o=e[1];return!["data","target"].includes(i)&&(0,m.r)(o)})?(0,_.r)(this,"ui-mode-not-available",Error(this.hass.localize("ui.errors.config.no_template_editor_support"))):this.action.entity_id?(this._action=Object.assign(Object.assign({},this.action),{},{data:Object.assign(Object.assign({},this.action.data),{},{entity_id:this.action.entity_id})}),delete this._action.entity_id):this._action=this.action}}},{key:"render",value:function(){var t,e;if(!this._action)return g.s6;var i=this._action.action?this._action.action.split(".",2):[void 0,void 0],r=(0,l.A)(i,2),d=r[0],h=r[1];return(0,g.qy)(o||(o=(0,c.A)([' <ha-service-control .narrow="','" .hass="','" .value="','" .disabled="','" .showAdvanced="','" .hidePicker="','" @value-changed="','"></ha-service-control> '," "])),this.narrow,this.hass,this._action,this.disabled,null===(t=this.hass.userData)||void 0===t?void 0:t.showAdvanced,!!this._action.metadata,this._actionChanged,d&&h&&null!==(e=this.hass.services[d])&&void 0!==e&&null!==(e=e[h])&&void 0!==e&&e.response?(0,g.qy)(a||(a=(0,c.A)(['<ha-settings-row .narrow="','"> ',' <span slot="heading">','</span> <span slot="description"> ',' </span> <ha-textfield .value="','" .required="','" .disabled="','" @change="','"></ha-textfield> </ha-settings-row>'])),this.narrow,this.hass.services[d][h].response.optional?(0,g.qy)(n||(n=(0,c.A)(['<ha-checkbox .checked="','" .disabled="','" @change="','" slot="prefix"></ha-checkbox>'])),this._action.response_variable||this._responseChecked,this.disabled,this._responseCheckboxChanged):(0,g.qy)(s||(s=(0,c.A)(['<div slot="prefix" class="checkbox-spacer"></div>']))),this.hass.localize("ui.panel.config.automation.editor.actions.type.service.response_variable"),this.hass.services[d][h].response.optional?this.hass.localize("ui.panel.config.automation.editor.actions.type.service.has_optional_response"):this.hass.localize("ui.panel.config.automation.editor.actions.type.service.has_response"),this._action.response_variable||"",!this.hass.services[d][h].response.optional,this.disabled||this.hass.services[d][h].response.optional&&!this._action.response_variable&&!this._responseChecked,this._responseVariableChanged):g.s6)}},{key:"_actionChanged",value:function(t){t.detail.value===this._action&&t.stopPropagation();var e=Object.assign(Object.assign({},this.action),t.detail.value);if("response_variable"in this.action){var i,o=this._action.action?this._action.action.split(".",2):[void 0,void 0],a=(0,l.A)(o,2),n=a[0],s=a[1];n&&s&&null!==(i=this.hass.services[n])&&void 0!==i&&i[s]&&!("response"in this.hass.services[n][s])&&(delete e.response_variable,this._responseChecked=!1)}(0,_.r)(this,"value-changed",{value:e})}},{key:"_responseVariableChanged",value:function(t){var e=Object.assign(Object.assign({},this.action),{},{response_variable:t.target.value});t.target.value||delete e.response_variable,(0,_.r)(this,"value-changed",{value:e})}},{key:"_responseCheckboxChanged",value:function(t){if(this._responseChecked=t.target.checked,!this._responseChecked){var e=Object.assign({},this.action);delete e.response_variable,(0,_.r)(this,"value-changed",{value:e})}}}],[{key:"defaultConfig",get:function(){return{action:"",data:{}}}}])}(g.WF);C.styles=(0,g.AH)(r||(r=(0,c.A)(["ha-service-control{display:block;margin:0 -16px}ha-settings-row{margin:0 -16px;padding:var(--service-control-padding,0 16px)}ha-settings-row{--settings-row-content-width:100%;--settings-row-prefix-display:contents;border-top:var(--service-control-items-border-top,1px solid var(--divider-color))}ha-checkbox{margin-left:-16px;margin-inline-start:-16px;margin-inline-end:initial}.checkbox-spacer{width:32px}"]))),(0,v.Cg)([(0,f.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,v.Cg)([(0,f.MZ)({attribute:!1})],C.prototype,"action",void 0),(0,v.Cg)([(0,f.MZ)({type:Boolean})],C.prototype,"disabled",void 0),(0,v.Cg)([(0,f.MZ)({type:Boolean})],C.prototype,"narrow",void 0),(0,v.Cg)([(0,f.wk)()],C.prototype,"_action",void 0),(0,v.Cg)([(0,f.wk)()],C.prototype,"_responseChecked",void 0),C=(0,v.Cg)([(0,f.EM)("ha-automation-action-service")],C),e()}catch(k){e(k)}})},66710:function(t,e,i){var o,a=i(72153),n=i(44734),s=i(43080),r=i(69683),c=i(6454),l=(i(28706),i(62826)),d=i(96196),h=i(77845),u=(i(52763),[{name:"set_conversation_response",selector:{template:{}}}]),p=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,r.A)(this,e,[].concat(o))).disabled=!1,t._computeLabelCallback=function(){return t.hass.localize("ui.panel.config.automation.editor.actions.type.set_conversation_response.label")},t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){return(0,d.qy)(o||(o=(0,a.A)([' <ha-form .hass="','" .data="','" .schema="','" .disabled="','" .computeLabel="','"></ha-form> '])),this.hass,this.action,u,this.disabled,this._computeLabelCallback)}}],[{key:"defaultConfig",get:function(){return{set_conversation_response:""}}}])}(d.WF);(0,l.Cg)([(0,h.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,l.Cg)([(0,h.MZ)({attribute:!1})],p.prototype,"action",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],p.prototype,"disabled",void 0),p=(0,l.Cg)([(0,h.EM)("ha-automation-action-set_conversation_response")],p)},11864:function(t,e,i){var o,a,n=i(72153),s=i(44734),r=i(43080),c=i(69683),l=i(6454),d=(i(28706),i(69085),i(62826)),h=i(96196),u=i(77845),p=i(1087),v=(i(75709),i(6),i(59646),function(t){function e(){var t;(0,s.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,c.A)(this,e,[].concat(o))).disabled=!1,t}return(0,l.A)(e,t),(0,r.A)(e,[{key:"render",value:function(){var t=this.action,e=t.error,i=t.stop,a=t.response_variable;return(0,h.qy)(o||(o=(0,n.A)([' <ha-textfield .label="','" .value="','" .disabled="','" @change="','"></ha-textfield> <ha-textfield .label="','" .value="','" .disabled="','" @change="','"></ha-textfield> <ha-formfield .disabled="','" .label="','"> <ha-switch .disabled="','" .checked="','" @change="','"></ha-switch> </ha-formfield> '])),this.hass.localize("ui.panel.config.automation.editor.actions.type.stop.stop"),i,this.disabled,this._stopChanged,this.hass.localize("ui.panel.config.automation.editor.actions.type.stop.response_variable"),a||"",this.disabled,this._responseChanged,this.disabled,this.hass.localize("ui.panel.config.automation.editor.actions.type.stop.error"),this.disabled,null!=e&&e,this._errorChanged)}},{key:"_stopChanged",value:function(t){t.stopPropagation(),(0,p.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{stop:t.target.value})})}},{key:"_responseChanged",value:function(t){t.stopPropagation();var e=Object.assign({},this.action),i=t.target.value;i?e.response_variable=i:delete e.response_variable,(0,p.r)(this,"value-changed",{value:e})}},{key:"_errorChanged",value:function(t){t.stopPropagation(),(0,p.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{error:t.target.checked})})}}],[{key:"defaultConfig",get:function(){return{stop:""}}}])}(h.WF));v.styles=(0,h.AH)(a||(a=(0,n.A)(["ha-textfield{display:block;margin-bottom:24px}"]))),(0,d.Cg)([(0,u.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,d.Cg)([(0,u.MZ)({attribute:!1})],v.prototype,"action",void 0),(0,d.Cg)([(0,u.MZ)({type:Boolean})],v.prototype,"disabled",void 0),v=(0,d.Cg)([(0,u.EM)("ha-automation-action-stop")],v)},88166:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s,r=i(72153),c=i(44734),l=i(43080),d=i(69683),h=i(6454),u=(i(28706),i(69085),i(62826)),p=i(96196),v=i(77845),g=i(44537),f=i(57673),y=i(1087),_=(i(39927),i(6),i(75709),i(53723)),m=i(60232),b=t([_,m]);[_,m]=b.then?(await b)():b;var A=function(t){function e(){var t;(0,c.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,d.A)(this,e,[].concat(o))).disabled=!1,t.narrow=!1,t.inSidebar=!1,t.indent=!1,t}return(0,h.A)(e,t),(0,l.A)(e,[{key:"render",value:function(){var t,e=(0,f.z)(this.action.timeout);return(0,p.qy)(o||(o=(0,r.A)([" "," "," "])),this.inSidebar||!this.inSidebar&&!this.indent?(0,p.qy)(a||(a=(0,r.A)([' <ha-duration-input .label="','" .data="','" .disabled="','" enable-millisecond @value-changed="','"></ha-duration-input> <ha-formfield .disabled="','" .label="','"> <ha-switch .checked="','" .disabled="','" @change="','"></ha-switch> </ha-formfield> '])),this.hass.localize("ui.panel.config.automation.editor.actions.type.wait_for_trigger.timeout"),e,this.disabled,this._timeoutChanged,this.disabled,this.hass.localize("ui.panel.config.automation.editor.actions.type.wait_for_trigger.continue_timeout"),null===(t=this.action.continue_on_timeout)||void 0===t||t,this.disabled,this._continueChanged):p.s6,this.indent||!this.inSidebar&&!this.indent?(0,p.qy)(n||(n=(0,r.A)(['<ha-automation-trigger class="','" .triggers="','" .hass="','" .disabled="','" .name="','" @value-changed="','" .optionsInSidebar="','" .narrow="','"></ha-automation-trigger>'])),this.inSidebar||this.indent?"":"expansion-panel",(0,g.e)(this.action.wait_for_trigger),this.hass,this.disabled,"wait_for_trigger",this._valueChanged,this.indent,this.narrow):p.s6)}},{key:"_timeoutChanged",value:function(t){t.stopPropagation();var e=t.detail.value;(0,y.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{timeout:e})})}},{key:"_continueChanged",value:function(t){(0,y.r)(this,"value-changed",{value:Object.assign(Object.assign({},this.action),{},{continue_on_timeout:t.target.checked})})}},{key:"_valueChanged",value:function(t){(0,m.Pb)(this,t)}}],[{key:"defaultConfig",get:function(){return{wait_for_trigger:[]}}}])}(p.WF);A.styles=(0,p.AH)(s||(s=(0,r.A)(["ha-duration-input{display:block;margin-bottom:24px}ha-automation-trigger.expansion-panel{display:block;margin-top:24px}"]))),(0,u.Cg)([(0,v.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,u.Cg)([(0,v.MZ)({attribute:!1})],A.prototype,"action",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean})],A.prototype,"disabled",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean})],A.prototype,"narrow",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,attribute:"sidebar"})],A.prototype,"inSidebar",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,attribute:"indent"})],A.prototype,"indent",void 0),A=(0,u.Cg)([(0,v.EM)("ha-automation-action-wait_for_trigger")],A),e()}catch(w){e(w)}})},21446:function(t,e,i){var o,a=i(72153),n=i(44734),s=i(43080),r=i(69683),c=i(6454),l=(i(28706),i(62826)),d=i(96196),h=i(77845),u=(i(52763),[{name:"wait_template",selector:{template:{}}},{name:"timeout",required:!1,selector:{text:{}}},{name:"continue_on_timeout",selector:{boolean:{}}}]),p=function(t){function e(){var t;(0,n.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,r.A)(this,e,[].concat(o))).disabled=!1,t._computeLabelCallback=function(e){return t.hass.localize("ui.panel.config.automation.editor.actions.type.wait_template.".concat("continue_on_timeout"===e.name?"continue_timeout":e.name))},t}return(0,c.A)(e,t),(0,s.A)(e,[{key:"render",value:function(){return(0,d.qy)(o||(o=(0,a.A)([' <ha-form .hass="','" .data="','" .schema="','" .disabled="','" .computeLabel="','"></ha-form> '])),this.hass,this.action,u,this.disabled,this._computeLabelCallback)}}],[{key:"defaultConfig",get:function(){return{wait_template:"",continue_on_timeout:!0}}}])}(d.WF);(0,l.Cg)([(0,h.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,l.Cg)([(0,h.MZ)({attribute:!1})],p.prototype,"action",void 0),(0,l.Cg)([(0,h.MZ)({type:Boolean})],p.prototype,"disabled",void 0),p=(0,l.Cg)([(0,h.EM)("ha-automation-action-wait_template")],p)},6650:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s,r,c,l,d,h,u,p,v,g,f=i(72153),y=i(61397),_=i(50264),m=i(44734),b=i(43080),A=i(75864),w=i(69683),C=i(6454),k=(i(28706),i(2892),i(69085),i(62826)),M=i(16527),V=i(96196),H=i(77845),S=i(94333),x=i(44537),L=i(1087),Z=i(99124),E=i(57237),O=i(52943),z=(i(14844),i(76776),i(29823)),q=(i(70947),i(11382),i(50888),i(67094),i(79800)),I=i(38911),R=i(65063),D=i(41570),P=i(81619),j=i(68469),B=i(40219),F=i(57116),N=t([z,j,B,q]);[z,j,B,q]=N.then?(await N)():N;var T=function(t){function e(){var t;(0,m.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,w.A)(this,e,[].concat(o))).narrow=!1,t.disabled=!1,t.first=!1,t.last=!1,t.optionsInSidebar=!1,t.sortSelected=!1,t._expanded=!1,t._selected=!1,t._collapsed=!0,t._duplicateOption=function(){(0,L.r)((0,A.A)(t),"duplicate")},t._removeOption=function(){t.option&&((0,L.r)((0,A.A)(t),"value-changed",{value:null}),t._selected&&(0,L.r)((0,A.A)(t),"close-sidebar"),(0,P.P)((0,A.A)(t),{message:t.hass.localize("ui.common.successfully_deleted"),duration:4e3,action:{text:t.hass.localize("ui.common.undo"),action:function(){(0,L.r)(window,"undo-change")}}}))},t._renameOption=(0,_.A)((0,y.A)().m(function e(){var i,o;return(0,y.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,R.an)((0,A.A)(t),{title:t.hass.localize("ui.panel.config.automation.editor.actions.type.choose.change_alias"),inputLabel:t.hass.localize("ui.panel.config.automation.editor.actions.type.choose.alias"),inputType:"string",placeholder:(0,O.Z)(t._getDescription()),defaultValue:t.option.alias,confirmText:t.hass.localize("ui.common.submit")});case 1:null!==(i=e.v)&&(o=Object.assign({},t.option),""===i?delete o.alias:o.alias=i,(0,L.r)((0,A.A)(t),"value-changed",{value:o}));case 2:return e.a(2)}},e)})),t}return(0,C.A)(e,t),(0,b.A)(e,[{key:"selected",get:function(){return this._selected}},{key:"_expandedChanged",value:function(t){"option"===t.currentTarget.id&&(this._expanded=t.detail.expanded)}},{key:"_getDescription",value:function(){var t=(0,x.e)(this.option.conditions);if(!t||0===t.length)return this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.no_conditions");var e="";return"string"==typeof t[0]?e+=t[0]:e+=(0,q.p)(t[0],this.hass,this._entityReg),t.length>1&&(e+=this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.option_description_additional",{numberOfAdditionalConditions:t.length-1})),e}},{key:"_renderOverflowLabel",value:function(t,e){return(0,V.qy)(o||(o=(0,f.A)([' <div class="overflow-label"> '," "," </div> "])),t,this.optionsInSidebar&&!this.narrow?e||(0,V.qy)(a||(a=(0,f.A)(['<span class="shortcut-placeholder ','"></span>'])),D.c?"mac":""):V.s6)}},{key:"_renderRow",value:function(){return(0,V.qy)(n||(n=(0,f.A)([' <h3 slot="header"> ',' </h3> <slot name="icons" slot="icons"></slot> '," "," "])),this.option?"".concat(this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.option",{number:this.index+1}),": ").concat(this.option.alias||(this._expanded?"":this._getDescription())):this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.default"),this.option?(0,V.qy)(s||(s=(0,f.A)([' <ha-dropdown slot="icons" @click="','" @keydown="','" @wa-select="','" placement="bottom-end"> <ha-icon-button slot="trigger" .label="','" .path="','"></ha-icon-button> <ha-dropdown-item value="rename" .disabled="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> ',' </ha-dropdown-item> <ha-dropdown-item value="duplicate" .disabled="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> '," </ha-dropdown-item> ",' <ha-dropdown-item value="delete" variant="danger" .disabled="','"> <ha-svg-icon class="warning" slot="icon" .path="','"></ha-svg-icon> '," </ha-dropdown-item> </ha-dropdown> "])),Z.C,E.d,this._handleDropdownSelect,this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this.disabled,"M18,17H10.5L12.5,15H18M6,17V14.5L13.88,6.65C14.07,6.45 14.39,6.45 14.59,6.65L16.35,8.41C16.55,8.61 16.55,8.92 16.35,9.12L8.47,17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.triggers.rename")),this.disabled,"M16,8H14V11H11V13H14V16H16V13H19V11H16M2,12C2,9.21 3.64,6.8 6,5.68V3.5C2.5,4.76 0,8.09 0,12C0,15.91 2.5,19.24 6,20.5V18.32C3.64,17.2 2,14.79 2,12M15,3C10.04,3 6,7.04 6,12C6,16.96 10.04,21 15,21C19.96,21 24,16.96 24,12C24,7.04 19.96,3 15,3M15,19C11.14,19 8,15.86 8,12C8,8.14 11.14,5 15,5C18.86,5 22,8.14 22,12C22,15.86 18.86,19 15,19Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.actions.duplicate")),this.optionsInSidebar?V.s6:(0,V.qy)(r||(r=(0,f.A)([' <ha-dropdown-item value="move_up" .disabled="','"> ',' <ha-svg-icon slot="icon" .path="','"></ha-svg-icon></ha-dropdown-item> <ha-dropdown-item value="move_down" .disabled="','"> ',' <ha-svg-icon slot="icon" .path="','"></ha-svg-icon></ha-dropdown-item> '])),this.disabled||!!this.first,this.hass.localize("ui.panel.config.automation.editor.move_up"),"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",this.disabled||!!this.last,this.hass.localize("ui.panel.config.automation.editor.move_down"),"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z"),this.disabled,"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",this._renderOverflowLabel(this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.remove_option"),(0,V.qy)(c||(c=(0,f.A)(['<span class="shortcut"> <span>',"</span> <span>+</span> <span>","</span> </span>"])),D.c?(0,V.qy)(l||(l=(0,f.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),"M6,2A4,4 0 0,1 10,6V8H14V6A4,4 0 0,1 18,2A4,4 0 0,1 22,6A4,4 0 0,1 18,10H16V14H18A4,4 0 0,1 22,18A4,4 0 0,1 18,22A4,4 0 0,1 14,18V16H10V18A4,4 0 0,1 6,22A4,4 0 0,1 2,18A4,4 0 0,1 6,14H8V10H6A4,4 0 0,1 2,6A4,4 0 0,1 6,2M16,18A2,2 0 0,0 18,20A2,2 0 0,0 20,18A2,2 0 0,0 18,16H16V18M14,10H10V14H14V10M6,16A2,2 0 0,0 4,18A2,2 0 0,0 6,20A2,2 0 0,0 8,18V16H6M8,6A2,2 0 0,0 6,4A2,2 0 0,0 4,6A2,2 0 0,0 6,8H8V6M18,8A2,2 0 0,0 20,6A2,2 0 0,0 18,4A2,2 0 0,0 16,6V8H18Z"):this.hass.localize("ui.panel.config.automation.editor.ctrl"),this.hass.localize("ui.panel.config.automation.editor.del")))):V.s6,this.optionsInSidebar?V.s6:this._renderContent())}},{key:"_renderContent",value:function(){return(0,V.qy)(d||(d=(0,f.A)(['<div class="','"> ',' <h4 class="','"> ',': </h4> <ha-automation-action .actions="','" .disabled="','" .hass="','" .narrow="','" @value-changed="','" .optionsInSidebar="','"></ha-automation-action> </div>'])),(0,S.H)({"card-content":!0,card:!this.optionsInSidebar,indent:this.optionsInSidebar,selected:this._selected,hidden:this.optionsInSidebar&&this._collapsed}),this.option?(0,V.qy)(h||(h=(0,f.A)([' <h4 class="top"> ',': </h4> <ha-automation-condition .conditions="','" .disabled="','" .hass="','" .narrow="','" @value-changed="','" .optionsInSidebar="','"></ha-automation-condition> '])),this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.conditions"),(0,x.e)(this.option.conditions),this.disabled,this.hass,this.narrow,this._conditionChanged,this.optionsInSidebar):V.s6,this.option?"":"top",this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.sequence"),this.option?(0,x.e)(this.option.sequence)||[]:this.defaultActions&&(0,x.e)(this.defaultActions)||[],this.disabled,this.hass,this.narrow,this._actionChanged,this.optionsInSidebar)}},{key:"render",value:function(){return this.option||this.defaultActions?(0,V.qy)(u||(u=(0,f.A)([' <ha-card outlined class="','"> '," </ha-card> "," "])),this._selected?"selected":"",this.optionsInSidebar?(0,V.qy)(p||(p=(0,f.A)(['<ha-automation-row left-chevron .collapsed="','" .selected="','" .sortSelected="','" @click="','" @toggle-collapsed="','" @delete-row="','">',"</ha-automation-row>"])),this._collapsed,this._selected,this.sortSelected,this._toggleSidebar,this._toggleCollapse,this._removeOption,this._renderRow()):(0,V.qy)(v||(v=(0,f.A)([' <ha-expansion-panel left-chevron @expanded-changed="','" id="option"> '," </ha-expansion-panel> "])),this._expandedChanged,this._renderRow()),this.optionsInSidebar?this._renderContent():V.s6):V.s6}},{key:"_moveUp",value:function(){(0,L.r)(this,"move-up")}},{key:"_moveDown",value:function(){(0,L.r)(this,"move-down")}},{key:"_handleDropdownSelect",value:function(t){var e,i=null===(e=t.detail)||void 0===e||null===(e=e.item)||void 0===e?void 0:e.value;if(i)switch(i){case"rename":this._renameOption();break;case"delete":this._removeOption();break;case"duplicate":this._duplicateOption();break;case"move_up":this._moveUp();break;case"move_down":this._moveDown()}}},{key:"_conditionChanged",value:function(t){t.stopPropagation();var e=t.detail.value,i=Object.assign(Object.assign({},this.option),{},{conditions:e});(0,L.r)(this,"value-changed",{value:i})}},{key:"_actionChanged",value:function(t){if(!this.defaultActions){t.stopPropagation();var e=t.detail.value,i=Object.assign(Object.assign({},this.option),{},{sequence:e});(0,L.r)(this,"value-changed",{value:i})}}},{key:"_toggleSidebar",value:function(t){null==t||t.stopPropagation(),this._selected?(0,L.r)(this,"request-close-sidebar"):this.openSidebar()}},{key:"openSidebar",value:function(){var t=this;(0,L.r)(this,"open-sidebar",{close:function(e){t._selected=!1,(0,L.r)(t,"close-sidebar"),e&&t.focus()},rename:function(){t._renameOption()},delete:this._removeOption,duplicate:this._duplicateOption,defaultOption:!!this.defaultActions}),this._selected=!0,this._collapsed=!1,this.narrow&&window.setTimeout(function(){t.scrollIntoView({block:"start",behavior:"smooth"})},180)}},{key:"expand",value:function(){var t=this;this.optionsInSidebar?this._collapsed=!1:this.updateComplete.then(function(){t.shadowRoot.querySelector("ha-expansion-panel").expanded=!0})}},{key:"collapse",value:function(){this._collapsed=!0}},{key:"expandAll",value:function(){var t,e;this.expand(),null===(t=this._conditionElement)||void 0===t||t.expandAll(),null===(e=this._actionElement)||void 0===e||e.expandAll()}},{key:"collapseAll",value:function(){var t,e;this.collapse(),null===(t=this._conditionElement)||void 0===t||t.collapseAll(),null===(e=this._actionElement)||void 0===e||e.collapseAll()}},{key:"_toggleCollapse",value:function(){this._collapsed=!this._collapsed}},{key:"focus",value:function(){var t;null===(t=this._automationRowElement)||void 0===t||t.focus()}}],[{key:"styles",get:function(){return[F.bH,F.yj,F.Lt,F.aM,(0,V.AH)(g||(g=(0,f.A)(["h4{color:var(--ha-color-text-secondary)}h4{margin-bottom:8px}h4.top{margin-top:0}"])))]}}])}(V.WF);(0,k.Cg)([(0,H.MZ)({attribute:!1})],T.prototype,"hass",void 0),(0,k.Cg)([(0,H.MZ)({attribute:!1})],T.prototype,"option",void 0),(0,k.Cg)([(0,H.MZ)({attribute:!1})],T.prototype,"defaultActions",void 0),(0,k.Cg)([(0,H.MZ)({type:Boolean})],T.prototype,"narrow",void 0),(0,k.Cg)([(0,H.MZ)({type:Boolean})],T.prototype,"disabled",void 0),(0,k.Cg)([(0,H.MZ)({type:Number})],T.prototype,"index",void 0),(0,k.Cg)([(0,H.MZ)({type:Boolean})],T.prototype,"first",void 0),(0,k.Cg)([(0,H.MZ)({type:Boolean})],T.prototype,"last",void 0),(0,k.Cg)([(0,H.MZ)({type:Boolean,attribute:"sidebar"})],T.prototype,"optionsInSidebar",void 0),(0,k.Cg)([(0,H.MZ)({type:Boolean,attribute:"sort-selected"})],T.prototype,"sortSelected",void 0),(0,k.Cg)([(0,H.wk)()],T.prototype,"_expanded",void 0),(0,k.Cg)([(0,H.wk)()],T.prototype,"_selected",void 0),(0,k.Cg)([(0,H.wk)()],T.prototype,"_collapsed",void 0),(0,k.Cg)([(0,H.wk)(),(0,M.Fg)({context:I.ih,subscribe:!0})],T.prototype,"_entityReg",void 0),(0,k.Cg)([(0,H.P)("ha-automation-condition")],T.prototype,"_conditionElement",void 0),(0,k.Cg)([(0,H.P)("ha-automation-action")],T.prototype,"_actionElement",void 0),(0,k.Cg)([(0,H.P)("ha-automation-row")],T.prototype,"_automationRowElement",void 0),T=(0,k.Cg)([(0,H.EM)("ha-automation-option-row")],T),e()}catch(U){e(U)}})},83307:function(t,e,i){i.a(t,async function(t,e){try{var o,a,n,s,r,c=i(61397),l=i(94741),d=i(50264),h=i(72153),u=i(44734),p=i(43080),v=i(75864),g=i(69683),f=i(6454),y=i(25460),_=(i(28706),i(2008),i(23792),i(34782),i(54554),i(71658),i(18111),i(22489),i(7588),i(26099),i(38781),i(47764),i(73772),i(23500),i(62953),i(62826)),m=i(34271),b=i(96196),A=i(77845),w=i(4937),C=i(93905),k=i(1087),M=i(57237),V=i(12587),H=i(18350),S=(i(85938),i(67094),i(57116)),x=i(6650),L=t([H,x]);[H,x]=L.then?(await L)():L;var Z="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",E=function(t){function e(){var t;(0,u.A)(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=(0,g.A)(this,e,[].concat(o))).narrow=!1,t.disabled=!1,t.optionsInSidebar=!1,t.showDefaultActions=!1,t._focusLastOptionOnChange=!1,t._optionsKeys=new WeakMap,t._addOption=function(){var e=t.options.concat({conditions:[],sequence:[]});t._focusLastOptionOnChange=!0,(0,k.r)((0,v.A)(t),"value-changed",{value:e})},t._showDefaultActions=function(){(0,k.r)((0,v.A)(t),"show-default-actions")},t}return(0,f.A)(e,t),(0,p.A)(e,[{key:"render",value:function(){var t=this;return(0,b.qy)(o||(o=(0,h.A)([' <ha-sortable handle-selector=".handle" draggable-selector="ha-automation-option-row" .disabled="','" group="options" invert-swap @item-moved="','" @item-added="','" @item-removed="','"> <div class="rows ','"> ',' <div class="buttons"> <ha-button appearance="filled" size="small" .disabled="','" @click="','"> <ha-svg-icon .path="','" slot="start"></ha-svg-icon> '," </ha-button> "," </div> </div> </ha-sortable> "])),this.disabled,this._optionMoved,this._optionAdded,this._optionRemoved,this.optionsInSidebar?"":"no-sidebar",(0,w.u)(this.options,function(e){return t._getKey(e)},function(e,i){return(0,b.qy)(a||(a=(0,h.A)([' <ha-automation-option-row .sortableData="','" .index="','" .first="','" .last="','" .option="','" .narrow="','" .disabled="','" @duplicate="','" @move-down="','" @move-up="','" @value-changed="','" .hass="','" .optionsInSidebar="','" .sortSelected="','" @stop-sort-selection="','"> '," </ha-automation-option-row> "])),e,i,0===i,i===t.options.length-1,e,t.narrow,t.disabled,t._duplicateOption,t._moveDown,t._moveUp,t._optionChanged,t.hass,t.optionsInSidebar,t._rowSortSelected===i,t._stopSortSelection,t.disabled?b.s6:(0,b.qy)(n||(n=(0,h.A)([' <div tabindex="0" class="handle ','" slot="icons" @keydown="','" @click="','" .index="','"> <ha-svg-icon .path="','"></ha-svg-icon> </div> '])),t._rowSortSelected===i?"active":"",t._handleDragKeydown,M.d,i,"M21 11H3V9H21V11M21 13H3V15H21V13Z"))}),this.disabled,this._addOption,Z,this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.add_option"),this.showDefaultActions?b.s6:(0,b.qy)(s||(s=(0,h.A)(['<ha-button appearance="plain" size="small" .disabled="','" @click="','"> <ha-svg-icon .path="','" slot="start"></ha-svg-icon> '," </ha-button>"])),this.disabled,this._showDefaultActions,Z,this.hass.localize("ui.panel.config.automation.editor.actions.type.choose.add_default")))}},{key:"updated",value:function(t){var i=this;if((0,y.A)(e,"updated",this,3)([t]),t.has("options")&&(this._focusLastOptionOnChange||void 0!==this._focusOptionIndexOnChange)){var o=this._focusLastOptionOnChange?"new":"moved",a=this.shadowRoot.querySelector("ha-automation-option-row:".concat("new"===o?"last-of-type":"nth-of-type(".concat(this._focusOptionIndexOnChange+1,")")));this._focusLastOptionOnChange=!1,this._focusOptionIndexOnChange=void 0,a.updateComplete.then(function(){i.narrow&&a.scrollIntoView({block:"start",behavior:"smooth"}),"new"===o&&a.expand(),i.optionsInSidebar?a.openSidebar():a.focus()})}}},{key:"expandAll",value:function(){var t;null===(t=this._optionRowElements)||void 0===t||t.forEach(function(t){return t.expandAll()})}},{key:"collapseAll",value:function(){var t;null===(t=this._optionRowElements)||void 0===t||t.forEach(function(t){return t.collapseAll()})}},{key:"_getKey",value:function(t){return this._optionsKeys.has(t)||this._optionsKeys.set(t,Math.random().toString()),this._optionsKeys.get(t)}},{key:"_moveUp",value:function(t){t.stopPropagation();var e=t.target.index;if(!t.target.first){var i=e-1;this._move(e,i),this._rowSortSelected===e&&(this._rowSortSelected=i),t.target.focus()}}},{key:"_moveDown",value:function(t){t.stopPropagation();var e=t.target.index;if(!t.target.last){var i=e+1;this._move(e,i),this._rowSortSelected===e&&(this._rowSortSelected=i),t.target.focus()}}},{key:"_move",value:function(t,e){var i=this.options.concat(),o=i.splice(t,1)[0];i.splice(e,0,o),this.options=i,(0,k.r)(this,"value-changed",{value:i})}},{key:"_optionMoved",value:function(t){t.stopPropagation();var e=t.detail,i=e.oldIndex,o=e.newIndex;this._move(i,o)}},{key:"_optionAdded",value:(r=(0,d.A)((0,c.A)().m(function t(e){var i,o,a,n,s,r;return(0,c.A)().w(function(t){for(;;)switch(t.n){case 0:return e.stopPropagation(),i=e.detail,o=i.index,a=i.data,n=e.detail.item,s=n.selected,r=[].concat((0,l.A)(this.options.slice(0,o)),[a],(0,l.A)(this.options.slice(o))),this.options=r,s&&(this._focusOptionIndexOnChange=1===r.length?0:o),t.n=1,(0,V.E)();case 1:(0,k.r)(this,"value-changed",{value:this.options});case 2:return t.a(2)}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"_optionRemoved",value:(i=(0,d.A)((0,c.A)().m(function t(e){var i,o,a;return(0,c.A)().w(function(t){for(;;)switch(t.n){case 0:return e.stopPropagation(),i=e.detail.index,o=this.options[i],this.options=this.options.filter(function(t){return t!==o}),t.n=1,(0,V.E)();case 1:a=this.options.filter(function(t){return t!==o}),(0,k.r)(this,"value-changed",{value:a});case 2:return t.a(2)}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"_optionChanged",value:function(t){t.stopPropagation();var e=(0,l.A)(this.options),i=t.detail.value,o=t.target.index;if(null===i)e.splice(o,1);else{var a=this._getKey(e[o]);this._optionsKeys.set(i,a),e[o]=i}(0,k.r)(this,"value-changed",{value:e})}},{key:"_duplicateOption",value:function(t){t.stopPropagation();var e=t.target.index;(0,k.r)(this,"value-changed",{value:this.options.toSpliced(e+1,0,(0,m.A)(this.options[e]))})}},{key:"_handleDragKeydown",value:function(t){"Enter"!==t.key&&" "!==t.key||(t.stopPropagation(),this._rowSortSelected=void 0===this._rowSortSelected?t.target.index:void 0)}},{key:"_stopSortSelection",value:function(){this._rowSortSelected=void 0}}]);var i,r}(b.WF);E.styles=[S.Ju,(0,b.AH)(r||(r=(0,h.A)([":host([root]) .rows{padding-inline-end:8px}"])))],(0,_.Cg)([(0,A.MZ)({attribute:!1})],E.prototype,"hass",void 0),(0,_.Cg)([(0,A.MZ)({type:Boolean})],E.prototype,"narrow",void 0),(0,_.Cg)([(0,A.MZ)({type:Boolean})],E.prototype,"disabled",void 0),(0,_.Cg)([(0,A.MZ)({attribute:!1})],E.prototype,"options",void 0),(0,_.Cg)([(0,A.MZ)({type:Boolean,attribute:"sidebar"})],E.prototype,"optionsInSidebar",void 0),(0,_.Cg)([(0,A.MZ)({type:Boolean,attribute:"show-default"})],E.prototype,"showDefaultActions",void 0),(0,_.Cg)([(0,A.wk)()],E.prototype,"_rowSortSelected",void 0),(0,_.Cg)([(0,A.wk)(),(0,C.I)({key:"automationClipboard",state:!0,subscribe:!0,storage:"sessionStorage"})],E.prototype,"_clipboard",void 0),(0,_.Cg)([(0,A.YG)("ha-automation-option-row")],E.prototype,"_optionRowElements",void 0),E=(0,_.Cg)([(0,A.EM)("ha-automation-option")],E),e()}catch(O){e(O)}})}}]);
//# sourceMappingURL=4783.3c97178ec9c18d2d.js.map